<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CBMC: /home/runner/work/cbmc/cbmc/jbmc/src/java_bytecode/java_bytecode_concurrency_instrumentation.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CBMC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('java__bytecode__concurrency__instrumentation_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">java_bytecode_concurrency_instrumentation.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="java__bytecode__concurrency__instrumentation_8h_source.html">java_bytecode_concurrency_instrumentation.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="arith__tools_8h_source.html">util/arith_tools.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="cprover__prefix_8h_source.html">util/cprover_prefix.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="expr__iterator_8h_source.html">util/expr_iterator.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="src_2util_2message_8h_source.html">util/message.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="namespace_8h_source.html">util/namespace.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="std__types_8h_source.html">util/std_types.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="symbol__table__base_8h_source.html">util/symbol_table_base.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="expr2java_8h_source.html">expr2java.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="java__types_8h_source.html">java_types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="java__utils_8h_source.html">java_utils.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for java_bytecode_concurrency_instrumentation.cpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="java__bytecode__concurrency__instrumentation_8cpp__incl.svg" width="2616" height="1022"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="java__bytecode__concurrency__instrumentation_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a554d07dafd7b3aecc206cd06dc0d39d4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classsymbolt.html">symbolt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a554d07dafd7b3aecc206cd06dc0d39d4">add_or_get_symbol</a> (<a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;symbol_table, const <a class="el" href="irep_8h.html#a1ad4faefa9ca542d481e74be9cc01c2c">irep_idt</a> &amp;name, const <a class="el" href="irep_8h.html#a1ad4faefa9ca542d481e74be9cc01c2c">irep_idt</a> &amp;base_name, const <a class="el" href="classtypet.html">typet</a> &amp;type, const <a class="el" href="classexprt.html">exprt</a> &amp;value, const bool is_thread_local, const bool is_static_lifetime)</td></tr>
<tr class="memdesc:a554d07dafd7b3aecc206cd06dc0d39d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new symbol to the symbol table if it doesn't exist.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#a554d07dafd7b3aecc206cd06dc0d39d4">More...</a><br /></td></tr>
<tr class="separator:a554d07dafd7b3aecc206cd06dc0d39d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bd4a4d636dd280e369aab8bf916ee4f"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a9bd4a4d636dd280e369aab8bf916ee4f">get_first_label_id</a> (const std::string &amp;id)</td></tr>
<tr class="memdesc:a9bd4a4d636dd280e369aab8bf916ee4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the first label identifier.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#a9bd4a4d636dd280e369aab8bf916ee4f">More...</a><br /></td></tr>
<tr class="separator:a9bd4a4d636dd280e369aab8bf916ee4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadfafb86810e80933b2e2e42aa7e8e50"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#aadfafb86810e80933b2e2e42aa7e8e50">get_second_label_id</a> (const std::string &amp;id)</td></tr>
<tr class="memdesc:aadfafb86810e80933b2e2e42aa7e8e50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the second label identifier.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#aadfafb86810e80933b2e2e42aa7e8e50">More...</a><br /></td></tr>
<tr class="separator:aadfafb86810e80933b2e2e42aa7e8e50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a496feb47412d554ab5c7c72fe5151852"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a496feb47412d554ab5c7c72fe5151852">get_thread_block_identifier</a> (const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;f_code)</td></tr>
<tr class="memdesc:a496feb47412d554ab5c7c72fe5151852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a thread block identifier from a function call to CProver.startThread:(I)V or CProver.endThread:(I)V /param code: function call to CProver.startThread or CProver.endThread /return unique thread block identifier.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#a496feb47412d554ab5c7c72fe5151852">More...</a><br /></td></tr>
<tr class="separator:a496feb47412d554ab5c7c72fe5151852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf51419d7182ce90bf50b315c3c06267"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classcodet.html">codet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#abf51419d7182ce90bf50b315c3c06267">get_monitor_call</a> (const <a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;symbol_table, bool is_enter, const <a class="el" href="classexprt.html">exprt</a> &amp;object)</td></tr>
<tr class="memdesc:abf51419d7182ce90bf50b315c3c06267"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a monitorenter/monitorexit <a class="el" href="classcode__function__callt.html" title="goto_instruction_codet representation of a function call statement.">code_function_callt</a> for the given synchronization object.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#abf51419d7182ce90bf50b315c3c06267">More...</a><br /></td></tr>
<tr class="separator:abf51419d7182ce90bf50b315c3c06267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed64c59b86bf60274a1b86235183314"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a8ed64c59b86bf60274a1b86235183314">monitor_exits</a> (<a class="el" href="classcodet.html">codet</a> &amp;code, const <a class="el" href="classcodet.html">codet</a> &amp;monitorexit)</td></tr>
<tr class="memdesc:a8ed64c59b86bf60274a1b86235183314"><td class="mdescLeft">&#160;</td><td class="mdescRight">Introduces a monitorexit before every return recursively.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#a8ed64c59b86bf60274a1b86235183314">More...</a><br /></td></tr>
<tr class="separator:a8ed64c59b86bf60274a1b86235183314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7bab9b1649d84ed01a196b3aef8361c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#ac7bab9b1649d84ed01a196b3aef8361c">instrument_synchronized_code</a> (<a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;symbol_table, <a class="el" href="classsymbolt.html">symbolt</a> &amp;symbol, const <a class="el" href="classexprt.html">exprt</a> &amp;sync_object)</td></tr>
<tr class="memdesc:ac7bab9b1649d84ed01a196b3aef8361c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms the codet stored in <code>symbol.value</code>.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#ac7bab9b1649d84ed01a196b3aef8361c">More...</a><br /></td></tr>
<tr class="separator:ac7bab9b1649d84ed01a196b3aef8361c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ee4f3d17a2fd71b9cdebf1c4052472"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a46ee4f3d17a2fd71b9cdebf1c4052472">instrument_start_thread</a> (const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;f_code, <a class="el" href="classcodet.html">codet</a> &amp;code, <a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;symbol_table)</td></tr>
<tr class="memdesc:a46ee4f3d17a2fd71b9cdebf1c4052472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms the codet stored in in <code>f_code</code>, which is a call to function CProver.startThread:(I)V into a block of code as described by the documentation of function convert_thread_block.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#a46ee4f3d17a2fd71b9cdebf1c4052472">More...</a><br /></td></tr>
<tr class="separator:a46ee4f3d17a2fd71b9cdebf1c4052472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a9d90adceb8bd3389df16e08b050495"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a8a9d90adceb8bd3389df16e08b050495">instrument_end_thread</a> (const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;f_code, <a class="el" href="classcodet.html">codet</a> &amp;code, const <a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;symbol_table)</td></tr>
<tr class="memdesc:a8a9d90adceb8bd3389df16e08b050495"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms the codet stored in in <code>f_code</code>, which is a call to function CProver.endThread:(I)V into a block of code as described by the documentation of the function convert_thread_block.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#a8a9d90adceb8bd3389df16e08b050495">More...</a><br /></td></tr>
<tr class="separator:a8a9d90adceb8bd3389df16e08b050495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ea499c65f36591867bdc5e5fd26fac"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#ad9ea499c65f36591867bdc5e5fd26fac">instrument_get_current_thread_id</a> (const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;f_code, <a class="el" href="classcodet.html">codet</a> &amp;code, <a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;symbol_table)</td></tr>
<tr class="memdesc:ad9ea499c65f36591867bdc5e5fd26fac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms the codet stored in in <code>f_code</code>, which is a call to function CProver.getCurrentThreadId:()I into a <a class="el" href="classcode__assignt.html" title="A goto_instruction_codet representing an assignment in the program.">code_assignt</a> as described by the documentation of the function convert_thread_block.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#ad9ea499c65f36591867bdc5e5fd26fac">More...</a><br /></td></tr>
<tr class="separator:ad9ea499c65f36591867bdc5e5fd26fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a440b9137c534b5e3c769017042e38e93"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a440b9137c534b5e3c769017042e38e93">instrument_get_monitor_count</a> (const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;f_code, <a class="el" href="classcodet.html">codet</a> &amp;code, <a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;symbol_table)</td></tr>
<tr class="memdesc:a440b9137c534b5e3c769017042e38e93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms the codet stored in in <code>f_code</code>, which is a call to function CProver.getMonitorCount:(Ljava/lang/Object;)I into a <a class="el" href="classcode__assignt.html" title="A goto_instruction_codet representing an assignment in the program.">code_assignt</a> that assigns the cproverMonitorCount field of the java.lang.Object argument passed to getMonitorCount.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#a440b9137c534b5e3c769017042e38e93">More...</a><br /></td></tr>
<tr class="separator:a440b9137c534b5e3c769017042e38e93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4f60986928f20f19446d87dd97f2e64"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#af4f60986928f20f19446d87dd97f2e64">convert_threadblock</a> (<a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;symbol_table)</td></tr>
<tr class="memdesc:af4f60986928f20f19446d87dd97f2e64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate through the symbol table to find and appropriately instrument thread-blocks.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#af4f60986928f20f19446d87dd97f2e64">More...</a><br /></td></tr>
<tr class="separator:af4f60986928f20f19446d87dd97f2e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a940cd8b840ca00dd8c11d5bf0819a317"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a940cd8b840ca00dd8c11d5bf0819a317">convert_synchronized_methods</a> (<a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;symbol_table, <a class="el" href="classmessage__handlert.html">message_handlert</a> &amp;message_handler)</td></tr>
<tr class="memdesc:a940cd8b840ca00dd8c11d5bf0819a317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate through the symbol table to find and instrument synchronized methods.  <a href="java__bytecode__concurrency__instrumentation_8cpp.html#a940cd8b840ca00dd8c11d5bf0819a317">More...</a><br /></td></tr>
<tr class="separator:a940cd8b840ca00dd8c11d5bf0819a317"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a06589379dcf1d842c94edd06cba244ff"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a06589379dcf1d842c94edd06cba244ff">next_thread_id</a> = &quot;__CPROVER_&quot; &quot;_next_thread_id&quot;</td></tr>
<tr class="separator:a06589379dcf1d842c94edd06cba244ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36d8966dc1bf81e0ff3dedd3cbf30d39"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html#a36d8966dc1bf81e0ff3dedd3cbf30d39">thread_id</a> = &quot;__CPROVER_&quot; &quot;_thread_id&quot;</td></tr>
<tr class="separator:a36d8966dc1bf81e0ff3dedd3cbf30d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a554d07dafd7b3aecc206cd06dc0d39d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a554d07dafd7b3aecc206cd06dc0d39d4">&#9670;&nbsp;</a></span>add_or_get_symbol()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classsymbolt.html">symbolt</a> add_or_get_symbol </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="irep_8h.html#a1ad4faefa9ca542d481e74be9cc01c2c">irep_idt</a> &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="irep_8h.html#a1ad4faefa9ca542d481e74be9cc01c2c">irep_idt</a> &amp;&#160;</td>
          <td class="paramname"><em>base_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtypet.html">typet</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classexprt.html">exprt</a> &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>is_thread_local</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>is_static_lifetime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a new symbol to the symbol table if it doesn't exist. </p>
<p>Otherwise, returns the existing one. /param name: name of the symbol to be generated /param base_name: base name of the symbol to be generated /param type: type of the symbol to be generated /param value: initial value of the symbol to be generated /param is_thread_local: if true this symbol will be set as thread local /param is_static_lifetime: if true this symbol will be set as static /return returns new or existing symbol. </p>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00036">36</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="a940cd8b840ca00dd8c11d5bf0819a317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a940cd8b840ca00dd8c11d5bf0819a317">&#9670;&nbsp;</a></span>convert_synchronized_methods()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void convert_synchronized_methods </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmessage__handlert.html">message_handlert</a> &amp;&#160;</td>
          <td class="paramname"><em>message_handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate through the symbol table to find and instrument synchronized methods. </p>
<p>Synchronized methods make it impossible for two invocations of the same method on the same object to interleave. In-order to replicate these semantics a call to "java::java.lang.Object.monitorenter:(Ljava/lang/Object;)V" and "java::java.lang.Object.monitorexit:(Ljava/lang/Object;)V" is instrumented at the start and end of the method. Note, that the former is instrumented at every statement where the execution can exit the method in question. Specifically, out of order return statements and exceptions. The latter is dealt with by instrumenting a try catch block.</p>
<p>Note: Static synchronized methods are not supported yet as the synchronization semantics for static methods is different (locking on the class instead the of the object). Upon encountering a static synchronized method the current implementation will ignore the synchronized flag. (showing a warning in the process). This may result in superfluous interleavings.</p>
<p>Note': This method requires the availability of "java::java.lang.Object.monitorenter:(Ljava/lang/Object;)V" and "java::java.lang.Object.monitorexit:(Ljava/lang/Object;)V". (java-library-models). If they are not available <a class="el" href="classcode__skipt.html" title="A codet representing a skip statement.">code_skipt</a> will inserted instead of calls to the aforementioned methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">symbol_table</td><td>a symbol table </td></tr>
    <tr><td class="paramname">message_handler</td><td>status output </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00603">603</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="af4f60986928f20f19446d87dd97f2e64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4f60986928f20f19446d87dd97f2e64">&#9670;&nbsp;</a></span>convert_threadblock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void convert_threadblock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol_table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate through the symbol table to find and appropriately instrument thread-blocks. </p>
<p>A thread block is a sequence of codet's surrounded with calls to CProver.startThread:(I)V and CProver.endThread:(I)V. A thread block corresponds to the body of the thread to be created. The only parameter accepted by these functions is an integer used to differentiate between different thread blocks. Function startThread() is transformed into a codet ID_start_thread, which carries a target label in the field 'destination'. Similarly endThread() is transformed into a codet ID_end_thread, which marks the end of the thread body. Both codet's will later be transformed (in <a class="el" href="classgoto__convertt.html">goto_convertt</a>) into the goto instructions START_THREAD and END_THREAD.</p>
<p>Additionally the variable __CPROVER__thread_id (thread local) will store the ID of the new thread. The new id is obtained by incrementing a global variable __CPROVER__next_thread_id.</p>
<p>The ID of the thread is made accessible to the Java program by having calls to the function 'CProver.getCurrentThreadId()I' replaced by the variable __CPROVER__thread_id. We also perform this substitution in here. The substitution that we perform here assumes that calls to getCurrentThreadId() are ONLY made in the RHS of an expression.</p>
<p>Example:</p>
<div class="fragment"><div class="line">CProver.startThread(333)</div>
<div class="line">... <span class="comment">// thread body</span></div>
<div class="line">CProver.endThread(333)</div>
</div><!-- fragment --><p>Is transformed into:</p>
<div class="fragment"><div class="line"><a class="code" href="classcodet.html">codet</a>(<span class="keywordtype">id</span>=ID_start_thread, destination=__CPROVER_THREAD_ENTRY_333)</div>
<div class="line"><a class="code" href="classcodet.html">codet</a>(<span class="keywordtype">id</span>=ID_goto, destination=__CPROVER_THREAD_EXIT_333)</div>
<div class="line"><a class="code" href="classcodet.html">codet</a>(<span class="keywordtype">id</span>=ID_label, label=__CPROVER_THREAD_ENTRY_333)</div>
<div class="line"><a class="code" href="classcodet.html">codet</a>(<span class="keywordtype">id</span>=ID_atomic_begin)</div>
<div class="line">__CPROVER__next_thread_id += 1;</div>
<div class="line">__CPROVER__thread_id = __CPROVER__next_thread_id;</div>
<div class="line">... <span class="comment">// thread body</span></div>
<div class="line"><a class="code" href="classcodet.html">codet</a>(<span class="keywordtype">id</span>=ID_end_thread)</div>
<div class="line"><a class="code" href="classcodet.html">codet</a>(<span class="keywordtype">id</span>=ID_label, label=__CPROVER_THREAD_EXIT_333)</div>
<div class="ttc" id="aclasscodet_html"><div class="ttname"><a href="classcodet.html">codet</a></div><div class="ttdoc">Data structure for representing an arbitrary statement in a program.</div><div class="ttdef"><b>Definition:</b> <a href="std__code__base_8h_source.html#l00028">std_code_base.h:29</a></div></div>
</div><!-- fragment --><p>Observe that the semantics of ID_start_thread roughly corresponds to: fork the current thread, continue the execution of the current thread in the next line, and continue the execution of the new thread at the destination field of the codet (__CPROVER_THREAD_ENTRY_333).</p>
<p>Note: the current version assumes that a call to startThread(n), where n is an immediate integer, is in the same scope (nesting block) as a call to endThread(n). Some assertion will fail during symex if this is not the case.</p>
<p>Note': the ID of the thread is assigned after the thread is created, this creates bogus interleavings. Currently, it's not possible to assign the thread ID before the creation of the thread, due to a bug in symex. See <a href="https://github.com/diffblue/cbmc/issues/1630/for">https://github.com/diffblue/cbmc/issues/1630/for</a> more details.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">symbol_table</td><td>a symbol table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00485">485</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="a9bd4a4d636dd280e369aab8bf916ee4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bd4a4d636dd280e369aab8bf916ee4f">&#9670;&nbsp;</a></span>get_first_label_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const std::string get_first_label_id </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the first label identifier. </p>
<p>This is used to mark the start of a thread block. /param id: unique thread block identifier /return fully qualified label identifier </p>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00066">66</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="abf51419d7182ce90bf50b315c3c06267"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf51419d7182ce90bf50b315c3c06267">&#9670;&nbsp;</a></span>get_monitor_call()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classcodet.html">codet</a> get_monitor_call </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_enter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classexprt.html">exprt</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a monitorenter/monitorexit <a class="el" href="classcode__function__callt.html" title="goto_instruction_codet representation of a function call statement.">code_function_callt</a> for the given synchronization object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">symbol_table</td><td>a symbol table </td></tr>
    <tr><td class="paramname">is_enter</td><td>indicates whether we are creating a monitorenter or monitorexit. </td></tr>
    <tr><td class="paramname">object</td><td>expression representing a 'java.Lang.Object'. This object is used to achieve object-level locking by calling monitoroenter/monitorexit. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00101">101</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="aadfafb86810e80933b2e2e42aa7e8e50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadfafb86810e80933b2e2e42aa7e8e50">&#9670;&nbsp;</a></span>get_second_label_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const std::string get_second_label_id </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the second label identifier. </p>
<p>This is used to mark the end of a thread block. /param id: unique thread block identifier /return fully qualified label identifier </p>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00075">75</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="a496feb47412d554ab5c7c72fe5151852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a496feb47412d554ab5c7c72fe5151852">&#9670;&nbsp;</a></span>get_thread_block_identifier()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const std::string get_thread_block_identifier </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;&#160;</td>
          <td class="paramname"><em>f_code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves a thread block identifier from a function call to CProver.startThread:(I)V or CProver.endThread:(I)V /param code: function call to CProver.startThread or CProver.endThread /return unique thread block identifier. </p>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00084">84</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="a8a9d90adceb8bd3389df16e08b050495"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a9d90adceb8bd3389df16e08b050495">&#9670;&nbsp;</a></span>instrument_end_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void instrument_end_thread </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;&#160;</td>
          <td class="paramname"><em>f_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcodet.html">codet</a> &amp;&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol_table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transforms the codet stored in in <code>f_code</code>, which is a call to function CProver.endThread:(I)V into a block of code as described by the documentation of the function convert_thread_block. </p>
<p>The resulting <a class="el" href="classcode__blockt.html" title="A codet representing sequential composition of program statements.">code_blockt</a> is stored in the output parameter <code>code</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">f_code</td><td>function call to CProver.endThread:(I)V </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">code</td><td>resulting transformation </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">symbol_table</td><td>a symbol table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00339">339</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="ad9ea499c65f36591867bdc5e5fd26fac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9ea499c65f36591867bdc5e5fd26fac">&#9670;&nbsp;</a></span>instrument_get_current_thread_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void instrument_get_current_thread_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;&#160;</td>
          <td class="paramname"><em>f_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcodet.html">codet</a> &amp;&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol_table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transforms the codet stored in in <code>f_code</code>, which is a call to function CProver.getCurrentThreadId:()I into a <a class="el" href="classcode__assignt.html" title="A goto_instruction_codet representing an assignment in the program.">code_assignt</a> as described by the documentation of the function convert_thread_block. </p>
<p>The resulting <a class="el" href="classcode__blockt.html" title="A codet representing sequential composition of program statements.">code_blockt</a> is stored in the output parameter <code>code</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">f_code</td><td>function call to CProver.getCurrentThreadId:()I </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">code</td><td>resulting transformation </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">symbol_table</td><td>a symbol table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00373">373</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="a440b9137c534b5e3c769017042e38e93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a440b9137c534b5e3c769017042e38e93">&#9670;&nbsp;</a></span>instrument_get_monitor_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void instrument_get_monitor_count </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;&#160;</td>
          <td class="paramname"><em>f_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcodet.html">codet</a> &amp;&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol_table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transforms the codet stored in in <code>f_code</code>, which is a call to function CProver.getMonitorCount:(Ljava/lang/Object;)I into a <a class="el" href="classcode__assignt.html" title="A goto_instruction_codet representing an assignment in the program.">code_assignt</a> that assigns the cproverMonitorCount field of the java.lang.Object argument passed to getMonitorCount. </p>
<p>The resulting codet is stored in the output parameter <code>code</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">f_code</td><td>call to CProver.getMonitorCount:(Ljava/lang/Object;)I </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">code</td><td>resulting transformation </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">symbol_table</td><td>a symbol table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00404">404</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="a46ee4f3d17a2fd71b9cdebf1c4052472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46ee4f3d17a2fd71b9cdebf1c4052472">&#9670;&nbsp;</a></span>instrument_start_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void instrument_start_thread </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcode__function__callt.html">code_function_callt</a> &amp;&#160;</td>
          <td class="paramname"><em>f_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcodet.html">codet</a> &amp;&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol_table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transforms the codet stored in in <code>f_code</code>, which is a call to function CProver.startThread:(I)V into a block of code as described by the documentation of function convert_thread_block. </p>
<p>The resulting <a class="el" href="classcode__blockt.html" title="A codet representing sequential composition of program statements.">code_blockt</a> is stored in the output parameter <code>code</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">f_code</td><td>function call to CProver.startThread:(I)V </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">code</td><td>resulting transformation </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">symbol_table</td><td>a symbol table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00269">269</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="ac7bab9b1649d84ed01a196b3aef8361c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7bab9b1649d84ed01a196b3aef8361c">&#9670;&nbsp;</a></span>instrument_synchronized_code()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void instrument_synchronized_code </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsymbol__table__baset.html">symbol_table_baset</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsymbolt.html">symbolt</a> &amp;&#160;</td>
          <td class="paramname"><em>symbol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classexprt.html">exprt</a> &amp;&#160;</td>
          <td class="paramname"><em>sync_object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transforms the codet stored in <code>symbol.value</code>. </p>
<p>The <code>symbol</code> is expected to be a Java synchronized method. Java synchronized methods do not have explicit calls to the instructions monitorenter and monitorexit, the JVM interprets the synchronized flag in a method and uses monitor of the object to implement locking and unlocking. Therefore JBMC has to emulate this same behavior. We insert a call to our model of monitorenter at the beginning of the method and calls to our model of monitorexit at each return instruction. We wrap the entire body of the method with an exception handler that will call our model of monitorexit if the method returns exceptionally.</p>
<p>Example:</p>
<div class="fragment"><div class="line"><span class="keyword">synchronized</span> <span class="keywordtype">int</span> amethod(<span class="keywordtype">int</span> p)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> x = 0;</div>
<div class="line">  <span class="keywordflow">if</span>(p == 0)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  x = p / 10</div>
<div class="line">  <span class="keywordflow">return</span> x</div>
<div class="line">}</div>
</div><!-- fragment --><p>Is transformed into the codet equivalent of:</p>
<div class="fragment"><div class="line"><span class="keyword">synchronized</span> <span class="keywordtype">int</span> amethod(<span class="keywordtype">int</span> p)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">try</span></div>
<div class="line">  {</div>
<div class="line">    java::java.lang.Object.monitorenter(<span class="keyword">this</span>);</div>
<div class="line">    <span class="keywordtype">int</span> x = 0;</div>
<div class="line">    <span class="keywordflow">if</span>(p == 0)</div>
<div class="line">    {</div>
<div class="line">      java::java.lang.Object.monitorexit(<span class="keyword">this</span>);</div>
<div class="line">      <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    java::java.lang.Object.monitorexit(<span class="keyword">this</span>);</div>
<div class="line">    <span class="keywordflow">return</span> x</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">catch</span>(java::java.lang.Throwable e)</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// catch every exception, including errors!</span></div>
<div class="line">    java::java.lang.Object.monitorexit(<span class="keyword">this</span>);</div>
<div class="line">    <span class="keywordflow">throw</span> e;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">symbol_table</td><td>a symbol_table </td></tr>
    <tr><td class="paramname">symbol</td><td>writeable symbol hosting code to synchronize </td></tr>
    <tr><td class="paramname">sync_object</td><td>object to use as a lock </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00206">206</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="a8ed64c59b86bf60274a1b86235183314"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed64c59b86bf60274a1b86235183314">&#9670;&nbsp;</a></span>monitor_exits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void monitor_exits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcodet.html">codet</a> &amp;&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcodet.html">codet</a> &amp;&#160;</td>
          <td class="paramname"><em>monitorexit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Introduces a monitorexit before every return recursively. </p>
<p>Note: this breaks sharing on <code>code</code> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">code</td><td>current element to modify </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">monitorexit</td><td>codet to insert before the return </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00133">133</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a06589379dcf1d842c94edd06cba244ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06589379dcf1d842c94edd06cba244ff">&#9670;&nbsp;</a></span>next_thread_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string next_thread_id = &quot;__CPROVER_&quot; &quot;_next_thread_id&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00024">24</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
<a id="a36d8966dc1bf81e0ff3dedd3cbf30d39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36d8966dc1bf81e0ff3dedd3cbf30d39">&#9670;&nbsp;</a></span>thread_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string thread_id = &quot;__CPROVER_&quot; &quot;_thread_id&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html#l00025">25</a> of file <a class="el" href="java__bytecode__concurrency__instrumentation_8cpp_source.html">java_bytecode_concurrency_instrumentation.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_a263634046f766d6a2cc27bb1bac298e.html">jbmc</a></li><li class="navelem"><a class="el" href="dir_7d9c2272cea08e738f9482db6f677351.html">src</a></li><li class="navelem"><a class="el" href="dir_1a9aed0dd48ec371a7d28ba0a5a70e7e.html">java_bytecode</a></li><li class="navelem"><a class="el" href="java__bytecode__concurrency__instrumentation_8cpp.html">java_bytecode_concurrency_instrumentation.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
