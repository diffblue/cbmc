<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CBMC: Goto Program Transformations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CBMC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('goto-program-transformations.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Goto Program Transformations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="required-transforms"></a>
Core Transformation Passes</h1>
<p>This section lists the transformation passes that must have been applied for the goto model to be in symex ready goto format.</p>
<p>Note that the passes are listed below in the order they are currently called in CBMC. While all dependencies on the ordering are not fully documented, the following order should be used.</p>
<h2><a class="anchor" id="assembly-transform"></a>
Removal/Lowering of Assembly</h2>
<p>This pass goes through the goto model and removes or lowers instances of assembly intructions. Assembly instructions are stored in instances of the <code>other</code> instruction.</p>
<p>The implementation of this pass is called via the <a class="el" href="remove__asm_8h.html#a91a05c44e29f32fa11500ced8090a9e1">remove_asm(goto_modelt &amp;, message_handlert &amp;)</a> function. For full documentation of this pass see <a class="el" href="remove__asm_8h.html">remove_asm.h</a></p>
<p><em>This pass has no predecessor.</em></p>
<h2><a class="anchor" id="linking-transform"></a>
Linking of Standard Libraries</h2>
<p>This pass links the function definitions from the Cprover standard library models to the current goto model.</p>
<p>The implementation of this pass is called via the <a class="el" href="link__to__library_8h.html#a18394d5f64369873236b31a9723f917d">link_to_library function.</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#assembly-transform">Removal/Lowering of Assembly</a> .</em></p>
<h2><a class="anchor" id="function-pointer-transform"></a>
Removal/Lowering of Function Pointers</h2>
<p>This pass finds all the instructions which are function calls to the value of a function pointer. Each instruction is then replaced with a switch block. The switch block contains a case for each of the potential targets of the function pointer. The targets are found by looking for all functions in the goto program that approximately match the type of the function pointer.</p>
<p>Note that for this pass to work as intended, all potential targets of calls to function pointers must be in the model. Otherwise they will not be added to the relevant switch blocks. This may cause the assertion that the switch blocks' fallthrough is unreachable to be shown to be violated via an invalid counter example.</p>
<p>The implementation of this pass is called via the <a class="el" href="remove__function__pointers_8h.html#adcbbb61dec4ade79261bdbd77f4ebb52">remove_function_pointers</a> function. Detailed documentation of this pass belongs in <a class="el" href="remove__function__pointers_8h.html">remove_function_pointers.h</a></p>
<p><em>Predecessor pass is the <a class="el" href="goto-program-transformations.html#linking-transform">Linking of Standard Libraries</a> or the optional <a class="el" href="goto-program-transformations.html#string-instrument-transform">String Instrumentation</a> if it is being used.</em></p>
<h2><a class="anchor" id="mmio-transform"></a>
Memory Mapped IO Instrumentation</h2>
<p>This pass finds pointer dereferences and adds corresponding calls to the <code>__CPROVER_mm_io_r</code> and <code>__CPROVER_mm_io_w</code> modelling functions if they exist. See the device behaviour section of <code>modeling-mmio.md</code> for details of modeling memory-mapped I/O regions of device interfaces. This pass is always carried out but will only make changes if one of the modelling functions exist.</p>
<p>The implementation of this pass is called via the <a class="el" href="mm__io_8h.html#ab990f28ba87ac487bc55b340e76da51d">mm_io</a> function. Further documentation of this pass can be found in <a class="el" href="mm__io_8h.html">mm_io.h</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#function-pointer-transform">Removal/Lowering of Function Pointers</a> .</em></p>
<h2><a class="anchor" id="precondition-transform"></a>
Instrument/Remove Preconditions</h2>
<p>This pass moves preconditions associated with functions to call sites rather than at the head of the function. Note that functions may have multiple call sites and in this case the instrumentation is copied to these multiple call sites.</p>
<p>The implementation of this is called via <a class="el" href="instrument__preconditions_8h.html#a0afadc4f6524ed30442a0ec8bf3cd59e">instrument_preconditions(goto_modelt &amp;goto_model)</a> . Documentation of this pass belongs in <a class="el" href="instrument__preconditions_8h.html">instrument_preconditions.h</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#mmio-transform">Memory Mapped IO Instrumentation</a>.</em></p>
<h2><a class="anchor" id="returns-transform"></a>
Removal/Lowering of Return Statements</h2>
<p>This pass replaces returns of values with writes and reads to global variables.</p>
<p>The implementation of this is called via <a class="el" href="remove__returns_8h.html#a5a706f6e3750013ae0afe7d15f265f4e">remove_returns(goto_modelt &amp;)</a> . Detailed documentation of this pass can be found in <a class="el" href="remove__returns_8h.html">remove_returns.h</a></p>
<p><em>The predecessor passes is the <a class="el" href="goto-program-transformations.html#precondition-transform">Instrument/Remove Preconditions</a> or the optional <a class="el" href="goto-program-transformations.html#inlining-transform">Partial Inlining</a> if is being used.</em></p>
<h2><a class="anchor" id="vector-transform"></a>
Remove/Lower Vector Typed Expressions</h2>
<p>This pass removes/lowers expressions corresponding to CPU instruction sets such as MMX, SSE and AVX. For more details on how this is done see <a class="el" href="classvector__typet.html" title="The vector type.">vector_typet</a> and <a class="el" href="remove__vector_8cpp.html" title="Remove &#39;vector&#39; data type.">remove_vector.cpp</a>. The implementation of this is called via <a class="el" href="remove__vector_8h.html#ac0932edd1232236734a80df2d92552c0">remove_vector(goto_modelt &amp;goto_model)</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#returns-transform">Removal/Lowering of Return Statements</a>.</em></p>
<h2><a class="anchor" id="complex-transform"></a>
Remove/Lower Complex Typed Expressions</h2>
<p>This pass is for the handling of complex numbers in the mathematical sense of a number consisting of paired real and imaginary parts. These are removed/lowered in this pass. The implementation of this is called via <a class="el" href="remove__complex_8h.html#a49c61641680c86ed44e8be06b088d3ca">remove_complex(goto_modelt &amp;)</a> . Documentation for this pass belongs in <a class="el" href="remove__complex_8h.html">remove_complex.h</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#vector-transform">Remove/Lower Vector Typed Expressions</a>.</em></p>
<h2><a class="anchor" id="unions-transform"></a>
Rewrite Unions</h2>
<p>This pass converts union member access into byte extract and byte update operations.</p>
<p>The implementation of this pass is called via <a class="el" href="rewrite__union_8h.html#a4d05aaffa141a4d133b902c7c8773449">rewrite_union(goto_modelt &amp;)</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#complex-transform">Remove/Lower Complex Typed Expressions</a>.</em></p>
<h2><a class="anchor" id="check-c-transform"></a>
goto_check_c</h2>
<p>This is a pass that can add many checks and instrumentation largely related to the definition of the C language. Note that this transformation pass is mandatory in the current implementation, however it may have no effect depending on the command line options specified.</p>
<p>The implementation of this pass is called via <a class="el" href="goto__check__c_8h.html#a3c94fabb29a6d50ce31016cdb937cf31">goto_check_c(const optionst &amp;, goto_modelt &amp;, message_handlert &amp;)</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#unions-transform">Rewrite Unions</a>.</em></p>
<h2><a class="anchor" id="floats-transform"></a>
Adjust Float Expressions</h2>
<p>This is a transform from general mathematical operations over floating point types into floating point specific operator variations which include a rounding mode.</p>
<p>The implementation of this pass is called via <a class="el" href="adjust__float__expressions_8h.html#ad8cc09ae81a38a4f9e51591094a564e1">adjust_float_expressions(goto_modelt &amp;)</a> . Documentation of this pass can be found in <a class="el" href="adjust__float__expressions_8h.html">adjust_float_expressions.h</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#check-c-transform">goto_check_c</a> or the optional <a class="el" href="goto-program-transformations.html#assertions-transform">Transform Assertions Assumptions</a> if it is being used.</em></p>
<h2><a class="anchor" id="update-transform"></a>
Goto Functions Update</h2>
<p>This transformation updates in memory data goto program fields which may have been invalidated by previous passes. Note that the following are performed by this pass:</p><ul>
<li>Incoming edges</li>
<li>Target numbers</li>
<li>location numbers</li>
<li>loop numbers</li>
</ul>
<p>The implementation of this pass is called via <a class="el" href="classgoto__functionst.html#ab0e44849e3d2a7afe582edb65c726b7e">goto_functionst::update()</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#floats-transform">Adjust Float Expressions</a> or the optional <a class="el" href="goto-program-transformations.html#string-abstraction-transform">String Abstraction</a> if it is being used.</em></p>
<h2><a class="anchor" id="failed-symbols-transform"></a>
Add Failed Symbols</h2>
<p>This pass adds failed symbols to the symbol table. See <code><a class="el" href="add__failed__symbols_8h.html" title="Pointer Dereferencing.">src/pointer-analysis/add_failed_symbols.h</a></code> for details. The implementation of this pass is called via <a class="el" href="add__failed__symbols_8h.html#ab68ffa57618f58dede0d56727c087329">add_failed_symbols(symbol_table_baset &amp;)</a> . The purpose of failed symbols is explained in the documentation of the function <a class="el" href="classgoto__symext.html#ad6751f48d9d16d92b161f74fb7691ec0">goto_symext::dereference(exprt &amp;, statet &amp;, bool)</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#update-transform">Goto Functions Update</a> or the optional <a class="el" href="goto-program-transformations.html#nondet-transform">Add Non-Deterministic Initialisation of Global Scoped Variables</a> if it is being used.</em></p>
<h2><a class="anchor" id="remove-skip-transform"></a>
Remove Skip Instructions</h2>
<p>This transformation removes skip instructions. Note that this transformation is called in many places and may be called as part of other transformations. This instance here is part of the mandatory transformation to reach symex ready goto format. If there is a use case where it is desirable to preserve a "no
operation" instruction, a <code>LOCATION</code> type instruction may be used in place of a <code>SKIP</code> instruction. The <code>LOCATION</code> instruction has the same semantics as the <code>SKIP</code> instruction, but is not removed by the remove skip instructions pass.</p>
<p>The implementation of this pass is called via <a class="el" href="remove__skip_8h.html#aa6b5722f3c7087c03fb62f0465df3590">remove_skip(goto_modelt &amp;)</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#failed-symbols-transform">Add Failed Symbols</a> or the optional <a class="el" href="goto-program-transformations.html#unused-functions-transform">Remove Unused Functions</a> if it is being used.</em></p>
<h2><a class="anchor" id="properties-transform"></a>
Label Properties</h2>
<p>This transformation adds newly generated unique property identifiers to assert instructions. The property identifiers are stored in the location data structure associated with each instruction.</p>
<p>The implementation of this pass is called via <a class="el" href="set__properties_8h.html#a643c7f176fdcddd5f3c1f4d9dbbf95cd">label_properties(goto_modelt &amp;)</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#remove-skip-transform">Remove Skip Instructions</a> or the optional <a class="el" href="goto-program-transformations.html#coverage-transform">Add Coverage Goals</a> if it is being used.</em></p>
<h1><a class="anchor" id="optional-transforms"></a>
Optional Transformation Passes</h1>
<p>The sections lists the optional transformation passes that are optional and will modify a goto model. Note that these are documented here for consistency, but not required for symex ready goto format.</p>
<p>Note for each optional pass there is a listed predeceesor pass. This is the pass currently called before the listed pass in CBMC. While the ordering may not be fully documented, this should be followed.</p>
<h2><a class="anchor" id="string-instrument-transform"></a>
String Instrumentation</h2>
<p>This (optional) pass adds checks on calls to some of the C standard library string functions. It uses the tracking information added by the <a class="el" href="goto-program-transformations.html#string-abstraction-transform">String Abstraction</a> pass. It is switched on by the <code>--string-abstraction</code> command line option.</p>
<p>The implementation of this pass is called via the <a class="el" href="string__instrumentation_8h.html#a64a24742fe3e050a0056534d8a452bbd">string_instrumentation(goto_modelt &amp;goto_model)</a> function. Detailed documentation of this pass belongs in <a class="el" href="string__instrumentation_8h.html">string_instrumentation.h</a></p>
<p><em>The predecessor pass is <a class="el" href="goto-program-transformations.html#linking-transform">Linking of Standard Libraries</a> .</em></p>
<h2><a class="anchor" id="inlining-transform"></a>
Partial Inlining</h2>
<p>This pass does partial inlining when this option is switched on. Partal inlining is inlining of functions either: marked as inline, or smaller than a specified limit. For further detail see the implementation function <a class="el" href="goto__inline_8h.html#ade5846664c18cd5ae7f0cde01915128a">goto_partial_inline(goto_modelt &amp;, message_handlert &amp;, unsigned, bool)</a></p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#precondition-transform">Instrument/Remove Preconditions</a>.</em></p>
<h2><a class="anchor" id="assertions-transform"></a>
Transform Assertions Assumptions</h2>
<p>This pass removes user provided assertions and assumptions when user has opted to do so. Note that this pass removes skip instructions if any other changes are made. The implementation of this pass is called via the <a class="el" href="goto__check_8h.html#ad0e9e553a9ba72b47b32f38fa8669a52">transform_assertions_assumptions(const optionst &amp;, goto_modelt &amp;)</a> function.</p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#check-c-transform">goto_check_c</a>.</em></p>
<h2><a class="anchor" id="string-abstraction-transform"></a>
String Abstraction</h2>
<p>This (optional) transformation pass adds tracking of length of C strings. It is switched on by the <code>--string-abstraction</code> command line option. This changes made by this pass are documented as part of the documentation for the <a class="el" href="classstring__abstractiont.html">string_abstractiont</a> class. The implementation of this pass is called via the <a class="el" href="string__abstraction_8h.html#a3d242ae0c19b6081df1f23d3e865b21b">string_abstraction(goto_modelt &amp;, message_handlert &amp;)</a> function.</p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#floats-transform">Adjust Float Expressions</a>.</em></p>
<h2><a class="anchor" id="nondet-transform"></a>
Add Non-Deterministic Initialisation of Global Scoped Variables</h2>
<p>This transformation adds non-deterministic initialisation of global scoped variables including static variables. For details see <code><a class="el" href="nondet__static_8h.html" title="Nondeterministically initializes global scope variables, except for constants (such as string literal...">src/goto-instrument/nondet_static.h</a></code>. The initialisation code is added to the <code>CPROVER_initialize</code> function in the goto model. The implementation of this pass is called via the <a class="el" href="nondet__static_8h.html#a9881f20cf0735a089e298cd8247e76f1">nondet_static(goto_modelt &amp;)</a> function.</p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#update-transform">Goto Functions Update</a>.</em></p>
<h2><a class="anchor" id="unused-functions-transform"></a>
Remove Unused Functions</h2>
<p>This pass removes unused functions from the goto model. In practice this builds a collection of all the functions that are potentially called, and then removes any function not in this collection.</p>
<p>This pass cannot handle function calls via function pointers. Attempting to run this pass against a goto model which contains such a function call will result in an invariant violation. Therefore the function pointer removal pass must always be applied to the goto model before the remove unused functions pass.</p>
<p>The implementation of this pass is called via the <a class="el" href="remove__unused__functions_8h.html#ac9e2ef4657729f49f6d7126d5879cf2b">remove_unused_functions(goto_modelt &amp;, message_handlert &amp;)</a> function.</p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#failed-symbols-transform">Add Failed Symbols</a>.</em></p>
<h2><a class="anchor" id="coverage-transform"></a>
Add Coverage Goals</h2>
<p>This transformation adds coverage goals instrumentation and is only applied if the <code>--cover</code> option has been specified. The implementation of this pass is called via the <a class="el" href="cover_8h.html#a767fc3343248186c67b75548216e8bf3">instrument_cover_goals(const cover_configt &amp;, goto_modelt &amp;, message_handlert &amp;)</a> function.</p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#remove-skip-transform">Remove Skip Instructions</a> .</em></p>
<h2><a class="anchor" id="slicing-transforms"></a>
Slicing</h2>
<p>This includes several slicing passes as specified by various slicing command line options. The reachability slicer is enabled by the <code>--reachability-slice</code> command line option. The implementation of this pass is called via the <a class="el" href="reachability__slicer_8h.html#a7b182970f6c9e43371c61dba5cbc54a8">reachability_slicer(goto_modelt &amp;, message_handlert &amp;)</a> function. The full slicer is enabled by the <code>--full-slice</code> command line option. The implementation of this pass is called via the <a class="el" href="full__slicer_8h.html#a11fed0fe823caef378b79bb1eece8506">full_slicer(goto_modelt &amp;, message_handlert &amp;)</a> function.</p>
<p><em>Predecessor pass is <a class="el" href="goto-program-transformations.html#properties-transform">Label Properties</a> .</em></p>
<p>Last modified: 2024-04-25 12:32:00 -0700 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Documentation</a></li><li class="navelem"><a class="el" href="cprover_documentation.html">CProver documentation</a></li><li class="navelem"><a class="el" href="cbmc-architecture.html">CBMC Architecture</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
