<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CProver manual: modeling-assumptions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CProver manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">modeling-assumptions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href=".">CPROVER Manual TOC</a></p>
<h2><a class="anchor" id="modeling-with-assumptions"></a>
Modeling with Assumptions</h2>
<p>Assumptions are used to restrict nondeterministic choices made by the program. As an example, suppose we wish to model a nondeterministic choice that returns a number from 1 to 100. There is no integer type with this range. We therefore use __CPROVER_assume to restrict the range of a nondeterministically chosen integer:</p>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nondet_uint();</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> one_to_hundred()</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> result=nondet_uint();</div>
<div class="line">  __CPROVER_assume(result&gt;=1 &amp;&amp; result&lt;=100);</div>
<div class="line">  <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function returns the desired integer from 1 to 100. You must ensure that the condition given as an assumption is actually satisfiable by some nondeterministic choice, otherwise the model checking step will pass vacuously.</p>
<p>Also note that assumptions are never retroactive. They only affect assertions (or other properties) that follow them in program order. This is best illustrated with an example. In the following fragment the assumption has no effect on the assertion, which means that the assertion will fail:</p>
<div class="fragment"><div class="line">x=nondet_uint();</div>
<div class="line">assert(x==100);</div>
<div class="line">__CPROVER_assume(x==100);</div>
</div><!-- fragment --><p>Assumptions do restrict the search space, but only for assertions that follow. As an example, this program will pass:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <span class="keywordtype">int</span> x;</div>
<div class="line"> </div>
<div class="line">  __CPROVER_assume(x&gt;=1 &amp;&amp; x&lt;=100000);</div>
<div class="line"> </div>
<div class="line">  x*=-1;</div>
<div class="line"> </div>
<div class="line">  __CPROVER_assert(x&lt;0, <span class="stringliteral">&quot;x is negative&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Beware that nondeterminism cannot be used to obtain the effect of universal quantification in assumptions. For example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <span class="keywordtype">int</span> a[10], x, y;</div>
<div class="line"> </div>
<div class="line">  x=nondet_int();</div>
<div class="line">  y=nondet_int();</div>
<div class="line">  __CPROVER_assume(x&gt;=0 &amp;&amp; x&lt;10 &amp;&amp; y&gt;=0 &amp;&amp; y&lt;10);</div>
<div class="line"> </div>
<div class="line">  __CPROVER_assume(a[x]&gt;=0);</div>
<div class="line"> </div>
<div class="line">  assert(a[y]&gt;=0);</div>
<div class="line">}</div>
</div><!-- fragment --><p>This code fails, as there is a choice of x and y which results in a counterexample (any choice in which x and y are different).</p>
<h2><a class="anchor" id="coverage"></a>
Coverage</h2>
<p>You can ask CBMC to give coverage information regarding <code>__CPROVER_assume</code> statements. This is useful when you need, for example, to check which assume statements may have led to an emptying of the search state space, resulting in <code>assert</code> statements being vaccuously passed.</p>
<p>To use that invoke CBMC with the <code>--cover assume</code> option. For example, for a file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> x;</div>
<div class="line">  __CPROVER_assume(x &gt; 0);</div>
<div class="line">  __CPROVER_assume(x &lt; 0);</div>
<div class="line">  assert(0 == 1);</div>
<div class="line">}</div>
</div><!-- fragment --><p>CBMC invoked with <code>cbmc --cover assume test.c</code> will report:</p>
<div class="fragment"><div class="line">[main.1] file assume_assert.c line 6 function main assert(false) before assume(x &gt; 0): SATISFIED</div>
<div class="line">[main.2] file assume_assert.c line 6 function main assert(false) after assume(x &gt; 0): SATISFIED</div>
<div class="line">[main.3] file assume_assert.c line 7 function main assert(false) before assume(x &lt; 0): SATISFIED</div>
<div class="line">[main.4] file assume_assert.c line 7 function main assert(false) after assume(x &lt; 0): FAILED</div>
</div><!-- fragment --><p>When an <code>assert(false)</code> statement before the assume has the property status <code>SATISFIED</code>, but is followed by an <code>assert(false)</code> statement <em>after</em> the assume statement that has status <code>FAILED</code>, this is an indication that this specific assume statement (on the line reported) is one that is emptying the search space for model checking.</p>
<p>Last modified: 2024-06-12 10:25:52 -0700 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
