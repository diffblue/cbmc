<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CBMC: /home/runner/work/cbmc/cbmc/jbmc/src/miniz/miniz.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CBMC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('miniz_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">miniz.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="miniz_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/**************************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright 2013-2014 RAD Game Tools and Valve Software</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright 2010-2014 Rich Geldreich and Tenacious Software LLC</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * All Rights Reserved.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a copy</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * in the Software without restriction, including without limitation the rights</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * copies of the Software, and to permit persons to whom the Software is</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * furnished to do so, subject to the following conditions:</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included in</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * THE SOFTWARE.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> **************************************************************************/</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// conversion warnings</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#pragma warning(disable:4242)</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// possible loss of data</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#pragma warning(disable:4244)</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// possible loss of data</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#pragma warning(disable:4365)</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// signed/unsigned mismatch</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#pragma warning(disable:4548)</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// expression before comma has no effect</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#pragma warning(disable:4061)</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// enum case is not handled in switch</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#pragma warning(disable:4334)</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// result of 32-bit shift implicitly converted to 64 bits</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#pragma warning(disable:5039)</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// pointer or reference to potentially throwing function passed to extern C</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include  &quot;<a class="code" href="miniz_8h.html">miniz.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ae2ef9b0ac1f2344216f0d275c89a83ec">   47</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="miniz_8cpp.html#ae2ef9b0ac1f2344216f0d275c89a83ec">mz_validate_uint16</a>[<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) == 2 ? 1 : -1];</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a48b566cb0b8ab3e889a99892cbddfc96">   48</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="miniz_8cpp.html#a48b566cb0b8ab3e889a99892cbddfc96">mz_validate_uint32</a>[<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) == 4 ? 1 : -1];</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab2f25a5e1a0dc2193f1ad91c702d3834">   49</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="miniz_8cpp.html#ab2f25a5e1a0dc2193f1ad91c702d3834">mz_validate_uint64</a>[<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>) == 8 ? 1 : -1];</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/* ------------------- zlib-style API&#39;s */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a094d181afc4c98dc1864f6ce7d636258">   57</a></span>&#160;<a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> <a class="code" href="miniz_8cpp.html#a094d181afc4c98dc1864f6ce7d636258">mz_adler32</a>(<a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> adler, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *ptr, <span class="keywordtype">size_t</span> buf_len)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> i, <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)(adler &amp; 0xffff), <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)(adler &gt;&gt; 16);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">size_t</span> block_len = buf_len % 5552;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">if</span>(!ptr)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a4d8a6ee7365a49c7a25251e1dbebdd2b">MZ_ADLER32_INIT</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">while</span>(buf_len)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">for</span>(i = 0; i + 7 &lt; block_len; i += 8, ptr += 8)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[0], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[1], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[2], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[3], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[4], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[5], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[6], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[7], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">for</span>(; i &lt; block_len; ++i)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += *ptr++, <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> %= 65521U, <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> %= 65521U;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        buf_len -= block_len;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        block_len = 5552;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> &lt;&lt; 16) + <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/* Karl Malbrain&#39;s compact CRC-32. See &quot;A compact CCITT crc16 and crc32 C implementation that balances processor cache usage against speed&quot;: http:// www.geocities.com/malbrain/ */</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> <a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(<a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> crc, <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *ptr, <span class="keywordtype">size_t</span> buf_len)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> s_crc32[16] = { 0, 0x1db71064, 0x3b6e20c8, 0x26d930ac, 0x76dc4190, 0x6b6b51f4, 0x4db26158, 0x5005713c,</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                               0xedb88320, 0xf00f9344, 0xd6d6a3e8, 0xcb61b38c, 0x9b64c2b0, 0x86d3d2d4, 0xa00ae278, 0xbdbdf21c };</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> crcu32 = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)crc;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">if</span>(!ptr)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        crcu32 = ~crcu32;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">while</span>(buf_len--)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> b = *ptr++;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            crcu32 = (crcu32 &gt;&gt; 4) ^ s_crc32[(crcu32 &amp; 0xF) ^ (b &amp; 0xF)];</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            crcu32 = (crcu32 &gt;&gt; 4) ^ s_crc32[(crcu32 &amp; 0xF) ^ (b &gt;&gt; 4)];</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">return</span> ~crcu32;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">/* Faster, but larger CPU cache footprint.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">  106</a></span>&#160;<a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> <a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(<a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> crc, <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *ptr, <span class="keywordtype">size_t</span> buf_len)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> s_crc_table[256] =</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419, 0x706AF48F, 0xE963A535,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            0x9E6495A3, 0x0EDB8832, 0x79DCB8A4, 0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            0xE7B82D07, 0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE, 0x1ADAD47D,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856, 0x646BA8C0, 0xFD62F97A, 0x8A65C9EC,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            0x14015C4F, 0x63066CD9, 0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B, 0x35B5A8FA, 0x42B2986C,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            0xDBBBC9D6, 0xACBCF940, 0x32D86CE3, 0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            0x51DE003A, 0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599, 0xB8BDA50F,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924, 0x2F6F7C87, 0x58684C11, 0xC1611DAB,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            0xB6662D3D, 0x76DC4190, 0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E, 0xE10E9818, 0x7F6A0DBB,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            0x086D3D2D, 0x91646C97, 0xE6635C01, 0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            0x6C0695ED, 0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950, 0x8BBEB8EA,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3, 0xFBD44C65, 0x4DB26158, 0x3AB551CE,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            0xA3BC0074, 0xD4BB30E2, 0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5, 0xAA0A4C5F, 0xDD0D7CC9,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            0x5005713C, 0x270241AA, 0xBE0B1010, 0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            0xCE61E49F, 0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17, 0x2EB40D81,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6, 0x03B6E20C, 0x74B1D29A, 0xEAD54739,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            0x9DD277AF, 0x04DB2615, 0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344, 0x8708A3D2, 0x1E01F268,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            0x6906C2FE, 0xF762575D, 0x806567CB, 0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            0x10DA7A5A, 0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5, 0xD6D6A3E8,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1, 0xA6BC5767, 0x3FB506DD, 0x48B2364B,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            0xD80D2BDA, 0xAF0A1B4C, 0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236, 0xCC0C7795, 0xBB0B4703,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            0x220216B9, 0x5505262F, 0xC5BA3BBE, 0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            0xB5D0CF31, 0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C, 0x026D930A,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713, 0x95BF4A82, 0xE2B87A14, 0x7BB12BAE,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            0x0CB61B38, 0x92D28E9B, 0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1, 0x18B74777, 0x88085AE6,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            0xFF0F6A70, 0x66063BCA, 0x11010B5C, 0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            0xA00AE278, 0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7, 0x4969474D,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66, 0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            0x47B2CF7F, 0x30B5FFE9, 0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8, 0x5D681B02, 0x2A6F2B94,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B, 0x2D02EF8D</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        };</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> <a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)crc ^ 0xFFFFFFFF;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pByte_buf = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)ptr;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">while</span>(buf_len &gt;= 4)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> = (<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> &gt;&gt; 8) ^ s_crc_table[(<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> ^ pByte_buf[0]) &amp; 0xFF];</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> = (<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> &gt;&gt; 8) ^ s_crc_table[(<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> ^ pByte_buf[1]) &amp; 0xFF];</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> = (<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> &gt;&gt; 8) ^ s_crc_table[(<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> ^ pByte_buf[2]) &amp; 0xFF];</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> = (<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> &gt;&gt; 8) ^ s_crc_table[(<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> ^ pByte_buf[3]) &amp; 0xFF];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        pByte_buf += 4;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        buf_len -= 4;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">while</span>(buf_len)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> = (<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> &gt;&gt; 8) ^ s_crc_table[(<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a> ^ pByte_buf[0]) &amp; 0xFF];</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        ++pByte_buf;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        --buf_len;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> ~<a class="code" href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a7bdc0af59e4ca6d7bd8b7d5d005ff55e">  173</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a7bdc0af59e4ca6d7bd8b7d5d005ff55e">mz_free</a>(<span class="keywordtype">void</span> *p)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(p);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_ZLIB_APIS</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5b8c4d334248b00bb255a64a7628ab36">  180</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#a5b8c4d334248b00bb255a64a7628ab36">miniz_def_alloc_func</a>(<span class="keywordtype">void</span> *opaque, <span class="keywordtype">size_t</span> items, <span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    (void)opaque, (<span class="keywordtype">void</span>)items, (void)size;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a>(items * size);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a74bd5c1f3f342d2109643cfa500689fc">  185</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a74bd5c1f3f342d2109643cfa500689fc">miniz_def_free_func</a>(<span class="keywordtype">void</span> *opaque, <span class="keywordtype">void</span> *address)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    (void)opaque, (<span class="keywordtype">void</span>)address;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(address);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ae51abb9ee6167023388e1d1122b10d89">  190</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#ae51abb9ee6167023388e1d1122b10d89">miniz_def_realloc_func</a>(<span class="keywordtype">void</span> *opaque, <span class="keywordtype">void</span> *address, <span class="keywordtype">size_t</span> items, <span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    (void)opaque, (<span class="keywordtype">void</span>)address, (void)items, (<span class="keywordtype">void</span>)size;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a1420c15d77b938f459fa3e8bbd9f4c4d">MZ_REALLOC</a>(address, items * size);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3d5d232e407e113f68859c17212526cb">  196</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="miniz_8cpp.html#a3d5d232e407e113f68859c17212526cb">mz_version</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a69229ba2b86a229226516575d1a458c8">MZ_VERSION</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a69f53f93ea50410b674721408b2aff24">  201</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a69f53f93ea50410b674721408b2aff24">mz_deflateInit</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream, <span class="keywordtype">int</span> level)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a66d75d30383d1b7af379b7d19db3aba0">mz_deflateInit2</a>(pStream, level, <a class="code" href="miniz_8h.html#a3e92e9b3cc525db1fd503d9630ec1bf5">MZ_DEFLATED</a>, <a class="code" href="miniz_8h.html#a6027b7b919794d9e1f1852f075d0cbb6">MZ_DEFAULT_WINDOW_BITS</a>, 9, <a class="code" href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388a96891a5aa5d03f61da7f4a9c5b94f1d5">MZ_DEFAULT_STRATEGY</a>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a66d75d30383d1b7af379b7d19db3aba0">  206</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a66d75d30383d1b7af379b7d19db3aba0">mz_deflateInit2</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream, <span class="keywordtype">int</span> level, <span class="keywordtype">int</span> method, <span class="keywordtype">int</span> window_bits, <span class="keywordtype">int</span> mem_level, <span class="keywordtype">int</span> strategy)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *pComp;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> comp_flags = <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25aa3c1a489229a817dc6d07efd55a6f5cf">TDEFL_COMPUTE_ADLER32</a> | <a class="code" href="miniz_8cpp.html#acf2306ec6b7f92753264f68bc554750b">tdefl_create_comp_flags_from_zip_params</a>(level, window_bits, strategy);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span>(!pStream)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span>((method != <a class="code" href="miniz_8h.html#a3e92e9b3cc525db1fd503d9630ec1bf5">MZ_DEFLATED</a>) || ((mem_level &lt; 1) || (mem_level &gt; 9)) || ((window_bits != <a class="code" href="miniz_8h.html#a6027b7b919794d9e1f1852f075d0cbb6">MZ_DEFAULT_WINDOW_BITS</a>) &amp;&amp; (-window_bits != <a class="code" href="miniz_8h.html#a6027b7b919794d9e1f1852f075d0cbb6">MZ_DEFAULT_WINDOW_BITS</a>)))</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a6bc32d182dcf344e4921fcb604abc35e">MZ_PARAM_ERROR</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#a3e1503f72464a3b7b40d1df232ba9f43">data_type</a> = 0;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#a24c6cf42b5b6a655f4664dd15203dce7">adler</a> = <a class="code" href="miniz_8h.html#a4d8a6ee7365a49c7a25251e1dbebdd2b">MZ_ADLER32_INIT</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#ad4095b25455e382787dc06d20157e05f">msg</a> = NULL;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#ae4fc708fffee7b10a4586964401613fb">reserved</a> = 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#abfa083eb7707360c33389ec12fadf376">total_in</a> = 0;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a> = 0;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span>(!pStream-&gt;<a class="code" href="structmz__stream__s.html#abbd8109a7f88713f39b9e3046a223ef2">zalloc</a>)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#abbd8109a7f88713f39b9e3046a223ef2">zalloc</a> = <a class="code" href="miniz_8cpp.html#a5b8c4d334248b00bb255a64a7628ab36">miniz_def_alloc_func</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span>(!pStream-&gt;<a class="code" href="structmz__stream__s.html#a55dbac0e9b86472bfa41f86dfb35df9a">zfree</a>)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a55dbac0e9b86472bfa41f86dfb35df9a">zfree</a> = <a class="code" href="miniz_8cpp.html#a74bd5c1f3f342d2109643cfa500689fc">miniz_def_free_func</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    pComp = (<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)pStream-&gt;<a class="code" href="structmz__stream__s.html#abbd8109a7f88713f39b9e3046a223ef2">zalloc</a>(pStream-&gt;<a class="code" href="structmz__stream__s.html#a31c21928246598992a5cce6d20ae7e78">opaque</a>, 1, <span class="keyword">sizeof</span>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a>));</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span>(!pComp)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a00c3c60b8c4dd75a5f19ed84aebc519b">MZ_MEM_ERROR</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a> = (<span class="keyword">struct </span>mz_internal_state *)pComp;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a3c2c67a6200147020ba4bfbf77962792">tdefl_init</a>(pComp, NULL, NULL, comp_flags) != <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a>)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="miniz_8cpp.html#a36e2a62c4a31c1b7f8b51da8cffd7281">mz_deflateEnd</a>(pStream);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a6bc32d182dcf344e4921fcb604abc35e">MZ_PARAM_ERROR</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2632b66b8e67b1482f24dff4d4b65e8c">  242</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a2632b66b8e67b1482f24dff4d4b65e8c">mz_deflateReset</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span>((!pStream) || (!pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>) || (!pStream-&gt;<a class="code" href="structmz__stream__s.html#abbd8109a7f88713f39b9e3046a223ef2">zalloc</a>) || (!pStream-&gt;<a class="code" href="structmz__stream__s.html#a55dbac0e9b86472bfa41f86dfb35df9a">zfree</a>))</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#abfa083eb7707360c33389ec12fadf376">total_in</a> = pStream-&gt;<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a> = 0;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="miniz_8cpp.html#a3c2c67a6200147020ba4bfbf77962792">tdefl_init</a>((<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>, NULL, NULL, ((<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>)-&gt;m_flags);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab843b570ebaeb31d801a5414260edeaf">  251</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#ab843b570ebaeb31d801a5414260edeaf">mz_deflate</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream, <span class="keywordtype">int</span> flush)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">size_t</span> in_bytes, out_bytes;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> orig_total_in, orig_total_out;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">int</span> mz_status = <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span>((!pStream) || (!pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>) || (flush &lt; 0) || (flush &gt; <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>) || (!pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a>))</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span>(!pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a>)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span>(flush == <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035daa074139e59dc5aba5f6461ab5cfaee8f">MZ_PARTIAL_FLUSH</a>)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        flush = <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da1a77ad21e37d528c658b024642f347bb">MZ_SYNC_FLUSH</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span>(((<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>)-&gt;m_prev_return_status == <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa9beb7850b5d6941b6860db23f426b0d2">TDEFL_STATUS_DONE</a>)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">return</span> (flush == <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>) ? <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a> : <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    orig_total_in = pStream-&gt;<a class="code" href="structmz__stream__s.html#abfa083eb7707360c33389ec12fadf376">total_in</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    orig_total_out = pStream-&gt;<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748f">tdefl_status</a> defl_status;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        in_bytes = pStream-&gt;<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        out_bytes = pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        defl_status = <a class="code" href="miniz_8cpp.html#ae9968978f7ea9f732c5ed08db988208b">tdefl_compress</a>((<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>, pStream-&gt;<a class="code" href="structmz__stream__s.html#aa75ed42cc83b0f74d7fcce6299439307">next_in</a>, &amp;in_bytes, pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a>, &amp;out_bytes, (<a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abf">tdefl_flush</a>)flush);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#aa75ed42cc83b0f74d7fcce6299439307">next_in</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)in_bytes;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a> -= (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)in_bytes;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#abfa083eb7707360c33389ec12fadf376">total_in</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)in_bytes;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a24c6cf42b5b6a655f4664dd15203dce7">adler</a> = <a class="code" href="miniz_8cpp.html#a2ec6403111ea9afbcdc4d76cfda97110">tdefl_get_adler32</a>((<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)out_bytes;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a> -= (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)out_bytes;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)out_bytes;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span>(defl_status &lt; 0)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            mz_status = <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(defl_status == <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa9beb7850b5d6941b6860db23f426b0d2">TDEFL_STATUS_DONE</a>)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            mz_status = <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((!pStream-&gt;<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a>) &amp;&amp; (flush != <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>))</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">if</span>((flush) || (pStream-&gt;<a class="code" href="structmz__stream__s.html#abfa083eb7707360c33389ec12fadf376">total_in</a> != orig_total_in) || (pStream-&gt;<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a> != orig_total_out))</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a>; <span class="comment">/* Can&#39;t make forward progress without some input.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">return</span> mz_status;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a36e2a62c4a31c1b7f8b51da8cffd7281">  309</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a36e2a62c4a31c1b7f8b51da8cffd7281">mz_deflateEnd</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span>(!pStream)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span>(pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a55dbac0e9b86472bfa41f86dfb35df9a">zfree</a>(pStream-&gt;<a class="code" href="structmz__stream__s.html#a31c21928246598992a5cce6d20ae7e78">opaque</a>, pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a> = NULL;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#acd123a509ce06edd3a97506622873102">  321</a></span>&#160;<a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> <a class="code" href="miniz_8cpp.html#acd123a509ce06edd3a97506622873102">mz_deflateBound</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream, <a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> source_len)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;{</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    (void)pStream;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">/* This is really over conservative. (And lame, but it&#39;s actually pretty tricky to compute a true upper bound given the way tdefl&#39;s blocking works.) */</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(128 + (source_len * 110) / 100, 128 + source_len + ((source_len / (31 * 1024)) + 1) * 5);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a7a7b50a0d965d229ce14f3afa5981edd">  328</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a7a7b50a0d965d229ce14f3afa5981edd">mz_compress2</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pDest, <a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> *pDest_len, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pSource, <a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> source_len, <span class="keywordtype">int</span> level)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordtype">int</span> status;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="structmz__stream__s.html">mz_stream</a> stream;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;stream, 0, <span class="keyword">sizeof</span>(stream));</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">/* In case mz_ulong is 64-bits (argh I hate longs). */</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span>((source_len | *pDest_len) &gt; 0xFFFFFFFFU)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a6bc32d182dcf344e4921fcb604abc35e">MZ_PARAM_ERROR</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    stream.<a class="code" href="structmz__stream__s.html#aa75ed42cc83b0f74d7fcce6299439307">next_in</a> = pSource;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    stream.<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a> = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)source_len;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    stream.<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a> = pDest;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    stream.<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a> = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * pDest_len;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    status = <a class="code" href="miniz_8cpp.html#a69f53f93ea50410b674721408b2aff24">mz_deflateInit</a>(&amp;stream, level);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">if</span>(status != <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    status = <a class="code" href="miniz_8cpp.html#ab843b570ebaeb31d801a5414260edeaf">mz_deflate</a>(&amp;stream, <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span>(status != <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a>)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="miniz_8cpp.html#a36e2a62c4a31c1b7f8b51da8cffd7281">mz_deflateEnd</a>(&amp;stream);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">return</span> (status == <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>) ? <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a> : status;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    *pDest_len = stream.<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a36e2a62c4a31c1b7f8b51da8cffd7281">mz_deflateEnd</a>(&amp;stream);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2e39a706e4a41c7168983f7e7c2e1a1d">  358</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a2e39a706e4a41c7168983f7e7c2e1a1d">mz_compress</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pDest, <a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> *pDest_len, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pSource, <a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> source_len)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a7a7b50a0d965d229ce14f3afa5981edd">mz_compress2</a>(pDest, pDest_len, pSource, source_len, <a class="code" href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9eaceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3046aad784a296b0064530b4b98f5adb">  363</a></span>&#160;<a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> <a class="code" href="miniz_8cpp.html#a3046aad784a296b0064530b4b98f5adb">mz_compressBound</a>(<a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> source_len)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#acd123a509ce06edd3a97506622873102">mz_deflateBound</a>(NULL, source_len);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="structinflate__state.html">  368</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;{</div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="structinflate__state.html#aa112419e6fc485a0569d89b0dac4c40d">  370</a></span>&#160;    <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> <a class="code" href="structinflate__state.html#aa112419e6fc485a0569d89b0dac4c40d">m_decomp</a>;</div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">  371</a></span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> m_dict_ofs, <a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a>, m_first_call, m_has_flushed;</div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="structinflate__state.html#a05183fc4ee620dfaac7cdde5c17697a9">  372</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structinflate__state.html#a05183fc4ee620dfaac7cdde5c17697a9">m_window_bits</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="structinflate__state.html#a2d81f0dc8d60bcd1851cc21cd0ea1a35">  373</a></span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> m_dict[<a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a>];</div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="structinflate__state.html#a9d2e5eba1b8c7a5bf78289b7a412f154">  374</a></span>&#160;    <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> <a class="code" href="structinflate__state.html#a9d2e5eba1b8c7a5bf78289b7a412f154">m_last_status</a>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;} <a class="code" href="structinflate__state.html">inflate_state</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a95babde50d211fa1d2401e70516d2e93">  377</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a95babde50d211fa1d2401e70516d2e93">mz_inflateInit2</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream, <span class="keywordtype">int</span> window_bits)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;{</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="structinflate__state.html">inflate_state</a> *pDecomp;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">if</span>(!pStream)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span>((window_bits != <a class="code" href="miniz_8h.html#a6027b7b919794d9e1f1852f075d0cbb6">MZ_DEFAULT_WINDOW_BITS</a>) &amp;&amp; (-window_bits != <a class="code" href="miniz_8h.html#a6027b7b919794d9e1f1852f075d0cbb6">MZ_DEFAULT_WINDOW_BITS</a>))</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a6bc32d182dcf344e4921fcb604abc35e">MZ_PARAM_ERROR</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#a3e1503f72464a3b7b40d1df232ba9f43">data_type</a> = 0;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#a24c6cf42b5b6a655f4664dd15203dce7">adler</a> = 0;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#ad4095b25455e382787dc06d20157e05f">msg</a> = NULL;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#abfa083eb7707360c33389ec12fadf376">total_in</a> = 0;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a> = 0;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#ae4fc708fffee7b10a4586964401613fb">reserved</a> = 0;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span>(!pStream-&gt;<a class="code" href="structmz__stream__s.html#abbd8109a7f88713f39b9e3046a223ef2">zalloc</a>)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#abbd8109a7f88713f39b9e3046a223ef2">zalloc</a> = <a class="code" href="miniz_8cpp.html#a5b8c4d334248b00bb255a64a7628ab36">miniz_def_alloc_func</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span>(!pStream-&gt;<a class="code" href="structmz__stream__s.html#a55dbac0e9b86472bfa41f86dfb35df9a">zfree</a>)</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a55dbac0e9b86472bfa41f86dfb35df9a">zfree</a> = <a class="code" href="miniz_8cpp.html#a74bd5c1f3f342d2109643cfa500689fc">miniz_def_free_func</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    pDecomp = (<a class="code" href="structinflate__state.html">inflate_state</a> *)pStream-&gt;<a class="code" href="structmz__stream__s.html#abbd8109a7f88713f39b9e3046a223ef2">zalloc</a>(pStream-&gt;<a class="code" href="structmz__stream__s.html#a31c21928246598992a5cce6d20ae7e78">opaque</a>, 1, <span class="keyword">sizeof</span>(<a class="code" href="structinflate__state.html">inflate_state</a>));</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span>(!pDecomp)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a00c3c60b8c4dd75a5f19ed84aebc519b">MZ_MEM_ERROR</a>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a> = (<span class="keyword">struct </span>mz_internal_state *)pDecomp;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="miniz_8h.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(&amp;pDecomp-&gt;<a class="code" href="structinflate__state.html#aa112419e6fc485a0569d89b0dac4c40d">m_decomp</a>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    pDecomp-&gt;<a class="code" href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">m_dict_ofs</a> = 0;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    pDecomp-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a> = 0;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    pDecomp-&gt;<a class="code" href="structinflate__state.html#a9d2e5eba1b8c7a5bf78289b7a412f154">m_last_status</a> = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    pDecomp-&gt;<a class="code" href="structinflate__state.html#a8ed1d9e9a13f5e5f5c4229c67509a5a1">m_first_call</a> = 1;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    pDecomp-&gt;<a class="code" href="structinflate__state.html#a26ee41a3a0d93350c737252334fe783f">m_has_flushed</a> = 0;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    pDecomp-&gt;<a class="code" href="structinflate__state.html#a05183fc4ee620dfaac7cdde5c17697a9">m_window_bits</a> = window_bits;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2cd16abe6e673d9f98d98ae81c2d7c52">  413</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a2cd16abe6e673d9f98d98ae81c2d7c52">mz_inflateInit</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;{</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a95babde50d211fa1d2401e70516d2e93">mz_inflateInit2</a>(pStream, <a class="code" href="miniz_8h.html#a6027b7b919794d9e1f1852f075d0cbb6">MZ_DEFAULT_WINDOW_BITS</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2d5d109e8f992526202122134e092aa1">  418</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a2d5d109e8f992526202122134e092aa1">mz_inflate</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream, <span class="keywordtype">int</span> flush)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="structinflate__state.html">inflate_state</a> *pState;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> n, first_call, decomp_flags = <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa9454c17ebc5717f8553d01ab99b8c1c9">TINFL_FLAG_COMPUTE_ADLER32</a>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">size_t</span> in_bytes, out_bytes, orig_avail_in;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> status;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span>((!pStream) || (!pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>))</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span>(flush == <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035daa074139e59dc5aba5f6461ab5cfaee8f">MZ_PARTIAL_FLUSH</a>)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        flush = <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da1a77ad21e37d528c658b024642f347bb">MZ_SYNC_FLUSH</a>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span>((flush) &amp;&amp; (flush != <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da1a77ad21e37d528c658b024642f347bb">MZ_SYNC_FLUSH</a>) &amp;&amp; (flush != <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>))</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    pState = (<a class="code" href="structinflate__state.html">inflate_state</a> *)pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structinflate__state.html#a05183fc4ee620dfaac7cdde5c17697a9">m_window_bits</a> &gt; 0)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        decomp_flags |= <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaaf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    orig_avail_in = pStream-&gt;<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    first_call = pState-&gt;<a class="code" href="structinflate__state.html#a8ed1d9e9a13f5e5f5c4229c67509a5a1">m_first_call</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    pState-&gt;<a class="code" href="structinflate__state.html#a8ed1d9e9a13f5e5f5c4229c67509a5a1">m_first_call</a> = 0;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structinflate__state.html#a9d2e5eba1b8c7a5bf78289b7a412f154">m_last_status</a> &lt; 0)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae4f65fd7767379614da35ab5c43ad77d">MZ_DATA_ERROR</a>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structinflate__state.html#a26ee41a3a0d93350c737252334fe783f">m_has_flushed</a> &amp;&amp; (flush != <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>))</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    pState-&gt;<a class="code" href="structinflate__state.html#a26ee41a3a0d93350c737252334fe783f">m_has_flushed</a> |= (flush == <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">if</span>((flush == <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>) &amp;&amp; (first_call))</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">/* MZ_FINISH on the first call implies that the input and output buffers are large enough to hold the entire compressed/decompressed file. */</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        decomp_flags |= <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        in_bytes = pStream-&gt;<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        out_bytes = pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        status = <a class="code" href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;pState-&gt;<a class="code" href="structinflate__state.html#aa112419e6fc485a0569d89b0dac4c40d">m_decomp</a>, pStream-&gt;<a class="code" href="structmz__stream__s.html#aa75ed42cc83b0f74d7fcce6299439307">next_in</a>, &amp;in_bytes, pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a>, pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a>, &amp;out_bytes, decomp_flags);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        pState-&gt;<a class="code" href="structinflate__state.html#a9d2e5eba1b8c7a5bf78289b7a412f154">m_last_status</a> = status;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#aa75ed42cc83b0f74d7fcce6299439307">next_in</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)in_bytes;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a> -= (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)in_bytes;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#abfa083eb7707360c33389ec12fadf376">total_in</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)in_bytes;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a24c6cf42b5b6a655f4664dd15203dce7">adler</a> = <a class="code" href="miniz_8h.html#a5542a5383b30c24dc30bc2af3857a291">tinfl_get_adler32</a>(&amp;pState-&gt;<a class="code" href="structinflate__state.html#aa112419e6fc485a0569d89b0dac4c40d">m_decomp</a>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)out_bytes;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a> -= (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)out_bytes;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)out_bytes;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">if</span>(status &lt; 0)</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae4f65fd7767379614da35ab5c43ad77d">MZ_DATA_ERROR</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status != <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            pState-&gt;<a class="code" href="structinflate__state.html#a9d2e5eba1b8c7a5bf78289b7a412f154">m_last_status</a> = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">/* flush != MZ_FINISH then we must assume there&#39;s more input. */</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span>(flush != <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>)</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        decomp_flags |= <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a>)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        n = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a>, pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a>, pState-&gt;<a class="code" href="structinflate__state.html#a2d81f0dc8d60bcd1851cc21cd0ea1a35">m_dict</a> + pState-&gt;<a class="code" href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">m_dict_ofs</a>, n);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a> += n;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a> -= n;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a> += n;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a> -= n;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        pState-&gt;<a class="code" href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">m_dict_ofs</a> = (pState-&gt;<a class="code" href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">m_dict_ofs</a> + n) &amp; (<a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - 1);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">return</span> ((pState-&gt;<a class="code" href="structinflate__state.html#a9d2e5eba1b8c7a5bf78289b7a412f154">m_last_status</a> == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>) &amp;&amp; (!pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a>)) ? <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a> : <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        in_bytes = pStream-&gt;<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        out_bytes = <a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - pState-&gt;<a class="code" href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">m_dict_ofs</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        status = <a class="code" href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;pState-&gt;<a class="code" href="structinflate__state.html#aa112419e6fc485a0569d89b0dac4c40d">m_decomp</a>, pStream-&gt;<a class="code" href="structmz__stream__s.html#aa75ed42cc83b0f74d7fcce6299439307">next_in</a>, &amp;in_bytes, pState-&gt;<a class="code" href="structinflate__state.html#a2d81f0dc8d60bcd1851cc21cd0ea1a35">m_dict</a>, pState-&gt;<a class="code" href="structinflate__state.html#a2d81f0dc8d60bcd1851cc21cd0ea1a35">m_dict</a> + pState-&gt;<a class="code" href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">m_dict_ofs</a>, &amp;out_bytes, decomp_flags);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        pState-&gt;<a class="code" href="structinflate__state.html#a9d2e5eba1b8c7a5bf78289b7a412f154">m_last_status</a> = status;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#aa75ed42cc83b0f74d7fcce6299439307">next_in</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)in_bytes;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a> -= (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)in_bytes;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#abfa083eb7707360c33389ec12fadf376">total_in</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)in_bytes;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a24c6cf42b5b6a655f4664dd15203dce7">adler</a> = <a class="code" href="miniz_8h.html#a5542a5383b30c24dc30bc2af3857a291">tinfl_get_adler32</a>(&amp;pState-&gt;<a class="code" href="structinflate__state.html#aa112419e6fc485a0569d89b0dac4c40d">m_decomp</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a> = (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)out_bytes;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        n = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a>, pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a>, pState-&gt;<a class="code" href="structinflate__state.html#a2d81f0dc8d60bcd1851cc21cd0ea1a35">m_dict</a> + pState-&gt;<a class="code" href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">m_dict_ofs</a>, n);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a> += n;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a> -= n;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a> += n;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a> -= n;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        pState-&gt;<a class="code" href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">m_dict_ofs</a> = (pState-&gt;<a class="code" href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">m_dict_ofs</a> + n) &amp; (<a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - 1);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">if</span>(status &lt; 0)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae4f65fd7767379614da35ab5c43ad77d">MZ_DATA_ERROR</a>; <span class="comment">/* Stream is corrupted (there could be some uncompressed data left in the output dictionary - oh well). */</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a>) &amp;&amp; (!orig_avail_in))</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a>; <span class="comment">/* Signal caller that we can&#39;t make forward progress without supplying more input or by setting flush to MZ_FINISH. */</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(flush == <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="comment">/* The output buffer MUST be large to hold the remaining uncompressed data when flush==MZ_FINISH. */</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="keywordflow">if</span>(status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                <span class="keywordflow">return</span> pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a> ? <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a> : <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="comment">/* status here must be TINFL_STATUS_HAS_MORE_OUTPUT, which means there&#39;s at least 1 more byte on the way. If there&#39;s no more room left in the output buffer then something is wrong. */</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a>)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>) || (!pStream-&gt;<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a>) || (!pStream-&gt;<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a>) || (pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a>))</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">return</span> ((status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>) &amp;&amp; (!pState-&gt;<a class="code" href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">m_dict_avail</a>)) ? <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a> : <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab3074e360c49f66ccd955e6630d23108">  530</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#ab3074e360c49f66ccd955e6630d23108">mz_inflateEnd</a>(<a class="code" href="structmz__stream__s.html">mz_streamp</a> pStream)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;{</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span>(!pStream)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span>(pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a55dbac0e9b86472bfa41f86dfb35df9a">zfree</a>(pStream-&gt;<a class="code" href="structmz__stream__s.html#a31c21928246598992a5cce6d20ae7e78">opaque</a>, pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a>);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        pStream-&gt;<a class="code" href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">state</a> = NULL;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aa0ce62915456b6c5f0bcf1ed09e94599">  542</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#aa0ce62915456b6c5f0bcf1ed09e94599">mz_uncompress</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pDest, <a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> *pDest_len, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pSource, <a class="code" href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a> source_len)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="structmz__stream__s.html">mz_stream</a> stream;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">int</span> status;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;stream, 0, <span class="keyword">sizeof</span>(stream));</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">/* In case mz_ulong is 64-bits (argh I hate longs). */</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span>((source_len | *pDest_len) &gt; 0xFFFFFFFFU)</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a6bc32d182dcf344e4921fcb604abc35e">MZ_PARAM_ERROR</a>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    stream.<a class="code" href="structmz__stream__s.html#aa75ed42cc83b0f74d7fcce6299439307">next_in</a> = pSource;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    stream.<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a> = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)source_len;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    stream.<a class="code" href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">next_out</a> = pDest;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    stream.<a class="code" href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">avail_out</a> = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * pDest_len;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    status = <a class="code" href="miniz_8cpp.html#a2cd16abe6e673d9f98d98ae81c2d7c52">mz_inflateInit</a>(&amp;stream);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span>(status != <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    status = <a class="code" href="miniz_8cpp.html#a2d5d109e8f992526202122134e092aa1">mz_inflate</a>(&amp;stream, <a class="code" href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span>(status != <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a>)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="miniz_8cpp.html#ab3074e360c49f66ccd955e6630d23108">mz_inflateEnd</a>(&amp;stream);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">return</span> ((status == <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a>) &amp;&amp; (!stream.<a class="code" href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">avail_in</a>)) ? <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae4f65fd7767379614da35ab5c43ad77d">MZ_DATA_ERROR</a> : status;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    *pDest_len = stream.<a class="code" href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">total_out</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab3074e360c49f66ccd955e6630d23108">mz_inflateEnd</a>(&amp;stream);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac315062b2450716e20d21843f2022660">  572</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="miniz_8cpp.html#ac315062b2450716e20d21843f2022660">mz_error</a>(<span class="keywordtype">int</span> <a class="code" href="err_8c.html#aac7e66a886f062322beba3cb396968aa">err</a>)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keyword">static</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordtype">int</span> m_err;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *m_pDesc;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    } s_error_descs[] =</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;              { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a>, <span class="stringliteral">&quot;&quot;</span> }, { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a>, <span class="stringliteral">&quot;stream end&quot;</span> }, { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a8cabf17fbb841935d0bfb626ce61814d">MZ_NEED_DICT</a>, <span class="stringliteral">&quot;need dictionary&quot;</span> }, { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac7325ec0656a65e1b12861c5b97be96b">MZ_ERRNO</a>, <span class="stringliteral">&quot;file error&quot;</span> }, { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a>, <span class="stringliteral">&quot;stream error&quot;</span> },</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;              { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae4f65fd7767379614da35ab5c43ad77d">MZ_DATA_ERROR</a>, <span class="stringliteral">&quot;data error&quot;</span> }, { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a00c3c60b8c4dd75a5f19ed84aebc519b">MZ_MEM_ERROR</a>, <span class="stringliteral">&quot;out of memory&quot;</span> }, { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a>, <span class="stringliteral">&quot;buf error&quot;</span> }, { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a8f0080210beb22cd8cc6e4fca5e5f2f4">MZ_VERSION_ERROR</a>, <span class="stringliteral">&quot;version error&quot;</span> }, { <a class="code" href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a6bc32d182dcf344e4921fcb604abc35e">MZ_PARAM_ERROR</a>, <span class="stringliteral">&quot;parameter error&quot;</span> }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          };</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; <span class="keyword">sizeof</span>(s_error_descs) / <span class="keyword">sizeof</span>(s_error_descs[0]); ++i)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">if</span>(s_error_descs[i].m_err == <a class="code" href="err_8c.html#aac7e66a886f062322beba3cb396968aa">err</a>)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">return</span> s_error_descs[i].m_pDesc;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*MINIZ_NO_ZLIB_APIS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">  This is free and unencumbered software released into the public domain.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">  Anyone is free to copy, modify, publish, use, compile, sell, or</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">  distribute this software, either in source code form or as a compiled</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">  binary, for any purpose, commercial or non-commercial, and by any</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">  means.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">  In jurisdictions that recognize copyright laws, the author or authors</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">  of this software dedicate any and all copyright interest in the</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">  software to the public domain. We make this dedication for the benefit</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">  of the public at large and to the detriment of our heirs and</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">  successors. We intend this dedication to be an overt act of</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">  relinquishment in perpetuity of all present and future rights to this</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">  software under copyright law.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">  THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">  IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">  OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">  ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">  OTHER DEALINGS IN THE SOFTWARE.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">  For more information, please refer to &lt;http://unlicense.org/&gt;</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">/**************************************************************************</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment"> * Copyright 2013-2014 RAD Game Tools and Valve Software</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"> * Copyright 2010-2014 Rich Geldreich and Tenacious Software LLC</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment"> * All Rights Reserved.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a copy</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"> * of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment"> * in the Software without restriction, including without limitation the rights</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment"> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment"> * copies of the Software, and to permit persons to whom the Software is</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"> * furnished to do so, subject to the following conditions:</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included in</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment"> * all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment"> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment"> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"> * THE SOFTWARE.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"> **************************************************************************/</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">/* ------------------- Low-level Compression (independent from all decompression API&#39;s) */</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">/* Purposely making these tables static for faster init and thread safety. */</span></div>
<div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">  658</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> <a class="code" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a>[256] =</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        257, 258, 259, 260, 261, 262, 263, 264, 265, 265, 266, 266, 267, 267, 268, 268, 269, 269, 269, 269, 270, 270, 270, 270, 271, 271, 271, 271, 272, 272, 272, 272,</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        273, 273, 273, 273, 273, 273, 273, 273, 274, 274, 274, 274, 274, 274, 274, 274, 275, 275, 275, 275, 275, 275, 275, 275, 276, 276, 276, 276, 276, 276, 276, 276,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278,</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280,</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281,</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282,</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283,</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 285</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    };</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a0bfacd5da9a6e0f26f84fdbb7f7309ef">  670</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> <a class="code" href="miniz_8cpp.html#a0bfacd5da9a6e0f26f84fdbb7f7309ef">s_tdefl_len_extra</a>[256] =</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 0</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    };</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3b07b4b3e26dd52c6bf6289ef88c76e0">  678</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> <a class="code" href="miniz_8cpp.html#a3b07b4b3e26dd52c6bf6289ef88c76e0">s_tdefl_small_dist_sym</a>[512] =</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11,</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13,</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17,</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17,</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    };</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a4e100642a6f096d6bc8926a59bc909f8">  694</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> <a class="code" href="miniz_8cpp.html#a4e100642a6f096d6bc8926a59bc909f8">s_tdefl_small_dist_extra</a>[512] =</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5,</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        7, 7, 7, 7, 7, 7, 7, 7</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    };</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac781072b961db555ae58d396ca0e4527">  706</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> <a class="code" href="miniz_8cpp.html#ac781072b961db555ae58d396ca0e4527">s_tdefl_large_dist_sym</a>[128] =</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        0, 0, 18, 19, 20, 20, 21, 21, 22, 22, 22, 22, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    };</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a61e192db27bc59fa5cc3800aadde8d97">  713</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> <a class="code" href="miniz_8cpp.html#a61e192db27bc59fa5cc3800aadde8d97">s_tdefl_large_dist_extra</a>[128] =</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        0, 0, 8, 8, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12,</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    };</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">/* Radix sorts tdefl_sym_freq[] array by 16-bit key m_key. Returns ptr to sorted values. */</span></div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="structtdefl__sym__freq.html">  721</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{</div>
<div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">  723</a></span>&#160;    <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> <a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a>, m_sym_index;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;} <a class="code" href="structtdefl__sym__freq.html">tdefl_sym_freq</a>;</div>
<div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a0069262fcca5eec8151a14d35e801e1c">  725</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structtdefl__sym__freq.html">tdefl_sym_freq</a> *<a class="code" href="miniz_8cpp.html#a0069262fcca5eec8151a14d35e801e1c">tdefl_radix_sort_syms</a>(<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> num_syms, <a class="code" href="structtdefl__sym__freq.html">tdefl_sym_freq</a> *pSyms0, <a class="code" href="structtdefl__sym__freq.html">tdefl_sym_freq</a> *pSyms1)</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> total_passes = 2, pass_shift, pass, i, hist[256 * 2];</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="structtdefl__sym__freq.html">tdefl_sym_freq</a> *pCur_syms = pSyms0, *pNew_syms = pSyms1;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(hist);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; num_syms; i++)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> freq = pSyms0[i].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        hist[freq &amp; 0xFF]++;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        hist[256 + ((freq &gt;&gt; 8) &amp; 0xFF)]++;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">while</span>((total_passes &gt; 1) &amp;&amp; (num_syms == hist[(total_passes - 1) * 256]))</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        total_passes--;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">for</span>(pass_shift = 0, pass = 0; pass &lt; total_passes; pass++, pass_shift += 8)</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *pHist = &amp;hist[pass &lt;&lt; 8];</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> offsets[256], cur_ofs = 0;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; 256; i++)</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            offsets[i] = cur_ofs;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            cur_ofs += pHist[i];</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; num_syms; i++)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            pNew_syms[offsets[(pCur_syms[i].m_key &gt;&gt; pass_shift) &amp; 0xFF]++] = pCur_syms[i];</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <a class="code" href="structtdefl__sym__freq.html">tdefl_sym_freq</a> *t = pCur_syms;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            pCur_syms = pNew_syms;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            pNew_syms = t;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> pCur_syms;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;}</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">/* tdefl_calculate_minimum_redundancy() originally written by: Alistair Moffat, alistair@cs.mu.oz.au, Jyrki Katajainen, jyrki@diku.dk, November 1996. */</span></div>
<div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3a558f4edba2d4f90c80931c5c888267">  759</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a3a558f4edba2d4f90c80931c5c888267">tdefl_calculate_minimum_redundancy</a>(<a class="code" href="structtdefl__sym__freq.html">tdefl_sym_freq</a> *A, <span class="keywordtype">int</span> n)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;{</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordtype">int</span> root, leaf, next, avbl, used, dpth;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span>(n == 0)</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(n == 1)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        A[0].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = 1;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    A[0].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> += A[1].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    root = 0;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    leaf = 2;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">for</span>(next = 1; next &lt; n - 1; next++)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">if</span>(leaf &gt;= n || A[root].m_key &lt; A[leaf].m_key)</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            A[next].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = A[root].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            A[root++].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)next;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            A[next].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = A[leaf++].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordflow">if</span>(leaf &gt;= n || (root &lt; next &amp;&amp; A[root].m_key &lt; A[leaf].m_key))</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            A[next].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)(A[next].m_key + A[root].m_key);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            A[root++].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)next;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            A[next].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)(A[next].m_key + A[leaf++].m_key);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    A[n - 2].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = 0;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">for</span>(next = n - 3; next &gt;= 0; next--)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        A[next].m_key = A[A[next].m_key].m_key + 1;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    avbl = 1;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    used = dpth = 0;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    root = n - 2;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    next = n - 1;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">while</span>(avbl &gt; 0)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">while</span>(root &gt;= 0 &amp;&amp; (<span class="keywordtype">int</span>)A[root].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> == dpth)</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            used++;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            root--;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keywordflow">while</span>(avbl &gt; used)</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            A[next--].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)(dpth);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            avbl--;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        avbl = 2 * used;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        dpth++;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        used = 0;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;}</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">/* Limits canonical Huffman code table&#39;s max code size. */</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="keyword">enum</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;{</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="miniz_8cpp.html#abed82baf7f470b522273a3e37c24c600ad686da58671353e21d237bb0d17065bb">TDEFL_MAX_SUPPORTED_HUFF_CODESIZE</a> = 32</div>
<div class="line"><a name="l00818"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#abed82baf7f470b522273a3e37c24c600ad686da58671353e21d237bb0d17065bb">  818</a></span>&#160;};</div>
<div class="line"><a name="l00819"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a76cdb9a006ad356913fdd684a79014d4">  819</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a76cdb9a006ad356913fdd684a79014d4">tdefl_huffman_enforce_max_code_size</a>(<span class="keywordtype">int</span> *pNum_codes, <span class="keywordtype">int</span> code_list_len, <span class="keywordtype">int</span> max_code_size)</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;{</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> total = 0;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">if</span>(code_list_len &lt;= 1)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">for</span>(i = max_code_size + 1; i &lt;= <a class="code" href="miniz_8cpp.html#abed82baf7f470b522273a3e37c24c600ad686da58671353e21d237bb0d17065bb">TDEFL_MAX_SUPPORTED_HUFF_CODESIZE</a>; i++)</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        pNum_codes[max_code_size] += pNum_codes[i];</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">for</span>(i = max_code_size; i &gt; 0; i--)</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        total += (((<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)pNum_codes[i]) &lt;&lt; (max_code_size - i));</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">while</span>(total != (1UL &lt;&lt; max_code_size))</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        pNum_codes[max_code_size]--;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordflow">for</span>(i = max_code_size - 1; i &gt; 0; i--)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <span class="keywordflow">if</span>(pNum_codes[i])</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                pNum_codes[i]--;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                pNum_codes[i + 1] += 2;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        total--;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;}</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac61bf564b19275ee3dcf44a7b6c2e214">  843</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#ac61bf564b19275ee3dcf44a7b6c2e214">tdefl_optimize_huffman_table</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <span class="keywordtype">int</span> table_num, <span class="keywordtype">int</span> table_len, <span class="keywordtype">int</span> code_size_limit, <span class="keywordtype">int</span> static_table)</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;{</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordtype">int</span> i, j, l, num_codes[1 + <a class="code" href="miniz_8cpp.html#abed82baf7f470b522273a3e37c24c600ad686da58671353e21d237bb0d17065bb">TDEFL_MAX_SUPPORTED_HUFF_CODESIZE</a>];</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> next_code[<a class="code" href="miniz_8cpp.html#abed82baf7f470b522273a3e37c24c600ad686da58671353e21d237bb0d17065bb">TDEFL_MAX_SUPPORTED_HUFF_CODESIZE</a> + 1];</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(num_codes);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">if</span>(static_table)</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; table_len; i++)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            num_codes[d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[table_num][i]]++;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <a class="code" href="structtdefl__sym__freq.html">tdefl_sym_freq</a> syms0[<a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa0a40feaf86d8aed58861a6bd3964b2f4">TDEFL_MAX_HUFF_SYMBOLS</a>], syms1[<a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa0a40feaf86d8aed58861a6bd3964b2f4">TDEFL_MAX_HUFF_SYMBOLS</a>], *pSyms;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordtype">int</span> num_used_syms = 0;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *pSym_count = &amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[table_num][0];</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; table_len; i++)</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="keywordflow">if</span>(pSym_count[i])</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                syms0[num_used_syms].<a class="code" href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">m_key</a> = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)pSym_count[i];</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                syms0[num_used_syms++].<a class="code" href="structtdefl__sym__freq.html#a17b56e7162419d3ea5fe175d3f1c855e">m_sym_index</a> = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)i;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        pSyms = <a class="code" href="miniz_8cpp.html#a0069262fcca5eec8151a14d35e801e1c">tdefl_radix_sort_syms</a>(num_used_syms, syms0, syms1);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <a class="code" href="miniz_8cpp.html#a3a558f4edba2d4f90c80931c5c888267">tdefl_calculate_minimum_redundancy</a>(pSyms, num_used_syms);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; num_used_syms; i++)</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            num_codes[pSyms[i].m_key]++;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <a class="code" href="miniz_8cpp.html#a76cdb9a006ad356913fdd684a79014d4">tdefl_huffman_enforce_max_code_size</a>(num_codes, num_used_syms, code_size_limit);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[table_num]);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[table_num]);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">for</span>(i = 1, j = num_used_syms; i &lt;= code_size_limit; i++)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            <span class="keywordflow">for</span>(l = num_codes[i]; l &gt; 0; l--)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[table_num][pSyms[--j].<a class="code" href="structtdefl__sym__freq.html#a17b56e7162419d3ea5fe175d3f1c855e">m_sym_index</a>] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(i);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    next_code[1] = 0;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">for</span>(j = 0, i = 2; i &lt;= code_size_limit; i++)</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        next_code[i] = j = ((j + num_codes[i - 1]) &lt;&lt; 1);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; table_len; i++)</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> rev_code = 0, code, code_size;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordflow">if</span>((code_size = d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[table_num][i]) == 0)</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        code = next_code[code_size]++;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordflow">for</span>(l = code_size; l &gt; 0; l--, code &gt;&gt;= 1)</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            rev_code = (rev_code &lt;&lt; 1) | (code &amp; 1);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[table_num][i] = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)rev_code;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">  896</a></span>&#160;<span class="preprocessor">#define TDEFL_PUT_BITS(b, l)                                       \</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="preprocessor">    do                                                             \</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="preprocessor">    {                                                              \</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="preprocessor">        mz_uint bits = b;                                          \</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="preprocessor">        mz_uint len = l;                                           \</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="preprocessor">        MZ_ASSERT(bits &lt;= ((1U &lt;&lt; len) - 1U));                     \</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="preprocessor">        d-&gt;m_bit_buffer |= (bits &lt;&lt; d-&gt;m_bits_in);                 \</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="preprocessor">        d-&gt;m_bits_in += len;                                       \</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="preprocessor">        while(d-&gt;m_bits_in &gt;= 8)                                  \</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">        {                                                          \</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="preprocessor">            if(d-&gt;m_pOutput_buf &lt; d-&gt;m_pOutput_buf_end)           \</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="preprocessor">                *d-&gt;m_pOutput_buf++ = (mz_uint8)(d-&gt;m_bit_buffer); \</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="preprocessor">            d-&gt;m_bit_buffer &gt;&gt;= 8;                                 \</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="preprocessor">            d-&gt;m_bits_in -= 8;                                     \</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="preprocessor">        }                                                          \</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="preprocessor">    }                                                              \</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="preprocessor">    MZ_MACRO_END</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#af22ccc4520994a5f54caa5a43a75d012">  914</a></span>&#160;<span class="preprocessor">#define TDEFL_RLE_PREV_CODE_SIZE()                                                                                       \</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="preprocessor">    {                                                                                                                    \</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="preprocessor">        if(rle_repeat_count)                                                                                            \</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">        {                                                                                                                \</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="preprocessor">            if(rle_repeat_count &lt; 3)                                                                                    \</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="preprocessor">            {                                                                                                            \</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="preprocessor">                d-&gt;m_huff_count[2][prev_code_size] = (mz_uint16)(d-&gt;m_huff_count[2][prev_code_size] + rle_repeat_count); \</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="preprocessor">                while(rle_repeat_count--)                                                                               \</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="preprocessor">                    packed_code_sizes[num_packed_code_sizes++] = prev_code_size;                                         \</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="preprocessor">            }                                                                                                            \</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="preprocessor">            else                                                                                                         \</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="preprocessor">            {                                                                                                            \</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="preprocessor">                d-&gt;m_huff_count[2][16] = (mz_uint16)(d-&gt;m_huff_count[2][16] + 1);                                        \</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="preprocessor">                packed_code_sizes[num_packed_code_sizes++] = 16;                                                         \</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="preprocessor">                packed_code_sizes[num_packed_code_sizes++] = (mz_uint8)(rle_repeat_count - 3);                           \</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="preprocessor">            }                                                                                                            \</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="preprocessor">            rle_repeat_count = 0;                                                                                        \</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="preprocessor">        }                                                                                                                \</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="preprocessor">    }</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a30333e6e68452b9e96ee7c5141f2b506">  934</a></span>&#160;<span class="preprocessor">#define TDEFL_RLE_ZERO_CODE_SIZE()                                                         \</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="preprocessor">    {                                                                                      \</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="preprocessor">        if(rle_z_count)                                                                   \</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="preprocessor">        {                                                                                  \</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="preprocessor">            if(rle_z_count &lt; 3)                                                           \</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="preprocessor">            {                                                                              \</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="preprocessor">                d-&gt;m_huff_count[2][0] = (mz_uint16)(d-&gt;m_huff_count[2][0] + rle_z_count);  \</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="preprocessor">                while(rle_z_count--)                                                      \</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="preprocessor">                    packed_code_sizes[num_packed_code_sizes++] = 0;                        \</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="preprocessor">            }                                                                              \</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="preprocessor">            else if(rle_z_count &lt;= 10)                                                    \</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="preprocessor">            {                                                                              \</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="preprocessor">                d-&gt;m_huff_count[2][17] = (mz_uint16)(d-&gt;m_huff_count[2][17] + 1);          \</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="preprocessor">                packed_code_sizes[num_packed_code_sizes++] = 17;                           \</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="preprocessor">                packed_code_sizes[num_packed_code_sizes++] = (mz_uint8)(rle_z_count - 3);  \</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="preprocessor">            }                                                                              \</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="preprocessor">            else                                                                           \</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="preprocessor">            {                                                                              \</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="preprocessor">                d-&gt;m_huff_count[2][18] = (mz_uint16)(d-&gt;m_huff_count[2][18] + 1);          \</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="preprocessor">                packed_code_sizes[num_packed_code_sizes++] = 18;                           \</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="preprocessor">                packed_code_sizes[num_packed_code_sizes++] = (mz_uint8)(rle_z_count - 11); \</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="preprocessor">            }                                                                              \</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="preprocessor">            rle_z_count = 0;                                                               \</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="preprocessor">        }                                                                                  \</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="preprocessor">    }</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#abcfd71697c3d190d2493720d56bc0ca2">  960</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> <a class="code" href="miniz_8cpp.html#abcfd71697c3d190d2493720d56bc0ca2">s_tdefl_packed_code_size_syms_swizzle</a>[] = { 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 };</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2495a765ac27434a15efab455434e7f7">  962</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a2495a765ac27434a15efab455434e7f7">tdefl_start_dynamic_block</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d)</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;{</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordtype">int</span> num_lit_codes, num_dist_codes, num_bit_lengths;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i, total_code_sizes_to_pack, num_packed_code_sizes, rle_z_count, rle_repeat_count, packed_code_sizes_index;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> code_sizes_to_pack[<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea30643ecd31dedddcdb265685027c3730">TDEFL_MAX_HUFF_SYMBOLS_0</a> + <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceab31107f9bbadea4b9a371a4c52885471">TDEFL_MAX_HUFF_SYMBOLS_1</a>], packed_code_sizes[<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea30643ecd31dedddcdb265685027c3730">TDEFL_MAX_HUFF_SYMBOLS_0</a> + <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceab31107f9bbadea4b9a371a4c52885471">TDEFL_MAX_HUFF_SYMBOLS_1</a>], prev_code_size = 0xFF;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][256] = 1;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <a class="code" href="miniz_8cpp.html#ac61bf564b19275ee3dcf44a7b6c2e214">tdefl_optimize_huffman_table</a>(d, 0, <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea30643ecd31dedddcdb265685027c3730">TDEFL_MAX_HUFF_SYMBOLS_0</a>, 15, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <a class="code" href="miniz_8cpp.html#ac61bf564b19275ee3dcf44a7b6c2e214">tdefl_optimize_huffman_table</a>(d, 1, <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceab31107f9bbadea4b9a371a4c52885471">TDEFL_MAX_HUFF_SYMBOLS_1</a>, 15, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">for</span>(num_lit_codes = 286; num_lit_codes &gt; 257; num_lit_codes--)</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][num_lit_codes - 1])</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">for</span>(num_dist_codes = 30; num_dist_codes &gt; 1; num_dist_codes--)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[1][num_dist_codes - 1])</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(code_sizes_to_pack, &amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][0], num_lit_codes);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(code_sizes_to_pack + num_lit_codes, &amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[1][0], num_dist_codes);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    total_code_sizes_to_pack = num_lit_codes + num_dist_codes;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    num_packed_code_sizes = 0;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    rle_z_count = 0;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    rle_repeat_count = 0;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[2][0], 0, <span class="keyword">sizeof</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[2][0]) * <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceae84d30193f96d7234e473ee98ee25087">TDEFL_MAX_HUFF_SYMBOLS_2</a>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; total_code_sizes_to_pack; i++)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> code_size = code_sizes_to_pack[i];</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordflow">if</span>(!code_size)</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <a class="code" href="miniz_8cpp.html#af22ccc4520994a5f54caa5a43a75d012">TDEFL_RLE_PREV_CODE_SIZE</a>();</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <span class="keywordflow">if</span>(++rle_z_count == 138)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                <a class="code" href="miniz_8cpp.html#a30333e6e68452b9e96ee7c5141f2b506">TDEFL_RLE_ZERO_CODE_SIZE</a>();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <a class="code" href="miniz_8cpp.html#a30333e6e68452b9e96ee7c5141f2b506">TDEFL_RLE_ZERO_CODE_SIZE</a>();</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">if</span>(code_size != prev_code_size)</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                <a class="code" href="miniz_8cpp.html#af22ccc4520994a5f54caa5a43a75d012">TDEFL_RLE_PREV_CODE_SIZE</a>();</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[2][code_size] = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)(d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[2][code_size] + 1);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                packed_code_sizes[num_packed_code_sizes++] = code_size;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(++rle_repeat_count == 6)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                <a class="code" href="miniz_8cpp.html#af22ccc4520994a5f54caa5a43a75d012">TDEFL_RLE_PREV_CODE_SIZE</a>();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        prev_code_size = code_size;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">if</span>(rle_repeat_count)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <a class="code" href="miniz_8cpp.html#af22ccc4520994a5f54caa5a43a75d012">TDEFL_RLE_PREV_CODE_SIZE</a>();</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="miniz_8cpp.html#a30333e6e68452b9e96ee7c5141f2b506">TDEFL_RLE_ZERO_CODE_SIZE</a>();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160; </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <a class="code" href="miniz_8cpp.html#ac61bf564b19275ee3dcf44a7b6c2e214">tdefl_optimize_huffman_table</a>(d, 2, <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceae84d30193f96d7234e473ee98ee25087">TDEFL_MAX_HUFF_SYMBOLS_2</a>, 7, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(2, 2);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(num_lit_codes - 257, 5);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(num_dist_codes - 1, 5);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">for</span>(num_bit_lengths = 18; num_bit_lengths &gt;= 0; num_bit_lengths--)</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[2][<a class="code" href="miniz_8cpp.html#abcfd71697c3d190d2493720d56bc0ca2">s_tdefl_packed_code_size_syms_swizzle</a>[num_bit_lengths]])</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    num_bit_lengths = <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(4, (num_bit_lengths + 1));</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(num_bit_lengths - 4, 4);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">for</span>(i = 0; (int)i &lt; num_bit_lengths; i++)</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[2][<a class="code" href="miniz_8cpp.html#abcfd71697c3d190d2493720d56bc0ca2">s_tdefl_packed_code_size_syms_swizzle</a>[i]], 3);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">for</span>(packed_code_sizes_index = 0; packed_code_sizes_index &lt; num_packed_code_sizes;)</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> code = packed_code_sizes[packed_code_sizes_index++];</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(code &lt; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceae84d30193f96d7234e473ee98ee25087">TDEFL_MAX_HUFF_SYMBOLS_2</a>);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[2][code], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[2][code]);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">if</span>(code &gt;= 16)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(packed_code_sizes[packed_code_sizes_index++], <span class="stringliteral">&quot;\02\03\07&quot;</span>[code - 16]);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;}</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a77bb6572e95227d4a0e7eff475e1ca35"> 1049</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a77bb6572e95227d4a0e7eff475e1ca35">tdefl_start_static_block</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;{</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p = &amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][0];</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt;= 143; ++i)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        *p++ = 8;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">for</span>(; i &lt;= 255; ++i)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        *p++ = 9;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">for</span>(; i &lt;= 279; ++i)</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        *p++ = 7;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">for</span>(; i &lt;= 287; ++i)</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        *p++ = 8;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[1], 5, 32);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <a class="code" href="miniz_8cpp.html#ac61bf564b19275ee3dcf44a7b6c2e214">tdefl_optimize_huffman_table</a>(d, 0, 288, 15, <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <a class="code" href="miniz_8cpp.html#ac61bf564b19275ee3dcf44a7b6c2e214">tdefl_optimize_huffman_table</a>(d, 1, 32, 15, <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(1, 2);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;}</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab5ec1195b9190fe4ddedd7b1b9d38222"> 1071</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> <a class="code" href="miniz_8cpp.html#ab5ec1195b9190fe4ddedd7b1b9d38222">mz_bitmasks</a>[17] = { 0x0000, 0x0001, 0x0003, 0x0007, 0x000F, 0x001F, 0x003F, 0x007F, 0x00FF, 0x01FF, 0x03FF, 0x07FF, 0x0FFF, 0x1FFF, 0x3FFF, 0x7FFF, 0xFFFF };</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="preprocessor">#if MINIZ_USE_UNALIGNED_LOADS_AND_STORES &amp;&amp;MINIZ_LITTLE_ENDIAN &amp;&amp;MINIZ_HAS_64BIT_REGISTERS</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a3c9a86d4f0f78987f13f113276127114">tdefl_compress_lz_codes</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d)</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;{</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pLZ_codes;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pOutput_buf = d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pLZ_code_buf_end = d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> bit_buffer = d-&gt;<a class="code" href="structtdefl__compressor.html#aa284ab359fd885497d90995e2f6aec10">m_bit_buffer</a>;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> bits_in = d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a>;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="preprocessor">#define TDEFL_PUT_BITS_FAST(b, l)                    \</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="preprocessor">    {                                                \</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="preprocessor">        bit_buffer |= (((mz_uint64)(b)) &lt;&lt; bits_in); \</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="preprocessor">        bits_in += (l);                              \</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="preprocessor">    }</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    flags = 1;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">for</span>(pLZ_codes = d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a>; pLZ_codes &lt; pLZ_code_buf_end; flags &gt;&gt;= 1)</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">if</span>(flags == 1)</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            flags = *pLZ_codes++ | 0x100;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keywordflow">if</span>(flags &amp; 1)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> s0, <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>, n0, n1, sym, num_extra_bits;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> match_len = pLZ_codes[0], match_dist = *(<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *)(pLZ_codes + 1);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            pLZ_codes += 3;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][<a class="code" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a>[match_len]]);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            TDEFL_PUT_BITS_FAST(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[0][<a class="code" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a>[match_len]], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][<a class="code" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a>[match_len]]);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            TDEFL_PUT_BITS_FAST(match_len &amp; <a class="code" href="miniz_8cpp.html#ab5ec1195b9190fe4ddedd7b1b9d38222">mz_bitmasks</a>[<a class="code" href="miniz_8cpp.html#a0bfacd5da9a6e0f26f84fdbb7f7309ef">s_tdefl_len_extra</a>[match_len]], <a class="code" href="miniz_8cpp.html#a0bfacd5da9a6e0f26f84fdbb7f7309ef">s_tdefl_len_extra</a>[match_len]);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <span class="comment">/* This sequence coaxes MSVC into using cmov&#39;s vs. jmp&#39;s. */</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            s0 = <a class="code" href="miniz_8cpp.html#a3b07b4b3e26dd52c6bf6289ef88c76e0">s_tdefl_small_dist_sym</a>[match_dist &amp; 511];</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            n0 = <a class="code" href="miniz_8cpp.html#a4e100642a6f096d6bc8926a59bc909f8">s_tdefl_small_dist_extra</a>[match_dist &amp; 511];</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> = <a class="code" href="miniz_8cpp.html#ac781072b961db555ae58d396ca0e4527">s_tdefl_large_dist_sym</a>[match_dist &gt;&gt; 8];</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            n1 = <a class="code" href="miniz_8cpp.html#a61e192db27bc59fa5cc3800aadde8d97">s_tdefl_large_dist_extra</a>[match_dist &gt;&gt; 8];</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            sym = (match_dist &lt; 512) ? s0 : <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            num_extra_bits = (match_dist &lt; 512) ? n0 : n1;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[1][sym]);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            TDEFL_PUT_BITS_FAST(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[1][sym], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[1][sym]);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            TDEFL_PUT_BITS_FAST(match_dist &amp; <a class="code" href="miniz_8cpp.html#ab5ec1195b9190fe4ddedd7b1b9d38222">mz_bitmasks</a>[num_extra_bits], num_extra_bits);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> lit = *pLZ_codes++;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][lit]);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            TDEFL_PUT_BITS_FAST(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[0][lit], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][lit]);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            <span class="keywordflow">if</span>(((flags &amp; 2) == 0) &amp;&amp; (pLZ_codes &lt; pLZ_code_buf_end))</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            {</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                flags &gt;&gt;= 1;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                lit = *pLZ_codes++;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][lit]);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                TDEFL_PUT_BITS_FAST(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[0][lit], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][lit]);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                <span class="keywordflow">if</span>(((flags &amp; 2) == 0) &amp;&amp; (pLZ_codes &lt; pLZ_code_buf_end))</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                    flags &gt;&gt;= 1;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                    lit = *pLZ_codes++;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][lit]);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                    TDEFL_PUT_BITS_FAST(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[0][lit], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][lit]);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            }</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        }</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">if</span>(pOutput_buf &gt;= d-&gt;<a class="code" href="structtdefl__compressor.html#aa790d06026f9cd65e5ab373c46447694">m_pOutput_buf_end</a>)</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        *(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> *)pOutput_buf = bit_buffer;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        pOutput_buf += (bits_in &gt;&gt; 3);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        bit_buffer &gt;&gt;= (bits_in &amp; ~7);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        bits_in &amp;= 7;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="preprocessor">#undef TDEFL_PUT_BITS_FAST</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> = pOutput_buf;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a> = 0;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#aa284ab359fd885497d90995e2f6aec10">m_bit_buffer</a> = 0;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">while</span>(bits_in)</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> n = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(bits_in, 16);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>((<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)bit_buffer &amp; <a class="code" href="miniz_8cpp.html#ab5ec1195b9190fe4ddedd7b1b9d38222">mz_bitmasks</a>[n], n);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        bit_buffer &gt;&gt;= n;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        bits_in -= n;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[0][256], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][256]);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160; </div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">return</span> (d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> &lt; d-&gt;<a class="code" href="structtdefl__compressor.html#aa790d06026f9cd65e5ab373c46447694">m_pOutput_buf_end</a>);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;}</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3c9a86d4f0f78987f13f113276127114"> 1168</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a3c9a86d4f0f78987f13f113276127114">tdefl_compress_lz_codes</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d)</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;{</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pLZ_codes;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    flags = 1;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">for</span>(pLZ_codes = d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a>; pLZ_codes &lt; d-&gt;m_pLZ_code_buf; flags &gt;&gt;= 1)</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">if</span>(flags == 1)</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            flags = *pLZ_codes++ | 0x100;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <span class="keywordflow">if</span>(flags &amp; 1)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> sym, num_extra_bits;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> match_len = pLZ_codes[0], match_dist = (pLZ_codes[1] | (pLZ_codes[2] &lt;&lt; 8));</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            pLZ_codes += 3;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][<a class="code" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a>[match_len]]);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[0][<a class="code" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a>[match_len]], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][<a class="code" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a>[match_len]]);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(match_len &amp; <a class="code" href="miniz_8cpp.html#ab5ec1195b9190fe4ddedd7b1b9d38222">mz_bitmasks</a>[<a class="code" href="miniz_8cpp.html#a0bfacd5da9a6e0f26f84fdbb7f7309ef">s_tdefl_len_extra</a>[match_len]], <a class="code" href="miniz_8cpp.html#a0bfacd5da9a6e0f26f84fdbb7f7309ef">s_tdefl_len_extra</a>[match_len]);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            <span class="keywordflow">if</span>(match_dist &lt; 512)</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                sym = <a class="code" href="miniz_8cpp.html#a3b07b4b3e26dd52c6bf6289ef88c76e0">s_tdefl_small_dist_sym</a>[match_dist];</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                num_extra_bits = <a class="code" href="miniz_8cpp.html#a4e100642a6f096d6bc8926a59bc909f8">s_tdefl_small_dist_extra</a>[match_dist];</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            {</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                sym = <a class="code" href="miniz_8cpp.html#ac781072b961db555ae58d396ca0e4527">s_tdefl_large_dist_sym</a>[match_dist &gt;&gt; 8];</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                num_extra_bits = <a class="code" href="miniz_8cpp.html#a61e192db27bc59fa5cc3800aadde8d97">s_tdefl_large_dist_extra</a>[match_dist &gt;&gt; 8];</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[1][sym]);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[1][sym], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[1][sym]);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(match_dist &amp; <a class="code" href="miniz_8cpp.html#ab5ec1195b9190fe4ddedd7b1b9d38222">mz_bitmasks</a>[num_extra_bits], num_extra_bits);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> lit = *pLZ_codes++;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][lit]);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[0][lit], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][lit]);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">m_huff_codes</a>[0][256], d-&gt;<a class="code" href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">m_huff_code_sizes</a>[0][256]);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">return</span> (d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> &lt; d-&gt;<a class="code" href="structtdefl__compressor.html#aa790d06026f9cd65e5ab373c46447694">m_pOutput_buf_end</a>);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MINIZ_USE_UNALIGNED_LOADS_AND_STORES &amp;&amp; MINIZ_LITTLE_ENDIAN &amp;&amp; MINIZ_HAS_64BIT_REGISTERS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ad390ee6c264106529198b6c5b6c6d96b"> 1216</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ad390ee6c264106529198b6c5b6c6d96b">tdefl_compress_block</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> static_block)</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;{</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keywordflow">if</span>(static_block)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <a class="code" href="miniz_8cpp.html#a77bb6572e95227d4a0e7eff475e1ca35">tdefl_start_static_block</a>(d);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <a class="code" href="miniz_8cpp.html#a2495a765ac27434a15efab455434e7f7">tdefl_start_dynamic_block</a>(d);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a3c9a86d4f0f78987f13f113276127114">tdefl_compress_lz_codes</a>(d);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160; </div>
<div class="line"><a name="l01225"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a1adafac587d2839277822cea5bdc224d"> 1225</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a1adafac587d2839277822cea5bdc224d">tdefl_flush_block</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <span class="keywordtype">int</span> flush)</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;{</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> saved_bit_buf, saved_bits_in;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSaved_output_buf;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> comp_block_succeeded = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordtype">int</span> n, use_raw_block = ((d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a24f00beb8f787cbdf73b33a535be747b">TDEFL_FORCE_ALL_RAW_BLOCKS</a>) != 0) &amp;&amp; (d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> - d-&gt;<a class="code" href="structtdefl__compressor.html#abd08bd557ee4ad3d37667a9efbe27b08">m_lz_code_buf_dict_pos</a>) &lt;= d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a>;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pOutput_buf_start = ((d-&gt;<a class="code" href="structtdefl__compressor.html#a744d78e0e02c77ff224a3a2eefc6c39f">m_pPut_buf_func</a> == NULL) &amp;&amp; ((*d-&gt;<a class="code" href="structtdefl__compressor.html#a2629e9f8046f0d2d8898303ed6e50fbf">m_pOut_buf_size</a> - d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a>) &gt;= <a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaad79ca716ebec4ef5fa4752f32acc9418">TDEFL_OUT_BUF_SIZE</a>)) ? ((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)d-&gt;<a class="code" href="structtdefl__compressor.html#abaf4c7afc0fc8e487340c3461e8028a4">m_pOut_buf</a> + d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a>) : d-&gt;<a class="code" href="structtdefl__compressor.html#af3767449a43c686c7870b4bf939c878a">m_output_buf</a>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> = pOutput_buf_start;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#aa790d06026f9cd65e5ab373c46447694">m_pOutput_buf_end</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> + <a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaad79ca716ebec4ef5fa4752f32acc9418">TDEFL_OUT_BUF_SIZE</a> - 16;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(!d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a8d5490f8411406a1e368f21f978c1aa7">m_output_flush_ofs</a> = 0;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a> = 0;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    *d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(*d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> &gt;&gt; d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a>);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a> -= (d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> == 8);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160; </div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span>((d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25addb3970da5e697152049482043174c63">TDEFL_WRITE_ZLIB_HEADER</a>) &amp;&amp; (!d-&gt;<a class="code" href="structtdefl__compressor.html#a06aa0468391490b3279acb1877475d9a">m_block_index</a>))</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(0x78, 8);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(0x01, 8);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(flush == <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a>, 1);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    pSaved_output_buf = d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    saved_bit_buf = d-&gt;<a class="code" href="structtdefl__compressor.html#aa284ab359fd885497d90995e2f6aec10">m_bit_buffer</a>;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    saved_bits_in = d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a>;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">if</span>(!use_raw_block)</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        comp_block_succeeded = <a class="code" href="miniz_8cpp.html#ad390ee6c264106529198b6c5b6c6d96b">tdefl_compress_block</a>(d, (d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a8fd3e432af0453833eb7168b8f63a064">TDEFL_FORCE_ALL_STATIC_BLOCKS</a>) || (d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> &lt; 48));</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">/* If the block gets expanded, forget the current contents of the output buffer and send a raw block instead. */</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">if</span>(((use_raw_block) || ((d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a>) &amp;&amp; ((d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> - pSaved_output_buf + 1U) &gt;= d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a>))) &amp;&amp;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        ((d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> - d-&gt;<a class="code" href="structtdefl__compressor.html#abd08bd557ee4ad3d37667a9efbe27b08">m_lz_code_buf_dict_pos</a>) &lt;= d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a>))</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> = pSaved_output_buf;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#aa284ab359fd885497d90995e2f6aec10">m_bit_buffer</a> = saved_bit_buf, d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a> = saved_bits_in;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(0, 2);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a>)</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(0, 8 - d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a>);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="keywordflow">for</span>(i = 2; i; --i, d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> ^= 0xFFFF)</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> &amp; 0xFFFF, 16);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a>; ++i)</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[(d-&gt;<a class="code" href="structtdefl__compressor.html#abd08bd557ee4ad3d37667a9efbe27b08">m_lz_code_buf_dict_pos</a> + i) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>], 8);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="comment">/* Check for the extremely unlikely (if not impossible) case of the compressed block not fitting into the output buffer when using dynamic codes. */</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!comp_block_succeeded)</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> = pSaved_output_buf;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#aa284ab359fd885497d90995e2f6aec10">m_bit_buffer</a> = saved_bit_buf, d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a> = saved_bits_in;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <a class="code" href="miniz_8cpp.html#ad390ee6c264106529198b6c5b6c6d96b">tdefl_compress_block</a>(d, <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    }</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160; </div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordflow">if</span>(flush)</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="keywordflow">if</span>(flush == <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a>)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a>)</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(0, 8 - d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a>);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;            }</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25addb3970da5e697152049482043174c63">TDEFL_WRITE_ZLIB_HEADER</a>)</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i, a = d-&gt;<a class="code" href="structtdefl__compressor.html#aee1dafacfd0672f0940e391dcb26852f">m_adler32</a>;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                <span class="keywordflow">for</span>(i = 0; i &lt; 4; i++)</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                    <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>((a &gt;&gt; 24) &amp; 0xFF, 8);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                    a &lt;&lt;= 8;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            }</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i, z = 0;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(0, 3);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a>)</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(0, 8 - d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a>);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            }</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="keywordflow">for</span>(i = 2; i; --i, z ^= 0xFFFF)</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                <a class="code" href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a>(z &amp; 0xFFFF, 16);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> &lt; d-&gt;<a class="code" href="structtdefl__compressor.html#aa790d06026f9cd65e5ab373c46447694">m_pOutput_buf_end</a>);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][0], 0, <span class="keyword">sizeof</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][0]) * <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea30643ecd31dedddcdb265685027c3730">TDEFL_MAX_HUFF_SYMBOLS_0</a>);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[1][0], 0, <span class="keyword">sizeof</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[1][0]) * <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceab31107f9bbadea4b9a371a4c52885471">TDEFL_MAX_HUFF_SYMBOLS_1</a>);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a> + 1;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> = 8;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#abd08bd557ee4ad3d37667a9efbe27b08">m_lz_code_buf_dict_pos</a> += d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a>;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> = 0;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a06aa0468391490b3279acb1877475d9a">m_block_index</a>++;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">if</span>((n = (<span class="keywordtype">int</span>)(d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> - pOutput_buf_start)) != 0)</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#a744d78e0e02c77ff224a3a2eefc6c39f">m_pPut_buf_func</a>)</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            *d-&gt;<a class="code" href="structtdefl__compressor.html#ae8da57cd67dace66f2e45ee1a51cb11f">m_pIn_buf_size</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a> - (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)d-&gt;<a class="code" href="structtdefl__compressor.html#ac131b5e6ff8ca9af418b01eefd77c7f9">m_pIn_buf</a>;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            <span class="keywordflow">if</span>(!(*d-&gt;<a class="code" href="structtdefl__compressor.html#a744d78e0e02c77ff224a3a2eefc6c39f">m_pPut_buf_func</a>)(d-&gt;<a class="code" href="structtdefl__compressor.html#af3767449a43c686c7870b4bf939c878a">m_output_buf</a>, n, d-&gt;<a class="code" href="structtdefl__compressor.html#ad495682142ede0ea54a774a45a1e4145">m_pPut_buf_user</a>))</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                <span class="keywordflow">return</span> (d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a> = <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fad33a46f2b32817746e26144ecb16687f">TDEFL_STATUS_PUT_BUF_FAILED</a>);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pOutput_buf_start == d-&gt;<a class="code" href="structtdefl__compressor.html#af3767449a43c686c7870b4bf939c878a">m_output_buf</a>)</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            <span class="keywordtype">int</span> bytes_to_copy = (int)<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>((<span class="keywordtype">size_t</span>)n, (size_t)(*d-&gt;<a class="code" href="structtdefl__compressor.html#a2629e9f8046f0d2d8898303ed6e50fbf">m_pOut_buf_size</a> - d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a>));</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)d-&gt;<a class="code" href="structtdefl__compressor.html#abaf4c7afc0fc8e487340c3461e8028a4">m_pOut_buf</a> + d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a>, d-&gt;<a class="code" href="structtdefl__compressor.html#af3767449a43c686c7870b4bf939c878a">m_output_buf</a>, bytes_to_copy);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a> += bytes_to_copy;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            <span class="keywordflow">if</span>((n -= bytes_to_copy) != 0)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a8d5490f8411406a1e368f21f978c1aa7">m_output_flush_ofs</a> = bytes_to_copy;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a> = n;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a> += n;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    }</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; </div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">return</span> d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;}</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="preprocessor">#if MINIZ_USE_UNALIGNED_LOADS_AND_STORES</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="preprocessor">#define TDEFL_READ_UNALIGNED_WORD(p) *(const mz_uint16 *)(p)</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a8f35610f83a9e48c72183389473c9ed9">tdefl_find_match</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> lookahead_pos, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> max_dist, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> max_match_len, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> *pMatch_dist, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> *pMatch_len)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;{</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> dist, <a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a> = lookahead_pos &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>, match_len = *pMatch_len, probe_pos = <a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a>, next_probe_pos, probe_len;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> num_probes_left = d-&gt;<a class="code" href="structtdefl__compressor.html#a019a2a421ee743e69dc0b3abdad00d67">m_max_probes</a>[match_len &gt;= 32];</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *s = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *)(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a> + <a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a>), *p, *q;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> c01 = TDEFL_READ_UNALIGNED_WORD(&amp;d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a> + match_len - 1]), s01 = TDEFL_READ_UNALIGNED_WORD(s);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(max_match_len &lt;= <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a>);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordflow">if</span>(max_match_len &lt;= match_len)</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    {</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        {</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            <span class="keywordflow">if</span>(--num_probes_left == 0)</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="preprocessor">#define TDEFL_PROBE                                                                             \</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="preprocessor">    next_probe_pos = d-&gt;m_next[probe_pos];                                                      \</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="preprocessor">    if((!next_probe_pos) || ((dist = (mz_uint16)(lookahead_pos - next_probe_pos)) &gt; max_dist)) \</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="preprocessor">        return;                                                                                 \</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="preprocessor">    probe_pos = next_probe_pos &amp; TDEFL_LZ_DICT_SIZE_MASK;                                       \</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="preprocessor">    if(TDEFL_READ_UNALIGNED_WORD(&amp;d-&gt;m_dict[probe_pos + match_len - 1]) == c01)                \</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="preprocessor">        break;</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;            <a class="code" href="miniz_8cpp.html#ac784b1f49138601c5d8daab0d17f9e83">TDEFL_PROBE</a>;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;            <a class="code" href="miniz_8cpp.html#ac784b1f49138601c5d8daab0d17f9e83">TDEFL_PROBE</a>;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            <a class="code" href="miniz_8cpp.html#ac784b1f49138601c5d8daab0d17f9e83">TDEFL_PROBE</a>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <span class="keywordflow">if</span>(!dist)</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        q = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *)(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a> + probe_pos);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="keywordflow">if</span>(TDEFL_READ_UNALIGNED_WORD(q) != s01)</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        p = s;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        probe_len = 32;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        } <span class="keywordflow">while</span>((TDEFL_READ_UNALIGNED_WORD(++p) == TDEFL_READ_UNALIGNED_WORD(++q)) &amp;&amp; (TDEFL_READ_UNALIGNED_WORD(++p) == TDEFL_READ_UNALIGNED_WORD(++q)) &amp;&amp;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                 (TDEFL_READ_UNALIGNED_WORD(++p) == TDEFL_READ_UNALIGNED_WORD(++q)) &amp;&amp; (TDEFL_READ_UNALIGNED_WORD(++p) == TDEFL_READ_UNALIGNED_WORD(++q)) &amp;&amp; (--probe_len &gt; 0));</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <span class="keywordflow">if</span>(!probe_len)</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            *pMatch_dist = dist;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            *pMatch_len = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(max_match_len, (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a>);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        }</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((probe_len = ((<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)(p - s) * 2) + (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)(*(<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)p == *(<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)q)) &gt; match_len)</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            *pMatch_dist = dist;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            <span class="keywordflow">if</span>((*pMatch_len = match_len = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(max_match_len, probe_len)) == max_match_len)</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;            c01 = TDEFL_READ_UNALIGNED_WORD(&amp;d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a> + match_len - 1]);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        }</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;}</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a8f35610f83a9e48c72183389473c9ed9"> 1415</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a8f35610f83a9e48c72183389473c9ed9">tdefl_find_match</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> lookahead_pos, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> max_dist, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> max_match_len, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> *pMatch_dist, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> *pMatch_len)</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;{</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> dist, <a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a> = lookahead_pos &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>, match_len = *pMatch_len, probe_pos = <a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a>, next_probe_pos, probe_len;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> num_probes_left = d-&gt;<a class="code" href="structtdefl__compressor.html#a019a2a421ee743e69dc0b3abdad00d67">m_max_probes</a>[match_len &gt;= 32];</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *s = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a> + <a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a>, *p, *q;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> c0 = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a> + match_len], c1 = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a> + match_len - 1];</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(max_match_len &lt;= <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a>);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordflow">if</span>(max_match_len &lt;= match_len)</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <span class="keywordflow">if</span>(--num_probes_left == 0)</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="preprocessor">#define TDEFL_PROBE                                                                               \</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="preprocessor">    next_probe_pos = d-&gt;m_next[probe_pos];                                                        \</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="preprocessor">    if((!next_probe_pos) || ((dist = (mz_uint16)(lookahead_pos - next_probe_pos)) &gt; max_dist))   \</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="preprocessor">        return;                                                                                   \</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="preprocessor">    probe_pos = next_probe_pos &amp; TDEFL_LZ_DICT_SIZE_MASK;                                         \</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="preprocessor">    if((d-&gt;m_dict[probe_pos + match_len] == c0) &amp;&amp; (d-&gt;m_dict[probe_pos + match_len - 1] == c1)) \</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="preprocessor">        break;</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <a class="code" href="miniz_8cpp.html#ac784b1f49138601c5d8daab0d17f9e83">TDEFL_PROBE</a>;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            <a class="code" href="miniz_8cpp.html#ac784b1f49138601c5d8daab0d17f9e83">TDEFL_PROBE</a>;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <a class="code" href="miniz_8cpp.html#ac784b1f49138601c5d8daab0d17f9e83">TDEFL_PROBE</a>;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <span class="keywordflow">if</span>(!dist)</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        p = s;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        q = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a> + probe_pos;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="keywordflow">for</span>(probe_len = 0; probe_len &lt; max_match_len; probe_len++)</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            <span class="keywordflow">if</span>(*p++ != *q++)</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">if</span>(probe_len &gt; match_len)</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            *pMatch_dist = dist;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            <span class="keywordflow">if</span>((*pMatch_len = match_len = probe_len) == max_match_len)</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            c0 = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a> + match_len];</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            c1 = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a> + match_len - 1];</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    }</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;}</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #if MINIZ_USE_UNALIGNED_LOADS_AND_STORES */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; </div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="preprocessor">#if MINIZ_USE_UNALIGNED_LOADS_AND_STORES &amp;&amp;MINIZ_LITTLE_ENDIAN</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> tdefl_compress_fast(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d)</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;{</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="comment">/* Faster, minimally featured LZRW1-style match+parse loop with better register utilization. Intended for applications where raw throughput is valued more highly than ratio. */</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> lookahead_pos = d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a>, lookahead_size = d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a>, dict_size = d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a>, total_lz_bytes = d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a>, num_flags_left = d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a>;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pLZ_code_buf = d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>, *pLZ_flags = d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a>;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> cur_pos = lookahead_pos &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="keywordflow">while</span>((d-&gt;<a class="code" href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">m_src_buf_left</a>) || ((d-&gt;<a class="code" href="structtdefl__compressor.html#a8a3cce846b9849371735935790d8bab5">m_flush</a>) &amp;&amp; (lookahead_size)))</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> TDEFL_COMP_FAST_LOOKAHEAD_SIZE = 4096;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> dst_pos = (lookahead_pos + lookahead_size) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> num_bytes_to_process = (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">m_src_buf_left</a>, TDEFL_COMP_FAST_LOOKAHEAD_SIZE - lookahead_size);</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">m_src_buf_left</a> -= num_bytes_to_process;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        lookahead_size += num_bytes_to_process;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160; </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keywordflow">while</span>(num_bytes_to_process)</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        {</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;            <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> n = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a> - dst_pos, num_bytes_to_process);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;            <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a> + dst_pos, d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a>, n);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            <span class="keywordflow">if</span>(dst_pos &lt; (<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a> - 1))</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a> + <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a> + dst_pos, d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(n, (<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a> - 1) - dst_pos));</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a> += n;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            dst_pos = (dst_pos + n) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            num_bytes_to_process -= n;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160; </div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        dict_size = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a> - lookahead_size, dict_size);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <span class="keywordflow">if</span>((!d-&gt;<a class="code" href="structtdefl__compressor.html#a8a3cce846b9849371735935790d8bab5">m_flush</a>) &amp;&amp; (lookahead_size &lt; TDEFL_COMP_FAST_LOOKAHEAD_SIZE))</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <span class="keywordflow">while</span>(lookahead_size &gt;= 4)</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> cur_match_dist, cur_match_len = 1;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;            <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pCur_dict = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a> + cur_pos;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> first_trigram = (*(<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *)pCur_dict) &amp; 0xFFFFFF;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> hash = (first_trigram ^ (first_trigram &gt;&gt; (24 - (<a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa2b22a3813245c6d00c5a802f8593daf2">TDEFL_LZ_HASH_BITS</a> - 8)))) &amp; <a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa202a52e3c2065cea2c36a18630e1f863">TDEFL_LEVEL1_HASH_SIZE_MASK</a>;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> probe_pos = d-&gt;<a class="code" href="structtdefl__compressor.html#a2dffbb84dd4d9bf24bc3b1476cbd636c">m_hash</a>[hash];</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#a2dffbb84dd4d9bf24bc3b1476cbd636c">m_hash</a>[hash] = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)lookahead_pos;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160; </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            <span class="keywordflow">if</span>(((cur_match_dist = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)(lookahead_pos - probe_pos)) &lt;= dict_size) &amp;&amp; ((*(<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *)(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a> + (probe_pos &amp;= <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>)) &amp; 0xFFFFFF) == first_trigram))</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;            {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *p = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *)pCur_dict;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *q = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *)(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a> + probe_pos);</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> probe_len = 32;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                <span class="keywordflow">do</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                } <span class="keywordflow">while</span>((TDEFL_READ_UNALIGNED_WORD(++p) == TDEFL_READ_UNALIGNED_WORD(++q)) &amp;&amp; (TDEFL_READ_UNALIGNED_WORD(++p) == TDEFL_READ_UNALIGNED_WORD(++q)) &amp;&amp;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                         (TDEFL_READ_UNALIGNED_WORD(++p) == TDEFL_READ_UNALIGNED_WORD(++q)) &amp;&amp; (TDEFL_READ_UNALIGNED_WORD(++p) == TDEFL_READ_UNALIGNED_WORD(++q)) &amp;&amp; (--probe_len &gt; 0));</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                cur_match_len = ((<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)(p - (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *)pCur_dict) * 2) + (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)(*(<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)p == *(<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)q);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                <span class="keywordflow">if</span>(!probe_len)</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                    cur_match_len = cur_match_dist ? <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a> : 0;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                <span class="keywordflow">if</span>((cur_match_len &lt; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>) || ((cur_match_len == <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>) &amp;&amp; (cur_match_dist &gt;= 8U * 1024U)))</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                    cur_match_len = 1;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                    *pLZ_code_buf++ = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)first_trigram;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                    *pLZ_flags = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(*pLZ_flags &gt;&gt; 1);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][(<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)first_trigram]++;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> s0, <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                    cur_match_len = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(cur_match_len, lookahead_size);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160; </div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>((cur_match_len &gt;= <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>) &amp;&amp; (cur_match_dist &gt;= 1) &amp;&amp; (cur_match_dist &lt;= <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a>));</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160; </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                    cur_match_dist--;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160; </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                    pLZ_code_buf[0] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(cur_match_len - <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                    *(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *)(&amp;pLZ_code_buf[1]) = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)cur_match_dist;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                    pLZ_code_buf += 3;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                    *pLZ_flags = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)((*pLZ_flags &gt;&gt; 1) | 0x80);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160; </div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                    s0 = <a class="code" href="miniz_8cpp.html#a3b07b4b3e26dd52c6bf6289ef88c76e0">s_tdefl_small_dist_sym</a>[cur_match_dist &amp; 511];</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                    <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> = <a class="code" href="miniz_8cpp.html#ac781072b961db555ae58d396ca0e4527">s_tdefl_large_dist_sym</a>[cur_match_dist &gt;&gt; 8];</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[1][(cur_match_dist &lt; 512) ? s0 : <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>]++;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160; </div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][<a class="code" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a>[cur_match_len - <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>]]++;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            }</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                *pLZ_code_buf++ = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)first_trigram;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                *pLZ_flags = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(*pLZ_flags &gt;&gt; 1);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][(<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)first_trigram]++;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160; </div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            <span class="keywordflow">if</span>(--num_flags_left == 0)</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                num_flags_left = 8;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                pLZ_flags = pLZ_code_buf++;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            total_lz_bytes += cur_match_len;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            lookahead_pos += cur_match_len;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;            dict_size = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(dict_size + cur_match_len, (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;            cur_pos = (cur_pos + cur_match_len) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(lookahead_size &gt;= cur_match_len);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            lookahead_size -= cur_match_len;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160; </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            <span class="keywordflow">if</span>(pLZ_code_buf &gt; &amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a>[<a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaaa31c23d99c4bf4bb9857de2286b6d7e6">TDEFL_LZ_CODE_BUF_SIZE</a> - 8])</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;            {</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> = lookahead_pos;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> = lookahead_size;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a> = dict_size;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> = total_lz_bytes;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a> = pLZ_code_buf;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = pLZ_flags;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> = num_flags_left;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                <span class="keywordflow">if</span>((n = <a class="code" href="miniz_8cpp.html#a1adafac587d2839277822cea5bdc224d">tdefl_flush_block</a>(d, 0)) != 0)</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                    <span class="keywordflow">return</span> (n &lt; 0) ? <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a> : <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                total_lz_bytes = d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a>;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                pLZ_code_buf = d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                pLZ_flags = d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a>;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                num_flags_left = d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;            }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="keywordflow">while</span>(lookahead_size)</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;            <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> lit = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[cur_pos];</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160; </div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            total_lz_bytes++;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            *pLZ_code_buf++ = lit;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            *pLZ_flags = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(*pLZ_flags &gt;&gt; 1);</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;            <span class="keywordflow">if</span>(--num_flags_left == 0)</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;            {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                num_flags_left = 8;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                pLZ_flags = pLZ_code_buf++;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            }</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160; </div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][lit]++;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;            lookahead_pos++;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            dict_size = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(dict_size + 1, (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a>);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;            cur_pos = (cur_pos + 1) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            lookahead_size--;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            <span class="keywordflow">if</span>(pLZ_code_buf &gt; &amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a>[<a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaaa31c23d99c4bf4bb9857de2286b6d7e6">TDEFL_LZ_CODE_BUF_SIZE</a> - 8])</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            {</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> = lookahead_pos;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> = lookahead_size;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a> = dict_size;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> = total_lz_bytes;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a> = pLZ_code_buf;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = pLZ_flags;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> = num_flags_left;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                <span class="keywordflow">if</span>((n = <a class="code" href="miniz_8cpp.html#a1adafac587d2839277822cea5bdc224d">tdefl_flush_block</a>(d, 0)) != 0)</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                    <span class="keywordflow">return</span> (n &lt; 0) ? <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a> : <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                total_lz_bytes = d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a>;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                pLZ_code_buf = d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                pLZ_flags = d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a>;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                num_flags_left = d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a>;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;            }</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        }</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    }</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160; </div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> = lookahead_pos;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> = lookahead_size;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a> = dict_size;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> = total_lz_bytes;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a> = pLZ_code_buf;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = pLZ_flags;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> = num_flags_left;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;}</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MINIZ_USE_UNALIGNED_LOADS_AND_STORES &amp;&amp; MINIZ_LITTLE_ENDIAN */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a9a1adadbbfe1ac85f80bbe0fa361a815"> 1631</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a9a1adadbbfe1ac85f80bbe0fa361a815">tdefl_record_literal</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> lit)</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;{</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a>++;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    *d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>++ = lit;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    *d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(*d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> &gt;&gt; 1);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">if</span>(--d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> == 0)</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    {</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> = 8;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>++;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    }</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][lit]++;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;}</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a6cd53d97e63c5b1cf1b0043f5c5d3648"> 1644</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a6cd53d97e63c5b1cf1b0043f5c5d3648">tdefl_record_match</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> match_len, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> match_dist)</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;{</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> s0, <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>((match_len &gt;= <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>) &amp;&amp; (match_dist &gt;= 1) &amp;&amp; (match_dist &lt;= <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a>));</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> += match_len;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>[0] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(match_len - <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160; </div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    match_dist -= 1;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>[1] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(match_dist &amp; 0xFF);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>[2] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(match_dist &gt;&gt; 8);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a> += 3;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160; </div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    *d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)((*d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> &gt;&gt; 1) | 0x80);</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">if</span>(--d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> == 0)</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    {</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> = 8;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a>++;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    }</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160; </div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    s0 = <a class="code" href="miniz_8cpp.html#a3b07b4b3e26dd52c6bf6289ef88c76e0">s_tdefl_small_dist_sym</a>[match_dist &amp; 511];</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> = <a class="code" href="miniz_8cpp.html#ac781072b961db555ae58d396ca0e4527">s_tdefl_large_dist_sym</a>[(match_dist &gt;&gt; 8) &amp; 127];</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[1][(match_dist &lt; 512) ? s0 : <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>]++;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">if</span>(match_len &gt;= <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>)</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][<a class="code" href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a>[match_len - <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>]]++;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;}</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160; </div>
<div class="line"><a name="l01674"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a693b5cf938e6f7d2fc439f8ab65ea466"> 1674</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a693b5cf938e6f7d2fc439f8ab65ea466">tdefl_compress_normal</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d)</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;{</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSrc = d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a>;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keywordtype">size_t</span> src_buf_left = d-&gt;<a class="code" href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">m_src_buf_left</a>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abf">tdefl_flush</a> flush = d-&gt;<a class="code" href="structtdefl__compressor.html#a8a3cce846b9849371735935790d8bab5">m_flush</a>;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160; </div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordflow">while</span>((src_buf_left) || ((flush) &amp;&amp; (d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a>)))</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    {</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> len_to_move, cur_match_dist, cur_match_len, cur_pos;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <span class="comment">/* Update dictionary and hash chains. Keeps the lookahead size equal to TDEFL_MAX_MATCH_LEN. */</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        <span class="keywordflow">if</span>((d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> + d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a>) &gt;= (<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a> - 1))</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> dst_pos = (d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> + d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a>) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>, ins_pos = d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> + d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> - 2;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> hash = (d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[ins_pos &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>] &lt;&lt; <a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaab7e1aa0f0ee51ac5ed2976f7af52d138">TDEFL_LZ_HASH_SHIFT</a>) ^ d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[(ins_pos + 1) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>];</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> num_bytes_to_process = (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(src_buf_left, <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a> - d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a>);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;            <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSrc_end = pSrc + num_bytes_to_process;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            src_buf_left -= num_bytes_to_process;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> += num_bytes_to_process;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;            <span class="keywordflow">while</span>(pSrc != pSrc_end)</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> c = *pSrc++;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[dst_pos] = c;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                <span class="keywordflow">if</span>(dst_pos &lt; (<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a> - 1))</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a> + dst_pos] = c;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                hash = ((hash &lt;&lt; <a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaab7e1aa0f0ee51ac5ed2976f7af52d138">TDEFL_LZ_HASH_SHIFT</a>) ^ c) &amp; (<a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa2dc98b78800f2aa4dffe5438b01bd4c0">TDEFL_LZ_HASH_SIZE</a> - 1);</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#aa55f0314f4b7bfff6999060bdf2d96fc">m_next</a>[ins_pos &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>] = d-&gt;<a class="code" href="structtdefl__compressor.html#a2dffbb84dd4d9bf24bc3b1476cbd636c">m_hash</a>[hash];</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a2dffbb84dd4d9bf24bc3b1476cbd636c">m_hash</a>[hash] = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)(ins_pos);</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                dst_pos = (dst_pos + 1) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                ins_pos++;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            }</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        }</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            <span class="keywordflow">while</span>((src_buf_left) &amp;&amp; (d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> &lt; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a>))</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> c = *pSrc++;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> dst_pos = (d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> + d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a>) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                src_buf_left--;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[dst_pos] = c;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                <span class="keywordflow">if</span>(dst_pos &lt; (<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a> - 1))</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a> + dst_pos] = c;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;                <span class="keywordflow">if</span>((++d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> + d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a>) &gt;= <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>)</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> ins_pos = d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> + (d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> - 1) - 2;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> hash = ((d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[ins_pos &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>] &lt;&lt; (<a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaab7e1aa0f0ee51ac5ed2976f7af52d138">TDEFL_LZ_HASH_SHIFT</a> * 2)) ^ (d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[(ins_pos + 1) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>] &lt;&lt; <a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaab7e1aa0f0ee51ac5ed2976f7af52d138">TDEFL_LZ_HASH_SHIFT</a>) ^ c) &amp; (<a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa2dc98b78800f2aa4dffe5438b01bd4c0">TDEFL_LZ_HASH_SIZE</a> - 1);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#aa55f0314f4b7bfff6999060bdf2d96fc">m_next</a>[ins_pos &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>] = d-&gt;<a class="code" href="structtdefl__compressor.html#a2dffbb84dd4d9bf24bc3b1476cbd636c">m_hash</a>[hash];</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#a2dffbb84dd4d9bf24bc3b1476cbd636c">m_hash</a>[hash] = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)(ins_pos);</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        }</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a> = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a> - d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a>, d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a>);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="keywordflow">if</span>((!flush) &amp;&amp; (d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> &lt; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a>))</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        <span class="comment">/* Simple lazy/greedy parsing state machine. */</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        len_to_move = 1;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        cur_match_dist = 0;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        cur_match_len = d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a> ? d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a> : (<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a> - 1);</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        cur_pos = d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; (<a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25afc9a53ebb5a5fdb1d1727eef9b21a524">TDEFL_RLE_MATCHES</a> | <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a24f00beb8f787cbdf73b33a535be747b">TDEFL_FORCE_ALL_RAW_BLOCKS</a>))</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            <span class="keywordflow">if</span>((d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a>) &amp;&amp; (!(d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a24f00beb8f787cbdf73b33a535be747b">TDEFL_FORCE_ALL_RAW_BLOCKS</a>)))</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            {</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> c = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[(cur_pos - 1) &amp; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a>];</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;                cur_match_len = 0;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                <span class="keywordflow">while</span>(cur_match_len &lt; d-&gt;m_lookahead_size)</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                    <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[cur_pos + cur_match_len] != c)</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                    cur_match_len++;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                <span class="keywordflow">if</span>(cur_match_len &lt; <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>)</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                    cur_match_len = 0;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                    cur_match_dist = 1;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;            }</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        }</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <a class="code" href="miniz_8cpp.html#a8f35610f83a9e48c72183389473c9ed9">tdefl_find_match</a>(d, d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a>, d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a>, d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a>, &amp;cur_match_dist, &amp;cur_match_len);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        <span class="keywordflow">if</span>(((cur_match_len == <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a>) &amp;&amp; (cur_match_dist &gt;= 8U * 1024U)) || (cur_pos == cur_match_dist) || ((d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25abea695964526498a4a869b3172e39707">TDEFL_FILTER_MATCHES</a>) &amp;&amp; (cur_match_len &lt;= 5)))</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            cur_match_dist = cur_match_len = 0;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        }</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a>)</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            <span class="keywordflow">if</span>(cur_match_len &gt; d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a>)</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                <a class="code" href="miniz_8cpp.html#a9a1adadbbfe1ac85f80bbe0fa361a815">tdefl_record_literal</a>(d, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)d-&gt;<a class="code" href="structtdefl__compressor.html#a161b24984ce5e86f7c36378b9145a8a5">m_saved_lit</a>);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                <span class="keywordflow">if</span>(cur_match_len &gt;= 128)</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                    <a class="code" href="miniz_8cpp.html#a6cd53d97e63c5b1cf1b0043f5c5d3648">tdefl_record_match</a>(d, cur_match_len, cur_match_dist);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a> = 0;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                    len_to_move = cur_match_len;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#a161b24984ce5e86f7c36378b9145a8a5">m_saved_lit</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[cur_pos];</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#a181e0aa6797e436af3625de2482ab563">m_saved_match_dist</a> = cur_match_dist;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                    d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a> = cur_match_len;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                }</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                <a class="code" href="miniz_8cpp.html#a6cd53d97e63c5b1cf1b0043f5c5d3648">tdefl_record_match</a>(d, d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a>, d-&gt;<a class="code" href="structtdefl__compressor.html#a181e0aa6797e436af3625de2482ab563">m_saved_match_dist</a>);</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                len_to_move = d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a> - 1;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a> = 0;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!cur_match_dist)</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            <a class="code" href="miniz_8cpp.html#a9a1adadbbfe1ac85f80bbe0fa361a815">tdefl_record_literal</a>(d, d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(cur_pos, <span class="keyword">sizeof</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>) - 1)]);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((d-&gt;<a class="code" href="structtdefl__compressor.html#acd97ca2c9c322def4d1873145f5c8e50">m_greedy_parsing</a>) || (d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25afc9a53ebb5a5fdb1d1727eef9b21a524">TDEFL_RLE_MATCHES</a>) || (cur_match_len &gt;= 128))</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            <a class="code" href="miniz_8cpp.html#a6cd53d97e63c5b1cf1b0043f5c5d3648">tdefl_record_match</a>(d, cur_match_len, cur_match_dist);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            len_to_move = cur_match_len;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        }</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#a161b24984ce5e86f7c36378b9145a8a5">m_saved_lit</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>[<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(cur_pos, <span class="keyword">sizeof</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">m_dict</a>) - 1)];</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#a181e0aa6797e436af3625de2482ab563">m_saved_match_dist</a> = cur_match_dist;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a> = cur_match_len;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        }</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <span class="comment">/* Move the lookahead forward by len_to_move bytes. */</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> += len_to_move;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> &gt;= len_to_move);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> -= len_to_move;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a> = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a> + len_to_move, (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)<a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a>);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="comment">/* Check if it&#39;s time to flush the current LZ codes to the internal output buffer. */</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        <span class="keywordflow">if</span>((d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a> &gt; &amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a>[<a class="code" href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaaa31c23d99c4bf4bb9857de2286b6d7e6">TDEFL_LZ_CODE_BUF_SIZE</a> - 8]) ||</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;            ((d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> &gt; 31 * 1024) &amp;&amp; (((((<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)(d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a> - d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a>) * 115) &gt;&gt; 7) &gt;= d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a>) || (d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a24f00beb8f787cbdf73b33a535be747b">TDEFL_FORCE_ALL_RAW_BLOCKS</a>))))</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a> = pSrc;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">m_src_buf_left</a> = src_buf_left;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            <span class="keywordflow">if</span>((n = <a class="code" href="miniz_8cpp.html#a1adafac587d2839277822cea5bdc224d">tdefl_flush_block</a>(d, 0)) != 0)</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                <span class="keywordflow">return</span> (n &lt; 0) ? <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a> : <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        }</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    }</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160; </div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a> = pSrc;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">m_src_buf_left</a> = src_buf_left;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;}</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160; </div>
<div class="line"><a name="l01819"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#af80414324052552afda66f992ee246e9"> 1819</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748f">tdefl_status</a> <a class="code" href="miniz_8cpp.html#af80414324052552afda66f992ee246e9">tdefl_flush_output_buffer</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d)</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;{</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ae8da57cd67dace66f2e45ee1a51cb11f">m_pIn_buf_size</a>)</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        *d-&gt;<a class="code" href="structtdefl__compressor.html#ae8da57cd67dace66f2e45ee1a51cb11f">m_pIn_buf_size</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a> - (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)d-&gt;<a class="code" href="structtdefl__compressor.html#ac131b5e6ff8ca9af418b01eefd77c7f9">m_pIn_buf</a>;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160; </div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="keywordflow">if</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#a2629e9f8046f0d2d8898303ed6e50fbf">m_pOut_buf_size</a>)</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="keywordtype">size_t</span> n = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(*d-&gt;<a class="code" href="structtdefl__compressor.html#a2629e9f8046f0d2d8898303ed6e50fbf">m_pOut_buf_size</a> - d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a>, d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a>);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)d-&gt;<a class="code" href="structtdefl__compressor.html#abaf4c7afc0fc8e487340c3461e8028a4">m_pOut_buf</a> + d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a>, d-&gt;<a class="code" href="structtdefl__compressor.html#af3767449a43c686c7870b4bf939c878a">m_output_buf</a> + d-&gt;<a class="code" href="structtdefl__compressor.html#a8d5490f8411406a1e368f21f978c1aa7">m_output_flush_ofs</a>, n);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#a8d5490f8411406a1e368f21f978c1aa7">m_output_flush_ofs</a> += (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)n;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a> -= (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)n;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a> += n;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160; </div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        *d-&gt;<a class="code" href="structtdefl__compressor.html#a2629e9f8046f0d2d8898303ed6e50fbf">m_pOut_buf_size</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a>;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160; </div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">return</span> (d-&gt;<a class="code" href="structtdefl__compressor.html#a4b1ae01e9c3d091617762ae27a15e1dd">m_finished</a> &amp;&amp; !d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a>) ? <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa9beb7850b5d6941b6860db23f426b0d2">TDEFL_STATUS_DONE</a> : <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a>;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;}</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ae9968978f7ea9f732c5ed08db988208b"> 1840</a></span>&#160;<a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748f">tdefl_status</a> <a class="code" href="miniz_8cpp.html#ae9968978f7ea9f732c5ed08db988208b">tdefl_compress</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <span class="keyword">const</span> <span class="keywordtype">void</span> *pIn_buf, <span class="keywordtype">size_t</span> *pIn_buf_size, <span class="keywordtype">void</span> *pOut_buf, <span class="keywordtype">size_t</span> *pOut_buf_size, <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abf">tdefl_flush</a> flush)</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;{</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keywordflow">if</span>(!d)</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        <span class="keywordflow">if</span>(pIn_buf_size)</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            *pIn_buf_size = 0;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <span class="keywordflow">if</span>(pOut_buf_size)</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            *pOut_buf_size = 0;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fabfe89ba8aaf460134dbf95c5969f82f8">TDEFL_STATUS_BAD_PARAM</a>;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    }</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160; </div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ac131b5e6ff8ca9af418b01eefd77c7f9">m_pIn_buf</a> = pIn_buf;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ae8da57cd67dace66f2e45ee1a51cb11f">m_pIn_buf_size</a> = pIn_buf_size;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#abaf4c7afc0fc8e487340c3461e8028a4">m_pOut_buf</a> = pOut_buf;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a2629e9f8046f0d2d8898303ed6e50fbf">m_pOut_buf_size</a> = pOut_buf_size;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a> = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)(pIn_buf);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">m_src_buf_left</a> = pIn_buf_size ? *pIn_buf_size : 0;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a> = 0;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a8a3cce846b9849371735935790d8bab5">m_flush</a> = flush;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="keywordflow">if</span>(((d-&gt;<a class="code" href="structtdefl__compressor.html#a744d78e0e02c77ff224a3a2eefc6c39f">m_pPut_buf_func</a> != NULL) == ((pOut_buf != NULL) || (pOut_buf_size != NULL))) || (d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a> != <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a>) ||</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        (d-&gt;<a class="code" href="structtdefl__compressor.html#a48846993be500c613cc1343b586e5754">m_wants_to_finish</a> &amp;&amp; (flush != <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a>)) || (pIn_buf_size &amp;&amp; *pIn_buf_size &amp;&amp; !pIn_buf) || (pOut_buf_size &amp;&amp; *pOut_buf_size &amp;&amp; !pOut_buf))</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        <span class="keywordflow">if</span>(pIn_buf_size)</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            *pIn_buf_size = 0;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="keywordflow">if</span>(pOut_buf_size)</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            *pOut_buf_size = 0;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <span class="keywordflow">return</span> (d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a> = <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fabfe89ba8aaf460134dbf95c5969f82f8">TDEFL_STATUS_BAD_PARAM</a>);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a48846993be500c613cc1343b586e5754">m_wants_to_finish</a> |= (flush == <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a>);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160; </div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">if</span>((d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a>) || (d-&gt;<a class="code" href="structtdefl__compressor.html#a4b1ae01e9c3d091617762ae27a15e1dd">m_finished</a>))</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        <span class="keywordflow">return</span> (d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a> = <a class="code" href="miniz_8cpp.html#af80414324052552afda66f992ee246e9">tdefl_flush_output_buffer</a>(d));</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160; </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<span class="preprocessor">#if MINIZ_USE_UNALIGNED_LOADS_AND_STORES &amp;&amp;MINIZ_LITTLE_ENDIAN</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordflow">if</span>(((d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#a16af7b253440dadd46a80a4b9fddba4da60323cd4b3acc7a3711c143f7923dd34">TDEFL_MAX_PROBES_MASK</a>) == 1) &amp;&amp;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        ((d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a6863400f7412d04ec75a2ca363baec03">TDEFL_GREEDY_PARSING_FLAG</a>) != 0) &amp;&amp;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        ((d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; (<a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25abea695964526498a4a869b3172e39707">TDEFL_FILTER_MATCHES</a> | <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a24f00beb8f787cbdf73b33a535be747b">TDEFL_FORCE_ALL_RAW_BLOCKS</a> | <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25afc9a53ebb5a5fdb1d1727eef9b21a524">TDEFL_RLE_MATCHES</a>)) == 0))</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="keywordflow">if</span>(!tdefl_compress_fast(d))</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            <span class="keywordflow">return</span> d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a>;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    }</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #if MINIZ_USE_UNALIGNED_LOADS_AND_STORES &amp;&amp; MINIZ_LITTLE_ENDIAN */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a693b5cf938e6f7d2fc439f8ab65ea466">tdefl_compress_normal</a>(d))</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            <span class="keywordflow">return</span> d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a>;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    }</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">if</span>((d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> &amp; (<a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25addb3970da5e697152049482043174c63">TDEFL_WRITE_ZLIB_HEADER</a> | <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25aa3c1a489229a817dc6d07efd55a6f5cf">TDEFL_COMPUTE_ADLER32</a>)) &amp;&amp; (pIn_buf))</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#aee1dafacfd0672f0940e391dcb26852f">m_adler32</a> = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a094d181afc4c98dc1864f6ce7d636258">mz_adler32</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#aee1dafacfd0672f0940e391dcb26852f">m_adler32</a>, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pIn_buf, d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a> - (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pIn_buf);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keywordflow">if</span>((flush) &amp;&amp; (!d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a>) &amp;&amp; (!d-&gt;<a class="code" href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">m_src_buf_left</a>) &amp;&amp; (!d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a>))</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a1adafac587d2839277822cea5bdc224d">tdefl_flush_block</a>(d, flush) &lt; 0)</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;            <span class="keywordflow">return</span> d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        d-&gt;<a class="code" href="structtdefl__compressor.html#a4b1ae01e9c3d091617762ae27a15e1dd">m_finished</a> = (flush == <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a>);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        <span class="keywordflow">if</span>(flush == <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfac38ba366db95f4ad31c7719bd08ae7f8">TDEFL_FULL_FLUSH</a>)</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a2dffbb84dd4d9bf24bc3b1476cbd636c">m_hash</a>);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#aa55f0314f4b7bfff6999060bdf2d96fc">m_next</a>);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;            d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a> = 0;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        }</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    }</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160; </div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keywordflow">return</span> (d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a> = <a class="code" href="miniz_8cpp.html#af80414324052552afda66f992ee246e9">tdefl_flush_output_buffer</a>(d));</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;}</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5f2608070112b0e81a3017e9c39c73b7"> 1908</a></span>&#160;<a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748f">tdefl_status</a> <a class="code" href="miniz_8cpp.html#a5f2608070112b0e81a3017e9c39c73b7">tdefl_compress_buffer</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <span class="keyword">const</span> <span class="keywordtype">void</span> *pIn_buf, <span class="keywordtype">size_t</span> in_buf_size, <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abf">tdefl_flush</a> flush)</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;{</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a744d78e0e02c77ff224a3a2eefc6c39f">m_pPut_buf_func</a>);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ae9968978f7ea9f732c5ed08db988208b">tdefl_compress</a>(d, pIn_buf, &amp;in_buf_size, NULL, NULL, flush);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;}</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3c2c67a6200147020ba4bfbf77962792"> 1914</a></span>&#160;<a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748f">tdefl_status</a> <a class="code" href="miniz_8cpp.html#a3c2c67a6200147020ba4bfbf77962792">tdefl_init</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d, <a class="code" href="miniz_8h.html#ad9ea9d3eac48ba0658f750a920452497">tdefl_put_buf_func_ptr</a> pPut_buf_func, <span class="keywordtype">void</span> *pPut_buf_user, <span class="keywordtype">int</span> flags)</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;{</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a744d78e0e02c77ff224a3a2eefc6c39f">m_pPut_buf_func</a> = pPut_buf_func;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ad495682142ede0ea54a774a45a1e4145">m_pPut_buf_user</a> = pPut_buf_user;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">m_flags</a> = (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)(flags);</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a019a2a421ee743e69dc0b3abdad00d67">m_max_probes</a>[0] = 1 + ((flags &amp; 0xFFF) + 2) / 3;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#acd97ca2c9c322def4d1873145f5c8e50">m_greedy_parsing</a> = (flags &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a6863400f7412d04ec75a2ca363baec03">TDEFL_GREEDY_PARSING_FLAG</a>) != 0;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a019a2a421ee743e69dc0b3abdad00d67">m_max_probes</a>[1] = 1 + (((flags &amp; 0xFFF) &gt;&gt; 2) + 2) / 3;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">if</span>(!(flags &amp; <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25af52d1f4a633ac1d4c4537bd9d63346b9">TDEFL_NONDETERMINISTIC_PARSING_FLAG</a>))</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(d-&gt;<a class="code" href="structtdefl__compressor.html#a2dffbb84dd4d9bf24bc3b1476cbd636c">m_hash</a>);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">m_lookahead_pos</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">m_lookahead_size</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">m_dict_size</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">m_total_lz_bytes</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#abd08bd557ee4ad3d37667a9efbe27b08">m_lz_code_buf_dict_pos</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">m_bits_in</a> = 0;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a8d5490f8411406a1e368f21f978c1aa7">m_output_flush_ofs</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">m_output_flush_remaining</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a4b1ae01e9c3d091617762ae27a15e1dd">m_finished</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a06aa0468391490b3279acb1877475d9a">m_block_index</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#aa284ab359fd885497d90995e2f6aec10">m_bit_buffer</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a48846993be500c613cc1343b586e5754">m_wants_to_finish</a> = 0;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">m_pLZ_code_buf</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a> + 1;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">m_pLZ_flags</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">m_lz_code_buf</a>;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">m_num_flags_left</a> = 8;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">m_pOutput_buf</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#af3767449a43c686c7870b4bf939c878a">m_output_buf</a>;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#aa790d06026f9cd65e5ab373c46447694">m_pOutput_buf_end</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#af3767449a43c686c7870b4bf939c878a">m_output_buf</a>;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a> = <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a>;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a181e0aa6797e436af3625de2482ab563">m_saved_match_dist</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">m_saved_match_len</a> = d-&gt;<a class="code" href="structtdefl__compressor.html#a161b24984ce5e86f7c36378b9145a8a5">m_saved_lit</a> = 0;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#aee1dafacfd0672f0940e391dcb26852f">m_adler32</a> = 1;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ac131b5e6ff8ca9af418b01eefd77c7f9">m_pIn_buf</a> = NULL;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#abaf4c7afc0fc8e487340c3461e8028a4">m_pOut_buf</a> = NULL;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#ae8da57cd67dace66f2e45ee1a51cb11f">m_pIn_buf_size</a> = NULL;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a2629e9f8046f0d2d8898303ed6e50fbf">m_pOut_buf_size</a> = NULL;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a8a3cce846b9849371735935790d8bab5">m_flush</a> = <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfa87a9bde52f27872bf5821ed345bc6768">TDEFL_NO_FLUSH</a>;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">m_pSrc</a> = NULL;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">m_src_buf_left</a> = 0;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    d-&gt;<a class="code" href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">m_out_buf_ofs</a> = 0;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][0], 0, <span class="keyword">sizeof</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[0][0]) * <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea30643ecd31dedddcdb265685027c3730">TDEFL_MAX_HUFF_SYMBOLS_0</a>);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[1][0], 0, <span class="keyword">sizeof</span>(d-&gt;<a class="code" href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">m_huff_count</a>[1][0]) * <a class="code" href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceab31107f9bbadea4b9a371a4c52885471">TDEFL_MAX_HUFF_SYMBOLS_1</a>);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a>;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;}</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; </div>
<div class="line"><a name="l01947"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a516a79788364e4f3e3b55187a2a67b24"> 1947</a></span>&#160;<a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748f">tdefl_status</a> <a class="code" href="miniz_8cpp.html#a516a79788364e4f3e3b55187a2a67b24">tdefl_get_prev_return_status</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d)</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;{</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="keywordflow">return</span> d-&gt;<a class="code" href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">m_prev_return_status</a>;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;}</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160; </div>
<div class="line"><a name="l01952"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2ec6403111ea9afbcdc4d76cfda97110"> 1952</a></span>&#160;<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> <a class="code" href="miniz_8cpp.html#a2ec6403111ea9afbcdc4d76cfda97110">tdefl_get_adler32</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *d)</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;{</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">return</span> d-&gt;<a class="code" href="structtdefl__compressor.html#aee1dafacfd0672f0940e391dcb26852f">m_adler32</a>;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;}</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160; </div>
<div class="line"><a name="l01957"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a153fd833b8c09efd13aa1d35dd22d092"> 1957</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a153fd833b8c09efd13aa1d35dd22d092">tdefl_compress_mem_to_output</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_len, <a class="code" href="miniz_8h.html#ad9ea9d3eac48ba0658f750a920452497">tdefl_put_buf_func_ptr</a> pPut_buf_func, <span class="keywordtype">void</span> *pPut_buf_user, <span class="keywordtype">int</span> flags)</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;{</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *pComp;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> succeeded;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordflow">if</span>(((buf_len) &amp;&amp; (!pBuf)) || (!pPut_buf_func))</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    pComp = (<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)<a class="code" href="miniz_8h.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a>(<span class="keyword">sizeof</span>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a>));</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <span class="keywordflow">if</span>(!pComp)</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    succeeded = (<a class="code" href="miniz_8cpp.html#a3c2c67a6200147020ba4bfbf77962792">tdefl_init</a>(pComp, pPut_buf_func, pPut_buf_user, flags) == <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a>);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    succeeded = succeeded &amp;&amp; (<a class="code" href="miniz_8cpp.html#a5f2608070112b0e81a3017e9c39c73b7">tdefl_compress_buffer</a>(pComp, pBuf, buf_len, <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a>) == <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa9beb7850b5d6941b6860db23f426b0d2">TDEFL_STATUS_DONE</a>);</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pComp);</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="keywordflow">return</span> succeeded;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;}</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"><a class="line" href="structtdefl__output__buffer.html"> 1972</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;{</div>
<div class="line"><a name="l01974"></a><span class="lineno"><a class="line" href="structtdefl__output__buffer.html#ab0705ebff551ebede28640ada5a9d2ab"> 1974</a></span>&#160;    <span class="keywordtype">size_t</span> m_size, <a class="code" href="structtdefl__output__buffer.html#ab0705ebff551ebede28640ada5a9d2ab">m_capacity</a>;</div>
<div class="line"><a name="l01975"></a><span class="lineno"><a class="line" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250"> 1975</a></span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a>;</div>
<div class="line"><a name="l01976"></a><span class="lineno"><a class="line" href="structtdefl__output__buffer.html#a26e5da3f933edc1a218afbe7838e9d22"> 1976</a></span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="structtdefl__output__buffer.html#a26e5da3f933edc1a218afbe7838e9d22">m_expandable</a>;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;} <a class="code" href="structtdefl__output__buffer.html">tdefl_output_buffer</a>;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160; </div>
<div class="line"><a name="l01979"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a418a771218f0a371ebc981939074bbe4"> 1979</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a418a771218f0a371ebc981939074bbe4">tdefl_output_buffer_putter</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">int</span> len, <span class="keywordtype">void</span> *pUser)</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;{</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <a class="code" href="structtdefl__output__buffer.html">tdefl_output_buffer</a> *p = (<a class="code" href="structtdefl__output__buffer.html">tdefl_output_buffer</a> *)pUser;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="keywordtype">size_t</span> new_size = p-&gt;<a class="code" href="structtdefl__output__buffer.html#ab506aa434be983761db4cca43d2ebc9e">m_size</a> + len;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordflow">if</span>(new_size &gt; p-&gt;<a class="code" href="structtdefl__output__buffer.html#ab0705ebff551ebede28640ada5a9d2ab">m_capacity</a>)</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    {</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        <span class="keywordtype">size_t</span> new_capacity = p-&gt;<a class="code" href="structtdefl__output__buffer.html#ab0705ebff551ebede28640ada5a9d2ab">m_capacity</a>;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pNew_buf;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        <span class="keywordflow">if</span>(!p-&gt;<a class="code" href="structtdefl__output__buffer.html#a26e5da3f933edc1a218afbe7838e9d22">m_expandable</a>)</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;            new_capacity = <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(128U, new_capacity &lt;&lt; 1U);</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        } <span class="keywordflow">while</span>(new_size &gt; new_capacity);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        pNew_buf = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)<a class="code" href="miniz_8h.html#a1420c15d77b938f459fa3e8bbd9f4c4d">MZ_REALLOC</a>(p-&gt;<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a>, new_capacity);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="keywordflow">if</span>(!pNew_buf)</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        p-&gt;<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a> = pNew_buf;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        p-&gt;<a class="code" href="structtdefl__output__buffer.html#ab0705ebff551ebede28640ada5a9d2ab">m_capacity</a> = new_capacity;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)p-&gt;<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a> + p-&gt;<a class="code" href="structtdefl__output__buffer.html#ab506aa434be983761db4cca43d2ebc9e">m_size</a>, pBuf, len);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    p-&gt;<a class="code" href="structtdefl__output__buffer.html#ab506aa434be983761db4cca43d2ebc9e">m_size</a> = new_size;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;}</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#afb50d9ccdd6d2da88a020e0e5ad3fa20"> 2004</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#afb50d9ccdd6d2da88a020e0e5ad3fa20">tdefl_compress_mem_to_heap</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pSrc_buf, <span class="keywordtype">size_t</span> src_buf_len, <span class="keywordtype">size_t</span> *pOut_len, <span class="keywordtype">int</span> flags)</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;{</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <a class="code" href="structtdefl__output__buffer.html">tdefl_output_buffer</a> out_buf;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(out_buf);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <span class="keywordflow">if</span>(!pOut_len)</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        *pOut_len = 0;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    out_buf.<a class="code" href="structtdefl__output__buffer.html#a26e5da3f933edc1a218afbe7838e9d22">m_expandable</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a153fd833b8c09efd13aa1d35dd22d092">tdefl_compress_mem_to_output</a>(pSrc_buf, src_buf_len, <a class="code" href="miniz_8cpp.html#a418a771218f0a371ebc981939074bbe4">tdefl_output_buffer_putter</a>, &amp;out_buf, flags))</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    *pOut_len = out_buf.<a class="code" href="structtdefl__output__buffer.html#ab506aa434be983761db4cca43d2ebc9e">m_size</a>;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <span class="keywordflow">return</span> out_buf.<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a>;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;}</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; </div>
<div class="line"><a name="l02019"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a37639f95844a8c30995fc1f5d4bb75a1"> 2019</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#a37639f95844a8c30995fc1f5d4bb75a1">tdefl_compress_mem_to_mem</a>(<span class="keywordtype">void</span> *pOut_buf, <span class="keywordtype">size_t</span> out_buf_len, <span class="keyword">const</span> <span class="keywordtype">void</span> *pSrc_buf, <span class="keywordtype">size_t</span> src_buf_len, <span class="keywordtype">int</span> flags)</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;{</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <a class="code" href="structtdefl__output__buffer.html">tdefl_output_buffer</a> out_buf;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(out_buf);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordflow">if</span>(!pOut_buf)</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    out_buf.<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a> = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pOut_buf;</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    out_buf.<a class="code" href="structtdefl__output__buffer.html#ab0705ebff551ebede28640ada5a9d2ab">m_capacity</a> = out_buf_len;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a153fd833b8c09efd13aa1d35dd22d092">tdefl_compress_mem_to_output</a>(pSrc_buf, src_buf_len, <a class="code" href="miniz_8cpp.html#a418a771218f0a371ebc981939074bbe4">tdefl_output_buffer_putter</a>, &amp;out_buf, flags))</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">return</span> out_buf.<a class="code" href="structtdefl__output__buffer.html#ab506aa434be983761db4cca43d2ebc9e">m_size</a>;</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;}</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160; </div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_ZLIB_APIS</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a6633ec0f4bbaafb2e4c7b943232a4d74"> 2033</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> <a class="code" href="miniz_8cpp.html#a6633ec0f4bbaafb2e4c7b943232a4d74">s_tdefl_num_probes</a>[11] = { 0, 1, 6, 32, 16, 32, 128, 256, 512, 768, 1500 };</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment">/* level may actually range from [0,10] (10 is a &quot;hidden&quot; max level, where we want a bit more compression and it&#39;s fine if throughput to fall off a cliff on some files). */</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#acf2306ec6b7f92753264f68bc554750b"> 2036</a></span>&#160;<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> <a class="code" href="miniz_8cpp.html#acf2306ec6b7f92753264f68bc554750b">tdefl_create_comp_flags_from_zip_params</a>(<span class="keywordtype">int</span> level, <span class="keywordtype">int</span> window_bits, <span class="keywordtype">int</span> strategy)</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;{</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> comp_flags = <a class="code" href="miniz_8cpp.html#a6633ec0f4bbaafb2e4c7b943232a4d74">s_tdefl_num_probes</a>[(level &gt;= 0) ? <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(10, level) : <a class="code" href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9eab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a>] | ((level &lt;= 3) ? <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a6863400f7412d04ec75a2ca363baec03">TDEFL_GREEDY_PARSING_FLAG</a> : 0);</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">if</span>(window_bits &gt; 0)</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        comp_flags |= <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25addb3970da5e697152049482043174c63">TDEFL_WRITE_ZLIB_HEADER</a>;</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160; </div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="keywordflow">if</span>(!level)</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        comp_flags |= <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a24f00beb8f787cbdf73b33a535be747b">TDEFL_FORCE_ALL_RAW_BLOCKS</a>;</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strategy == <a class="code" href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388a0419e718926687394bbc0d18d12068f6">MZ_FILTERED</a>)</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        comp_flags |= <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25abea695964526498a4a869b3172e39707">TDEFL_FILTER_MATCHES</a>;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strategy == <a class="code" href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388abb43b8c09f8d8dddd644893a8a6a3ae8">MZ_HUFFMAN_ONLY</a>)</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        comp_flags &amp;= ~<a class="code" href="miniz_8h.html#a16af7b253440dadd46a80a4b9fddba4da60323cd4b3acc7a3711c143f7923dd34">TDEFL_MAX_PROBES_MASK</a>;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strategy == <a class="code" href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388a3fe6f0f5a44a41155ec4022b6c85b5a9">MZ_FIXED</a>)</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        comp_flags |= <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a8fd3e432af0453833eb7168b8f63a064">TDEFL_FORCE_ALL_STATIC_BLOCKS</a>;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strategy == <a class="code" href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388ab22de2edae7b989e35120a84e1ffff3e">MZ_RLE</a>)</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        comp_flags |= <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25afc9a53ebb5a5fdb1d1727eef9b21a524">TDEFL_RLE_MATCHES</a>;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160; </div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="keywordflow">return</span> comp_flags;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;}</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*MINIZ_NO_ZLIB_APIS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160; </div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="preprocessor">#pragma warning(push)</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="preprocessor">#pragma warning(disable : 4204) </span><span class="comment">/* nonstandard extension used : non-constant aggregate initializer (also supported by GNU C and C99, so no big deal) */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<span class="comment">/* Simple PNG writer function by Alex Evans, 2011. Released into the public domain: https://gist.github.com/908299, more context at</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="comment"> http://altdevblogaday.org/2011/04/06/a-smaller-jpg-encoder/.</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="comment"> This is actually a modification of Alex&#39;s original code so PNG files generated by this function pass pngcheck. */</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a63a3ef354a44c931ddf34a66cf064b16"> 2065</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#a63a3ef354a44c931ddf34a66cf064b16">tdefl_write_image_to_png_file_in_memory_ex</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pImage, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> num_chans, <span class="keywordtype">size_t</span> *pLen_out, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> level, <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> flip)</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;{</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="comment">/* Using a local copy of this array here in case MINIZ_NO_ZLIB_APIS was defined. */</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> s_tdefl_png_num_probes[11] = { 0, 1, 6, 32, 16, 32, 128, 256, 512, 768, 1500 };</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *pComp = (<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)<a class="code" href="miniz_8h.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a>(<span class="keyword">sizeof</span>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a>));</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <a class="code" href="structtdefl__output__buffer.html">tdefl_output_buffer</a> out_buf;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="keywordtype">int</span> i, bpl = w * num_chans, y, z;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> c;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    *pLen_out = 0;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">if</span>(!pComp)</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(out_buf);</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    out_buf.<a class="code" href="structtdefl__output__buffer.html#a26e5da3f933edc1a218afbe7838e9d22">m_expandable</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    out_buf.<a class="code" href="structtdefl__output__buffer.html#ab0705ebff551ebede28640ada5a9d2ab">m_capacity</a> = 57 + <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(64, (1 + bpl) * h);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="keywordflow">if</span>(NULL == (out_buf.<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a> = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)<a class="code" href="miniz_8h.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a>(out_buf.<a class="code" href="structtdefl__output__buffer.html#ab0705ebff551ebede28640ada5a9d2ab">m_capacity</a>)))</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    {</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pComp);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    }</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <span class="comment">/* write dummy header */</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="keywordflow">for</span>(z = 41; z; --z)</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <a class="code" href="miniz_8cpp.html#a418a771218f0a371ebc981939074bbe4">tdefl_output_buffer_putter</a>(&amp;z, 1, &amp;out_buf);</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="comment">/* compress image data */</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <a class="code" href="miniz_8cpp.html#a3c2c67a6200147020ba4bfbf77962792">tdefl_init</a>(pComp, <a class="code" href="miniz_8cpp.html#a418a771218f0a371ebc981939074bbe4">tdefl_output_buffer_putter</a>, &amp;out_buf, s_tdefl_png_num_probes[<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(10, level)] | <a class="code" href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25addb3970da5e697152049482043174c63">TDEFL_WRITE_ZLIB_HEADER</a>);</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordflow">for</span>(y = 0; y &lt; h; ++y)</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    {</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <a class="code" href="miniz_8cpp.html#a5f2608070112b0e81a3017e9c39c73b7">tdefl_compress_buffer</a>(pComp, &amp;z, 1, <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfa87a9bde52f27872bf5821ed345bc6768">TDEFL_NO_FLUSH</a>);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        <a class="code" href="miniz_8cpp.html#a5f2608070112b0e81a3017e9c39c73b7">tdefl_compress_buffer</a>(pComp, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pImage + (flip ? (h - 1 - y) : y) * bpl, bpl, <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfa87a9bde52f27872bf5821ed345bc6768">TDEFL_NO_FLUSH</a>);</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    }</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a5f2608070112b0e81a3017e9c39c73b7">tdefl_compress_buffer</a>(pComp, NULL, 0, <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a>) != <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa9beb7850b5d6941b6860db23f426b0d2">TDEFL_STATUS_DONE</a>)</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    {</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pComp);</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(out_buf.<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a>);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    }</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <span class="comment">/* write real header */</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    *pLen_out = out_buf.<a class="code" href="structtdefl__output__buffer.html#ab506aa434be983761db4cca43d2ebc9e">m_size</a> - 41;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> chans[] = { 0x00, 0x00, 0x04, 0x02, 0x06 };</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;        <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> pnghdr[41] = { 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00, 0x0d, 0x49, 0x48, 0x44, 0x52,</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                                0, 0, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(w &gt;&gt; 8), (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)w, 0, 0, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(h &gt;&gt; 8), (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)h, 8, chans[num_chans], 0, 0, 0, 0, 0, 0, 0,</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                                (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(*pLen_out &gt;&gt; 24), (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(*pLen_out &gt;&gt; 16), (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(*pLen_out &gt;&gt; 8), (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>) * pLen_out, 0x49, 0x44, 0x41, 0x54 };</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        c = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(<a class="code" href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a>, pnghdr + 12, 17);</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; 4; ++i, c &lt;&lt;= 8)</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;            ((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)(pnghdr + 29))[i] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(c &gt;&gt; 24);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(out_buf.<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a>, pnghdr, 41);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    }</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="comment">/* write footer (IDAT CRC-32, followed by IEND chunk) */</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a418a771218f0a371ebc981939074bbe4">tdefl_output_buffer_putter</a>(<span class="stringliteral">&quot;\0\0\0\0\0\0\0\0\x49\x45\x4e\x44\xae\x42\x60\x82&quot;</span>, 16, &amp;out_buf))</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    {</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        *pLen_out = 0;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pComp);</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(out_buf.<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a>);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    }</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    c = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(<a class="code" href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a>, out_buf.<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a> + 41 - 4, *pLen_out + 4);</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; 4; ++i, c &lt;&lt;= 8)</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        (out_buf.<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a> + out_buf.<a class="code" href="structtdefl__output__buffer.html#ab506aa434be983761db4cca43d2ebc9e">m_size</a> - 16)[i] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(c &gt;&gt; 24);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="comment">/* compute final size of file, grab compressed data buffer and return */</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    *pLen_out += 57;</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pComp);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="keywordflow">return</span> out_buf.<a class="code" href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">m_pBuf</a>;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;}</div>
<div class="line"><a name="l02128"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a0895bd488b9650322eedf2739f81402a"> 2128</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#a0895bd488b9650322eedf2739f81402a">tdefl_write_image_to_png_file_in_memory</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pImage, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> num_chans, <span class="keywordtype">size_t</span> *pLen_out)</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;{</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="comment">/* Level 6 corresponds to TDEFL_DEFAULT_MAX_PROBES or MZ_DEFAULT_LEVEL (but we can&#39;t depend on MZ_DEFAULT_LEVEL being available in case the zlib API&#39;s where #defined out) */</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a63a3ef354a44c931ddf34a66cf064b16">tdefl_write_image_to_png_file_in_memory_ex</a>(pImage, w, h, num_chans, pLen_out, 6, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;}</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<span class="comment">/* Allocate the tdefl_compressor and tinfl_decompressor structures in C so that */</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="comment">/* non-C language bindings to tdefL_ and tinfl_ API don&#39;t need to worry about */</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="comment">/* structure size and allocation mechanism. */</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a862e12a5b9361933538572c4692d4544"> 2137</a></span>&#160;<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *<a class="code" href="miniz_8cpp.html#a862e12a5b9361933538572c4692d4544">tdefl_compressor_alloc</a>()</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;{</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)<a class="code" href="miniz_8h.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a>(<span class="keyword">sizeof</span>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a>));</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;}</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160; </div>
<div class="line"><a name="l02142"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aaed356efd84e96e9f5eecdf078b07e50"> 2142</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#aaed356efd84e96e9f5eecdf078b07e50">tdefl_compressor_free</a>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *pComp)</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;{</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pComp);</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;}</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160; </div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;<span class="preprocessor">#pragma warning(pop)</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160; </div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;}</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="comment">/**************************************************************************</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment"> * Copyright 2013-2014 RAD Game Tools and Valve Software</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment"> * Copyright 2010-2014 Rich Geldreich and Tenacious Software LLC</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment"> * All Rights Reserved.</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a copy</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment"> * of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment"> * in the Software without restriction, including without limitation the rights</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment"> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="comment"> * copies of the Software, and to permit persons to whom the Software is</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="comment"> * furnished to do so, subject to the following conditions:</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included in</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="comment"> * all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="comment"> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="comment"> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="comment"> * THE SOFTWARE.</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;<span class="comment"> **************************************************************************/</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160; </div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160; </div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160; </div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;<span class="comment">/* ------------------- Low-level Decompression (completely independent from all compression API&#39;s) */</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a4a70ebaf3e07c9f51d41ba0e552bad0a"> 2188</a></span>&#160;<span class="preprocessor">#define TINFL_MEMCPY(d, s, l) memcpy(d, s, l)</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a7dd776de8caf03a8e44e7f0329953b68"> 2189</a></span>&#160;<span class="preprocessor">#define TINFL_MEMSET(p, c, l) memset(p, c, l)</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160; </div>
<div class="line"><a name="l02191"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a1bf00dad2822034f9b1369579a9c98d1"> 2191</a></span>&#160;<span class="preprocessor">#define TINFL_CR_BEGIN  \</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="preprocessor">    switch(r-&gt;m_state) \</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="preprocessor">    {                   \</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="preprocessor">        case 0:</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a9b76ea2ad5e09a1bd4a7d663745ac29e"> 2195</a></span>&#160;<span class="preprocessor">#define TINFL_CR_RETURN(state_index, result) \</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="preprocessor">    do                                       \</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="preprocessor">    {                                        \</span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="preprocessor">        status = result;                     \</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="preprocessor">        r-&gt;m_state = state_index;            \</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="preprocessor">        goto common_exit;                    \</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="preprocessor">        case state_index:                    \</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="preprocessor">            ;                                \</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="preprocessor">    }                                        \</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="preprocessor">    MZ_MACRO_END</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63"> 2205</a></span>&#160;<span class="preprocessor">#define TINFL_CR_RETURN_FOREVER(state_index, result) \</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="preprocessor">    do                                               \</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="preprocessor">    {                                                \</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="preprocessor">        for(;;)                                     \</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="preprocessor">        {                                            \</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="preprocessor">            TINFL_CR_RETURN(state_index, result);    \</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="preprocessor">        }                                            \</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="preprocessor">    }                                                \</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="preprocessor">    MZ_MACRO_END</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a99786d0af99c4433d7961581d708da51"> 2214</a></span>&#160;<span class="preprocessor">#define TINFL_CR_FINISH }</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160; </div>
<div class="line"><a name="l02216"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a26b0de30f3238271922e55776feacb0f"> 2216</a></span>&#160;<span class="preprocessor">#define TINFL_GET_BYTE(state_index, c)                                                                                                                          \</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="preprocessor">    do                                                                                                                                                          \</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="preprocessor">    {                                                                                                                                                           \</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="preprocessor">        while(pIn_buf_cur &gt;= pIn_buf_end)                                                                                                                      \</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="preprocessor">        {                                                                                                                                                       \</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="preprocessor">            TINFL_CR_RETURN(state_index, (decomp_flags &amp;TINFL_FLAG_HAS_MORE_INPUT) ? TINFL_STATUS_NEEDS_MORE_INPUT : TINFL_STATUS_FAILED_CANNOT_MAKE_PROGRESS); \</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="preprocessor">        }                                                                                                                                                       \</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="preprocessor">        c = *pIn_buf_cur++;                                                                                                                                     \</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="preprocessor">    }                                                                                                                                                           \</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="preprocessor">    MZ_MACRO_END</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160; </div>
<div class="line"><a name="l02227"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a1f5388f745eea1a9297c8fb70277042d"> 2227</a></span>&#160;<span class="preprocessor">#define TINFL_NEED_BITS(state_index, n)                \</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="preprocessor">    do                                                 \</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="preprocessor">    {                                                  \</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="preprocessor">        mz_uint c;                                     \</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="preprocessor">        TINFL_GET_BYTE(state_index, c);                \</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="preprocessor">        bit_buf |= (((tinfl_bit_buf_t)c) &lt;&lt; num_bits); \</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="preprocessor">        num_bits += 8;                                 \</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="preprocessor">    } while(num_bits &lt; (mz_uint)(n))</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aed4ea8f4cdcf4ad4416419dab601e7f0"> 2235</a></span>&#160;<span class="preprocessor">#define TINFL_SKIP_BITS(state_index, n)      \</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="preprocessor">    do                                       \</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="preprocessor">    {                                        \</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="preprocessor">        if(num_bits &lt; (mz_uint)(n))         \</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="preprocessor">        {                                    \</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<span class="preprocessor">            TINFL_NEED_BITS(state_index, n); \</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;<span class="preprocessor">        }                                    \</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="preprocessor">        bit_buf &gt;&gt;= (n);                     \</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="preprocessor">        num_bits -= (n);                     \</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="preprocessor">    }                                        \</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="preprocessor">    MZ_MACRO_END</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815"> 2246</a></span>&#160;<span class="preprocessor">#define TINFL_GET_BITS(state_index, b, n)    \</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="preprocessor">    do                                       \</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="preprocessor">    {                                        \</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="preprocessor">        if(num_bits &lt; (mz_uint)(n))         \</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="preprocessor">        {                                    \</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="preprocessor">            TINFL_NEED_BITS(state_index, n); \</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="preprocessor">        }                                    \</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="preprocessor">        b = bit_buf &amp; ((1 &lt;&lt; (n)) - 1);      \</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;<span class="preprocessor">        bit_buf &gt;&gt;= (n);                     \</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="preprocessor">        num_bits -= (n);                     \</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="preprocessor">    }                                        \</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="preprocessor">    MZ_MACRO_END</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;<span class="comment">/* TINFL_HUFF_BITBUF_FILL() is only used rarely, when the number of bytes remaining in the input buffer falls below 2. */</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;<span class="comment">/* It reads just enough bytes from the input stream that are needed to decode the next Huffman code (and absolutely no more). It works by trying to fully decode a */</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<span class="comment">/* Huffman code by using whatever bits are currently present in the bit buffer. If this fails, it reads another byte, and tries again until it succeeds or until the */</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;<span class="comment">/* bit buffer contains &gt;=15 bits (deflate&#39;s max. Huffman code size). */</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a134552e117c26b55d84ee80247828998"> 2263</a></span>&#160;<span class="preprocessor">#define TINFL_HUFF_BITBUF_FILL(state_index, pHuff)                             \</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="preprocessor">    do                                                                         \</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="preprocessor">    {                                                                          \</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="preprocessor">        temp = (pHuff)-&gt;m_look_up[bit_buf &amp; (TINFL_FAST_LOOKUP_SIZE - 1)];     \</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="preprocessor">        if(temp &gt;= 0)                                                         \</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="preprocessor">        {                                                                      \</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="preprocessor">            code_len = temp &gt;&gt; 9;                                              \</span></div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="preprocessor">            if((code_len) &amp;&amp; (num_bits &gt;= code_len))                          \</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="preprocessor">                break;                                                         \</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<span class="preprocessor">        }                                                                      \</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="preprocessor">        else if(num_bits &gt; TINFL_FAST_LOOKUP_BITS)                            \</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="preprocessor">        {                                                                      \</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="preprocessor">            code_len = TINFL_FAST_LOOKUP_BITS;                                 \</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="preprocessor">            do                                                                 \</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="preprocessor">            {                                                                  \</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="preprocessor">                temp = (pHuff)-&gt;m_tree[~temp + ((bit_buf &gt;&gt; code_len++) &amp; 1)]; \</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;<span class="preprocessor">            } while((temp &lt; 0) &amp;&amp; (num_bits &gt;= (code_len + 1)));              \</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="preprocessor">            if(temp &gt;= 0)                                                     \</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="preprocessor">                break;                                                         \</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="preprocessor">        }                                                                      \</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="preprocessor">        TINFL_GET_BYTE(state_index, c);                                        \</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="preprocessor">        bit_buf |= (((tinfl_bit_buf_t)c) &lt;&lt; num_bits);                         \</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;<span class="preprocessor">        num_bits += 8;                                                         \</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;<span class="preprocessor">    } while(num_bits &lt; 15);</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160; </div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;<span class="comment">/* TINFL_HUFF_DECODE() decodes the next Huffman coded symbol. It&#39;s more complex than you would initially expect because the zlib API expects the decompressor to never read */</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="comment">/* beyond the final byte of the deflate stream. (In other words, when this macro wants to read another byte from the input, it REALLY needs another byte in order to fully */</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;<span class="comment">/* decode the next Huffman code.) Handling this properly is particularly important on raw deflate (non-zlib) streams, which aren&#39;t followed by a byte aligned adler-32. */</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment">/* The slow path is only executed at the very end of the input buffer. */</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="comment">/* v1.16: The original macro handled the case at the very end of the passed-in input buffer, but we also need to handle the case where the user passes in 1+zillion bytes */</span></div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="comment">/* following the deflate data and our non-conservative read-ahead path won&#39;t kick in here on this code. This is much trickier. */</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5b7562ec245b9e07daefeae07602d7ae"> 2294</a></span>&#160;<span class="preprocessor">#define TINFL_HUFF_DECODE(state_index, sym, pHuff)                                                                                  \</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="preprocessor">    do                                                                                                                              \</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="preprocessor">    {                                                                                                                               \</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="preprocessor">        int temp;                                                                                                                   \</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="preprocessor">        mz_uint code_len, c;                                                                                                        \</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="preprocessor">        if(num_bits &lt; 15)                                                                                                          \</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="preprocessor">        {                                                                                                                           \</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="preprocessor">            if((pIn_buf_end - pIn_buf_cur) &lt; 2)                                                                                    \</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="preprocessor">            {                                                                                                                       \</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="preprocessor">                TINFL_HUFF_BITBUF_FILL(state_index, pHuff);                                                                         \</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;<span class="preprocessor">            }                                                                                                                       \</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="preprocessor">            else                                                                                                                    \</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="preprocessor">            {                                                                                                                       \</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="preprocessor">                bit_buf |= (((tinfl_bit_buf_t)pIn_buf_cur[0]) &lt;&lt; num_bits) | (((tinfl_bit_buf_t)pIn_buf_cur[1]) &lt;&lt; (num_bits + 8)); \</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="preprocessor">                pIn_buf_cur += 2;                                                                                                   \</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="preprocessor">                num_bits += 16;                                                                                                     \</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="preprocessor">            }                                                                                                                       \</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="preprocessor">        }                                                                                                                           \</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="preprocessor">        if((temp = (pHuff)-&gt;m_look_up[bit_buf &amp; (TINFL_FAST_LOOKUP_SIZE - 1)]) &gt;= 0)                                               \</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="preprocessor">            code_len = temp &gt;&gt; 9, temp &amp;= 511;                                                                                      \</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="preprocessor">        else                                                                                                                        \</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="preprocessor">        {                                                                                                                           \</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="preprocessor">            code_len = TINFL_FAST_LOOKUP_BITS;                                                                                      \</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<span class="preprocessor">            do                                                                                                                      \</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="preprocessor">            {                                                                                                                       \</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;<span class="preprocessor">                temp = (pHuff)-&gt;m_tree[~temp + ((bit_buf &gt;&gt; code_len++) &amp; 1)];                                                      \</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="preprocessor">            } while(temp &lt; 0);                                                                                                     \</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="preprocessor">        }                                                                                                                           \</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="preprocessor">        sym = temp;                                                                                                                 \</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="preprocessor">        bit_buf &gt;&gt;= code_len;                                                                                                       \</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="preprocessor">        num_bits -= code_len;                                                                                                       \</span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="preprocessor">    }                                                                                                                               \</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;<span class="preprocessor">    MZ_MACRO_END</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416"> 2328</a></span>&#160;<a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> <a class="code" href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(<a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> *<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>, <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pIn_buf_next, <span class="keywordtype">size_t</span> *pIn_buf_size, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pOut_buf_start, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pOut_buf_next, <span class="keywordtype">size_t</span> *pOut_buf_size, <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> decomp_flags)</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;{</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_length_base[31] = { 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0 };</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_length_extra[31] = { 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0 };</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_dist_base[32] = { 1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0 };</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_dist_extra[32] = { 0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13 };</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> s_length_dezigzag[19] = { 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 };</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_min_table_sizes[3] = { 257, 1, 4 };</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> num_bits, dist, counter, num_extra;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <a class="code" href="miniz_8h.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a> bit_buf;</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pIn_buf_cur = pIn_buf_next, *<span class="keyword">const</span> pIn_buf_end = pIn_buf_next + *pIn_buf_size;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pOut_buf_cur = pOut_buf_next, *<span class="keyword">const</span> pOut_buf_end = pOut_buf_next + *pOut_buf_size;</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <span class="keywordtype">size_t</span> out_buf_size_mask = (decomp_flags &amp; <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>) ? (<span class="keywordtype">size_t</span>) - 1 : ((pOut_buf_next - pOut_buf_start) + *pOut_buf_size) - 1, dist_from_out_buf_start;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; </div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="comment">/* Ensure the output buffer&#39;s size is a power of 2, unless the output buffer is large enough to hold the entire output file (in which case it doesn&#39;t matter). */</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    <span class="keywordflow">if</span>(((out_buf_size_mask + 1) &amp; out_buf_size_mask) || (pOut_buf_next &lt; pOut_buf_start))</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        *pIn_buf_size = *pOut_buf_size = 0;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a61c8d6dd2c312ee7a474ac6782e4bed9">TINFL_STATUS_BAD_PARAM</a>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    }</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160; </div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    num_bits = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_num_bits;</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    bit_buf = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_bit_buf;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    dist = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_dist;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    counter = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_counter;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    num_extra = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_num_extra;</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    dist_from_out_buf_start = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_dist_from_out_buf_start;</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    <a class="code" href="miniz_8cpp.html#a1bf00dad2822034f9b1369579a9c98d1">TINFL_CR_BEGIN</a></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160; </div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    bit_buf = num_bits = dist = counter = num_extra = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr0 = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr1 = 0;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_z_adler32 = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_check_adler32 = 1;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">if</span>(decomp_flags &amp; <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaaf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a>)</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    {</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        <a class="code" href="miniz_8cpp.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a>(1, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr0);</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        <a class="code" href="miniz_8cpp.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a>(2, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr1);</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        counter = (((<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr0 * 256 + <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr1) % 31 != 0) || (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr1 &amp; 32) || ((<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr0 &amp; 15) != 8));</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        <span class="keywordflow">if</span>(!(decomp_flags &amp; <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>))</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;            counter |= (((1U &lt;&lt; (8U + (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr0 &gt;&gt; 4))) &gt; 32768U) || ((out_buf_size_mask + 1) &lt; (size_t)(1U &lt;&lt; (8U + (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_zhdr0 &gt;&gt; 4)))));</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        <span class="keywordflow">if</span>(counter)</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        {</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            <a class="code" href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(36, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;        }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    }</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    {</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        <a class="code" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(3, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_final, 3);</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_final &gt;&gt; 1;</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type == 0)</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        {</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            <a class="code" href="miniz_8cpp.html#aed4ea8f4cdcf4ad4416419dab601e7f0">TINFL_SKIP_BITS</a>(5, num_bits &amp; 7);</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;            <span class="keywordflow">for</span>(counter = 0; counter &lt; 4; ++counter)</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;            {</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                <span class="keywordflow">if</span>(num_bits)</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;                    <a class="code" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(6, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_raw_header[counter], 8);</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                    <a class="code" href="miniz_8cpp.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a>(7, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_raw_header[counter]);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;            }</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;            <span class="keywordflow">if</span>((counter = (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_raw_header[0] | (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_raw_header[1] &lt;&lt; 8))) != (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)(0xFFFF ^ (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_raw_header[2] | (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_raw_header[3] &lt;&lt; 8))))</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;            {</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                <a class="code" href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(39, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            }</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;            <span class="keywordflow">while</span>((counter) &amp;&amp; (num_bits))</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                <a class="code" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(51, dist, 8);</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                <span class="keywordflow">while</span>(pOut_buf_cur &gt;= pOut_buf_end)</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                {</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                    <a class="code" href="miniz_8cpp.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(52, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>);</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;                }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;                *pOut_buf_cur++ = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)dist;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;                counter--;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;            }</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;            <span class="keywordflow">while</span>(counter)</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;            {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                <span class="keywordtype">size_t</span> n;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                <span class="keywordflow">while</span>(pOut_buf_cur &gt;= pOut_buf_end)</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                {</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                    <a class="code" href="miniz_8cpp.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(9, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>);</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                }</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                <span class="keywordflow">while</span>(pIn_buf_cur &gt;= pIn_buf_end)</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                {</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                    <a class="code" href="miniz_8cpp.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(38, (decomp_flags &amp; <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a>) ? <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a> : <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a7661742c9463ceaa3872ffca2fb15998">TINFL_STATUS_FAILED_CANNOT_MAKE_PROGRESS</a>);</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                }</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                n = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>((<span class="keywordtype">size_t</span>)(pOut_buf_end - pOut_buf_cur), (<span class="keywordtype">size_t</span>)(pIn_buf_end - pIn_buf_cur)), counter);</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                <a class="code" href="miniz_8cpp.html#a4a70ebaf3e07c9f51d41ba0e552bad0a">TINFL_MEMCPY</a>(pOut_buf_cur, pIn_buf_cur, n);</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                pIn_buf_cur += n;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                pOut_buf_cur += n;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                counter -= (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)n;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;            }</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        }</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type == 3)</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        {</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;            <a class="code" href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(10, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        }</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        {</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type == 1)</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;            {</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[0].m_code_size;</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;                <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[0] = 288;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[1] = 32;</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                <a class="code" href="miniz_8cpp.html#a7dd776de8caf03a8e44e7f0329953b68">TINFL_MEMSET</a>(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[1].m_code_size, 5, 32);</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                <span class="keywordflow">for</span>(i = 0; i &lt;= 143; ++i)</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                    *p++ = 8;</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                <span class="keywordflow">for</span>(; i &lt;= 255; ++i)</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                    *p++ = 9;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;                <span class="keywordflow">for</span>(; i &lt;= 279; ++i)</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;                    *p++ = 7;</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;                <span class="keywordflow">for</span>(; i &lt;= 287; ++i)</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;                    *p++ = 8;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;            }</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                <span class="keywordflow">for</span>(counter = 0; counter &lt; 3; counter++)</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                {</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;                    <a class="code" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(11, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[counter], <span class="stringliteral">&quot;\05\05\04&quot;</span>[counter]);</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                    <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[counter] += s_min_table_sizes[counter];</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                }</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[2].m_code_size);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                <span class="keywordflow">for</span>(counter = 0; counter &lt; <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[2]; counter++)</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;                {</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> s;</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;                    <a class="code" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(14, s, 3);</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;                    <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[2].m_code_size[s_length_dezigzag[counter]] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)s;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;                }</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[2] = 19;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;            }</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;            <span class="keywordflow">for</span>(; (int)<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type &gt;= 0; <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type--)</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;            {</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                <span class="keywordtype">int</span> tree_next, tree_cur;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                <a class="code" href="structtinfl__huff__table.html">tinfl_huff_table</a> *pTable;</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i, j, used_syms, total, sym_index, next_code[17], total_syms[16];</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;                pTable = &amp;<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type];</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(total_syms);</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a51b707504c86547f166bc557d7ce4f84">m_look_up</a>);</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a1208fe7e128f00188f99ba6f51fa9af6">m_tree</a>);</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type]; ++i)</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                    total_syms[pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a31f719d4829db3d6646139d5249094cb">m_code_size</a>[i]]++;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                used_syms = 0, total = 0;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                next_code[0] = next_code[1] = 0;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                <span class="keywordflow">for</span>(i = 1; i &lt;= 15; ++i)</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;                {</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                    used_syms += total_syms[i];</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                    next_code[i + 1] = (total = ((total + total_syms[i]) &lt;&lt; 1));</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                }</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                <span class="keywordflow">if</span>((65536 != total) &amp;&amp; (used_syms &gt; 1))</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                {</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                    <a class="code" href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(35, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                }</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                <span class="keywordflow">for</span>(tree_next = -1, sym_index = 0; sym_index &lt; <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type]; ++sym_index)</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> rev_code = 0, l, cur_code, code_size = pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a31f719d4829db3d6646139d5249094cb">m_code_size</a>[sym_index];</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                    <span class="keywordflow">if</span>(!code_size)</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;                    cur_code = next_code[code_size]++;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                    <span class="keywordflow">for</span>(l = code_size; l &gt; 0; l--, cur_code &gt;&gt;= 1)</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                        rev_code = (rev_code &lt;&lt; 1) | (cur_code &amp; 1);</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;                    <span class="keywordflow">if</span>(code_size &lt;= <a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a>)</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;                    {</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;                        <a class="code" href="miniz_8h.html#a199d34ca8d33210d4d3b0dd4fae349d6">mz_int16</a> k = (<a class="code" href="miniz_8h.html#a199d34ca8d33210d4d3b0dd4fae349d6">mz_int16</a>)((code_size &lt;&lt; 9) | sym_index);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;                        <span class="keywordflow">while</span>(rev_code &lt; <a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a>)</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                        {</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                            pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a51b707504c86547f166bc557d7ce4f84">m_look_up</a>[rev_code] = k;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                            rev_code += (1 &lt;&lt; code_size);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;                        }</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;                    }</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;                    <span class="keywordflow">if</span>(0 == (tree_cur = pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a51b707504c86547f166bc557d7ce4f84">m_look_up</a>[rev_code &amp; (<a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a> - 1)]))</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;                    {</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;                        pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a51b707504c86547f166bc557d7ce4f84">m_look_up</a>[rev_code &amp; (<a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a> - 1)] = (<a class="code" href="miniz_8h.html#a199d34ca8d33210d4d3b0dd4fae349d6">mz_int16</a>)tree_next;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                        tree_cur = tree_next;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                        tree_next -= 2;</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;                    }</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;                    rev_code &gt;&gt;= (<a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a> - 1);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;                    <span class="keywordflow">for</span>(j = code_size; j &gt; (<a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a> + 1); j--)</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;                    {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;                        tree_cur -= ((rev_code &gt;&gt;= 1) &amp; 1);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;                        <span class="keywordflow">if</span>(!pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a1208fe7e128f00188f99ba6f51fa9af6">m_tree</a>[-tree_cur - 1])</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;                        {</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                            pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a1208fe7e128f00188f99ba6f51fa9af6">m_tree</a>[-tree_cur - 1] = (<a class="code" href="miniz_8h.html#a199d34ca8d33210d4d3b0dd4fae349d6">mz_int16</a>)tree_next;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                            tree_cur = tree_next;</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                            tree_next -= 2;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                        }</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                            tree_cur = pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a1208fe7e128f00188f99ba6f51fa9af6">m_tree</a>[-tree_cur - 1];</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                    }</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                    tree_cur -= ((rev_code &gt;&gt;= 1) &amp; 1);</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                    pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a1208fe7e128f00188f99ba6f51fa9af6">m_tree</a>[-tree_cur - 1] = (<a class="code" href="miniz_8h.html#a199d34ca8d33210d4d3b0dd4fae349d6">mz_int16</a>)sym_index;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                }</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_type == 2)</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                {</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;                    <span class="keywordflow">for</span>(counter = 0; counter &lt; (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[0] + <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[1]);)</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                    {</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> s;</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                        <a class="code" href="miniz_8cpp.html#a5b7562ec245b9e07daefeae07602d7ae">TINFL_HUFF_DECODE</a>(16, dist, &amp;<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[2]);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                        <span class="keywordflow">if</span>(dist &lt; 16)</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                        {</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;                            <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_len_codes[counter++] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)dist;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;                        }</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                        <span class="keywordflow">if</span>((dist == 16) &amp;&amp; (!counter))</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;                        {</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;                            <a class="code" href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(17, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;                        }</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                        num_extra = <span class="stringliteral">&quot;\02\03\07&quot;</span>[dist - 16];</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                        <a class="code" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(18, s, num_extra);</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                        s += <span class="stringliteral">&quot;\03\03\013&quot;</span>[dist - 16];</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                        <a class="code" href="miniz_8cpp.html#a7dd776de8caf03a8e44e7f0329953b68">TINFL_MEMSET</a>(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_len_codes + counter, (dist == 16) ? <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_len_codes[counter - 1] : 0, s);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                        counter += s;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                    }</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                    <span class="keywordflow">if</span>((<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[0] + <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[1]) != counter)</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                    {</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;                        <a class="code" href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(21, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                    }</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;                    <a class="code" href="miniz_8cpp.html#a4a70ebaf3e07c9f51d41ba0e552bad0a">TINFL_MEMCPY</a>(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[0].m_code_size, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_len_codes, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[0]);</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                    <a class="code" href="miniz_8cpp.html#a4a70ebaf3e07c9f51d41ba0e552bad0a">TINFL_MEMCPY</a>(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[1].m_code_size, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_len_codes + <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[0], <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_table_sizes[1]);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                }</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;            }</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;            {</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSrc;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                {</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                    <span class="keywordflow">if</span>(((pIn_buf_end - pIn_buf_cur) &lt; 4) || ((pOut_buf_end - pOut_buf_cur) &lt; 2))</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                    {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                        <a class="code" href="miniz_8cpp.html#a5b7562ec245b9e07daefeae07602d7ae">TINFL_HUFF_DECODE</a>(23, counter, &amp;<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[0]);</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                        <span class="keywordflow">if</span>(counter &gt;= 256)</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                        <span class="keywordflow">while</span>(pOut_buf_cur &gt;= pOut_buf_end)</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                        {</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                            <a class="code" href="miniz_8cpp.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(24, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>);</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;                        }</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;                        *pOut_buf_cur++ = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)counter;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                    }</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;                    {</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                        <span class="keywordtype">int</span> sym2;</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;                        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> code_len;</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;<span class="preprocessor">#if TINFL_USE_64BIT_BITBUF</span></div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                        <span class="keywordflow">if</span>(num_bits &lt; 30)</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;                        {</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                            bit_buf |= (((<a class="code" href="miniz_8h.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>)<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pIn_buf_cur)) &lt;&lt; num_bits);</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                            pIn_buf_cur += 4;</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                            num_bits += 32;</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                        }</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                        <span class="keywordflow">if</span>(num_bits &lt; 15)</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                        {</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                            bit_buf |= (((<a class="code" href="miniz_8h.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>)<a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pIn_buf_cur)) &lt;&lt; num_bits);</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;                            pIn_buf_cur += 2;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                            num_bits += 16;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                        }</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                        <span class="keywordflow">if</span>((sym2 = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[0].m_look_up[bit_buf &amp; (<a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a> - 1)]) &gt;= 0)</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                            code_len = sym2 &gt;&gt; 9;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                        {</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                            code_len = <a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a>;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                            <span class="keywordflow">do</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                            {</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                                sym2 = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[0].m_tree[~sym2 + ((bit_buf &gt;&gt; code_len++) &amp; 1)];</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                            } <span class="keywordflow">while</span>(sym2 &lt; 0);</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                        }</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                        counter = sym2;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                        bit_buf &gt;&gt;= code_len;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                        num_bits -= code_len;</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                        <span class="keywordflow">if</span>(counter &amp; 256)</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160; </div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="preprocessor">#if !TINFL_USE_64BIT_BITBUF</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                        <span class="keywordflow">if</span>(num_bits &lt; 15)</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;                        {</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                            bit_buf |= (((<a class="code" href="miniz_8h.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>)<a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pIn_buf_cur)) &lt;&lt; num_bits);</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;                            pIn_buf_cur += 2;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                            num_bits += 16;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;                        }</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;                        <span class="keywordflow">if</span>((sym2 = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[0].m_look_up[bit_buf &amp; (<a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a> - 1)]) &gt;= 0)</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;                            code_len = sym2 &gt;&gt; 9;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;                        {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;                            code_len = <a class="code" href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a>;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;                            <span class="keywordflow">do</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;                            {</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;                                sym2 = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[0].m_tree[~sym2 + ((bit_buf &gt;&gt; code_len++) &amp; 1)];</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                            } <span class="keywordflow">while</span>(sym2 &lt; 0);</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                        }</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;                        bit_buf &gt;&gt;= code_len;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                        num_bits -= code_len;</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160; </div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                        pOut_buf_cur[0] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)counter;</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                        <span class="keywordflow">if</span>(sym2 &amp; 256)</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;                        {</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;                            pOut_buf_cur++;</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                            counter = sym2;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;                        }</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                        pOut_buf_cur[1] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)sym2;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                        pOut_buf_cur += 2;</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                    }</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                }</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                <span class="keywordflow">if</span>((counter &amp;= 511) == 256)</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160; </div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                num_extra = s_length_extra[counter - 257];</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;                counter = s_length_base[counter - 257];</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;                <span class="keywordflow">if</span>(num_extra)</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;                {</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;                    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> extra_bits;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                    <a class="code" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(25, extra_bits, num_extra);</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                    counter += extra_bits;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                }</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160; </div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;                <a class="code" href="miniz_8cpp.html#a5b7562ec245b9e07daefeae07602d7ae">TINFL_HUFF_DECODE</a>(26, dist, &amp;<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_tables[1]);</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                num_extra = s_dist_extra[dist];</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;                dist = s_dist_base[dist];</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;                <span class="keywordflow">if</span>(num_extra)</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;                {</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> extra_bits;</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;                    <a class="code" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(27, extra_bits, num_extra);</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                    dist += extra_bits;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;                }</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160; </div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;                dist_from_out_buf_start = pOut_buf_cur - pOut_buf_start;</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;                <span class="keywordflow">if</span>((dist &gt; dist_from_out_buf_start) &amp;&amp; (decomp_flags &amp; <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>))</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;                {</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                    <a class="code" href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(37, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                }</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160; </div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;                pSrc = pOut_buf_start + ((dist_from_out_buf_start - dist) &amp; out_buf_size_mask);</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160; </div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;                <span class="keywordflow">if</span>((<a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(pOut_buf_cur, pSrc) + counter) &gt; pOut_buf_end)</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;                {</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;                    <span class="keywordflow">while</span>(counter--)</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;                    {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;                        <span class="keywordflow">while</span>(pOut_buf_cur &gt;= pOut_buf_end)</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                        {</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;                            <a class="code" href="miniz_8cpp.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(53, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>);</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;                        }</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;                        *pOut_buf_cur++ = pOut_buf_start[(dist_from_out_buf_start++ - dist) &amp; out_buf_size_mask];</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;                    }</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;                }</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;<span class="preprocessor">#if MINIZ_USE_UNALIGNED_LOADS_AND_STORES</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span>((counter &gt;= 9) &amp;&amp; (counter &lt;= dist))</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;                {</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;                    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSrc_end = pSrc + (counter &amp; ~7);</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;                    <span class="keywordflow">do</span></div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                    {</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;                        ((<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *)pOut_buf_cur)[0] = ((<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *)pSrc)[0];</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;                        ((<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *)pOut_buf_cur)[1] = ((<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *)pSrc)[1];</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                        pOut_buf_cur += 8;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                    } <span class="keywordflow">while</span>((pSrc += 8) &lt; pSrc_end);</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                    <span class="keywordflow">if</span>((counter &amp;= 7) &lt; 3)</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;                    {</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;                        <span class="keywordflow">if</span>(counter)</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;                        {</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;                            pOut_buf_cur[0] = pSrc[0];</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;                            <span class="keywordflow">if</span>(counter &gt; 1)</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;                                pOut_buf_cur[1] = pSrc[1];</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;                            pOut_buf_cur += counter;</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;                        }</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                    }</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                }</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;                <span class="keywordflow">do</span></div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                {</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                    pOut_buf_cur[0] = pSrc[0];</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                    pOut_buf_cur[1] = pSrc[1];</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                    pOut_buf_cur[2] = pSrc[2];</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;                    pOut_buf_cur += 3;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                    pSrc += 3;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                } <span class="keywordflow">while</span>((<span class="keywordtype">int</span>)(counter -= 3) &gt; 2);</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;                <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)counter &gt; 0)</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                {</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                    pOut_buf_cur[0] = pSrc[0];</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                    <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)counter &gt; 1)</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;                        pOut_buf_cur[1] = pSrc[1];</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;                    pOut_buf_cur += counter;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                }</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;            }</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        }</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    } <span class="keywordflow">while</span>(!(<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_final &amp; 1));</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160; </div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="comment">/* Ensure byte alignment and put back any bytes from the bitbuf if we&#39;ve looked ahead too far on gzip, or other Deflate streams followed by arbitrary data. */</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <span class="comment">/* I&#39;m being super conservative here. A number of simplifications can be made to the byte alignment part, and the Adler32 check shouldn&#39;t ever need to worry about reading from the bitbuf now. */</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <a class="code" href="miniz_8cpp.html#aed4ea8f4cdcf4ad4416419dab601e7f0">TINFL_SKIP_BITS</a>(32, num_bits &amp; 7);</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="keywordflow">while</span>((pIn_buf_cur &gt; pIn_buf_next) &amp;&amp; (num_bits &gt;= 8))</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    {</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;        --pIn_buf_cur;</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;        num_bits -= 8;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    }</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    bit_buf &amp;= (<a class="code" href="miniz_8h.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>)((1ULL &lt;&lt; num_bits) - 1ULL);</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(!num_bits); <span class="comment">/* if this assert fires then we&#39;ve read beyond the end of non-deflate/zlib streams with following data (such as gzip streams). */</span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160; </div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="keywordflow">if</span>(decomp_flags &amp; <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaaf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a>)</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    {</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;        <span class="keywordflow">for</span>(counter = 0; counter &lt; 4; ++counter)</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        {</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> s;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;            <span class="keywordflow">if</span>(num_bits)</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;                <a class="code" href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(41, s, 8);</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;                <a class="code" href="miniz_8cpp.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a>(42, s);</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;            <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_z_adler32 = (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_z_adler32 &lt;&lt; 8) | s;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;        }</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    }</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    <a class="code" href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(34, <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>);</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160; </div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <a class="code" href="miniz_8cpp.html#a99786d0af99c4433d7961581d708da51">TINFL_CR_FINISH</a></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160; </div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;common_exit:</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    <span class="comment">/* As long as we aren&#39;t telling the caller that we NEED more input to make forward progress: */</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    <span class="comment">/* Put back any bytes from the bitbuf in case we&#39;ve looked ahead too far on gzip, or other Deflate streams followed by arbitrary data. */</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    <span class="comment">/* We need to be very careful here to NOT push back any bytes we definitely know we need to make forward progress, though, or we&#39;ll lock the caller up into an inf loop. */</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <span class="keywordflow">if</span>((status != <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a>) &amp;&amp; (status != <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a7661742c9463ceaa3872ffca2fb15998">TINFL_STATUS_FAILED_CANNOT_MAKE_PROGRESS</a>))</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    {</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;        <span class="keywordflow">while</span>((pIn_buf_cur &gt; pIn_buf_next) &amp;&amp; (num_bits &gt;= 8))</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;        {</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;            --pIn_buf_cur;</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;            num_bits -= 8;</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;        }</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    }</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_num_bits = num_bits;</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_bit_buf = bit_buf &amp; (<a class="code" href="miniz_8h.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>)((1ULL &lt;&lt; num_bits) - 1ULL);</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_dist = dist;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_counter = counter;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_num_extra = num_extra;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_dist_from_out_buf_start = dist_from_out_buf_start;</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    *pIn_buf_size = pIn_buf_cur - pIn_buf_next;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    *pOut_buf_size = pOut_buf_cur - pOut_buf_next;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    <span class="keywordflow">if</span>((decomp_flags &amp; (<a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaaf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a> | <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa9454c17ebc5717f8553d01ab99b8c1c9">TINFL_FLAG_COMPUTE_ADLER32</a>)) &amp;&amp; (status &gt;= 0))</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    {</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *ptr = pOut_buf_next;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        <span class="keywordtype">size_t</span> buf_len = *pOut_buf_size;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> i, <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_check_adler32 &amp; 0xffff, <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> = <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_check_adler32 &gt;&gt; 16;</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        <span class="keywordtype">size_t</span> block_len = buf_len % 5552;</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;        <span class="keywordflow">while</span>(buf_len)</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        {</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;            <span class="keywordflow">for</span>(i = 0; i + 7 &lt; block_len; i += 8, ptr += 8)</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;            {</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[0], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;                <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[1], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;                <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[2], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[3], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[4], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;                <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[5], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;                <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[6], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;                <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += ptr[7], <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;            }</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;            <span class="keywordflow">for</span>(; i &lt; block_len; ++i)</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;                <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> += *ptr++, <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> += <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;            <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a> %= 65521U, <a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> %= 65521U;</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;            buf_len -= block_len;</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;            block_len = 5552;</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        }</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;        <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_check_adler32 = (<a class="code" href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a> &lt;&lt; 16) + <a class="code" href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a>;</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;        <span class="keywordflow">if</span>((status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>) &amp;&amp; (decomp_flags &amp; <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaaf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a>) &amp;&amp; (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_check_adler32 != <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>-&gt;m_z_adler32))</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;            status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3c0ca7cb0911c046d25e1ab3e525a3af">TINFL_STATUS_ADLER32_MISMATCH</a>;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    }</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;}</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160; </div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="comment">/* Higher level helper functions. */</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2a949056c9eed394b9f2217ba6f55f6b"> 2796</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#a2a949056c9eed394b9f2217ba6f55f6b">tinfl_decompress_mem_to_heap</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pSrc_buf, <span class="keywordtype">size_t</span> src_buf_len, <span class="keywordtype">size_t</span> *pOut_len, <span class="keywordtype">int</span> flags)</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;{</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> decomp;</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <span class="keywordtype">void</span> *pBuf = NULL, *pNew_buf;</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="keywordtype">size_t</span> src_buf_ofs = 0, out_buf_capacity = 0;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    *pOut_len = 0;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <a class="code" href="miniz_8h.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(&amp;decomp);</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    {</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        <span class="keywordtype">size_t</span> src_buf_size = src_buf_len - src_buf_ofs, dst_buf_size = out_buf_capacity - *pOut_len, new_out_buf_capacity;</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;        <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> status = <a class="code" href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;decomp, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pSrc_buf + src_buf_ofs, &amp;src_buf_size, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf, pBuf ? (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf + *pOut_len : NULL, &amp;dst_buf_size,</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;                                               (flags &amp; ~<a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a>) | <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>);</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        <span class="keywordflow">if</span>((status &lt; 0) || (status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a>))</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;        {</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;            <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pBuf);</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;            *pOut_len = 0;</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;        }</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;        src_buf_ofs += src_buf_size;</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        *pOut_len += dst_buf_size;</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;        <span class="keywordflow">if</span>(status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>)</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        new_out_buf_capacity = out_buf_capacity * 2;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;        <span class="keywordflow">if</span>(new_out_buf_capacity &lt; 128)</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;            new_out_buf_capacity = 128;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        pNew_buf = <a class="code" href="miniz_8h.html#a1420c15d77b938f459fa3e8bbd9f4c4d">MZ_REALLOC</a>(pBuf, new_out_buf_capacity);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;        <span class="keywordflow">if</span>(!pNew_buf)</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        {</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;            <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pBuf);</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;            *pOut_len = 0;</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;        }</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        pBuf = pNew_buf;</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        out_buf_capacity = new_out_buf_capacity;</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    }</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <span class="keywordflow">return</span> pBuf;</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;}</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160; </div>
<div class="line"><a name="l02834"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac4642bb91b5abc566c6b23c0658d6995"> 2834</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#ac4642bb91b5abc566c6b23c0658d6995">tinfl_decompress_mem_to_mem</a>(<span class="keywordtype">void</span> *pOut_buf, <span class="keywordtype">size_t</span> out_buf_len, <span class="keyword">const</span> <span class="keywordtype">void</span> *pSrc_buf, <span class="keywordtype">size_t</span> src_buf_len, <span class="keywordtype">int</span> flags)</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;{</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> decomp;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> status;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <a class="code" href="miniz_8h.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(&amp;decomp);</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    status = <a class="code" href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;decomp, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pSrc_buf, &amp;src_buf_len, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pOut_buf, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pOut_buf, &amp;out_buf_len, (flags &amp; ~<a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a>) | <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>);</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    <span class="keywordflow">return</span> (status != <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>) ? <a class="code" href="miniz_8h.html#abc05bb1717f26edc88a010e903de04e8">TINFL_DECOMPRESS_MEM_TO_MEM_FAILED</a> : out_buf_len;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;}</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160; </div>
<div class="line"><a name="l02843"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3e8087762c8423c4e48d1e5e01a243de"> 2843</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a3e8087762c8423c4e48d1e5e01a243de">tinfl_decompress_mem_to_callback</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pIn_buf, <span class="keywordtype">size_t</span> *pIn_buf_size, <a class="code" href="miniz_8h.html#a4e4ea4a3376e8d2a996b848c8e4319df">tinfl_put_buf_func_ptr</a> pPut_buf_func, <span class="keywordtype">void</span> *pPut_buf_user, <span class="keywordtype">int</span> flags)</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;{</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> decomp;</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pDict = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)<a class="code" href="miniz_8h.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a>(<a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a>);</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <span class="keywordtype">size_t</span> in_buf_ofs = 0, dict_ofs = 0;</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <span class="keywordflow">if</span>(!pDict)</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <a class="code" href="miniz_8h.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(&amp;decomp);</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    {</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;        <span class="keywordtype">size_t</span> in_buf_size = *pIn_buf_size - in_buf_ofs, dst_buf_size = <a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - dict_ofs;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;        <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> status = <a class="code" href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;decomp, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pIn_buf + in_buf_ofs, &amp;in_buf_size, pDict, pDict + dict_ofs, &amp;dst_buf_size,</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                                               (flags &amp; ~(<a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a> | <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>)));</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;        in_buf_ofs += in_buf_size;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;        <span class="keywordflow">if</span>((dst_buf_size) &amp;&amp; (!(*pPut_buf_func)(pDict + dict_ofs, (<span class="keywordtype">int</span>)dst_buf_size, pPut_buf_user)))</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;        <span class="keywordflow">if</span>(status != <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>)</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;        {</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;            result = (status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>);</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;        }</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;        dict_ofs = (dict_ofs + dst_buf_size) &amp; (<a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - 1);</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    }</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pDict);</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    *pIn_buf_size = in_buf_ofs;</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;}</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160; </div>
<div class="line"><a name="l02872"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a65dd8744393e4f726a67aa3833656353"> 2872</a></span>&#160;<a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> *<a class="code" href="miniz_8cpp.html#a65dd8744393e4f726a67aa3833656353">tinfl_decompressor_alloc</a>()</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;{</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> *pDecomp = (<a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> *)<a class="code" href="miniz_8h.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a>(<span class="keyword">sizeof</span>(<a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a>));</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    <span class="keywordflow">if</span>(pDecomp)</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <a class="code" href="miniz_8h.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(pDecomp);</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    <span class="keywordflow">return</span> pDecomp;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;}</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160; </div>
<div class="line"><a name="l02880"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#af8586e33fb8be9bff1c261d3aae1fc5e"> 2880</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#af8586e33fb8be9bff1c261d3aae1fc5e">tinfl_decompressor_free</a>(<a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> *pDecomp)</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;{</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <a class="code" href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pDecomp);</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;}</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160; </div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;}</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;<span class="comment">/**************************************************************************</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="comment"> * Copyright 2013-2014 RAD Game Tools and Valve Software</span></div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="comment"> * Copyright 2010-2014 Rich Geldreich and Tenacious Software LLC</span></div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="comment"> * Copyright 2016 Martin Raiber</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="comment"> * All Rights Reserved.</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a copy</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="comment"> * of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;<span class="comment"> * in the Software without restriction, including without limitation the rights</span></div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;<span class="comment"> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;<span class="comment"> * copies of the Software, and to permit persons to whom the Software is</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;<span class="comment"> * furnished to do so, subject to the following conditions:</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included in</span></div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;<span class="comment"> * all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;<span class="comment"> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;<span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="comment"> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;<span class="comment"> * THE SOFTWARE.</span></div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;<span class="comment"> **************************************************************************/</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160; </div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160; </div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160; </div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="comment">/* ------------------- .ZIP archive reading */</span></div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160; </div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;<span class="preprocessor">#ifdef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;<span class="preprocessor">#define MZ_FILE void *</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160; </div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;<span class="preprocessor">#if defined(_MSC_VER) || defined(__MINGW64__)</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;<span class="keyword">static</span> FILE *mz_fopen(<span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <span class="keyword">const</span> <span class="keywordtype">char</span> *pMode)</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;{</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    FILE *pFile = NULL;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    fopen_s(&amp;pFile, pFilename, pMode);</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="keywordflow">return</span> pFile;</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;}</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;<span class="keyword">static</span> FILE *mz_freopen(<span class="keyword">const</span> <span class="keywordtype">char</span> *pPath, <span class="keyword">const</span> <span class="keywordtype">char</span> *pMode, FILE *pStream)</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;{</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    FILE *pFile = NULL;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="keywordflow">if</span>(freopen_s(&amp;pFile, pPath, pMode, pStream))</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <span class="keywordflow">return</span> pFile;</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;}</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;<span class="preprocessor">#include &lt;sys/utime.h&gt;</span></div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;<span class="preprocessor">#define MZ_FOPEN mz_fopen</span></div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;<span class="preprocessor">#define MZ_FCLOSE fclose</span></div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;<span class="preprocessor">#define MZ_FREAD fread</span></div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;<span class="preprocessor">#define MZ_FWRITE fwrite</span></div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;<span class="preprocessor">#define MZ_FTELL64 _ftelli64</span></div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;<span class="preprocessor">#define MZ_FSEEK64 _fseeki64</span></div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT_STRUCT _stat</span></div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT _stat</span></div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;<span class="preprocessor">#define MZ_FFLUSH fflush</span></div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="preprocessor">#define MZ_FREOPEN mz_freopen</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="preprocessor">#define MZ_DELETE_FILE remove</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="preprocessor">#elif defined(__MINGW32__)</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="preprocessor">#include &lt;sys/utime.h&gt;</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="preprocessor">#define MZ_FOPEN(f, m) fopen(f, m)</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;<span class="preprocessor">#define MZ_FCLOSE fclose</span></div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="preprocessor">#define MZ_FREAD fread</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;<span class="preprocessor">#define MZ_FWRITE fwrite</span></div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="preprocessor">#define MZ_FTELL64 ftello64</span></div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;<span class="preprocessor">#define MZ_FSEEK64 fseeko64</span></div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT_STRUCT _stat</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT _stat</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="preprocessor">#define MZ_FFLUSH fflush</span></div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;<span class="preprocessor">#define MZ_FREOPEN(f, m, s) freopen(f, m, s)</span></div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;<span class="preprocessor">#define MZ_DELETE_FILE remove</span></div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;<span class="preprocessor">#elif defined(__TINYC__)</span></div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;<span class="preprocessor">#include &lt;sys/utime.h&gt;</span></div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;<span class="preprocessor">#define MZ_FOPEN(f, m) fopen(f, m)</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;<span class="preprocessor">#define MZ_FCLOSE fclose</span></div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;<span class="preprocessor">#define MZ_FREAD fread</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;<span class="preprocessor">#define MZ_FWRITE fwrite</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;<span class="preprocessor">#define MZ_FTELL64 ftell</span></div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;<span class="preprocessor">#define MZ_FSEEK64 fseek</span></div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT_STRUCT stat</span></div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT stat</span></div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;<span class="preprocessor">#define MZ_FFLUSH fflush</span></div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;<span class="preprocessor">#define MZ_FREOPEN(f, m, s) freopen(f, m, s)</span></div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;<span class="preprocessor">#define MZ_DELETE_FILE remove</span></div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;<span class="preprocessor">#elif defined(__GNUC__) &amp;&amp; _LARGEFILE64_SOURCE</span></div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;<span class="preprocessor">#include &lt;utime.h&gt;</span></div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;<span class="preprocessor">#define MZ_FOPEN(f, m) fopen64(f, m)</span></div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;<span class="preprocessor">#define MZ_FCLOSE fclose</span></div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="preprocessor">#define MZ_FREAD fread</span></div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;<span class="preprocessor">#define MZ_FWRITE fwrite</span></div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="preprocessor">#define MZ_FTELL64 ftello64</span></div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;<span class="preprocessor">#define MZ_FSEEK64 fseeko64</span></div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT_STRUCT stat64</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT stat64</span></div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;<span class="preprocessor">#define MZ_FFLUSH fflush</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;<span class="preprocessor">#define MZ_FREOPEN(p, m, s) freopen64(p, m, s)</span></div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;<span class="preprocessor">#define MZ_DELETE_FILE remove</span></div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;<span class="preprocessor">#elif defined(__APPLE__) &amp;&amp; _LARGEFILE64_SOURCE</span></div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;<span class="preprocessor">#include &lt;utime.h&gt;</span></div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;<span class="preprocessor">#define MZ_FOPEN(f, m) fopen(f, m)</span></div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;<span class="preprocessor">#define MZ_FCLOSE fclose</span></div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;<span class="preprocessor">#define MZ_FREAD fread</span></div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;<span class="preprocessor">#define MZ_FWRITE fwrite</span></div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;<span class="preprocessor">#define MZ_FTELL64 ftello</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;<span class="preprocessor">#define MZ_FSEEK64 fseeko</span></div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT_STRUCT stat</span></div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;<span class="preprocessor">#define MZ_FILE_STAT stat</span></div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;<span class="preprocessor">#define MZ_FFLUSH fflush</span></div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;<span class="preprocessor">#define MZ_FREOPEN(p, m, s) freopen(p, m, s)</span></div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;<span class="preprocessor">#define MZ_DELETE_FILE remove</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160; </div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;<span class="preprocessor">#pragma message(&quot;Using fopen, ftello, fseeko, stat() etc. path for file I/O - this path may not support large files.&quot;</span>)</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;<span class="preprocessor">#include &lt;utime.h&gt;</span></div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a7ab43238d8cd27afaf9ee668c8f6ab70"> 3021</a></span>&#160;<span class="preprocessor">#define MZ_FOPEN(f, m) fopen(f, m)</span></div>
<div class="line"><a name="l03022"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aca3383a48f6eda415e7b7bceea2d3e55"> 3022</a></span>&#160;<span class="preprocessor">#define MZ_FCLOSE fclose</span></div>
<div class="line"><a name="l03023"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a52bd2726a671aabfe4d49804e79900d0"> 3023</a></span>&#160;<span class="preprocessor">#define MZ_FREAD fread</span></div>
<div class="line"><a name="l03024"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5f224b658d4b01790ef55ccd3ff8d3a2"> 3024</a></span>&#160;<span class="preprocessor">#define MZ_FWRITE fwrite</span></div>
<div class="line"><a name="l03025"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#af3b9d5f2af50464d16fd7a6ef48c916b"> 3025</a></span>&#160;<span class="preprocessor">#define MZ_FTELL64 ftello</span></div>
<div class="line"><a name="l03026"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a6cd8f6b4134fc9ea62f311ac7f2c5c1d"> 3026</a></span>&#160;<span class="preprocessor">#define MZ_FSEEK64 fseeko</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#abbb4323f24a8e32a583c0b1b7e6820c9"> 3027</a></span>&#160;<span class="preprocessor">#define MZ_FILE_STAT_STRUCT stat</span></div>
<div class="line"><a name="l03028"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a06857ce8d288f462c7a2c5ded5eeea7c"> 3028</a></span>&#160;<span class="preprocessor">#define MZ_FILE_STAT stat</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2c964feaab7054e5141d5bea17af0303"> 3029</a></span>&#160;<span class="preprocessor">#define MZ_FFLUSH fflush</span></div>
<div class="line"><a name="l03030"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a39982d7e112363ff6d284ace3b9cf9bc"> 3030</a></span>&#160;<span class="preprocessor">#define MZ_FREOPEN(f, m, s) freopen(f, m, s)</span></div>
<div class="line"><a name="l03031"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#afd75f71da5742246d7c16e3c2be1b5ac"> 3031</a></span>&#160;<span class="preprocessor">#define MZ_DELETE_FILE remove</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifdef _MSC_VER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifdef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160; </div>
<div class="line"><a name="l03035"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a61d1f0e538f1b127ef8383e2d8c49f58"> 3035</a></span>&#160;<span class="preprocessor">#define MZ_TOLOWER(c) ((((c) &gt;= &#39;A&#39;) &amp;&amp; ((c) &lt;= &#39;Z&#39;)) ? ((c) - &#39;A&#39; + &#39;a&#39;) : (c))</span></div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160; </div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;<span class="comment">/* Various ZIP archive enums. To completely avoid cross platform compiler alignment and platform endian issues, miniz.c doesn&#39;t use structs for any of this stuff. */</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;<span class="keyword">enum</span></div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;{</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <span class="comment">/* ZIP archive identifiers and record sizes */</span></div>
<div class="line"><a name="l03041"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a95b16d7168bf48558fd3c8b852cb8a3d"> 3041</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a95b16d7168bf48558fd3c8b852cb8a3d">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIG</a> = 0x06054b50,</div>
<div class="line"><a name="l03042"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a77d0b453bce2a419b6144bf87e71b170"> 3042</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a77d0b453bce2a419b6144bf87e71b170">MZ_ZIP_CENTRAL_DIR_HEADER_SIG</a> = 0x02014b50,</div>
<div class="line"><a name="l03043"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a05f28665e3880ca5863fff3ca58129b6"> 3043</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a05f28665e3880ca5863fff3ca58129b6">MZ_ZIP_LOCAL_DIR_HEADER_SIG</a> = 0x04034b50,</div>
<div class="line"><a name="l03044"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1"> 3044</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> = 30,</div>
<div class="line"><a name="l03045"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964"> 3045</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> = 46,</div>
<div class="line"><a name="l03046"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9"> 3046</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a> = 22,</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160; </div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    <span class="comment">/* ZIP64 archive identifier and record sizes */</span></div>
<div class="line"><a name="l03049"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1737873733b435bcafe42f36d33e95e6"> 3049</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1737873733b435bcafe42f36d33e95e6">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIG</a> = 0x06064b50,</div>
<div class="line"><a name="l03050"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aacfa47118d9e7c741c8b27a1e4f27958"> 3050</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aacfa47118d9e7c741c8b27a1e4f27958">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIG</a> = 0x07064b50,</div>
<div class="line"><a name="l03051"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3"> 3051</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a> = 56,</div>
<div class="line"><a name="l03052"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b"> 3052</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a> = 20,</div>
<div class="line"><a name="l03053"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc"> 3053</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc">MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</a> = 0x0001,</div>
<div class="line"><a name="l03054"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d"> 3054</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d">MZ_ZIP_DATA_DESCRIPTOR_ID</a> = 0x08074b50,</div>
<div class="line"><a name="l03055"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a141e719c11d73808127d93d7e43d831f"> 3055</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a141e719c11d73808127d93d7e43d831f">MZ_ZIP_DATA_DESCRIPTER_SIZE64</a> = 24,</div>
<div class="line"><a name="l03056"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2d8d0fa55e19480b267a629d4b0174b4"> 3056</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2d8d0fa55e19480b267a629d4b0174b4">MZ_ZIP_DATA_DESCRIPTER_SIZE32</a> = 16,</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160; </div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;    <span class="comment">/* Central directory header record offsets */</span></div>
<div class="line"><a name="l03059"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a358e2e9adf6165535355f8bb86112dec"> 3059</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a358e2e9adf6165535355f8bb86112dec">MZ_ZIP_CDH_SIG_OFS</a> = 0,</div>
<div class="line"><a name="l03060"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57adc548ddb0c98ab80c5040a55a03561da"> 3060</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57adc548ddb0c98ab80c5040a55a03561da">MZ_ZIP_CDH_VERSION_MADE_BY_OFS</a> = 4,</div>
<div class="line"><a name="l03061"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a122562cf2a1182825317fe26e7902e64"> 3061</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a122562cf2a1182825317fe26e7902e64">MZ_ZIP_CDH_VERSION_NEEDED_OFS</a> = 6,</div>
<div class="line"><a name="l03062"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac50291ea0ed2b18a069f5e129f098db2"> 3062</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac50291ea0ed2b18a069f5e129f098db2">MZ_ZIP_CDH_BIT_FLAG_OFS</a> = 8,</div>
<div class="line"><a name="l03063"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a49864f9b56c094003565ed64b2b4aed1"> 3063</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a49864f9b56c094003565ed64b2b4aed1">MZ_ZIP_CDH_METHOD_OFS</a> = 10,</div>
<div class="line"><a name="l03064"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a6954b28080a1fb151914b00da25074f5"> 3064</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a6954b28080a1fb151914b00da25074f5">MZ_ZIP_CDH_FILE_TIME_OFS</a> = 12,</div>
<div class="line"><a name="l03065"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0a30dbf39d1e87013ef095186370cc36"> 3065</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0a30dbf39d1e87013ef095186370cc36">MZ_ZIP_CDH_FILE_DATE_OFS</a> = 14,</div>
<div class="line"><a name="l03066"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a98e11950c99539215b65a334a2afe989"> 3066</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a98e11950c99539215b65a334a2afe989">MZ_ZIP_CDH_CRC32_OFS</a> = 16,</div>
<div class="line"><a name="l03067"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2a463b99b8d0699bda4e3a52dd1d1015"> 3067</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2a463b99b8d0699bda4e3a52dd1d1015">MZ_ZIP_CDH_COMPRESSED_SIZE_OFS</a> = 20,</div>
<div class="line"><a name="l03068"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a43afeb736295b1f90330d79db8420c9e"> 3068</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a43afeb736295b1f90330d79db8420c9e">MZ_ZIP_CDH_DECOMPRESSED_SIZE_OFS</a> = 24,</div>
<div class="line"><a name="l03069"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2"> 3069</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a> = 28,</div>
<div class="line"><a name="l03070"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b"> 3070</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a> = 30,</div>
<div class="line"><a name="l03071"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac67dc228d5e122d1ad9cd42072e65c1d"> 3071</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac67dc228d5e122d1ad9cd42072e65c1d">MZ_ZIP_CDH_COMMENT_LEN_OFS</a> = 32,</div>
<div class="line"><a name="l03072"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa0323bb440c5cb8ebcacc2bf7da778bc"> 3072</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa0323bb440c5cb8ebcacc2bf7da778bc">MZ_ZIP_CDH_DISK_START_OFS</a> = 34,</div>
<div class="line"><a name="l03073"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa4790eefd44430aa5eab2837e16ab840"> 3073</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa4790eefd44430aa5eab2837e16ab840">MZ_ZIP_CDH_INTERNAL_ATTR_OFS</a> = 36,</div>
<div class="line"><a name="l03074"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab4dec2086b60f7e1c7ce499b07b966cb"> 3074</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab4dec2086b60f7e1c7ce499b07b966cb">MZ_ZIP_CDH_EXTERNAL_ATTR_OFS</a> = 38,</div>
<div class="line"><a name="l03075"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87"> 3075</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87">MZ_ZIP_CDH_LOCAL_HEADER_OFS</a> = 42,</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160; </div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;    <span class="comment">/* Local directory header offsets */</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8e097e1ab652a56cc76597c8ef1999c0"> 3078</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8e097e1ab652a56cc76597c8ef1999c0">MZ_ZIP_LDH_SIG_OFS</a> = 0,</div>
<div class="line"><a name="l03079"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa84f798966b9ea678b5eaebc6dca4b70"> 3079</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa84f798966b9ea678b5eaebc6dca4b70">MZ_ZIP_LDH_VERSION_NEEDED_OFS</a> = 4,</div>
<div class="line"><a name="l03080"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ed8079f712b2ec7963d9b1378596528"> 3080</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ed8079f712b2ec7963d9b1378596528">MZ_ZIP_LDH_BIT_FLAG_OFS</a> = 6,</div>
<div class="line"><a name="l03081"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a607eeb03e7ee0916fa7d93abaaaba9fd"> 3081</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a607eeb03e7ee0916fa7d93abaaaba9fd">MZ_ZIP_LDH_METHOD_OFS</a> = 8,</div>
<div class="line"><a name="l03082"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4d8dee6a3a5a1bb480dbbd7b9bff6a68"> 3082</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4d8dee6a3a5a1bb480dbbd7b9bff6a68">MZ_ZIP_LDH_FILE_TIME_OFS</a> = 10,</div>
<div class="line"><a name="l03083"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5cb18f68ead9424b140fd8710ee9e124"> 3083</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5cb18f68ead9424b140fd8710ee9e124">MZ_ZIP_LDH_FILE_DATE_OFS</a> = 12,</div>
<div class="line"><a name="l03084"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0b518fa8ffa820df4771f9d567c13dcc"> 3084</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0b518fa8ffa820df4771f9d567c13dcc">MZ_ZIP_LDH_CRC32_OFS</a> = 14,</div>
<div class="line"><a name="l03085"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a67751a44d185feb156f40a7cd922a577"> 3085</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a67751a44d185feb156f40a7cd922a577">MZ_ZIP_LDH_COMPRESSED_SIZE_OFS</a> = 18,</div>
<div class="line"><a name="l03086"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3538fb6973847de5f8bd315ba8d0e1d"> 3086</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3538fb6973847de5f8bd315ba8d0e1d">MZ_ZIP_LDH_DECOMPRESSED_SIZE_OFS</a> = 22,</div>
<div class="line"><a name="l03087"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4990e590f2652f0d540c3eb35e3f650f"> 3087</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4990e590f2652f0d540c3eb35e3f650f">MZ_ZIP_LDH_FILENAME_LEN_OFS</a> = 26,</div>
<div class="line"><a name="l03088"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aaecc052d653e298f93b9c5523c98f5f2"> 3088</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aaecc052d653e298f93b9c5523c98f5f2">MZ_ZIP_LDH_EXTRA_LEN_OFS</a> = 28,</div>
<div class="line"><a name="l03089"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0405d7ab268a9b534642d2d0acf56749"> 3089</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0405d7ab268a9b534642d2d0acf56749">MZ_ZIP_LDH_BIT_FLAG_HAS_LOCATOR</a> = 1 &lt;&lt; 3,</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160; </div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    <span class="comment">/* End of central directory offsets */</span></div>
<div class="line"><a name="l03092"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7b4454ba69b4a1c3bfe0cd316932a3cf"> 3092</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7b4454ba69b4a1c3bfe0cd316932a3cf">MZ_ZIP_ECDH_SIG_OFS</a> = 0,</div>
<div class="line"><a name="l03093"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ae0c658558608a1501292d493a3049178"> 3093</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ae0c658558608a1501292d493a3049178">MZ_ZIP_ECDH_NUM_THIS_DISK_OFS</a> = 4,</div>
<div class="line"><a name="l03094"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0edb58391c7fa73d90c8deac8bc8b85e"> 3094</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0edb58391c7fa73d90c8deac8bc8b85e">MZ_ZIP_ECDH_NUM_DISK_CDIR_OFS</a> = 6,</div>
<div class="line"><a name="l03095"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3415fd67ec4b72e9b7e6856ed920d100"> 3095</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3415fd67ec4b72e9b7e6856ed920d100">MZ_ZIP_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</a> = 8,</div>
<div class="line"><a name="l03096"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76cd05886b8034f320cb457c03e6641a"> 3096</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76cd05886b8034f320cb457c03e6641a">MZ_ZIP_ECDH_CDIR_TOTAL_ENTRIES_OFS</a> = 10,</div>
<div class="line"><a name="l03097"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a45f0ad9bb0f828942c6e54015f44af4e"> 3097</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a45f0ad9bb0f828942c6e54015f44af4e">MZ_ZIP_ECDH_CDIR_SIZE_OFS</a> = 12,</div>
<div class="line"><a name="l03098"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa862cb29a1bcd653affce1a58e82f494"> 3098</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa862cb29a1bcd653affce1a58e82f494">MZ_ZIP_ECDH_CDIR_OFS_OFS</a> = 16,</div>
<div class="line"><a name="l03099"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a844ce7cb26e7e4a0f6321baf37ac66cb"> 3099</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a844ce7cb26e7e4a0f6321baf37ac66cb">MZ_ZIP_ECDH_COMMENT_SIZE_OFS</a> = 20,</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160; </div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <span class="comment">/* ZIP64 End of central directory locator offsets */</span></div>
<div class="line"><a name="l03102"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a493c8c19fe896d665222f70c623f9fc6"> 3102</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a493c8c19fe896d665222f70c623f9fc6">MZ_ZIP64_ECDL_SIG_OFS</a> = 0,                    <span class="comment">/* 4 bytes */</span></div>
<div class="line"><a name="l03103"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4063056c23df4708b24423233e2b738b"> 3103</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4063056c23df4708b24423233e2b738b">MZ_ZIP64_ECDL_NUM_DISK_CDIR_OFS</a> = 4,          <span class="comment">/* 4 bytes */</span></div>
<div class="line"><a name="l03104"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5e3af797b3f1a81865958774b1c62735"> 3104</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5e3af797b3f1a81865958774b1c62735">MZ_ZIP64_ECDL_REL_OFS_TO_ZIP64_ECDR_OFS</a> = 8,  <span class="comment">/* 8 bytes */</span></div>
<div class="line"><a name="l03105"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8be22e7047a06fc2815c55c84b82b222"> 3105</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8be22e7047a06fc2815c55c84b82b222">MZ_ZIP64_ECDL_TOTAL_NUMBER_OF_DISKS_OFS</a> = 16, <span class="comment">/* 4 bytes */</span></div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160; </div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <span class="comment">/* ZIP64 End of central directory header offsets */</span></div>
<div class="line"><a name="l03108"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ecfe9df02264886b36ace284d1fcfd4"> 3108</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ecfe9df02264886b36ace284d1fcfd4">MZ_ZIP64_ECDH_SIG_OFS</a> = 0,                       <span class="comment">/* 4 bytes */</span></div>
<div class="line"><a name="l03109"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57af93888e0a9fe5b48b11c983d8626278d"> 3109</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57af93888e0a9fe5b48b11c983d8626278d">MZ_ZIP64_ECDH_SIZE_OF_RECORD_OFS</a> = 4,            <span class="comment">/* 8 bytes */</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03aa0ae942083ab0f6bee9f23f3eec45"> 3110</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03aa0ae942083ab0f6bee9f23f3eec45">MZ_ZIP64_ECDH_VERSION_MADE_BY_OFS</a> = 12,          <span class="comment">/* 2 bytes */</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a55ade64891d171085e4c27b6c91a5b18"> 3111</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a55ade64891d171085e4c27b6c91a5b18">MZ_ZIP64_ECDH_VERSION_NEEDED_OFS</a> = 14,           <span class="comment">/* 2 bytes */</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab99ad7abe356356da9f80a7c141f9027"> 3112</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab99ad7abe356356da9f80a7c141f9027">MZ_ZIP64_ECDH_NUM_THIS_DISK_OFS</a> = 16,            <span class="comment">/* 4 bytes */</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2790f9123d0398f4498f75784069c3c9"> 3113</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2790f9123d0398f4498f75784069c3c9">MZ_ZIP64_ECDH_NUM_DISK_CDIR_OFS</a> = 20,            <span class="comment">/* 4 bytes */</span></div>
<div class="line"><a name="l03114"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a63640ed20841b4aad31e5f27bc11f5c4"> 3114</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a63640ed20841b4aad31e5f27bc11f5c4">MZ_ZIP64_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</a> = 24, <span class="comment">/* 8 bytes */</span></div>
<div class="line"><a name="l03115"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa3bd2e64f9cea2ef41a46201685ebb0f"> 3115</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa3bd2e64f9cea2ef41a46201685ebb0f">MZ_ZIP64_ECDH_CDIR_TOTAL_ENTRIES_OFS</a> = 32,       <span class="comment">/* 8 bytes */</span></div>
<div class="line"><a name="l03116"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8bd9fc50f35f48bf3ce4456b4d57bac3"> 3116</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8bd9fc50f35f48bf3ce4456b4d57bac3">MZ_ZIP64_ECDH_CDIR_SIZE_OFS</a> = 40,                <span class="comment">/* 8 bytes */</span></div>
<div class="line"><a name="l03117"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3072ff7e0d451b2d918e4be650c998c"> 3117</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3072ff7e0d451b2d918e4be650c998c">MZ_ZIP64_ECDH_CDIR_OFS_OFS</a> = 48,                 <span class="comment">/* 8 bytes */</span></div>
<div class="line"><a name="l03118"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7107b0f82574f69262e3d0b4443856b6"> 3118</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7107b0f82574f69262e3d0b4443856b6">MZ_ZIP_VERSION_MADE_BY_DOS_FILESYSTEM_ID</a> = 0,</div>
<div class="line"><a name="l03119"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a2a1bb318f1f4ab445c7e4de3d3e1cc"> 3119</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a2a1bb318f1f4ab445c7e4de3d3e1cc">MZ_ZIP_DOS_DIR_ATTRIBUTE_BITFLAG</a> = 0x10,</div>
<div class="line"><a name="l03120"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aee3f29c6ca80f7c1ba12e8d4620980b0"> 3120</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aee3f29c6ca80f7c1ba12e8d4620980b0">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_IS_ENCRYPTED</a> = 1,</div>
<div class="line"><a name="l03121"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3df7ccd884899093e2cc9cf6411f5743"> 3121</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3df7ccd884899093e2cc9cf6411f5743">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_COMPRESSED_PATCH_FLAG</a> = 32,</div>
<div class="line"><a name="l03122"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a9065070139fca1d195692b1009357e3c"> 3122</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a9065070139fca1d195692b1009357e3c">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_USES_STRONG_ENCRYPTION</a> = 64,</div>
<div class="line"><a name="l03123"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab5a6b8b6b4b9f098c4ec926a6d22c432"> 3123</a></span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab5a6b8b6b4b9f098c4ec926a6d22c432">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_LOCAL_DIR_IS_MASKED</a> = 8192,</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2170b4f05a7674dad26a7c90f92ed992">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_UTF8</a> = 1 &lt;&lt; 11</div>
<div class="line"><a name="l03125"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2170b4f05a7674dad26a7c90f92ed992"> 3125</a></span>&#160;};</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160; </div>
<div class="line"><a name="l03127"></a><span class="lineno"><a class="line" href="structmz__zip__array.html"> 3127</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;{</div>
<div class="line"><a name="l03129"></a><span class="lineno"><a class="line" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651"> 3129</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>;</div>
<div class="line"><a name="l03130"></a><span class="lineno"><a class="line" href="structmz__zip__array.html#abb5fb11f941f23713d9a8ef20930bf68"> 3130</a></span>&#160;    <span class="keywordtype">size_t</span> m_size, <a class="code" href="structmz__zip__array.html#abb5fb11f941f23713d9a8ef20930bf68">m_capacity</a>;</div>
<div class="line"><a name="l03131"></a><span class="lineno"><a class="line" href="structmz__zip__array.html#ac3eb7acc1c233ed3c53db813d7d00692"> 3131</a></span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> <a class="code" href="structmz__zip__array.html#ac3eb7acc1c233ed3c53db813d7d00692">m_element_size</a>;</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;} <a class="code" href="structmz__zip__array.html">mz_zip_array</a>;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160; </div>
<div class="line"><a name="l03134"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html"> 3134</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state_tag</a></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;{</div>
<div class="line"><a name="l03136"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f"> 3136</a></span>&#160;    <a class="code" href="structmz__zip__array.html">mz_zip_array</a> <a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>;</div>
<div class="line"><a name="l03137"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c"> 3137</a></span>&#160;    <a class="code" href="structmz__zip__array.html">mz_zip_array</a> <a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>;</div>
<div class="line"><a name="l03138"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33"> 3138</a></span>&#160;    <a class="code" href="structmz__zip__array.html">mz_zip_array</a> <a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>;</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160; </div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    <span class="comment">/* The flags passed in when the archive is initially opened. */</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#aa247669a24b55b9b9e86f732ea175bce"> 3141</a></span>&#160;    uint32_t <a class="code" href="structmz__zip__internal__state__tag.html#aa247669a24b55b9b9e86f732ea175bce">m_init_flags</a>;</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160; </div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;    <span class="comment">/* MZ_TRUE if the archive has a zip64 end of central directory headers, etc. */</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077"> 3144</a></span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>;</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160; </div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    <span class="comment">/* MZ_TRUE if we found zip64 extended info in the central directory (m_zip64 will also be slammed to true too, even if we didn&#39;t find a zip64 end of central dir header, etc.) */</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#a0071a211627637fc049defb3f61972fe"> 3147</a></span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="structmz__zip__internal__state__tag.html#a0071a211627637fc049defb3f61972fe">m_zip64_has_extended_info_fields</a>;</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160; </div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <span class="comment">/* These fields are used by the file, FILE, memory, and memory/heap read/write helpers. */</span></div>
<div class="line"><a name="l03150"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c"> 3150</a></span>&#160;    <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>;</div>
<div class="line"><a name="l03151"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#a2705cc469d5f08543d5f827f43f391ec"> 3151</a></span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> <a class="code" href="structmz__zip__internal__state__tag.html#a2705cc469d5f08543d5f827f43f391ec">m_file_archive_start_ofs</a>;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160; </div>
<div class="line"><a name="l03153"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377"> 3153</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>;</div>
<div class="line"><a name="l03154"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#a4511d7743e1a63fb78ed066f8de96466"> 3154</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structmz__zip__internal__state__tag.html#a4511d7743e1a63fb78ed066f8de96466">m_mem_size</a>;</div>
<div class="line"><a name="l03155"></a><span class="lineno"><a class="line" href="structmz__zip__internal__state__tag.html#a71f011527805e3ac48f5f12cb73d2233"> 3155</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structmz__zip__internal__state__tag.html#a71f011527805e3ac48f5f12cb73d2233">m_mem_capacity</a>;</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;};</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160; </div>
<div class="line"><a name="l03158"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a26e8cbdf6ac000e1becf7faa1aa7a1fa"> 3158</a></span>&#160;<span class="preprocessor">#define MZ_ZIP_ARRAY_SET_ELEMENT_SIZE(array_ptr, element_size) (array_ptr)-&gt;m_element_size = element_size</span></div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160; </div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;<span class="preprocessor">#if defined(DEBUG) || defined(_DEBUG) || defined(NDEBUG)</span></div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> mz_zip_array_range_check(<span class="keyword">const</span> <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pArray, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> index)</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;{</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(index &lt; pArray-&gt;m_size);</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    <span class="keywordflow">return</span> index;</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;}</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;<span class="preprocessor">#define MZ_ZIP_ARRAY_ELEMENT(array_ptr, element_type, index) ((element_type *)((array_ptr)-&gt;m_p))[mz_zip_array_range_check(array_ptr, index)]</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143"> 3168</a></span>&#160;<span class="preprocessor">#define MZ_ZIP_ARRAY_ELEMENT(array_ptr, element_type, index) ((element_type *)((array_ptr)-&gt;m_p))[index]</span></div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160; </div>
<div class="line"><a name="l03171"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a23da3e308ec523f5b73d3f22b3153355"> 3171</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a23da3e308ec523f5b73d3f22b3153355">mz_zip_array_init</a>(<a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pArray, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> element_size)</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;{</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(pArray, 0, <span class="keyword">sizeof</span>(<a class="code" href="structmz__zip__array.html">mz_zip_array</a>));</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    pArray-&gt;<a class="code" href="structmz__zip__array.html#ac3eb7acc1c233ed3c53db813d7d00692">m_element_size</a> = element_size;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;}</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160; </div>
<div class="line"><a name="l03177"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb"> 3177</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pArray)</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;{</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pArray-&gt;<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>);</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(pArray, 0, <span class="keyword">sizeof</span>(<a class="code" href="structmz__zip__array.html">mz_zip_array</a>));</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;}</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160; </div>
<div class="line"><a name="l03183"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aea3e54d9a8a3dd68909748bbf331fdec"> 3183</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#aea3e54d9a8a3dd68909748bbf331fdec">mz_zip_array_ensure_capacity</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pArray, <span class="keywordtype">size_t</span> min_new_capacity, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> growing)</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;{</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    <span class="keywordtype">void</span> *pNew_p;</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    <span class="keywordtype">size_t</span> new_capacity = min_new_capacity;</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(pArray-&gt;<a class="code" href="structmz__zip__array.html#ac3eb7acc1c233ed3c53db813d7d00692">m_element_size</a>);</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    <span class="keywordflow">if</span>(pArray-&gt;<a class="code" href="structmz__zip__array.html#abb5fb11f941f23713d9a8ef20930bf68">m_capacity</a> &gt;= min_new_capacity)</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="keywordflow">if</span>(growing)</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    {</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;        new_capacity = <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(1, pArray-&gt;<a class="code" href="structmz__zip__array.html#abb5fb11f941f23713d9a8ef20930bf68">m_capacity</a>);</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;        <span class="keywordflow">while</span>(new_capacity &lt; min_new_capacity)</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;            new_capacity *= 2;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    }</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    <span class="keywordflow">if</span>(NULL == (pNew_p = pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3cdd59e8bcc156954790af62fee92e8">m_pRealloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pArray-&gt;<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>, pArray-&gt;<a class="code" href="structmz__zip__array.html#ac3eb7acc1c233ed3c53db813d7d00692">m_element_size</a>, new_capacity)))</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    pArray-&gt;<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a> = pNew_p;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    pArray-&gt;<a class="code" href="structmz__zip__array.html#abb5fb11f941f23713d9a8ef20930bf68">m_capacity</a> = new_capacity;</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;}</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160; </div>
<div class="line"><a name="l03203"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a6ecdc57ba9f179d46476427858b46450"> 3203</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a6ecdc57ba9f179d46476427858b46450">mz_zip_array_reserve</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pArray, <span class="keywordtype">size_t</span> new_capacity, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> growing)</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;{</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <span class="keywordflow">if</span>(new_capacity &gt; pArray-&gt;<a class="code" href="structmz__zip__array.html#abb5fb11f941f23713d9a8ef20930bf68">m_capacity</a>)</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    {</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aea3e54d9a8a3dd68909748bbf331fdec">mz_zip_array_ensure_capacity</a>(pZip, pArray, new_capacity, growing))</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    }</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;}</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160; </div>
<div class="line"><a name="l03213"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f"> 3213</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pArray, <span class="keywordtype">size_t</span> new_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> growing)</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;{</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="keywordflow">if</span>(new_size &gt; pArray-&gt;<a class="code" href="structmz__zip__array.html#abb5fb11f941f23713d9a8ef20930bf68">m_capacity</a>)</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    {</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aea3e54d9a8a3dd68909748bbf331fdec">mz_zip_array_ensure_capacity</a>(pZip, pArray, new_size, growing))</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    }</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    pArray-&gt;<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> = new_size;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;}</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160; </div>
<div class="line"><a name="l03224"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac0727c0cc3614254a2dc7a9fa2339794"> 3224</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ac0727c0cc3614254a2dc7a9fa2339794">mz_zip_array_ensure_room</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pArray, <span class="keywordtype">size_t</span> n)</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;{</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a6ecdc57ba9f179d46476427858b46450">mz_zip_array_reserve</a>(pZip, pArray, pArray-&gt;<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> + n, <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;}</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160; </div>
<div class="line"><a name="l03229"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9"> 3229</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pArray, <span class="keyword">const</span> <span class="keywordtype">void</span> *pElements, <span class="keywordtype">size_t</span> n)</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;{</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="keywordtype">size_t</span> orig_size = pArray-&gt;<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a>;</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, pArray, orig_size + n, <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>))</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pArray-&gt;<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a> + orig_size * pArray-&gt;<a class="code" href="structmz__zip__array.html#ac3eb7acc1c233ed3c53db813d7d00692">m_element_size</a>, pElements, n * pArray-&gt;<a class="code" href="structmz__zip__array.html#ac3eb7acc1c233ed3c53db813d7d00692">m_element_size</a>);</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;}</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160; </div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l03239"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5c1678f38e026eece0171600cb448e1c"> 3239</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> <a class="code" href="miniz_8cpp.html#a5c1678f38e026eece0171600cb448e1c">mz_zip_dos_to_time_t</a>(<span class="keywordtype">int</span> dos_time, <span class="keywordtype">int</span> dos_date)</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;{</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="keyword">struct </span>tm tm;</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;tm, 0, <span class="keyword">sizeof</span>(tm));</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    tm.tm_isdst = -1;</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    tm.tm_year = ((dos_date &gt;&gt; 9) &amp; 127) + 1980 - 1900;</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    tm.tm_mon = ((dos_date &gt;&gt; 5) &amp; 15) - 1;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;    tm.tm_mday = dos_date &amp; 31;</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    tm.tm_hour = (dos_time &gt;&gt; 11) &amp; 31;</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    tm.tm_min = (dos_time &gt;&gt; 5) &amp; 63;</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    tm.tm_sec = (dos_time &lt;&lt; 1) &amp; 62;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="time_8c.html#ae114b9ba0fce4e2d6297e0e66768bb75">mktime</a>(&amp;tm);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;}</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160; </div>
<div class="line"><a name="l03253"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a6468572e6ec87a0cf96d8d3ee6549f78"> 3253</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a6468572e6ec87a0cf96d8d3ee6549f78">mz_zip_time_t_to_dos_time</a>(<a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> <a class="code" href="time_8c.html#a99ef1cb2c789827dd5db3886dccf9067">time</a>, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *pDOS_time, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> *pDOS_date)</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;{</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    <span class="keyword">struct </span>tm tm_struct;</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;    <span class="keyword">struct </span>tm *tm = &amp;tm_struct;</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    errno_t <a class="code" href="err_8c.html#aac7e66a886f062322beba3cb396968aa">err</a> = localtime_s(tm, &amp;<a class="code" href="time_8c.html#a99ef1cb2c789827dd5db3886dccf9067">time</a>);</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="err_8c.html#aac7e66a886f062322beba3cb396968aa">err</a>)</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    {</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;        *pDOS_date = 0;</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;        *pDOS_time = 0;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    }</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    <span class="keyword">struct </span>tm *tm = <a class="code" href="time_8c.html#a31eb4b8076c94ddffba34e65f8449f4c">localtime</a>(&amp;<a class="code" href="time_8c.html#a99ef1cb2c789827dd5db3886dccf9067">time</a>);</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifdef _MSC_VER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160; </div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    *pDOS_time = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)(((tm-&gt;tm_hour) &lt;&lt; 11) + ((tm-&gt;tm_min) &lt;&lt; 5) + ((tm-&gt;tm_sec) &gt;&gt; 1));</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    *pDOS_date = (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)(((tm-&gt;tm_year + 1900 - 1980) &lt;&lt; 9) + ((tm-&gt;tm_mon + 1) &lt;&lt; 5) + tm-&gt;tm_mday);</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;}</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160; </div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac86e5a4211929213c94443470223ce28"> 3274</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ac86e5a4211929213c94443470223ce28">mz_zip_get_file_modified_time</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> *pTime)</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;{</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <span class="keyword">struct </span><a class="code" href="miniz_8cpp.html#abbb4323f24a8e32a583c0b1b7e6820c9">MZ_FILE_STAT_STRUCT</a> file_stat;</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160; </div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="comment">/* On Linux with x86 glibc, this call will fail on large files (I think &gt;= 0x80000000 bytes) unless you compiled with _LARGEFILE64_SOURCE. Argh. */</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a06857ce8d288f462c7a2c5ded5eeea7c">MZ_FILE_STAT</a>(pFilename, &amp;file_stat) != 0)</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160; </div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    *pTime = file_stat.st_mtime;</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160; </div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;}</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160; </div>
<div class="line"><a name="l03287"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ada51b4115a68e8a0dd99fa3d51f4d68a"> 3287</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ada51b4115a68e8a0dd99fa3d51f4d68a">mz_zip_set_file_times</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> access_time, <a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> modified_time)</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;{</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    <span class="keyword">struct </span>utimbuf t;</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160; </div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;t, 0, <span class="keyword">sizeof</span>(t));</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    t.actime = access_time;</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    t.modtime = modified_time;</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160; </div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    <span class="keywordflow">return</span> !utime(pFilename, &amp;t);</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;}</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_TIME */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160; </div>
<div class="line"><a name="l03300"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05"> 3300</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> err_num)</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;{</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;    <span class="keywordflow">if</span>(pZip)</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a> = err_num;</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;}</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160; </div>
<div class="line"><a name="l03307"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a52d8a4b36d39d7cf0dd2afbba5ce9c7e"> 3307</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a52d8a4b36d39d7cf0dd2afbba5ce9c7e">mz_zip_reader_init_internal</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;{</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    (void)flags;</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a713f3b45f38e966b751027436df64e50">MZ_ZIP_MODE_INVALID</a>))</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160; </div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>)</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a> = <a class="code" href="miniz_8cpp.html#a5b8c4d334248b00bb255a64a7628ab36">miniz_def_alloc_func</a>;</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>)</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a> = <a class="code" href="miniz_8cpp.html#a74bd5c1f3f342d2109643cfa500689fc">miniz_def_free_func</a>;</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3cdd59e8bcc156954790af62fee92e8">m_pRealloc</a>)</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3cdd59e8bcc156954790af62fee92e8">m_pRealloc</a> = <a class="code" href="miniz_8cpp.html#ae51abb9ee6167023388e1d1122b10d89">miniz_def_realloc_func</a>;</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160; </div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> = 0;</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a128125bc28f4d1f118fe7b9badd0f975">m_central_directory_file_ofs</a> = 0;</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> = 0;</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a> = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d0cd76e20534ea0d5777ac0c3601db9">MZ_ZIP_NO_ERROR</a>;</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160; </div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    <span class="keywordflow">if</span>(NULL == (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a> = (<a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, <span class="keyword">sizeof</span>(<a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a>))))</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a>));</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    <a class="code" href="miniz_8cpp.html#a26e8cbdf6ac000e1becf7faa1aa7a1fa">MZ_ZIP_ARRAY_SET_ELEMENT_SIZE</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>));</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;    <a class="code" href="miniz_8cpp.html#a26e8cbdf6ac000e1becf7faa1aa7a1fa">MZ_ZIP_ARRAY_SET_ELEMENT_SIZE</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>, <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>));</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    <a class="code" href="miniz_8cpp.html#a26e8cbdf6ac000e1becf7faa1aa7a1fa">MZ_ZIP_ARRAY_SET_ELEMENT_SIZE</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>, <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>));</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#aa247669a24b55b9b9e86f732ea175bce">m_init_flags</a> = flags;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a0071a211627637fc049defb3f61972fe">m_zip64_has_extended_info_fields</a> = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160; </div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> = <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a40c391220d01d172a451f3dad0d5aed6">MZ_ZIP_MODE_READING</a>;</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160; </div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;}</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160; </div>
<div class="line"><a name="l03341"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a301f6efc39cd1e431f0f11db47a03325"> 3341</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a301f6efc39cd1e431f0f11db47a03325">mz_zip_reader_filename_less</a>(<span class="keyword">const</span> <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pCentral_dir_array, <span class="keyword">const</span> <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pCentral_dir_offsets, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> l_index, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> r_index)</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;{</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pL = &amp;<a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(pCentral_dir_array, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>, <a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(pCentral_dir_offsets, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, l_index)), *pE;</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pR = &amp;<a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(pCentral_dir_array, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>, <a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(pCentral_dir_offsets, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, r_index));</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> l_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pL + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>), r_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pR + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> l = 0, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a> = 0;</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;    pL += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>;</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;    pR += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>;</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;    pE = pL + <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(l_len, r_len);</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    <span class="keywordflow">while</span>(pL &lt; pE)</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    {</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;        <span class="keywordflow">if</span>((l = <a class="code" href="miniz_8cpp.html#a61d1f0e538f1b127ef8383e2d8c49f58">MZ_TOLOWER</a>(*pL)) != (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a> = <a class="code" href="miniz_8cpp.html#a61d1f0e538f1b127ef8383e2d8c49f58">MZ_TOLOWER</a>(*pR)))</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;        pL++;</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;        pR++;</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    }</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <span class="keywordflow">return</span> (pL == pE) ? (l_len &lt; r_len) : (l &lt; <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>);</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;}</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160; </div>
<div class="line"><a name="l03360"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac5054e9be72034055946137811cbb0a1"> 3360</a></span>&#160;<span class="preprocessor">#define MZ_SWAP_UINT32(a, b) \</span></div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;<span class="preprocessor">    do                       \</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;<span class="preprocessor">    {                        \</span></div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;<span class="preprocessor">        mz_uint32 t = a;     \</span></div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;<span class="preprocessor">        a = b;               \</span></div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;<span class="preprocessor">        b = t;               \</span></div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;<span class="preprocessor">    }                        \</span></div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;<span class="preprocessor">    MZ_MACRO_END</span></div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160; </div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;<span class="comment">/* Heap sort of lowercased filenames, used to help accelerate plain central directory searches by mz_zip_reader_locate_file(). (Could also use qsort(), but it could allocate memory.) */</span></div>
<div class="line"><a name="l03370"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a240514a6b8d7e6f71ca91b166f37d961"> 3370</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a240514a6b8d7e6f71ca91b166f37d961">mz_zip_reader_sort_central_dir_offsets_by_filename</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;{</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;    <span class="keyword">const</span> <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pCentral_dir_offsets = &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>;</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;    <span class="keyword">const</span> <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pCentral_dir = &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>;</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *pIndices;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> start, end;</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> size = pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>;</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160; </div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;    <span class="keywordflow">if</span>(size &lt;= 1U)</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160; </div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;    pIndices = &amp;<a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(&amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, 0);</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160; </div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    start = (size - 2U) &gt;&gt; 1U;</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;    {</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> child, root = start;</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;        <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;        {</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;            <span class="keywordflow">if</span>((child = (root &lt;&lt; 1U) + 1U) &gt;= size)</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;            child += (((child + 1U) &lt; size) &amp;&amp; (<a class="code" href="miniz_8cpp.html#a301f6efc39cd1e431f0f11db47a03325">mz_zip_reader_filename_less</a>(pCentral_dir, pCentral_dir_offsets, pIndices[child], pIndices[child + 1U])));</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a301f6efc39cd1e431f0f11db47a03325">mz_zip_reader_filename_less</a>(pCentral_dir, pCentral_dir_offsets, pIndices[root], pIndices[child]))</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;            <a class="code" href="miniz_8cpp.html#ac5054e9be72034055946137811cbb0a1">MZ_SWAP_UINT32</a>(pIndices[root], pIndices[child]);</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;            root = child;</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;        }</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;        <span class="keywordflow">if</span>(!start)</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;        start--;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;    }</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160; </div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    end = size - 1;</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    <span class="keywordflow">while</span>(end &gt; 0)</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    {</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> child, root = 0;</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;        <a class="code" href="miniz_8cpp.html#ac5054e9be72034055946137811cbb0a1">MZ_SWAP_UINT32</a>(pIndices[end], pIndices[0]);</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;        <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;        {</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;            <span class="keywordflow">if</span>((child = (root &lt;&lt; 1U) + 1U) &gt;= end)</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;            child += (((child + 1U) &lt; end) &amp;&amp; <a class="code" href="miniz_8cpp.html#a301f6efc39cd1e431f0f11db47a03325">mz_zip_reader_filename_less</a>(pCentral_dir, pCentral_dir_offsets, pIndices[child], pIndices[child + 1U]));</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a301f6efc39cd1e431f0f11db47a03325">mz_zip_reader_filename_less</a>(pCentral_dir, pCentral_dir_offsets, pIndices[root], pIndices[child]))</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;            <a class="code" href="miniz_8cpp.html#ac5054e9be72034055946137811cbb0a1">MZ_SWAP_UINT32</a>(pIndices[root], pIndices[child]);</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;            root = child;</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;        }</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;        end--;</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;    }</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;}</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160; </div>
<div class="line"><a name="l03422"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a35703b413385ecd807012bca70a3a221"> 3422</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a35703b413385ecd807012bca70a3a221">mz_zip_reader_locate_header_sig</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> record_sig, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> record_size, <a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a> *pOfs)</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;{</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a> cur_file_ofs;</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> buf_u32[4096 / <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)];</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pBuf = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)buf_u32;</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160; </div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    <span class="comment">/* Basic sanity checks - reject files which are too small */</span></div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> &lt; record_size)</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160; </div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <span class="comment">/* Find the record by scanning the file from the end towards the beginning. */</span></div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    cur_file_ofs = <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>((<a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a>)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> - (<a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a>)<span class="keyword">sizeof</span>(buf_u32), 0);</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;    {</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;        <span class="keywordtype">int</span> i, n = (int)<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<span class="keyword">sizeof</span>(buf_u32), pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> - cur_file_ofs);</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160; </div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs, pBuf, n) != (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)n)</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160; </div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;        <span class="keywordflow">for</span>(i = n - 4; i &gt;= 0; --i)</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;        {</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> s = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pBuf + i);</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;            <span class="keywordflow">if</span>(s == record_sig)</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;            {</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;                <span class="keywordflow">if</span>((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> - (cur_file_ofs + i)) &gt;= record_size)</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;            }</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;        }</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160; </div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;        <span class="keywordflow">if</span>(i &gt;= 0)</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;        {</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;            cur_file_ofs += i;</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;        }</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160; </div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;        <span class="comment">/* Give up if we&#39;ve searched the entire file, or we&#39;ve gone back &quot;too far&quot; (~64kb) */</span></div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;        <span class="keywordflow">if</span>((!cur_file_ofs) || ((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> - cur_file_ofs) &gt;= (<a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a> + record_size)))</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160; </div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;        cur_file_ofs = <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(cur_file_ofs - (<span class="keyword">sizeof</span>(buf_u32) - 3), 0);</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    }</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160; </div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    *pOfs = cur_file_ofs;</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;}</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160; </div>
<div class="line"><a name="l03468"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a7ac2826eb7d5b0df83a06d43a4489f4f"> 3468</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a7ac2826eb7d5b0df83a06d43a4489f4f">mz_zip_reader_read_central_dir</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;{</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> cdir_size = 0, cdir_entries_on_this_disk = 0, num_this_disk = 0, cdir_disk_index = 0;</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> cdir_ofs = 0;</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;    <a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a> cur_file_ofs = 0;</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p;</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160; </div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> buf_u32[4096 / <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)];</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pBuf = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)buf_u32;</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> sort_central_dir = ((flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858ab09115999c35684b92cd771f65909e39">MZ_ZIP_FLAG_DO_NOT_SORT_CENTRAL_DIRECTORY</a>) == 0);</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> zip64_end_of_central_dir_locator_u32[(<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a> + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) - 1) / <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)];</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pZip64_locator = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)zip64_end_of_central_dir_locator_u32;</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160; </div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> zip64_end_of_central_dir_header_u32[(<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a> + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) - 1) / <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)];</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pZip64_end_of_central_dir = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)zip64_end_of_central_dir_header_u32;</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160; </div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> zip64_end_of_central_dir_ofs = 0;</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160; </div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;    <span class="comment">/* Basic sanity checks - reject files which are too small, and check the first 4 bytes of the file to make sure a local header is there. */</span></div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> &lt; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daeab66c528acdb43f7946e6411f515083">MZ_ZIP_NOT_AN_ARCHIVE</a>);</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160; </div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a35703b413385ecd807012bca70a3a221">mz_zip_reader_locate_header_sig</a>(pZip, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a95b16d7168bf48558fd3c8b852cb8a3d">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIG</a>, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>, &amp;cur_file_ofs))</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dadce5afd210f3689e58e71ed2acc02d6c">MZ_ZIP_FAILED_FINDING_CENTRAL_DIR</a>);</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160; </div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    <span class="comment">/* Read and verify the end of central directory record. */</span></div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs, pBuf, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160; </div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pBuf + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7b4454ba69b4a1c3bfe0cd316932a3cf">MZ_ZIP_ECDH_SIG_OFS</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a95b16d7168bf48558fd3c8b852cb8a3d">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIG</a>)</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daeab66c528acdb43f7946e6411f515083">MZ_ZIP_NOT_AN_ARCHIVE</a>);</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160; </div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    <span class="keywordflow">if</span>(cur_file_ofs &gt;= (<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a>))</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    {</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs - <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a>, pZip64_locator, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a>) == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a>)</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;        {</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pZip64_locator + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a493c8c19fe896d665222f70c623f9fc6">MZ_ZIP64_ECDL_SIG_OFS</a>) == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aacfa47118d9e7c741c8b27a1e4f27958">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIG</a>)</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;            {</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;                zip64_end_of_central_dir_ofs = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pZip64_locator + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5e3af797b3f1a81865958774b1c62735">MZ_ZIP64_ECDL_REL_OFS_TO_ZIP64_ECDR_OFS</a>);</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;                <span class="keywordflow">if</span>(zip64_end_of_central_dir_ofs &gt; (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> - <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a>))</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daeab66c528acdb43f7946e6411f515083">MZ_ZIP_NOT_AN_ARCHIVE</a>);</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160; </div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;                <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, zip64_end_of_central_dir_ofs, pZip64_end_of_central_dir, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a>) == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;                {</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pZip64_end_of_central_dir + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ecfe9df02264886b36ace284d1fcfd4">MZ_ZIP64_ECDH_SIG_OFS</a>) == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1737873733b435bcafe42f36d33e95e6">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIG</a>)</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;                    {</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;                        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;                    }</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;                }</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;            }</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;        }</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;    }</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160; </div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pBuf + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76cd05886b8034f320cb457c03e6641a">MZ_ZIP_ECDH_CDIR_TOTAL_ENTRIES_OFS</a>);</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;    cdir_entries_on_this_disk = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pBuf + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3415fd67ec4b72e9b7e6856ed920d100">MZ_ZIP_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</a>);</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    num_this_disk = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pBuf + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ae0c658558608a1501292d493a3049178">MZ_ZIP_ECDH_NUM_THIS_DISK_OFS</a>);</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    cdir_disk_index = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pBuf + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0edb58391c7fa73d90c8deac8bc8b85e">MZ_ZIP_ECDH_NUM_DISK_CDIR_OFS</a>);</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    cdir_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pBuf + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a45f0ad9bb0f828942c6e54015f44af4e">MZ_ZIP_ECDH_CDIR_SIZE_OFS</a>);</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    cdir_ofs = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pBuf + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa862cb29a1bcd653affce1a58e82f494">MZ_ZIP_ECDH_CDIR_OFS_OFS</a>);</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160; </div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    {</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> zip64_total_num_of_disks = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pZip64_locator + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8be22e7047a06fc2815c55c84b82b222">MZ_ZIP64_ECDL_TOTAL_NUMBER_OF_DISKS_OFS</a>);</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> zip64_cdir_total_entries = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pZip64_end_of_central_dir + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa3bd2e64f9cea2ef41a46201685ebb0f">MZ_ZIP64_ECDH_CDIR_TOTAL_ENTRIES_OFS</a>);</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> zip64_cdir_total_entries_on_this_disk = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pZip64_end_of_central_dir + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a63640ed20841b4aad31e5f27bc11f5c4">MZ_ZIP64_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</a>);</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> zip64_size_of_end_of_central_dir_record = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pZip64_end_of_central_dir + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57af93888e0a9fe5b48b11c983d8626278d">MZ_ZIP64_ECDH_SIZE_OF_RECORD_OFS</a>);</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> zip64_size_of_central_directory = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pZip64_end_of_central_dir + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8bd9fc50f35f48bf3ce4456b4d57bac3">MZ_ZIP64_ECDH_CDIR_SIZE_OFS</a>);</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160; </div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;        <span class="keywordflow">if</span>(zip64_size_of_end_of_central_dir_record &lt; (<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a> - 12))</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160; </div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;        <span class="keywordflow">if</span>(zip64_total_num_of_disks != 1U)</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da8c4bcce26300af775c179d6b0a35aff7">MZ_ZIP_UNSUPPORTED_MULTIDISK</a>);</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160; </div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;        <span class="comment">/* Check for miniz&#39;s practical limits */</span></div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;        <span class="keywordflow">if</span>(zip64_cdir_total_entries &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160; </div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)zip64_cdir_total_entries;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160; </div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;        <span class="keywordflow">if</span>(zip64_cdir_total_entries_on_this_disk &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160; </div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        cdir_entries_on_this_disk = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)zip64_cdir_total_entries_on_this_disk;</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160; </div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;        <span class="comment">/* Check for miniz&#39;s current practical limits (sorry, this should be enough for millions of files) */</span></div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;        <span class="keywordflow">if</span>(zip64_size_of_central_directory &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dace5ba2a072f9f615873588e7ebc56ab3">MZ_ZIP_UNSUPPORTED_CDIR_SIZE</a>);</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160; </div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;        cdir_size = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)zip64_size_of_central_directory;</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160; </div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;        num_this_disk = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pZip64_end_of_central_dir + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab99ad7abe356356da9f80a7c141f9027">MZ_ZIP64_ECDH_NUM_THIS_DISK_OFS</a>);</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160; </div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;        cdir_disk_index = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pZip64_end_of_central_dir + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2790f9123d0398f4498f75784069c3c9">MZ_ZIP64_ECDH_NUM_DISK_CDIR_OFS</a>);</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160; </div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;        cdir_ofs = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pZip64_end_of_central_dir + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3072ff7e0d451b2d918e4be650c998c">MZ_ZIP64_ECDH_CDIR_OFS_OFS</a>);</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    }</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160; </div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> != cdir_entries_on_this_disk)</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da8c4bcce26300af775c179d6b0a35aff7">MZ_ZIP_UNSUPPORTED_MULTIDISK</a>);</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160; </div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    <span class="keywordflow">if</span>(((num_this_disk | cdir_disk_index) != 0) &amp;&amp; ((num_this_disk != 1) || (cdir_disk_index != 1)))</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da8c4bcce26300af775c179d6b0a35aff7">MZ_ZIP_UNSUPPORTED_MULTIDISK</a>);</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160; </div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;    <span class="keywordflow">if</span>(cdir_size &lt; pZip-&gt;m_total_files * <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160; </div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;    <span class="keywordflow">if</span>((cdir_ofs + (<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)cdir_size) &gt; pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>)</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160; </div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a128125bc28f4d1f118fe7b9badd0f975">m_central_directory_file_ofs</a> = cdir_ofs;</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160; </div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>)</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;    {</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i, n;</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;        <span class="comment">/* Read the entire central directory into a heap block, and allocate another heap block to hold the unsorted central dir file record offsets, and possibly another to hold the sorted indices. */</span></div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;        <span class="keywordflow">if</span>((!<a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, cdir_size, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>)) ||</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;            (!<a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>, pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>)))</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160; </div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;        <span class="keywordflow">if</span>(sort_central_dir)</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        {</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>, pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>))</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;        }</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160; </div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cdir_ofs, pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>, cdir_size) != cdir_size)</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160; </div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        <span class="comment">/* Now create an index into the central directory file records, do some basic sanity checking on each record */</span></div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;        p = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>;</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;        <span class="keywordflow">for</span>(n = cdir_size, i = 0; i &lt; pZip-&gt;m_total_files; ++i)</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;        {</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> total_header_size, disk_index, bit_flags, filename_size, ext_data_size;</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;            <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> comp_size, decomp_size, local_header_ofs;</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160; </div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;            <span class="keywordflow">if</span>((n &lt; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>) || (<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a77d0b453bce2a419b6144bf87e71b170">MZ_ZIP_CENTRAL_DIR_HEADER_SIG</a>))</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160; </div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;            <a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, i) = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)(p - (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>);</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160; </div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;            <span class="keywordflow">if</span>(sort_central_dir)</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;                <a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, i) = i;</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160; </div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;            comp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2a463b99b8d0699bda4e3a52dd1d1015">MZ_ZIP_CDH_COMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;            decomp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a43afeb736295b1f90330d79db8420c9e">MZ_ZIP_CDH_DECOMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            local_header_ofs = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87">MZ_ZIP_CDH_LOCAL_HEADER_OFS</a>);</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;            filename_size = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;            ext_data_size = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a>);</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160; </div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;            <span class="keywordflow">if</span>((!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a0071a211627637fc049defb3f61972fe">m_zip64_has_extended_info_fields</a>) &amp;&amp;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;                (ext_data_size) &amp;&amp;</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;                (<a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(<a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(comp_size, decomp_size), local_header_ofs) == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>))</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;            {</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;                <span class="comment">/* Attempt to find zip64 extended information field in the entry&#39;s extra data */</span></div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;                <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> extra_size_remaining = ext_data_size;</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160; </div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;                <span class="keywordflow">if</span>(extra_size_remaining)</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;                {</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;                    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pExtra_data = p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + filename_size;</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160; </div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;                    <span class="keywordflow">do</span></div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;                    {</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;                        <span class="keywordflow">if</span>(extra_size_remaining &lt; (<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2))</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160; </div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;                        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> field_id = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data);</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;                        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> field_data_size = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>));</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160; </div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;                        <span class="keywordflow">if</span>((field_data_size + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2) &gt; extra_size_remaining)</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160; </div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;                        <span class="keywordflow">if</span>(field_id == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc">MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</a>)</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;                        {</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;                            <span class="comment">/* Ok, the archive didn&#39;t have any zip64 headers but it uses a zip64 extended information field so mark it as zip64 anyway (this can occur with infozip&#39;s zip util when it reads compresses files from stdin). */</span></div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;                            pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;                            pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a0071a211627637fc049defb3f61972fe">m_zip64_has_extended_info_fields</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;                        }</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160; </div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;                        pExtra_data += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2 + field_data_size;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;                        extra_size_remaining = extra_size_remaining - <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2 - field_data_size;</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;                    } <span class="keywordflow">while</span>(extra_size_remaining);</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;                }</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;            }</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160; </div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;            <span class="comment">/* I&#39;ve seen archives that aren&#39;t marked as zip64 that uses zip64 ext data, argh */</span></div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;            <span class="keywordflow">if</span>((comp_size != <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) &amp;&amp; (decomp_size != <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>))</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;            {</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;                <span class="keywordflow">if</span>(((!<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a49864f9b56c094003565ed64b2b4aed1">MZ_ZIP_CDH_METHOD_OFS</a>)) &amp;&amp; (decomp_size != comp_size)) || (decomp_size &amp;&amp; !comp_size))</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;            }</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160; </div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;            disk_index = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa0323bb440c5cb8ebcacc2bf7da778bc">MZ_ZIP_CDH_DISK_START_OFS</a>);</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;            <span class="keywordflow">if</span>((disk_index == <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>) || ((disk_index != num_this_disk) &amp;&amp; (disk_index != 1)))</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da8c4bcce26300af775c179d6b0a35aff7">MZ_ZIP_UNSUPPORTED_MULTIDISK</a>);</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160; </div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;            <span class="keywordflow">if</span>(comp_size != <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;            {</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;                <span class="keywordflow">if</span>(((<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87">MZ_ZIP_CDH_LOCAL_HEADER_OFS</a>) + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + comp_size) &gt; pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>)</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;            }</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160; </div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;            bit_flags = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac50291ea0ed2b18a069f5e129f098db2">MZ_ZIP_CDH_BIT_FLAG_OFS</a>);</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;            <span class="keywordflow">if</span>(bit_flags &amp; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab5a6b8b6b4b9f098c4ec926a6d22c432">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_LOCAL_DIR_IS_MASKED</a>)</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d29d37c6300c91cb5fc9a66d1cb1db1">MZ_ZIP_UNSUPPORTED_ENCRYPTION</a>);</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160; </div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;            <span class="keywordflow">if</span>((total_header_size = <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>) + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a>) + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac67dc228d5e122d1ad9cd42072e65c1d">MZ_ZIP_CDH_COMMENT_LEN_OFS</a>)) &gt; n)</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160; </div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;            n -= total_header_size;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;            p += total_header_size;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;        }</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;    }</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160; </div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    <span class="keywordflow">if</span>(sort_central_dir)</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;        <a class="code" href="miniz_8cpp.html#a240514a6b8d7e6f71ca91b166f37d961">mz_zip_reader_sort_central_dir_offsets_by_filename</a>(pZip);</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160; </div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;}</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160; </div>
<div class="line"><a name="l03689"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a8c64687454aca17948eb58730dc6f41b"> 3689</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;{</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    <span class="keywordflow">if</span>(pZip)</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;        <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(*pZip);</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;}</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160; </div>
<div class="line"><a name="l03695"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c"> 3695</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> set_last_error)</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;{</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> status = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160; </div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;    <span class="keywordflow">if</span>(!pZip)</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160; </div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <span class="keywordflow">if</span>((!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a40c391220d01d172a451f3dad0d5aed6">MZ_ZIP_MODE_READING</a>))</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;    {</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;        <span class="keywordflow">if</span>(set_last_error)</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;            pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a> = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160; </div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    }</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160; </div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>)</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    {</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a> = NULL;</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160; </div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;        <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>);</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;        <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>);</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;        <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>);</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160; </div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;        <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>)</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;        {</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;            <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> == <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a1c755e926bbf9197e0d64a0387a4e70a">MZ_ZIP_TYPE_FILE</a>)</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;            {</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#aca3383a48f6eda415e7b7bceea2d3e55">MZ_FCLOSE</a>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>) == EOF)</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;                {</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;                    <span class="keywordflow">if</span>(set_last_error)</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;                        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a> = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da425368dd51a2a374f88b285338098851">MZ_ZIP_FILE_CLOSE_FAILED</a>;</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;                    status = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;                }</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;            }</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;            pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a> = NULL;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;        }</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160; </div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pState);</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    }</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> = <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a713f3b45f38e966b751027436df64e50">MZ_ZIP_MODE_INVALID</a>;</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160; </div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;}</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160; </div>
<div class="line"><a name="l03742"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a0cf333c7781de5d56d24d70e573507e2"> 3742</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a0cf333c7781de5d56d24d70e573507e2">mz_zip_reader_end</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;{</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(pZip, <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>);</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;}</div>
<div class="line"><a name="l03746"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5aeef8648af76ac95c3d8e2f43be095e"> 3746</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a5aeef8648af76ac95c3d8e2f43be095e">mz_zip_reader_init</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;{</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>))</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160; </div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a52d8a4b36d39d7cf0dd2afbba5ce9c7e">mz_zip_reader_init_internal</a>(pZip, flags))</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160; </div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> = <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a01c18c633c1058f9e758e30169ea5170">MZ_ZIP_TYPE_USER</a>;</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> = size;</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160; </div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a7ac2826eb7d5b0df83a06d43a4489f4f">mz_zip_reader_read_central_dir</a>(pZip, flags))</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    {</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;        <a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(pZip, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    }</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160; </div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;}</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160; </div>
<div class="line"><a name="l03766"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a98e280f09026d4746a4171c94c8d64f6"> 3766</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#a98e280f09026d4746a4171c94c8d64f6">mz_zip_mem_read_func</a>(<span class="keywordtype">void</span> *pOpaque, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> file_ofs, <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> n)</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;{</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;    <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip = (<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *)pOpaque;</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;    <span class="keywordtype">size_t</span> s = (file_ofs &gt;= pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>) ? 0 : (<span class="keywordtype">size_t</span>)<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> - file_ofs, n);</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;    <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(pBuf, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> + file_ofs, s);</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;    <span class="keywordflow">return</span> s;</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;}</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160; </div>
<div class="line"><a name="l03774"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a6806f0e4c2e8320f33188e12ec0b63b6"> 3774</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a6806f0e4c2e8320f33188e12ec0b63b6">mz_zip_reader_init_mem</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">void</span> *pMem, <span class="keywordtype">size_t</span> size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;{</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <span class="keywordflow">if</span>(!pMem)</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160; </div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    <span class="keywordflow">if</span>(size &lt; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daeab66c528acdb43f7946e6411f515083">MZ_ZIP_NOT_AN_ARCHIVE</a>);</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160; </div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a52d8a4b36d39d7cf0dd2afbba5ce9c7e">mz_zip_reader_init_internal</a>(pZip, flags))</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160; </div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> = <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a74c17a3e487cc9d8732404550466195b">MZ_ZIP_TYPE_MEMORY</a>;</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> = size;</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a> = <a class="code" href="miniz_8cpp.html#a98e280f09026d4746a4171c94c8d64f6">mz_zip_mem_read_func</a>;</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a> = pZip;</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160; </div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> = <span class="keyword">const_cast&lt;</span><span class="keywordtype">void</span> *<span class="keyword">&gt;</span>(pMem);</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> = (<span class="keywordtype">void</span> *)pMem;</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160; </div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a4511d7743e1a63fb78ed066f8de96466">m_mem_size</a> = size;</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160; </div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a7ac2826eb7d5b0df83a06d43a4489f4f">mz_zip_reader_read_central_dir</a>(pZip, flags))</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    {</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;        <a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(pZip, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;    }</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160; </div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;}</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160; </div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l03808"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a1440cf12da0b3513e14319c32f04b44f"> 3808</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#a1440cf12da0b3513e14319c32f04b44f">mz_zip_file_read_func</a>(<span class="keywordtype">void</span> *pOpaque, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> file_ofs, <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> n)</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;{</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;    <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip = (<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *)pOpaque;</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    <a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a> cur_ofs = <a class="code" href="miniz_8cpp.html#af3b9d5f2af50464d16fd7a6ef48c916b">MZ_FTELL64</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>);</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160; </div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    file_ofs += pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a2705cc469d5f08543d5f827f43f391ec">m_file_archive_start_ofs</a>;</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160; </div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;    <span class="keywordflow">if</span>(((<a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a>)file_ofs &lt; 0) || (((cur_ofs != (<a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a>)file_ofs)) &amp;&amp; (<a class="code" href="miniz_8cpp.html#a6cd8f6b4134fc9ea62f311ac7f2c5c1d">MZ_FSEEK64</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>, (<a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a>)file_ofs, SEEK_SET))))</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160; </div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a52bd2726a671aabfe4d49804e79900d0">MZ_FREAD</a>(pBuf, 1, n, pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>);</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;}</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160; </div>
<div class="line"><a name="l03821"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a24e55b3b8f9f7722a43117d8a3497eff"> 3821</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a24e55b3b8f9f7722a43117d8a3497eff">mz_zip_reader_init_file</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> flags)</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;{</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#aac2174a6cb49f234d050051bff59bfdd">mz_zip_reader_init_file_v2</a>(pZip, pFilename, flags, 0, 0);</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;}</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160; </div>
<div class="line"><a name="l03826"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aac2174a6cb49f234d050051bff59bfdd"> 3826</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#aac2174a6cb49f234d050051bff59bfdd">mz_zip_reader_init_file_v2</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> file_start_ofs, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> archive_size)</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;{</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pFilename) || ((archive_size) &amp;&amp; (archive_size &lt; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>)))</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160; </div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> file_size;</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *pFile = <a class="code" href="miniz_8cpp.html#a7ab43238d8cd27afaf9ee668c8f6ab70">MZ_FOPEN</a>(pFilename, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;    <span class="keywordflow">if</span>(!pFile)</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da0c392e441dd7e14e4731686e8f3369ed">MZ_ZIP_FILE_OPEN_FAILED</a>);</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160; </div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;    file_size = archive_size;</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;    <span class="keywordflow">if</span>(!file_size)</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;    {</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a6cd8f6b4134fc9ea62f311ac7f2c5c1d">MZ_FSEEK64</a>(pFile, 0, SEEK_END))</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;        {</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;            <a class="code" href="miniz_8cpp.html#aca3383a48f6eda415e7b7bceea2d3e55">MZ_FCLOSE</a>(pFile);</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dafada0e6e18c6a880a9a5af7848cceb54">MZ_ZIP_FILE_SEEK_FAILED</a>);</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;        }</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160; </div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;        file_size = <a class="code" href="miniz_8cpp.html#af3b9d5f2af50464d16fd7a6ef48c916b">MZ_FTELL64</a>(pFile);</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    }</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160; </div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    <span class="comment">/* TODO: Better sanity check archive_size and the # of actual remaining bytes */</span></div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160; </div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;    <span class="keywordflow">if</span>(file_size &lt; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daeab66c528acdb43f7946e6411f515083">MZ_ZIP_NOT_AN_ARCHIVE</a>);</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160; </div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a52d8a4b36d39d7cf0dd2afbba5ce9c7e">mz_zip_reader_init_internal</a>(pZip, flags))</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    {</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        <a class="code" href="miniz_8cpp.html#aca3383a48f6eda415e7b7bceea2d3e55">MZ_FCLOSE</a>(pFile);</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;    }</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160; </div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> = <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a1c755e926bbf9197e0d64a0387a4e70a">MZ_ZIP_TYPE_FILE</a>;</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a> = <a class="code" href="miniz_8cpp.html#a1440cf12da0b3513e14319c32f04b44f">mz_zip_file_read_func</a>;</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a> = pZip;</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a> = pFile;</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> = file_size;</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a2705cc469d5f08543d5f827f43f391ec">m_file_archive_start_ofs</a> = file_start_ofs;</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160; </div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a7ac2826eb7d5b0df83a06d43a4489f4f">mz_zip_reader_read_central_dir</a>(pZip, flags))</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;    {</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;        <a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(pZip, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;    }</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160; </div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;}</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160; </div>
<div class="line"><a name="l03875"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a72c07d6967ef557183f7ab36168a9105"> 3875</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a72c07d6967ef557183f7ab36168a9105">mz_zip_reader_init_cfile</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *pFile, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> archive_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;{</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> cur_file_ofs;</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160; </div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pFile))</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da0c392e441dd7e14e4731686e8f3369ed">MZ_ZIP_FILE_OPEN_FAILED</a>);</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160; </div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;    cur_file_ofs = <a class="code" href="miniz_8cpp.html#af3b9d5f2af50464d16fd7a6ef48c916b">MZ_FTELL64</a>(pFile);</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160; </div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;    <span class="keywordflow">if</span>(!archive_size)</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;    {</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a6cd8f6b4134fc9ea62f311ac7f2c5c1d">MZ_FSEEK64</a>(pFile, 0, SEEK_END))</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dafada0e6e18c6a880a9a5af7848cceb54">MZ_ZIP_FILE_SEEK_FAILED</a>);</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160; </div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;        archive_size = <a class="code" href="miniz_8cpp.html#af3b9d5f2af50464d16fd7a6ef48c916b">MZ_FTELL64</a>(pFile) - cur_file_ofs;</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160; </div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;        <span class="keywordflow">if</span>(archive_size &lt; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daeab66c528acdb43f7946e6411f515083">MZ_ZIP_NOT_AN_ARCHIVE</a>);</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    }</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160; </div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a52d8a4b36d39d7cf0dd2afbba5ce9c7e">mz_zip_reader_init_internal</a>(pZip, flags))</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160; </div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> = <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a83f61a4c11f3ac2eb415546785502af7">MZ_ZIP_TYPE_CFILE</a>;</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a> = <a class="code" href="miniz_8cpp.html#a1440cf12da0b3513e14319c32f04b44f">mz_zip_file_read_func</a>;</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160; </div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a> = pZip;</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a> = pFile;</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> = archive_size;</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a2705cc469d5f08543d5f827f43f391ec">m_file_archive_start_ofs</a> = cur_file_ofs;</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160; </div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a7ac2826eb7d5b0df83a06d43a4489f4f">mz_zip_reader_read_central_dir</a>(pZip, flags))</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;    {</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;        <a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(pZip, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    }</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160; </div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;}</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160; </div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160; </div>
<div class="line"><a name="l03917"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24"> 3917</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *<a class="code" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index)</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;{</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (file_index &gt;= pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>))</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>, <a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, file_index));</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;}</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160; </div>
<div class="line"><a name="l03924"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a8b262a8e0d2b58d0d0d5523655bd07bc"> 3924</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a8b262a8e0d2b58d0d0d5523655bd07bc">mz_zip_reader_is_file_encrypted</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index)</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;{</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> m_bit_flag;</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p = <a class="code" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a>(pZip, file_index);</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    <span class="keywordflow">if</span>(!p)</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    {</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;    }</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160; </div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    m_bit_flag = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac50291ea0ed2b18a069f5e129f098db2">MZ_ZIP_CDH_BIT_FLAG_OFS</a>);</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;    <span class="keywordflow">return</span> (m_bit_flag &amp; (<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aee3f29c6ca80f7c1ba12e8d4620980b0">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_IS_ENCRYPTED</a> | <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a9065070139fca1d195692b1009357e3c">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_USES_STRONG_ENCRYPTION</a>)) != 0;</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;}</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160; </div>
<div class="line"><a name="l03938"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a996d0ae919e19b0821cebbc7ce52ce91"> 3938</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a996d0ae919e19b0821cebbc7ce52ce91">mz_zip_reader_is_file_supported</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index)</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;{</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> bit_flag;</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> method;</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160; </div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p = <a class="code" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a>(pZip, file_index);</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;    <span class="keywordflow">if</span>(!p)</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    {</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;    }</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160; </div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    method = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a49864f9b56c094003565ed64b2b4aed1">MZ_ZIP_CDH_METHOD_OFS</a>);</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;    bit_flag = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac50291ea0ed2b18a069f5e129f098db2">MZ_ZIP_CDH_BIT_FLAG_OFS</a>);</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160; </div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;    <span class="keywordflow">if</span>((method != 0) &amp;&amp; (method != <a class="code" href="miniz_8h.html#a3e92e9b3cc525db1fd503d9630ec1bf5">MZ_DEFLATED</a>))</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;    {</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da003e8bf2463b5f3849242b3808e4d6fe">MZ_ZIP_UNSUPPORTED_METHOD</a>);</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    }</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160; </div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    <span class="keywordflow">if</span>(bit_flag &amp; (<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aee3f29c6ca80f7c1ba12e8d4620980b0">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_IS_ENCRYPTED</a> | <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a9065070139fca1d195692b1009357e3c">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_USES_STRONG_ENCRYPTION</a>))</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    {</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d29d37c6300c91cb5fc9a66d1cb1db1">MZ_ZIP_UNSUPPORTED_ENCRYPTION</a>);</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;    }</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160; </div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;    <span class="keywordflow">if</span>(bit_flag &amp; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3df7ccd884899093e2cc9cf6411f5743">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_COMPRESSED_PATCH_FLAG</a>)</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;    {</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da079e286899478ed53a7473f1816a692f">MZ_ZIP_UNSUPPORTED_FEATURE</a>);</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    }</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160; </div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;}</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160; </div>
<div class="line"><a name="l03974"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a400dc4c44934e7d73706b419f4a73595"> 3974</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a400dc4c44934e7d73706b419f4a73595">mz_zip_reader_is_file_a_directory</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index)</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;{</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> filename_len, attribute_mapping_id, external_attr;</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p = <a class="code" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a>(pZip, file_index);</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    <span class="keywordflow">if</span>(!p)</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;    {</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;    }</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160; </div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;    filename_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;    <span class="keywordflow">if</span>(filename_len)</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;    {</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;        <span class="keywordflow">if</span>(*(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + filename_len - 1) == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;    }</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160; </div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;    <span class="comment">/* Bugfix: This code was also checking if the internal attribute was non-zero, which wasn&#39;t correct. */</span></div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;    <span class="comment">/* Most/all zip writers (hopefully) set DOS file/directory attributes in the low 16-bits, so check for the DOS directory flag and ignore the source OS ID in the created by field. */</span></div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;    <span class="comment">/* FIXME: Remove this check? Is it necessary - we already check the filename. */</span></div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;    attribute_mapping_id = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57adc548ddb0c98ab80c5040a55a03561da">MZ_ZIP_CDH_VERSION_MADE_BY_OFS</a>) &gt;&gt; 8;</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;    (void)attribute_mapping_id;</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160; </div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;    external_attr = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab4dec2086b60f7e1c7ce499b07b966cb">MZ_ZIP_CDH_EXTERNAL_ATTR_OFS</a>);</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;    <span class="keywordflow">if</span>((external_attr &amp; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a2a1bb318f1f4ab445c7e4de3d3e1cc">MZ_ZIP_DOS_DIR_ATTRIBUTE_BITFLAG</a>) != 0)</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;    {</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;    }</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160; </div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;}</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160; </div>
<div class="line"><a name="l04006"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2a7f8b015e1b9e5b28617661a2102325"> 4006</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a2a7f8b015e1b9e5b28617661a2102325">mz_zip_file_stat_internal</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pCentral_dir_header, <a class="code" href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a> *pStat, <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> *pFound_zip64_extra_data)</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;{</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> n;</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p = pCentral_dir_header;</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160; </div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;    <span class="keywordflow">if</span>(pFound_zip64_extra_data)</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;        *pFound_zip64_extra_data = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160; </div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;    <span class="keywordflow">if</span>((!p) || (!pStat))</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160; </div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;    <span class="comment">/* Extract fields from the central directory record. */</span></div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#a9a7f0737f031b23a29c58fc7ff2bd131">m_file_index</a> = file_index;</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#a79ac549bef6a828b37e4dc72d9282d1e">m_central_dir_ofs</a> = <a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, file_index);</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#a3038faf9c1f24f2bf48eab9cc2b8ce8c">m_version_made_by</a> = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57adc548ddb0c98ab80c5040a55a03561da">MZ_ZIP_CDH_VERSION_MADE_BY_OFS</a>);</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#a0cfb77699313b855dcd1b5bed9dfb93a">m_version_needed</a> = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a122562cf2a1182825317fe26e7902e64">MZ_ZIP_CDH_VERSION_NEEDED_OFS</a>);</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#ac9fdb10d21124d44be05ef0c04c1ad15">m_bit_flag</a> = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac50291ea0ed2b18a069f5e129f098db2">MZ_ZIP_CDH_BIT_FLAG_OFS</a>);</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">m_method</a> = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a49864f9b56c094003565ed64b2b4aed1">MZ_ZIP_CDH_METHOD_OFS</a>);</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#a18d1f5f9b03e906c40ecd707610a5869">m_time</a> = <a class="code" href="miniz_8cpp.html#a5c1678f38e026eece0171600cb448e1c">mz_zip_dos_to_time_t</a>(<a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a6954b28080a1fb151914b00da25074f5">MZ_ZIP_CDH_FILE_TIME_OFS</a>), <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0a30dbf39d1e87013ef095186370cc36">MZ_ZIP_CDH_FILE_DATE_OFS</a>));</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#af9fe260b684c70c1725a8b100cbd97a8">m_crc32</a> = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a98e11950c99539215b65a334a2afe989">MZ_ZIP_CDH_CRC32_OFS</a>);</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a> = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2a463b99b8d0699bda4e3a52dd1d1015">MZ_ZIP_CDH_COMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a> = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a43afeb736295b1f90330d79db8420c9e">MZ_ZIP_CDH_DECOMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#ad628219b167bef01305e8fa09a1f10d1">m_internal_attr</a> = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa4790eefd44430aa5eab2837e16ab840">MZ_ZIP_CDH_INTERNAL_ATTR_OFS</a>);</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#a0303a6779c89c31eecf62b4744913272">m_external_attr</a> = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab4dec2086b60f7e1c7ce499b07b966cb">MZ_ZIP_CDH_EXTERNAL_ATTR_OFS</a>);</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">m_local_header_ofs</a> = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87">MZ_ZIP_CDH_LOCAL_HEADER_OFS</a>);</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160; </div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    <span class="comment">/* Copy as much of the filename and comment as possible. */</span></div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;    n = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;    n = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(n, <a class="code" href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409aea0de5eaaef93308322a12ea1097b370">MZ_ZIP_MAX_ARCHIVE_FILENAME_SIZE</a> - 1);</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#ae500a60c1ca2d56199fa06f54036abea">m_filename</a>, p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>, n);</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#ae500a60c1ca2d56199fa06f54036abea">m_filename</a>[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160; </div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;    n = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac67dc228d5e122d1ad9cd42072e65c1d">MZ_ZIP_CDH_COMMENT_LEN_OFS</a>);</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;    n = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(n, <a class="code" href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a1705abc3aa04db87446b6477bffc4899">MZ_ZIP_MAX_ARCHIVE_FILE_COMMENT_SIZE</a> - 1);</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#aacf4d95d27894acac1303f51542c51b6">m_comment_size</a> = n;</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;    <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#afb0f2b80d59f134f6fee4c8728649119">m_comment</a>, p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>) + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a>), n);</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#afb0f2b80d59f134f6fee4c8728649119">m_comment</a>[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160; </div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;    <span class="comment">/* Set some flags for convienance */</span></div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#a02509653cc5553e63a1053802f808cbc">m_is_directory</a> = <a class="code" href="miniz_8cpp.html#a400dc4c44934e7d73706b419f4a73595">mz_zip_reader_is_file_a_directory</a>(pZip, file_index);</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#a952eb97b58881df827ce3808071e7754">m_is_encrypted</a> = <a class="code" href="miniz_8cpp.html#a8b262a8e0d2b58d0d0d5523655bd07bc">mz_zip_reader_is_file_encrypted</a>(pZip, file_index);</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#a4742f25dec4e490bedc1262b96e49ed6">m_is_supported</a> = <a class="code" href="miniz_8cpp.html#a996d0ae919e19b0821cebbc7ce52ce91">mz_zip_reader_is_file_supported</a>(pZip, file_index);</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160; </div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;    <span class="comment">/* See if we need to read any zip64 extended information fields. */</span></div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;    <span class="comment">/* Confusingly, these zip64 fields can be present even on non-zip64 archives (Debian zip on a huge files from stdin piped to stdout creates them). */</span></div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(<a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>, pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a>), pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">m_local_header_ofs</a>) == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;    {</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;        <span class="comment">/* Attempt to find zip64 extended information field in the entry&#39;s extra data */</span></div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> extra_size_remaining = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a>);</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160; </div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;        <span class="keywordflow">if</span>(extra_size_remaining)</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;        {</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;            <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pExtra_data = p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160; </div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;            <span class="keywordflow">do</span></div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;            {</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;                <span class="keywordflow">if</span>(extra_size_remaining &lt; (<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2))</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160; </div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;                <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> field_id = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data);</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;                <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> field_data_size = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>));</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160; </div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;                <span class="keywordflow">if</span>((field_data_size + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2) &gt; extra_size_remaining)</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160; </div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;                <span class="keywordflow">if</span>(field_id == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc">MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</a>)</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;                {</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;                    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pField_data = pExtra_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2;</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;                    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> field_data_remaining = field_data_size;</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160; </div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;                    <span class="keywordflow">if</span>(pFound_zip64_extra_data)</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;                        *pFound_zip64_extra_data = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160; </div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;                    <span class="keywordflow">if</span>(pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a> == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;                    {</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;                        <span class="keywordflow">if</span>(field_data_remaining &lt; <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>))</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160; </div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;                        pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a> = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pField_data);</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;                        pField_data += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;                        field_data_remaining -= <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;                    }</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160; </div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;                    <span class="keywordflow">if</span>(pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a> == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;                    {</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;                        <span class="keywordflow">if</span>(field_data_remaining &lt; <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>))</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160; </div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;                        pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a> = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pField_data);</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;                        pField_data += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;                        field_data_remaining -= <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;                    }</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160; </div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;                    <span class="keywordflow">if</span>(pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">m_local_header_ofs</a> == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;                    {</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;                        <span class="keywordflow">if</span>(field_data_remaining &lt; <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>))</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160; </div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;                        pStat-&gt;<a class="code" href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">m_local_header_ofs</a> = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pField_data);</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;                        pField_data += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;                        field_data_remaining -= <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;                    }</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160; </div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;                }</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160; </div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;                pExtra_data += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2 + field_data_size;</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;                extra_size_remaining = extra_size_remaining - <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2 - field_data_size;</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;            } <span class="keywordflow">while</span>(extra_size_remaining);</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;        }</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;    }</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160; </div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;}</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160; </div>
<div class="line"><a name="l04123"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a4ba068ad8bcdbb1ffc304f644243d18d"> 4123</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a4ba068ad8bcdbb1ffc304f644243d18d">mz_zip_string_equal</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pA, <span class="keyword">const</span> <span class="keywordtype">char</span> *pB, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> len, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;{</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i;</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;    <span class="keywordflow">if</span>(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858abcc2b8dd27fc7b4889bbf2fa15896b3b">MZ_ZIP_FLAG_CASE_SENSITIVE</a>)</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;        <span class="keywordflow">return</span> 0 == <a class="code" href="string_8c.html#a9e6df54ee04e18a3772335580e2ed872">memcmp</a>(pA, pB, len);</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; len; ++i)</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a61d1f0e538f1b127ef8383e2d8c49f58">MZ_TOLOWER</a>(pA[i]) != <a class="code" href="miniz_8cpp.html#a61d1f0e538f1b127ef8383e2d8c49f58">MZ_TOLOWER</a>(pB[i]))</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;}</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160; </div>
<div class="line"><a name="l04134"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a287c8f562aaedb0a7d75a24eb5890cb7"> 4134</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a287c8f562aaedb0a7d75a24eb5890cb7">mz_zip_filename_compare</a>(<span class="keyword">const</span> <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pCentral_dir_array, <span class="keyword">const</span> <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pCentral_dir_offsets, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> l_index, <span class="keyword">const</span> <span class="keywordtype">char</span> *pR, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> r_len)</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;{</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pL = &amp;<a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(pCentral_dir_array, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>, <a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(pCentral_dir_offsets, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, l_index)), *pE;</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> l_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pL + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> l = 0, <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a> = 0;</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;    pL += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>;</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;    pE = pL + <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(l_len, r_len);</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    <span class="keywordflow">while</span>(pL &lt; pE)</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;    {</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;        <span class="keywordflow">if</span>((l = <a class="code" href="miniz_8cpp.html#a61d1f0e538f1b127ef8383e2d8c49f58">MZ_TOLOWER</a>(*pL)) != (<a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a> = <a class="code" href="miniz_8cpp.html#a61d1f0e538f1b127ef8383e2d8c49f58">MZ_TOLOWER</a>(*pR)))</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;        pL++;</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;        pR++;</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;    }</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;    <span class="keywordflow">return</span> (pL == pE) ? (int)(l_len - r_len) : (l - <a class="code" href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a>);</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;}</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160; </div>
<div class="line"><a name="l04151"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aaac0bd73d99bf67e7b32be8acddc4718"> 4151</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#aaac0bd73d99bf67e7b32be8acddc4718">mz_zip_locate_file_binary_search</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *pIndex)</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;{</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;    <span class="keyword">const</span> <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pCentral_dir_offsets = &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>;</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;    <span class="keyword">const</span> <a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pCentral_dir = &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>;</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *pIndices = &amp;<a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(&amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, 0);</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    <span class="keyword">const</span> uint32_t size = pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>;</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> filename_len = (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)<a class="code" href="string_8c.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(pFilename);</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160; </div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;    <span class="keywordflow">if</span>(pIndex)</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;        *pIndex = 0;</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160; </div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;    <span class="keywordflow">if</span>(size)</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;    {</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;        <span class="comment">/* yes I could use uint32_t&#39;s, but then we would have to add some special case checks in the loop, argh, and */</span></div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;        <span class="comment">/* honestly the major expense here on 32-bit CPU&#39;s will still be the filename compare */</span></div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;        <a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a> l = 0, h = (<a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a>)size - 1;</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160; </div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;        <span class="keywordflow">while</span>(l &lt;= h)</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;        {</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;            <a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a> m = l + ((h - l) &gt;&gt; 1);</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;            uint32_t file_index = pIndices[(uint32_t)m];</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160; </div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;            <span class="keywordtype">int</span> comp = <a class="code" href="miniz_8cpp.html#a287c8f562aaedb0a7d75a24eb5890cb7">mz_zip_filename_compare</a>(pCentral_dir, pCentral_dir_offsets, file_index, pFilename, filename_len);</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;            <span class="keywordflow">if</span>(!comp)</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;            {</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;                <span class="keywordflow">if</span>(pIndex)</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;                    *pIndex = file_index;</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;            }</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(comp &lt; 0)</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;                l = m + 1;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;                h = m - 1;</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;        }</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;    }</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160; </div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dad845112f4958dee455d1be8cc8e0fd04">MZ_ZIP_FILE_NOT_FOUND</a>);</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;}</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160; </div>
<div class="line"><a name="l04191"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a84813b57c1313c2e2d94a1f62d3ab9b3"> 4191</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="miniz_8cpp.html#a84813b57c1313c2e2d94a1f62d3ab9b3">mz_zip_reader_locate_file</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pName, <span class="keyword">const</span> <span class="keywordtype">char</span> *pComment, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;{</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> index;</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a>(pZip, pName, pComment, flags, &amp;index))</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)index;</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;}</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160; </div>
<div class="line"><a name="l04200"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e"> 4200</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pName, <span class="keyword">const</span> <span class="keywordtype">char</span> *pComment, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *pIndex)</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;{</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index;</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;    <span class="keywordtype">size_t</span> name_len, comment_len;</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160; </div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;    <span class="keywordflow">if</span>(pIndex)</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;        *pIndex = 0;</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160; </div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (!pName))</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160; </div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;    <span class="comment">/* See if we can use a binary search */</span></div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;    <span class="keywordflow">if</span>(((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#aa247669a24b55b9b9e86f732ea175bce">m_init_flags</a> &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858ab09115999c35684b92cd771f65909e39">MZ_ZIP_FLAG_DO_NOT_SORT_CENTRAL_DIRECTORY</a>) == 0) &amp;&amp;</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;        (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> == <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a40c391220d01d172a451f3dad0d5aed6">MZ_ZIP_MODE_READING</a>) &amp;&amp;</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;        ((flags &amp; (<a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858aee414b99330e685f4405b2c5ba3bcc1e">MZ_ZIP_FLAG_IGNORE_PATH</a> | <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858abcc2b8dd27fc7b4889bbf2fa15896b3b">MZ_ZIP_FLAG_CASE_SENSITIVE</a>)) == 0) &amp;&amp; (!pComment) &amp;&amp; (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a>))</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;    {</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#aaac0bd73d99bf67e7b32be8acddc4718">mz_zip_locate_file_binary_search</a>(pZip, pName, pIndex);</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;    }</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160; </div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;    <span class="comment">/* Locate the entry by scanning the entire central directory */</span></div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;    name_len = <a class="code" href="string_8c.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(pName);</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;    <span class="keywordflow">if</span>(name_len &gt; <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>)</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160; </div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;    comment_len = pComment ? <a class="code" href="string_8c.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(pComment) : 0;</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;    <span class="keywordflow">if</span>(comment_len &gt; <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>)</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160; </div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    <span class="keywordflow">for</span>(file_index = 0; file_index &lt; pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>; file_index++)</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;    {</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pHeader = &amp;<a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>, <a class="code" href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>, file_index));</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;        <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> filename_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pHeader + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)pHeader + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>;</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;        <span class="keywordflow">if</span>(filename_len &lt; name_len)</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;        <span class="keywordflow">if</span>(comment_len)</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;        {</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;            <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_extra_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pHeader + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a>), file_comment_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pHeader + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac67dc228d5e122d1ad9cd42072e65c1d">MZ_ZIP_CDH_COMMENT_LEN_OFS</a>);</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *pFile_comment = pFilename + filename_len + file_extra_len;</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;            <span class="keywordflow">if</span>((file_comment_len != comment_len) || (!<a class="code" href="miniz_8cpp.html#a4ba068ad8bcdbb1ffc304f644243d18d">mz_zip_string_equal</a>(pComment, pFile_comment, file_comment_len, flags)))</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;        }</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;        <span class="keywordflow">if</span>((flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858aee414b99330e685f4405b2c5ba3bcc1e">MZ_ZIP_FLAG_IGNORE_PATH</a>) &amp;&amp; (filename_len))</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;        {</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;            <span class="keywordtype">int</span> ofs = filename_len - 1;</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;            <span class="keywordflow">do</span></div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;            {</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;                <span class="keywordflow">if</span>((pFilename[ofs] == <span class="charliteral">&#39;/&#39;</span>) || (pFilename[ofs] == <span class="charliteral">&#39;\\&#39;</span>) || (pFilename[ofs] == <span class="charliteral">&#39;:&#39;</span>))</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;            } <span class="keywordflow">while</span>(--ofs &gt;= 0);</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;            ofs++;</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;            pFilename += ofs;</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;            filename_len -= ofs;</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;        }</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;        <span class="keywordflow">if</span>((filename_len == name_len) &amp;&amp; (<a class="code" href="miniz_8cpp.html#a4ba068ad8bcdbb1ffc304f644243d18d">mz_zip_string_equal</a>(pName, pFilename, filename_len, flags)))</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;        {</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;            <span class="keywordflow">if</span>(pIndex)</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;                *pIndex = file_index;</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;        }</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;    }</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160; </div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dad845112f4958dee455d1be8cc8e0fd04">MZ_ZIP_FILE_NOT_FOUND</a>);</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;}</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160; </div>
<div class="line"><a name="l04265"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a4721777518994d4d3ba978e427565e28"> 4265</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a4721777518994d4d3ba978e427565e28">mz_zip_reader_extract_to_mem_no_alloc</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags, <span class="keywordtype">void</span> *pUser_read_buf, <span class="keywordtype">size_t</span> user_read_buf_size)</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;{</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;    <span class="keywordtype">int</span> status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>;</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> needed_size, cur_file_ofs, comp_remaining, out_buf_ofs = 0, read_buf_size, read_buf_ofs = 0, read_buf_avail;</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;    <a class="code" href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a> file_stat;</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;    <span class="keywordtype">void</span> *pRead_buf;</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> local_header_u32[(<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) - 1) / <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)];</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pLocal_header = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)local_header_u32;</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;    <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> inflator;</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160; </div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || ((buf_size) &amp;&amp; (!pBuf)) || ((user_read_buf_size) &amp;&amp; (!pUser_read_buf)) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>))</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160; </div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aa9d3abc65b4b9b91efc437ec151e9c99">mz_zip_reader_file_stat</a>(pZip, file_index, &amp;file_stat))</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160; </div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;    <span class="comment">/* A directory or zero length file */</span></div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;    <span class="keywordflow">if</span>((file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a02509653cc5553e63a1053802f808cbc">m_is_directory</a>) || (!file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>))</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160; </div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;    <span class="comment">/* Encryption and patch files are not supported. */</span></div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;    <span class="keywordflow">if</span>(file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ac9fdb10d21124d44be05ef0c04c1ad15">m_bit_flag</a> &amp; (<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aee3f29c6ca80f7c1ba12e8d4620980b0">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_IS_ENCRYPTED</a> | <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a9065070139fca1d195692b1009357e3c">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_USES_STRONG_ENCRYPTION</a> | <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3df7ccd884899093e2cc9cf6411f5743">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_COMPRESSED_PATCH_FLAG</a>))</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d29d37c6300c91cb5fc9a66d1cb1db1">MZ_ZIP_UNSUPPORTED_ENCRYPTION</a>);</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160; </div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;    <span class="comment">/* This function only supports decompressing stored and deflate. */</span></div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;    <span class="keywordflow">if</span>((!(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>)) &amp;&amp; (file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">m_method</a> != 0) &amp;&amp; (file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">m_method</a> != <a class="code" href="miniz_8h.html#a3e92e9b3cc525db1fd503d9630ec1bf5">MZ_DEFLATED</a>))</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da003e8bf2463b5f3849242b3808e4d6fe">MZ_ZIP_UNSUPPORTED_METHOD</a>);</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160; </div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;    <span class="comment">/* Ensure supplied output buffer is large enough. */</span></div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;    needed_size = (flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>) ? file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a> : file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a>;</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;    <span class="keywordflow">if</span>(buf_size &lt; needed_size)</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da4dd840e5a7def295e6a0a5eb8785a024">MZ_ZIP_BUF_TOO_SMALL</a>);</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160; </div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;    <span class="comment">/* Read and parse the local directory entry. */</span></div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;    cur_file_ofs = file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">m_local_header_ofs</a>;</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs, pLocal_header, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160; </div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pLocal_header) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a05f28665e3880ca5863fff3ca58129b6">MZ_ZIP_LOCAL_DIR_HEADER_SIG</a>)</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160; </div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;    cur_file_ofs += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4990e590f2652f0d540c3eb35e3f650f">MZ_ZIP_LDH_FILENAME_LEN_OFS</a>) + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aaecc052d653e298f93b9c5523c98f5f2">MZ_ZIP_LDH_EXTRA_LEN_OFS</a>);</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;    <span class="keywordflow">if</span>((cur_file_ofs + file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>) &gt; pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>)</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160; </div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;    <span class="keywordflow">if</span>((flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>) || (!file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">m_method</a>))</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;    {</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;        <span class="comment">/* The file is stored or the caller has requested the compressed data. */</span></div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs, pBuf, (<span class="keywordtype">size_t</span>)needed_size) != needed_size)</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160; </div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;<span class="preprocessor">#ifndef MINIZ_DISABLE_ZIP_READER_CRC32_CHECKS</span></div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;        <span class="keywordflow">if</span>((flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>) == 0)</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;        {</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(<a class="code" href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a>, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf, (<span class="keywordtype">size_t</span>)file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a>) != file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#af9fe260b684c70c1725a8b100cbd97a8">m_crc32</a>)</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da388518d305e53c51b07205856d0a8464">MZ_ZIP_CRC_CHECK_FAILED</a>);</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;        }</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160; </div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;    }</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160; </div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;    <span class="comment">/* Decompress the file either directly from memory or from a file input buffer. */</span></div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;    <a class="code" href="miniz_8h.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(&amp;inflator);</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160; </div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>)</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;    {</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;        <span class="comment">/* Read directly from the archive in memory. */</span></div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;        pRead_buf = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> + cur_file_ofs;</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;        read_buf_size = read_buf_avail = file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>;</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;        comp_remaining = 0;</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;    }</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pUser_read_buf)</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;    {</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;        <span class="comment">/* Use a user provided read buffer. */</span></div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;        <span class="keywordflow">if</span>(!user_read_buf_size)</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;        pRead_buf = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pUser_read_buf;</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;        read_buf_size = user_read_buf_size;</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;        read_buf_avail = 0;</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;        comp_remaining = file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>;</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;    }</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;    {</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;        <span class="comment">/* Temporarily allocate a read buffer. */</span></div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;        read_buf_size = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>, (<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)<a class="code" href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a5b5935618c8f80bac84484ffa644df05">MZ_ZIP_MAX_IO_BUF_SIZE</a>);</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;        <span class="keywordflow">if</span>(((<span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>) == <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>))) &amp;&amp; (read_buf_size &gt; 0x7FFFFFFF))</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>);</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160; </div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;        <span class="keywordflow">if</span>(NULL == (pRead_buf = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, (<span class="keywordtype">size_t</span>)read_buf_size)))</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160; </div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;        read_buf_avail = 0;</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;        comp_remaining = file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>;</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;    }</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160; </div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;    {</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;        <span class="comment">/* The size_t cast here should be OK because we&#39;ve verified that the output buffer is &gt;= file_stat.m_uncomp_size above */</span></div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;        <span class="keywordtype">size_t</span> in_buf_size, out_buf_size = (size_t)(file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a> - out_buf_ofs);</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;        <span class="keywordflow">if</span>((!read_buf_avail) &amp;&amp; (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>))</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;        {</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;            read_buf_avail = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(read_buf_size, comp_remaining);</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;            <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs, pRead_buf, (<span class="keywordtype">size_t</span>)read_buf_avail) != read_buf_avail)</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;            {</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;                status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;                <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa713f636687cfc5db4a588d6378a6a10">MZ_ZIP_DECOMPRESSION_FAILED</a>);</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;            }</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;            cur_file_ofs += read_buf_avail;</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;            comp_remaining -= read_buf_avail;</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;            read_buf_ofs = 0;</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;        }</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;        in_buf_size = (size_t)read_buf_avail;</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;        status = <a class="code" href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;inflator, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pRead_buf + read_buf_ofs, &amp;in_buf_size, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf + out_buf_ofs, &amp;out_buf_size, <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a> | (comp_remaining ? <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a> : 0));</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;        read_buf_avail -= in_buf_size;</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;        read_buf_ofs += in_buf_size;</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;        out_buf_ofs += out_buf_size;</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;    } <span class="keywordflow">while</span>(status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a>);</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160; </div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;    <span class="keywordflow">if</span>(status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>)</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;    {</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;        <span class="comment">/* Make sure the entire file was decompressed, and check its CRC. */</span></div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;        <span class="keywordflow">if</span>(out_buf_ofs != file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a>)</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;        {</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dae3b0b6f3ca889a916c69c518a54ee755">MZ_ZIP_UNEXPECTED_DECOMPRESSED_SIZE</a>);</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;            status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;        }</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;<span class="preprocessor">#ifndef MINIZ_DISABLE_ZIP_READER_CRC32_CHECKS</span></div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(<a class="code" href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a>, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf, (<span class="keywordtype">size_t</span>)file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a>) != file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#af9fe260b684c70c1725a8b100cbd97a8">m_crc32</a>)</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;        {</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da388518d305e53c51b07205856d0a8464">MZ_ZIP_CRC_CHECK_FAILED</a>);</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;            status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;        }</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;    }</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160; </div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;    <span class="keywordflow">if</span>((!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>) &amp;&amp; (!pUser_read_buf))</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pRead_buf);</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160; </div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;    <span class="keywordflow">return</span> status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>;</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;}</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160; </div>
<div class="line"><a name="l04408"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac16cec09731400cc18c3b907340ef601"> 4408</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ac16cec09731400cc18c3b907340ef601">mz_zip_reader_extract_file_to_mem_no_alloc</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags, <span class="keywordtype">void</span> *pUser_read_buf, <span class="keywordtype">size_t</span> user_read_buf_size)</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;{</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> file_index;</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a>(pZip, pFilename, NULL, flags, &amp;file_index))</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a4721777518994d4d3ba978e427565e28">mz_zip_reader_extract_to_mem_no_alloc</a>(pZip, file_index, pBuf, buf_size, flags, pUser_read_buf, user_read_buf_size);</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;}</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160; </div>
<div class="line"><a name="l04416"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a9aa631c7bc8147b39b6d8a910682463e"> 4416</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a9aa631c7bc8147b39b6d8a910682463e">mz_zip_reader_extract_to_mem</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;{</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a4721777518994d4d3ba978e427565e28">mz_zip_reader_extract_to_mem_no_alloc</a>(pZip, file_index, pBuf, buf_size, flags, NULL, 0);</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;}</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160; </div>
<div class="line"><a name="l04421"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#abb734054fc4e51026c1187aa8a12a1f8"> 4421</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#abb734054fc4e51026c1187aa8a12a1f8">mz_zip_reader_extract_file_to_mem</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;{</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ac16cec09731400cc18c3b907340ef601">mz_zip_reader_extract_file_to_mem_no_alloc</a>(pZip, pFilename, pBuf, buf_size, flags, NULL, 0);</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;}</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160; </div>
<div class="line"><a name="l04426"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a7387530cd78979243538a5c87132b64b"> 4426</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#a7387530cd78979243538a5c87132b64b">mz_zip_reader_extract_to_heap</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <span class="keywordtype">size_t</span> *pSize, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;{</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> comp_size, uncomp_size, alloc_size;</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p = <a class="code" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a>(pZip, file_index);</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;    <span class="keywordtype">void</span> *pBuf;</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160; </div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;    <span class="keywordflow">if</span>(pSize)</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;        *pSize = 0;</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160; </div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;    <span class="keywordflow">if</span>(!p)</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;    {</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;    }</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160; </div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;    comp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2a463b99b8d0699bda4e3a52dd1d1015">MZ_ZIP_CDH_COMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;    uncomp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a43afeb736295b1f90330d79db8420c9e">MZ_ZIP_CDH_DECOMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160; </div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;    alloc_size = (flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>) ? comp_size : uncomp_size;</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;    <span class="keywordflow">if</span>(((<span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>) == <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>))) &amp;&amp; (alloc_size &gt; 0x7FFFFFFF))</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;    {</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>);</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;    }</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160; </div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;    <span class="keywordflow">if</span>(NULL == (pBuf = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, (<span class="keywordtype">size_t</span>)alloc_size)))</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;    {</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;    }</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160; </div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a9aa631c7bc8147b39b6d8a910682463e">mz_zip_reader_extract_to_mem</a>(pZip, file_index, pBuf, (<span class="keywordtype">size_t</span>)alloc_size, flags))</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;    {</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pBuf);</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;    }</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160; </div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;    <span class="keywordflow">if</span>(pSize)</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;        *pSize = (size_t)alloc_size;</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    <span class="keywordflow">return</span> pBuf;</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;}</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160; </div>
<div class="line"><a name="l04468"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac0301a766ca6023da1a58f3a3f3333c7"> 4468</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#ac0301a766ca6023da1a58f3a3f3333c7">mz_zip_reader_extract_file_to_heap</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <span class="keywordtype">size_t</span> *pSize, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;{</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> file_index;</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a>(pZip, pFilename, NULL, flags, &amp;file_index))</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;    {</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;        <span class="keywordflow">if</span>(pSize)</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;            *pSize = 0;</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;    }</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a7387530cd78979243538a5c87132b64b">mz_zip_reader_extract_to_heap</a>(pZip, file_index, pSize, flags);</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;}</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160; </div>
<div class="line"><a name="l04480"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a607bba163f72b6728191504c53bf70a8"> 4480</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a607bba163f72b6728191504c53bf70a8">mz_zip_reader_extract_to_callback</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <a class="code" href="miniz_8h.html#a20dd8c64af05b367626a8e151c78e521">mz_file_write_func</a> pCallback, <span class="keywordtype">void</span> *pOpaque, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;{</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;    <span class="keywordtype">int</span> status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>;</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_crc32 = <a class="code" href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a>;</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> read_buf_size, read_buf_ofs = 0, read_buf_avail, comp_remaining, out_buf_ofs = 0, cur_file_ofs;</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;    <a class="code" href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a> file_stat;</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;    <span class="keywordtype">void</span> *pRead_buf = NULL;</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;    <span class="keywordtype">void</span> *pWrite_buf = NULL;</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> local_header_u32[(<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) - 1) / <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)];</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pLocal_header = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)local_header_u32;</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160; </div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (!pCallback) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>))</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160; </div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aa9d3abc65b4b9b91efc437ec151e9c99">mz_zip_reader_file_stat</a>(pZip, file_index, &amp;file_stat))</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160; </div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;    <span class="comment">/* A directory or zero length file */</span></div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;    <span class="keywordflow">if</span>((file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a02509653cc5553e63a1053802f808cbc">m_is_directory</a>) || (!file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>))</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160; </div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;    <span class="comment">/* Encryption and patch files are not supported. */</span></div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;    <span class="keywordflow">if</span>(file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ac9fdb10d21124d44be05ef0c04c1ad15">m_bit_flag</a> &amp; (<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aee3f29c6ca80f7c1ba12e8d4620980b0">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_IS_ENCRYPTED</a> | <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a9065070139fca1d195692b1009357e3c">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_USES_STRONG_ENCRYPTION</a> | <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3df7ccd884899093e2cc9cf6411f5743">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_COMPRESSED_PATCH_FLAG</a>))</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d29d37c6300c91cb5fc9a66d1cb1db1">MZ_ZIP_UNSUPPORTED_ENCRYPTION</a>);</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160; </div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;    <span class="comment">/* This function only supports decompressing stored and deflate. */</span></div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;    <span class="keywordflow">if</span>((!(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>)) &amp;&amp; (file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">m_method</a> != 0) &amp;&amp; (file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">m_method</a> != <a class="code" href="miniz_8h.html#a3e92e9b3cc525db1fd503d9630ec1bf5">MZ_DEFLATED</a>))</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da003e8bf2463b5f3849242b3808e4d6fe">MZ_ZIP_UNSUPPORTED_METHOD</a>);</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160; </div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;    <span class="comment">/* Read and do some minimal validation of the local directory entry (this doesn&#39;t crack the zip64 stuff, which we already have from the central dir) */</span></div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;    cur_file_ofs = file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">m_local_header_ofs</a>;</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs, pLocal_header, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160; </div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pLocal_header) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a05f28665e3880ca5863fff3ca58129b6">MZ_ZIP_LOCAL_DIR_HEADER_SIG</a>)</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160; </div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;    cur_file_ofs += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4990e590f2652f0d540c3eb35e3f650f">MZ_ZIP_LDH_FILENAME_LEN_OFS</a>) + <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aaecc052d653e298f93b9c5523c98f5f2">MZ_ZIP_LDH_EXTRA_LEN_OFS</a>);</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;    <span class="keywordflow">if</span>((cur_file_ofs + file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>) &gt; pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>)</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160; </div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;    <span class="comment">/* Decompress the file either directly from memory or from a file input buffer. */</span></div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>)</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;    {</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;        pRead_buf = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> + cur_file_ofs;</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;        read_buf_size = read_buf_avail = file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>;</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;        comp_remaining = 0;</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;    }</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;    {</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;        read_buf_size = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>, (<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)<a class="code" href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a5b5935618c8f80bac84484ffa644df05">MZ_ZIP_MAX_IO_BUF_SIZE</a>);</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;        <span class="keywordflow">if</span>(NULL == (pRead_buf = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, (<span class="keywordtype">size_t</span>)read_buf_size)))</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160; </div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;        read_buf_avail = 0;</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;        comp_remaining = file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>;</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;    }</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160; </div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;    <span class="keywordflow">if</span>((flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>) || (!file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">m_method</a>))</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;    {</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;        <span class="comment">/* The file is stored or the caller has requested the compressed data. */</span></div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>)</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;        {</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;            <span class="keywordflow">if</span>(((<span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>) == <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>))) &amp;&amp; (file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a> &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>))</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>);</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160; </div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;            <span class="keywordflow">if</span>(pCallback(pOpaque, out_buf_ofs, pRead_buf, (<span class="keywordtype">size_t</span>)file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>) != file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>)</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;            {</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;                <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da2be5cd9afd4fd0fe1b36b753e377658f">MZ_ZIP_WRITE_CALLBACK_FAILED</a>);</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;                status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;            }</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>))</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;            {</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;<span class="preprocessor">#ifndef MINIZ_DISABLE_ZIP_READER_CRC32_CHECKS</span></div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;                file_crc32 = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(file_crc32, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pRead_buf, (size_t)file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>);</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;            }</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160; </div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;            cur_file_ofs += file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>;</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;            out_buf_ofs += file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>;</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;            comp_remaining = 0;</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;        }</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;        {</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;            <span class="keywordflow">while</span>(comp_remaining)</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;            {</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;                read_buf_avail = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(read_buf_size, comp_remaining);</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;                <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs, pRead_buf, (<span class="keywordtype">size_t</span>)read_buf_avail) != read_buf_avail)</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;                {</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;                    <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;                    status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;                }</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160; </div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;<span class="preprocessor">#ifndef MINIZ_DISABLE_ZIP_READER_CRC32_CHECKS</span></div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;                <span class="keywordflow">if</span>(!(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>))</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;                {</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;                    file_crc32 = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(file_crc32, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pRead_buf, (size_t)read_buf_avail);</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;                }</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160; </div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;                <span class="keywordflow">if</span>(pCallback(pOpaque, out_buf_ofs, pRead_buf, (<span class="keywordtype">size_t</span>)read_buf_avail) != read_buf_avail)</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;                {</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;                    <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da2be5cd9afd4fd0fe1b36b753e377658f">MZ_ZIP_WRITE_CALLBACK_FAILED</a>);</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;                    status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;                }</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160; </div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;                cur_file_ofs += read_buf_avail;</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;                out_buf_ofs += read_buf_avail;</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;                comp_remaining -= read_buf_avail;</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;            }</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;        }</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;    }</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;    {</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;        <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> inflator;</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;        <a class="code" href="miniz_8h.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(&amp;inflator);</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160; </div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;        <span class="keywordflow">if</span>(NULL == (pWrite_buf = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, <a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a>)))</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;        {</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;            status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;        }</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;        {</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;            <span class="keywordflow">do</span></div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;            {</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;                <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pWrite_buf_cur = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pWrite_buf + (out_buf_ofs &amp; (<a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - 1));</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;                <span class="keywordtype">size_t</span> in_buf_size, out_buf_size = <a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - (out_buf_ofs &amp; (<a class="code" href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - 1));</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;                <span class="keywordflow">if</span>((!read_buf_avail) &amp;&amp; (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>))</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;                {</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;                    read_buf_avail = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(read_buf_size, comp_remaining);</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;                    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs, pRead_buf, (<span class="keywordtype">size_t</span>)read_buf_avail) != read_buf_avail)</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;                    {</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;                        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;                        status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;                    }</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;                    cur_file_ofs += read_buf_avail;</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;                    comp_remaining -= read_buf_avail;</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;                    read_buf_ofs = 0;</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;                }</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160; </div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;                in_buf_size = (size_t)read_buf_avail;</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;                status = <a class="code" href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;inflator, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pRead_buf + read_buf_ofs, &amp;in_buf_size, (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pWrite_buf, pWrite_buf_cur, &amp;out_buf_size, comp_remaining ? <a class="code" href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a> : 0);</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;                read_buf_avail -= in_buf_size;</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;                read_buf_ofs += in_buf_size;</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160; </div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;                <span class="keywordflow">if</span>(out_buf_size)</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;                {</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;                    <span class="keywordflow">if</span>(pCallback(pOpaque, out_buf_ofs, pWrite_buf_cur, out_buf_size) != out_buf_size)</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;                    {</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;                        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da2be5cd9afd4fd0fe1b36b753e377658f">MZ_ZIP_WRITE_CALLBACK_FAILED</a>);</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;                        status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;                    }</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160; </div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;<span class="preprocessor">#ifndef MINIZ_DISABLE_ZIP_READER_CRC32_CHECKS</span></div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;                    file_crc32 = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(file_crc32, pWrite_buf_cur, out_buf_size);</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;                    <span class="keywordflow">if</span>((out_buf_ofs += out_buf_size) &gt; file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a>)</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;                    {</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;                        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa713f636687cfc5db4a588d6378a6a10">MZ_ZIP_DECOMPRESSION_FAILED</a>);</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;                        status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;                    }</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;                }</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;            } <span class="keywordflow">while</span>((status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a>) || (status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>));</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;        }</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;    }</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160; </div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;    <span class="keywordflow">if</span>((status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>) &amp;&amp; (!(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>)))</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;    {</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;        <span class="comment">/* Make sure the entire file was decompressed, and check its CRC. */</span></div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;        <span class="keywordflow">if</span>(out_buf_ofs != file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a>)</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;        {</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dae3b0b6f3ca889a916c69c518a54ee755">MZ_ZIP_UNEXPECTED_DECOMPRESSED_SIZE</a>);</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;            status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;        }</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;<span class="preprocessor">#ifndef MINIZ_DISABLE_ZIP_READER_CRC32_CHECKS</span></div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(file_crc32 != file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#af9fe260b684c70c1725a8b100cbd97a8">m_crc32</a>)</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;        {</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa713f636687cfc5db4a588d6378a6a10">MZ_ZIP_DECOMPRESSION_FAILED</a>);</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;            status = <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;        }</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;    }</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160; </div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;    <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>)</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pRead_buf);</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160; </div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;    <span class="keywordflow">if</span>(pWrite_buf)</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pWrite_buf);</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160; </div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;    <span class="keywordflow">return</span> status == <a class="code" href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>;</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;}</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160; </div>
<div class="line"><a name="l04678"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2f77f2adc9a6d554f89f79e4f0207b9c"> 4678</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a2f77f2adc9a6d554f89f79e4f0207b9c">mz_zip_reader_extract_file_to_callback</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#a20dd8c64af05b367626a8e151c78e521">mz_file_write_func</a> pCallback, <span class="keywordtype">void</span> *pOpaque, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;{</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> file_index;</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a>(pZip, pFilename, NULL, flags, &amp;file_index))</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160; </div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a607bba163f72b6728191504c53bf70a8">mz_zip_reader_extract_to_callback</a>(pZip, file_index, pCallback, pOpaque, flags);</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;}</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160; </div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l04688"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a6acedb9402a1e7eafad0d09bfa08f20e"> 4688</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#a6acedb9402a1e7eafad0d09bfa08f20e">mz_zip_file_write_callback</a>(<span class="keywordtype">void</span> *pOpaque, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> ofs, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> n)</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;{</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;    (void)ofs;</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160; </div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a5f224b658d4b01790ef55ccd3ff8d3a2">MZ_FWRITE</a>(pBuf, 1, n, (<a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *)pOpaque);</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;}</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160; </div>
<div class="line"><a name="l04695"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#af328f94aff4a5d44825959eb58bdf3c9"> 4695</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#af328f94aff4a5d44825959eb58bdf3c9">mz_zip_reader_extract_to_file</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <span class="keyword">const</span> <span class="keywordtype">char</span> *pDst_filename, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;{</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> status;</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;    <a class="code" href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a> file_stat;</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;    <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *pFile;</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160; </div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aa9d3abc65b4b9b91efc437ec151e9c99">mz_zip_reader_file_stat</a>(pZip, file_index, &amp;file_stat))</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160; </div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;    <span class="keywordflow">if</span>((file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a02509653cc5553e63a1053802f808cbc">m_is_directory</a>) || (!file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a4742f25dec4e490bedc1262b96e49ed6">m_is_supported</a>))</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da079e286899478ed53a7473f1816a692f">MZ_ZIP_UNSUPPORTED_FEATURE</a>);</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160; </div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;    pFile = <a class="code" href="miniz_8cpp.html#a7ab43238d8cd27afaf9ee668c8f6ab70">MZ_FOPEN</a>(pDst_filename, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;    <span class="keywordflow">if</span>(!pFile)</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da0c392e441dd7e14e4731686e8f3369ed">MZ_ZIP_FILE_OPEN_FAILED</a>);</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160; </div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;    status = <a class="code" href="miniz_8cpp.html#a607bba163f72b6728191504c53bf70a8">mz_zip_reader_extract_to_callback</a>(pZip, file_index, <a class="code" href="miniz_8cpp.html#a6acedb9402a1e7eafad0d09bfa08f20e">mz_zip_file_write_callback</a>, pFile, flags);</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160; </div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#aca3383a48f6eda415e7b7bceea2d3e55">MZ_FCLOSE</a>(pFile) == EOF)</div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;    {</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;        <span class="keywordflow">if</span>(status)</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da425368dd51a2a374f88b285338098851">MZ_ZIP_FILE_CLOSE_FAILED</a>);</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160; </div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;        status = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;    }</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160; </div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;<span class="preprocessor">#if !defined(MINIZ_NO_TIME) &amp;&amp; !defined(MINIZ_NO_STDIO)</span></div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;    <span class="keywordflow">if</span>(status)</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;        <a class="code" href="miniz_8cpp.html#ada51b4115a68e8a0dd99fa3d51f4d68a">mz_zip_set_file_times</a>(pDst_filename, file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a18d1f5f9b03e906c40ecd707610a5869">m_time</a>, file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a18d1f5f9b03e906c40ecd707610a5869">m_time</a>);</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160; </div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;}</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160; </div>
<div class="line"><a name="l04729"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5e053a05efdc3b9d210f9391382dcd9a"> 4729</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a5e053a05efdc3b9d210f9391382dcd9a">mz_zip_reader_extract_file_to_file</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_filename, <span class="keyword">const</span> <span class="keywordtype">char</span> *pDst_filename, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;{</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> file_index;</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a>(pZip, pArchive_filename, NULL, flags, &amp;file_index))</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160; </div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#af328f94aff4a5d44825959eb58bdf3c9">mz_zip_reader_extract_to_file</a>(pZip, file_index, pDst_filename, flags);</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;}</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160; </div>
<div class="line"><a name="l04738"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a4de2fbc6c58bfcc0fb78cee0d8ebfd0a"> 4738</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a4de2fbc6c58bfcc0fb78cee0d8ebfd0a">mz_zip_reader_extract_to_cfile</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *pFile, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;{</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;    <a class="code" href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a> file_stat;</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160; </div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aa9d3abc65b4b9b91efc437ec151e9c99">mz_zip_reader_file_stat</a>(pZip, file_index, &amp;file_stat))</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160; </div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;    <span class="keywordflow">if</span>((file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a02509653cc5553e63a1053802f808cbc">m_is_directory</a>) || (!file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a4742f25dec4e490bedc1262b96e49ed6">m_is_supported</a>))</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da079e286899478ed53a7473f1816a692f">MZ_ZIP_UNSUPPORTED_FEATURE</a>);</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160; </div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a607bba163f72b6728191504c53bf70a8">mz_zip_reader_extract_to_callback</a>(pZip, file_index, <a class="code" href="miniz_8cpp.html#a6acedb9402a1e7eafad0d09bfa08f20e">mz_zip_file_write_callback</a>, pFile, flags);</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;}</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160; </div>
<div class="line"><a name="l04751"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a8fa88616bc4d01d17b038275dd124ceb"> 4751</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a8fa88616bc4d01d17b038275dd124ceb">mz_zip_reader_extract_file_to_cfile</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_filename, <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *pFile, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;{</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> file_index;</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a>(pZip, pArchive_filename, NULL, flags, &amp;file_index))</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160; </div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a4de2fbc6c58bfcc0fb78cee0d8ebfd0a">mz_zip_reader_extract_to_cfile</a>(pZip, file_index, pFile, flags);</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;}</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160; </div>
<div class="line"><a name="l04761"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ad66cdb80b873c2eb640df26246c6a4b2"> 4761</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#ad66cdb80b873c2eb640df26246c6a4b2">mz_zip_compute_crc32_callback</a>(<span class="keywordtype">void</span> *pOpaque, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> file_ofs, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> n)</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;{</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *p = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *)pOpaque;</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;    (void)file_ofs;</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;    *p = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(*p, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf, n);</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;    <span class="keywordflow">return</span> n;</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;}</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160; </div>
<div class="line"><a name="l04769"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#acaef85bf26fe6936ac04e14950078892"> 4769</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#acaef85bf26fe6936ac04e14950078892">mz_zip_validate_file</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;{</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;    <a class="code" href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a> file_stat;</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState;</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pCentral_dir_header;</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> found_zip64_ext_data_in_cdir = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> found_zip64_ext_data_in_ldir = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> local_header_u32[(<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) - 1) / <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)];</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pLocal_header = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)local_header_u32;</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> local_header_ofs = 0;</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> local_header_filename_len, local_header_extra_len, local_header_crc32;</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> local_header_comp_size, local_header_uncomp_size;</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> uncomp_crc32 = <a class="code" href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a>;</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> has_data_descriptor;</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> local_header_bit_flags;</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160; </div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;    <a class="code" href="structmz__zip__array.html">mz_zip_array</a> file_data_array;</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;    <a class="code" href="miniz_8cpp.html#a23da3e308ec523f5b73d3f22b3153355">mz_zip_array_init</a>(&amp;file_data_array, 1);</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160; </div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>))</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160; </div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;    <span class="keywordflow">if</span>(file_index &gt; pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>)</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160; </div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;    pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160; </div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;    pCentral_dir_header = <a class="code" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a>(pZip, file_index);</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160; </div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a2a7f8b015e1b9e5b28617661a2102325">mz_zip_file_stat_internal</a>(pZip, file_index, pCentral_dir_header, &amp;file_stat, &amp;found_zip64_ext_data_in_cdir))</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160; </div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;    <span class="comment">/* A directory or zero length file */</span></div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;    <span class="keywordflow">if</span>((file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a02509653cc5553e63a1053802f808cbc">m_is_directory</a>) || (!file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">m_uncomp_size</a>))</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160; </div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;    <span class="comment">/* Encryption and patch files are not supported. */</span></div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;    <span class="keywordflow">if</span>(file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a952eb97b58881df827ce3808071e7754">m_is_encrypted</a>)</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d29d37c6300c91cb5fc9a66d1cb1db1">MZ_ZIP_UNSUPPORTED_ENCRYPTION</a>);</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160; </div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;    <span class="comment">/* This function only supports stored and deflate. */</span></div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;    <span class="keywordflow">if</span>((file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">m_method</a> != 0) &amp;&amp; (file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">m_method</a> != <a class="code" href="miniz_8h.html#a3e92e9b3cc525db1fd503d9630ec1bf5">MZ_DEFLATED</a>))</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da003e8bf2463b5f3849242b3808e4d6fe">MZ_ZIP_UNSUPPORTED_METHOD</a>);</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160; </div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;    <span class="keywordflow">if</span>(!file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#a4742f25dec4e490bedc1262b96e49ed6">m_is_supported</a>)</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da079e286899478ed53a7473f1816a692f">MZ_ZIP_UNSUPPORTED_FEATURE</a>);</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160; </div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;    <span class="comment">/* Read and parse the local directory entry. */</span></div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;    local_header_ofs = file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">m_local_header_ofs</a>;</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, local_header_ofs, pLocal_header, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160; </div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pLocal_header) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a05f28665e3880ca5863fff3ca58129b6">MZ_ZIP_LOCAL_DIR_HEADER_SIG</a>)</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160; </div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;    local_header_filename_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4990e590f2652f0d540c3eb35e3f650f">MZ_ZIP_LDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;    local_header_extra_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aaecc052d653e298f93b9c5523c98f5f2">MZ_ZIP_LDH_EXTRA_LEN_OFS</a>);</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;    local_header_comp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a67751a44d185feb156f40a7cd922a577">MZ_ZIP_LDH_COMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;    local_header_uncomp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3538fb6973847de5f8bd315ba8d0e1d">MZ_ZIP_LDH_DECOMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;    local_header_crc32 = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0b518fa8ffa820df4771f9d567c13dcc">MZ_ZIP_LDH_CRC32_OFS</a>);</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;    local_header_bit_flags = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ed8079f712b2ec7963d9b1378596528">MZ_ZIP_LDH_BIT_FLAG_OFS</a>);</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;    has_data_descriptor = (local_header_bit_flags &amp; 8) != 0;</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160; </div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;    <span class="keywordflow">if</span>(local_header_filename_len != <a class="code" href="string_8c.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae500a60c1ca2d56199fa06f54036abea">m_filename</a>))</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160; </div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;    <span class="keywordflow">if</span>((local_header_ofs + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + local_header_filename_len + local_header_extra_len + file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>) &gt; pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>)</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160; </div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;file_data_array, <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(local_header_filename_len, local_header_extra_len), <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>))</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160; </div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;    <span class="keywordflow">if</span>(local_header_filename_len)</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;    {</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, local_header_ofs + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>, file_data_array.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>, local_header_filename_len) != local_header_filename_len)</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;        {</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;            <span class="keywordflow">goto</span> handle_failure;</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;        }</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160; </div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;        <span class="comment">/* I&#39;ve seen 1 archive that had the same pathname, but used backslashes in the local dir and forward slashes in the central dir. Do we care about this? For now, this case will fail validation. */</span></div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="string_8c.html#a9e6df54ee04e18a3772335580e2ed872">memcmp</a>(file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae500a60c1ca2d56199fa06f54036abea">m_filename</a>, file_data_array.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>, local_header_filename_len) != 0)</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;        {</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da575251baf4e25b05f6cda0253cd2f49f">MZ_ZIP_VALIDATION_FAILED</a>);</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;            <span class="keywordflow">goto</span> handle_failure;</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;        }</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;    }</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160; </div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;    <span class="keywordflow">if</span>((local_header_extra_len) &amp;&amp; ((local_header_comp_size == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) || (local_header_uncomp_size == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)))</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;    {</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, local_header_ofs + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + local_header_filename_len, file_data_array.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>, local_header_extra_len) != local_header_extra_len)</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;        {</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;            <span class="keywordflow">goto</span> handle_failure;</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;        }</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160; </div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> extra_size_remaining = local_header_extra_len;</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pExtra_data = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)file_data_array.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>;</div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160; </div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;        {</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;            <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> field_id, field_data_size, field_total_size;</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160; </div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;            <span class="keywordflow">if</span>(extra_size_remaining &lt; (<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2))</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160; </div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;            field_id = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data);</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;            field_data_size = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>));</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;            field_total_size = field_data_size + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2;</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160; </div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;            <span class="keywordflow">if</span>(field_total_size &gt; extra_size_remaining)</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160; </div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;            <span class="keywordflow">if</span>(field_id == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc">MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</a>)</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;            {</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;                <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSrc_field_data = pExtra_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>);</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160; </div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;                <span class="keywordflow">if</span>(field_data_size &lt; <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>) * 2)</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;                {</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;                    <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;                    <span class="keywordflow">goto</span> handle_failure;</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;                }</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160; </div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;                local_header_uncomp_size = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pSrc_field_data);</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;                local_header_comp_size = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pSrc_field_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>));</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160; </div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;                found_zip64_ext_data_in_ldir = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;            }</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160; </div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;            pExtra_data += field_total_size;</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;            extra_size_remaining -= field_total_size;</div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;        } <span class="keywordflow">while</span>(extra_size_remaining);</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;    }</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160; </div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;    <span class="comment">/* TODO: parse local header extra data when local_header_comp_size is 0xFFFFFFFF! (big_descriptor.zip) */</span></div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;    <span class="comment">/* I&#39;ve seen zips in the wild with the data descriptor bit set, but proper local header values and bogus data descriptors */</span></div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;    <span class="keywordflow">if</span>((has_data_descriptor) &amp;&amp; (!local_header_comp_size) &amp;&amp; (!local_header_crc32))</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;    {</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;        <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> descriptor_buf[32];</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160; </div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> num_descriptor_uint32s = ((pState-&gt;m_zip64) || (found_zip64_ext_data_in_ldir)) ? 6 : 4;</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160; </div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;m_pRead(pZip-&gt;m_pIO_opaque, local_header_ofs + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + local_header_filename_len + local_header_extra_len + file_stat.m_comp_size, descriptor_buf, <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * num_descriptor_uint32s) != (<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * num_descriptor_uint32s))</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;        {</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;            <span class="keywordflow">goto</span> handle_failure;</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;        }</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160; </div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;        <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="assignments__from__json_8cpp.html#a323f0fcacbf786b74ade3e2aef34b5c4">has_id</a> = (<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(descriptor_buf) == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d">MZ_ZIP_DATA_DESCRIPTOR_ID</a>);</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSrc = <a class="code" href="assignments__from__json_8cpp.html#a323f0fcacbf786b74ade3e2aef34b5c4">has_id</a> ? (descriptor_buf + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)) : descriptor_buf;</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160; </div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> file_crc32 = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pSrc);</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> comp_size = 0, uncomp_size = 0;</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160; </div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;        <span class="keywordflow">if</span>((pState-&gt;m_zip64) || (found_zip64_ext_data_in_ldir))</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;        {</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;            comp_size = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pSrc + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>));</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;            uncomp_size = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pSrc + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>));</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;        }</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;        {</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;            comp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pSrc + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>));</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;            uncomp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pSrc + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>));</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;        }</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160; </div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;        <span class="keywordflow">if</span>((file_crc32 != file_stat.m_crc32) || (comp_size != file_stat.m_comp_size) || (uncomp_size != file_stat.m_uncomp_size))</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;        {</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da575251baf4e25b05f6cda0253cd2f49f">MZ_ZIP_VALIDATION_FAILED</a>);</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;            <span class="keywordflow">goto</span> handle_failure;</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;        }</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;    }</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;    {</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;        <span class="keywordflow">if</span>((local_header_crc32 != file_stat.m_crc32) || (local_header_comp_size != file_stat.m_comp_size) || (local_header_uncomp_size != file_stat.m_uncomp_size))</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;        {</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da575251baf4e25b05f6cda0253cd2f49f">MZ_ZIP_VALIDATION_FAILED</a>);</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;            <span class="keywordflow">goto</span> handle_failure;</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;        }</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;    }</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160; </div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;    <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;file_data_array);</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160; </div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;    <span class="keywordflow">if</span>((flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a5d61357918be9c723e1765d6e0cf660f">MZ_ZIP_FLAG_VALIDATE_HEADERS_ONLY</a>) == 0)</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;    {</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a607bba163f72b6728191504c53bf70a8">mz_zip_reader_extract_to_callback</a>(pZip, file_index, <a class="code" href="miniz_8cpp.html#ad66cdb80b873c2eb640df26246c6a4b2">mz_zip_compute_crc32_callback</a>, &amp;uncomp_crc32, 0))</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160; </div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;        <span class="comment">/* 1 more check to be sure, although the extract checks too. */</span></div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;        <span class="keywordflow">if</span>(uncomp_crc32 != file_stat.m_crc32)</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;        {</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da575251baf4e25b05f6cda0253cd2f49f">MZ_ZIP_VALIDATION_FAILED</a>);</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;        }</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;    }</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160; </div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160; </div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;handle_failure:</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;    <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;file_data_array);</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;}</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160; </div>
<div class="line"><a name="l04972"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a0f22c932bfa13ea1f720dc757e22be12"> 4972</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a0f22c932bfa13ea1f720dc757e22be12">mz_zip_validate_archive</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;{</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState;</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;    uint32_t i;</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160; </div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>))</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160; </div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;    pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160; </div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;    <span class="comment">/* Basic sanity checks */</span></div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;    <span class="keywordflow">if</span>(!pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;    {</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> &gt; <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>)</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160; </div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;    }</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;    {</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160; </div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;        <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;    }</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160; </div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>; i++)</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;    {</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a7859626934ae9a84d1fa7620ecb69f27">MZ_ZIP_FLAG_VALIDATE_LOCATE_FILE_FLAG</a> &amp; flags)</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;        {</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;            <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> found_index;</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;            <a class="code" href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a> stat;</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160; </div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aa9d3abc65b4b9b91efc437ec151e9c99">mz_zip_reader_file_stat</a>(pZip, i, &amp;stat))</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160; </div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a>(pZip, stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae500a60c1ca2d56199fa06f54036abea">m_filename</a>, NULL, 0, &amp;found_index))</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160; </div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;            <span class="comment">/* This check can fail if there are duplicate filenames in the archive (which we don&#39;t check for when writing - that&#39;s up to the user) */</span></div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;            <span class="keywordflow">if</span>(found_index != i)</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da575251baf4e25b05f6cda0253cd2f49f">MZ_ZIP_VALIDATION_FAILED</a>);</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;        }</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160; </div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#acaef85bf26fe6936ac04e14950078892">mz_zip_validate_file</a>(pZip, i, flags))</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;    }</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160; </div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;}</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160; </div>
<div class="line"><a name="l05025"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#acaaba12f38ef5ec95f895c54a7c56351"> 5025</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#acaaba12f38ef5ec95f895c54a7c56351">mz_zip_validate_mem_archive</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pMem, <span class="keywordtype">size_t</span> size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> *pErr)</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;{</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> success = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;    <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> zip;</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;    <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> actual_err = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d0cd76e20534ea0d5777ac0c3601db9">MZ_ZIP_NO_ERROR</a>;</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160; </div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;    <span class="keywordflow">if</span>((!pMem) || (!size))</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;    {</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;        <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;            *pErr = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;    }</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160; </div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;    <a class="code" href="miniz_8cpp.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a>(&amp;zip);</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160; </div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a6806f0e4c2e8320f33188e12ec0b63b6">mz_zip_reader_init_mem</a>(&amp;zip, pMem, size, flags))</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;    {</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;        <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;            *pErr = zip.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;    }</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160; </div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a0f22c932bfa13ea1f720dc757e22be12">mz_zip_validate_archive</a>(&amp;zip, flags))</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;    {</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;        actual_err = zip.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;        success = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;    }</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160; </div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(&amp;zip, success))</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;    {</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;        <span class="keywordflow">if</span>(!actual_err)</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;            actual_err = zip.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;        success = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;    }</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160; </div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;    <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;        *pErr = actual_err;</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160; </div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;    <span class="keywordflow">return</span> success;</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;}</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160; </div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l05067"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a608ee912bc95f54d663f39157dae0d43"> 5067</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a608ee912bc95f54d663f39157dae0d43">mz_zip_validate_file_archive</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> *pErr)</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;{</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> success = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;    <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> zip;</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;    <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> actual_err = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d0cd76e20534ea0d5777ac0c3601db9">MZ_ZIP_NO_ERROR</a>;</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160; </div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;    <span class="keywordflow">if</span>(!pFilename)</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;    {</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;        <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;            *pErr = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;    }</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160; </div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;    <a class="code" href="miniz_8cpp.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a>(&amp;zip);</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160; </div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aac2174a6cb49f234d050051bff59bfdd">mz_zip_reader_init_file_v2</a>(&amp;zip, pFilename, flags, 0, 0))</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;    {</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;        <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;            *pErr = zip.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;    }</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160; </div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a0f22c932bfa13ea1f720dc757e22be12">mz_zip_validate_archive</a>(&amp;zip, flags))</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;    {</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;        actual_err = zip.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;        success = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;    }</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160; </div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(&amp;zip, success))</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;    {</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;        <span class="keywordflow">if</span>(!actual_err)</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;            actual_err = zip.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;        success = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;    }</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160; </div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;    <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;        *pErr = actual_err;</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160; </div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;    <span class="keywordflow">return</span> success;</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;}</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160; </div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;<span class="comment">/* ------------------- .ZIP archive writing */</span></div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160; </div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_ARCHIVE_WRITING_APIS</span></div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160; </div>
<div class="line"><a name="l05113"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a93a0147044e7f13d544cd127353a33be"> 5113</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a93a0147044e7f13d544cd127353a33be">mz_write_le16</a>(<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> v)</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;{</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;    p[0] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)v;</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;    p[1] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(v &gt;&gt; 8);</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;}</div>
<div class="line"><a name="l05118"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a34c253cd57c8fb84b02c00f8068fbe6d"> 5118</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a34c253cd57c8fb84b02c00f8068fbe6d">mz_write_le32</a>(<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> v)</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;{</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;    p[0] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)v;</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;    p[1] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(v &gt;&gt; 8);</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;    p[2] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(v &gt;&gt; 16);</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;    p[3] = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>)(v &gt;&gt; 24);</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;}</div>
<div class="line"><a name="l05125"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2675df4f41c6dec7c2ec800f249a413b"> 5125</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code" href="miniz_8cpp.html#a2675df4f41c6dec7c2ec800f249a413b">mz_write_le64</a>(<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> v)</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;{</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;    <a class="code" href="miniz_8cpp.html#a34c253cd57c8fb84b02c00f8068fbe6d">mz_write_le32</a>(p, (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)v);</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;    <a class="code" href="miniz_8cpp.html#a34c253cd57c8fb84b02c00f8068fbe6d">mz_write_le32</a>(p + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>), (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)(v &gt;&gt; 32));</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;}</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160; </div>
<div class="line"><a name="l05131"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce"> 5131</a></span>&#160;<span class="preprocessor">#define MZ_WRITE_LE16(p, v) mz_write_le16((mz_uint8 *)(p), (mz_uint16)(v))</span></div>
<div class="line"><a name="l05132"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891"> 5132</a></span>&#160;<span class="preprocessor">#define MZ_WRITE_LE32(p, v) mz_write_le32((mz_uint8 *)(p), (mz_uint32)(v))</span></div>
<div class="line"><a name="l05133"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d"> 5133</a></span>&#160;<span class="preprocessor">#define MZ_WRITE_LE64(p, v) mz_write_le64((mz_uint8 *)(p), (mz_uint64)(v))</span></div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160; </div>
<div class="line"><a name="l05135"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a80eaca434d785016af778ef5c93399e8"> 5135</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#a80eaca434d785016af778ef5c93399e8">mz_zip_heap_write_func</a>(<span class="keywordtype">void</span> *pOpaque, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> file_ofs, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> n)</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;{</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;    <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip = (<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *)pOpaque;</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> new_size = <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(file_ofs + n, pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a4511d7743e1a63fb78ed066f8de96466">m_mem_size</a>);</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160; </div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;    <span class="keywordflow">if</span>(!n)</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160; </div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;    <span class="comment">/* An allocation this big is likely to just fail on 32-bit systems, so don&#39;t even go there. */</span></div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;    <span class="keywordflow">if</span>((<span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>) == <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)) &amp;&amp; (new_size &gt; 0x7FFFFFFF))</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;    {</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da1365f1c2703389a5e6d5b5bbcca37859">MZ_ZIP_FILE_TOO_LARGE</a>);</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;    }</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160; </div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;    <span class="keywordflow">if</span>(new_size &gt; pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a71f011527805e3ac48f5f12cb73d2233">m_mem_capacity</a>)</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;    {</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;        <span class="keywordtype">void</span> *pNew_block;</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;        <span class="keywordtype">size_t</span> new_capacity = <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(64, pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a71f011527805e3ac48f5f12cb73d2233">m_mem_capacity</a>);</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160; </div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;        <span class="keywordflow">while</span>(new_capacity &lt; new_size)</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;            new_capacity *= 2;</div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160; </div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;        <span class="keywordflow">if</span>(NULL == (pNew_block = pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3cdd59e8bcc156954790af62fee92e8">m_pRealloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>, 1, new_capacity)))</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;        {</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;        }</div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160; </div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;        pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> = pNew_block;</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;        pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a71f011527805e3ac48f5f12cb73d2233">m_mem_capacity</a> = new_capacity;</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;    }</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;    <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> + file_ofs, pBuf, n);</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;    pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a4511d7743e1a63fb78ed066f8de96466">m_mem_size</a> = (size_t)new_size;</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;    <span class="keywordflow">return</span> n;</div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;}</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160; </div>
<div class="line"><a name="l05173"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a278e91533e10d52981cb5d3d49335f7e"> 5173</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a278e91533e10d52981cb5d3d49335f7e">mz_zip_writer_end_internal</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> set_last_error)</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;{</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState;</div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> status = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160; </div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>) || ((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064">MZ_ZIP_MODE_WRITING</a>) &amp;&amp; (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3ab445229af27a6e8c9d512d12265dea5b">MZ_ZIP_MODE_WRITING_HAS_BEEN_FINALIZED</a>)))</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;    {</div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;        <span class="keywordflow">if</span>(set_last_error)</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;            <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;    }</div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160; </div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;    pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a> = NULL;</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;    <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>);</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;    <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>);</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;    <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>);</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160; </div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>)</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;    {</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> == <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a1c755e926bbf9197e0d64a0387a4e70a">MZ_ZIP_TYPE_FILE</a>)</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;        {</div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#aca3383a48f6eda415e7b7bceea2d3e55">MZ_FCLOSE</a>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>) == EOF)</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;            {</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;                <span class="keywordflow">if</span>(set_last_error)</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;                    <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da425368dd51a2a374f88b285338098851">MZ_ZIP_FILE_CLOSE_FAILED</a>);</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;                status = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;            }</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;        }</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160; </div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;        pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a> = NULL;</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;    }</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160; </div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;    <span class="keywordflow">if</span>((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a> == <a class="code" href="miniz_8cpp.html#a80eaca434d785016af778ef5c93399e8">mz_zip_heap_write_func</a>) &amp;&amp; (pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>))</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;    {</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>);</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;        pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> = NULL;</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;    }</div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160; </div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pState);</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> = <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a713f3b45f38e966b751027436df64e50">MZ_ZIP_MODE_INVALID</a>;</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;}</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160; </div>
<div class="line"><a name="l05219"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ae7a4dc8ccdc92cf8fe90f0703dae5650"> 5219</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ae7a4dc8ccdc92cf8fe90f0703dae5650">mz_zip_writer_init_v2</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> existing_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;{</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> zip64 = (flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a43306564d2afb7c7347cd7041481fa36">MZ_ZIP_FLAG_WRITE_ZIP64</a>) != 0;</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160; </div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a713f3b45f38e966b751027436df64e50">MZ_ZIP_MODE_INVALID</a>))</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160; </div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;    <span class="keywordflow">if</span>(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a4e7e927edda20a28027f4c4a43a4b2e2">MZ_ZIP_FLAG_WRITE_ALLOW_READING</a>)</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;    {</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;        <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>)</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;    }</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160; </div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a>)</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;    {</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;        <span class="comment">/* Ensure user specified file offset alignment is a power of 2. */</span></div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a> &amp; (pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a> - 1))</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;    }</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160; </div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;    <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>)</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a> = <a class="code" href="miniz_8cpp.html#a5b8c4d334248b00bb255a64a7628ab36">miniz_def_alloc_func</a>;</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;    <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>)</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a> = <a class="code" href="miniz_8cpp.html#a74bd5c1f3f342d2109643cfa500689fc">miniz_def_free_func</a>;</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;    <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3cdd59e8bcc156954790af62fee92e8">m_pRealloc</a>)</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3cdd59e8bcc156954790af62fee92e8">m_pRealloc</a> = <a class="code" href="miniz_8cpp.html#ae51abb9ee6167023388e1d1122b10d89">miniz_def_realloc_func</a>;</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160; </div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> = existing_size;</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a128125bc28f4d1f118fe7b9badd0f975">m_central_directory_file_ofs</a> = 0;</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> = 0;</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160; </div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;    <span class="keywordflow">if</span>(NULL == (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a> = (<a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, <span class="keyword">sizeof</span>(<a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a>))))</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160; </div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a>));</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160; </div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;    <a class="code" href="miniz_8cpp.html#a26e8cbdf6ac000e1becf7faa1aa7a1fa">MZ_ZIP_ARRAY_SET_ELEMENT_SIZE</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>));</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;    <a class="code" href="miniz_8cpp.html#a26e8cbdf6ac000e1becf7faa1aa7a1fa">MZ_ZIP_ARRAY_SET_ELEMENT_SIZE</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>, <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>));</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;    <a class="code" href="miniz_8cpp.html#a26e8cbdf6ac000e1becf7faa1aa7a1fa">MZ_ZIP_ARRAY_SET_ELEMENT_SIZE</a>(&amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>, <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>));</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160; </div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = zip64;</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a0071a211627637fc049defb3f61972fe">m_zip64_has_extended_info_fields</a> = zip64;</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160; </div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> = <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a01c18c633c1058f9e758e30169ea5170">MZ_ZIP_TYPE_USER</a>;</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> = <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064">MZ_ZIP_MODE_WRITING</a>;</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160; </div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;}</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160; </div>
<div class="line"><a name="l05268"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a8b4c858b16cf5ea4508ca2e38a8e2a0a"> 5268</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a8b4c858b16cf5ea4508ca2e38a8e2a0a">mz_zip_writer_init</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> existing_size)</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;{</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ae7a4dc8ccdc92cf8fe90f0703dae5650">mz_zip_writer_init_v2</a>(pZip, existing_size, 0);</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;}</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160; </div>
<div class="line"><a name="l05273"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#af2dce1c3179550a7870704abc099f086"> 5273</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#af2dce1c3179550a7870704abc099f086">mz_zip_writer_init_heap_v2</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keywordtype">size_t</span> size_to_reserve_at_beginning, <span class="keywordtype">size_t</span> initial_allocation_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;{</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a> = <a class="code" href="miniz_8cpp.html#a80eaca434d785016af778ef5c93399e8">mz_zip_heap_write_func</a>;</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160; </div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;    <span class="keywordflow">if</span>(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a4e7e927edda20a28027f4c4a43a4b2e2">MZ_ZIP_FLAG_WRITE_ALLOW_READING</a>)</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a> = <a class="code" href="miniz_8cpp.html#a98e280f09026d4746a4171c94c8d64f6">mz_zip_mem_read_func</a>;</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160; </div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a> = pZip;</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160; </div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae7a4dc8ccdc92cf8fe90f0703dae5650">mz_zip_writer_init_v2</a>(pZip, size_to_reserve_at_beginning, flags))</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160; </div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> = <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a59eb97f502e48ac0d4e0979919c822e5">MZ_ZIP_TYPE_HEAP</a>;</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160; </div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;    <span class="keywordflow">if</span>(0 != (initial_allocation_size = <a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(initial_allocation_size, size_to_reserve_at_beginning)))</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;    {</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;        <span class="keywordflow">if</span>(NULL == (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, initial_allocation_size)))</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;        {</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;            <a class="code" href="miniz_8cpp.html#a278e91533e10d52981cb5d3d49335f7e">mz_zip_writer_end_internal</a>(pZip, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;        }</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a71f011527805e3ac48f5f12cb73d2233">m_mem_capacity</a> = initial_allocation_size;</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;    }</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160; </div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;}</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160; </div>
<div class="line"><a name="l05300"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a520050b2d27e4a1073e4462c5258d7f2"> 5300</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a520050b2d27e4a1073e4462c5258d7f2">mz_zip_writer_init_heap</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keywordtype">size_t</span> size_to_reserve_at_beginning, <span class="keywordtype">size_t</span> initial_allocation_size)</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;{</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#af2dce1c3179550a7870704abc099f086">mz_zip_writer_init_heap_v2</a>(pZip, size_to_reserve_at_beginning, initial_allocation_size, 0);</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;}</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160; </div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l05306"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3f7ad53ba9b773bbcb6c8edd91f8b918"> 5306</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#a3f7ad53ba9b773bbcb6c8edd91f8b918">mz_zip_file_write_func</a>(<span class="keywordtype">void</span> *pOpaque, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> file_ofs, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> n)</div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;{</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;    <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip = (<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *)pOpaque;</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;    <a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a> cur_ofs = <a class="code" href="miniz_8cpp.html#af3b9d5f2af50464d16fd7a6ef48c916b">MZ_FTELL64</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>);</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160; </div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;    file_ofs += pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a2705cc469d5f08543d5f827f43f391ec">m_file_archive_start_ofs</a>;</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160; </div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;    <span class="keywordflow">if</span>(((<a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a>)file_ofs &lt; 0) || (((cur_ofs != (<a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a>)file_ofs)) &amp;&amp; (<a class="code" href="miniz_8cpp.html#a6cd8f6b4134fc9ea62f311ac7f2c5c1d">MZ_FSEEK64</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>, (<a class="code" href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a>)file_ofs, SEEK_SET))))</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;    {</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dafada0e6e18c6a880a9a5af7848cceb54">MZ_ZIP_FILE_SEEK_FAILED</a>);</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;    }</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160; </div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a5f224b658d4b01790ef55ccd3ff8d3a2">MZ_FWRITE</a>(pBuf, 1, n, pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>);</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;}</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160; </div>
<div class="line"><a name="l05322"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a1ef57babf68945c7ef12f471d7c417c9"> 5322</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a1ef57babf68945c7ef12f471d7c417c9">mz_zip_writer_init_file</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> size_to_reserve_at_beginning)</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;{</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a3f063007374b7ddf5fd84f0644b4cfba">mz_zip_writer_init_file_v2</a>(pZip, pFilename, size_to_reserve_at_beginning, 0);</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;}</div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160; </div>
<div class="line"><a name="l05327"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3f063007374b7ddf5fd84f0644b4cfba"> 5327</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a3f063007374b7ddf5fd84f0644b4cfba">mz_zip_writer_init_file_v2</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> size_to_reserve_at_beginning, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;{</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;    <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *pFile;</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160; </div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a> = <a class="code" href="miniz_8cpp.html#a3f7ad53ba9b773bbcb6c8edd91f8b918">mz_zip_file_write_func</a>;</div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160; </div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;    <span class="keywordflow">if</span>(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a4e7e927edda20a28027f4c4a43a4b2e2">MZ_ZIP_FLAG_WRITE_ALLOW_READING</a>)</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a> = <a class="code" href="miniz_8cpp.html#a1440cf12da0b3513e14319c32f04b44f">mz_zip_file_read_func</a>;</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160; </div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a> = pZip;</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160; </div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae7a4dc8ccdc92cf8fe90f0703dae5650">mz_zip_writer_init_v2</a>(pZip, size_to_reserve_at_beginning, flags))</div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160; </div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;    <span class="keywordflow">if</span>(NULL == (pFile = <a class="code" href="miniz_8cpp.html#a7ab43238d8cd27afaf9ee668c8f6ab70">MZ_FOPEN</a>(pFilename, (flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a4e7e927edda20a28027f4c4a43a4b2e2">MZ_ZIP_FLAG_WRITE_ALLOW_READING</a>) ? <span class="stringliteral">&quot;w+b&quot;</span> : <span class="stringliteral">&quot;wb&quot;</span>)))</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;    {</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;        <a class="code" href="miniz_8cpp.html#a7ac49ded3cc37713226764131602e857">mz_zip_writer_end</a>(pZip);</div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da0c392e441dd7e14e4731686e8f3369ed">MZ_ZIP_FILE_OPEN_FAILED</a>);</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;    }</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160; </div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a> = pFile;</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> = <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a1c755e926bbf9197e0d64a0387a4e70a">MZ_ZIP_TYPE_FILE</a>;</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160; </div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;    <span class="keywordflow">if</span>(size_to_reserve_at_beginning)</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;    {</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> cur_ofs = 0;</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;        <span class="keywordtype">char</span> buf[4096];</div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160; </div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;        <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(buf);</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160; </div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;        {</div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;            <span class="keywordtype">size_t</span> n = (size_t)<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<span class="keyword">sizeof</span>(buf), size_to_reserve_at_beginning);</div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;            <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_ofs, buf, n) != n)</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;            {</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;                <a class="code" href="miniz_8cpp.html#a7ac49ded3cc37713226764131602e857">mz_zip_writer_end</a>(pZip);</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;            }</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;            cur_ofs += n;</div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;            size_to_reserve_at_beginning -= n;</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;        } <span class="keywordflow">while</span>(size_to_reserve_at_beginning);</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;    }</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160; </div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;}</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160; </div>
<div class="line"><a name="l05373"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a69cd39dce5df982debb5dd65d8edc60c"> 5373</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a69cd39dce5df982debb5dd65d8edc60c">mz_zip_writer_init_cfile</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *pFile, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;{</div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a> = <a class="code" href="miniz_8cpp.html#a3f7ad53ba9b773bbcb6c8edd91f8b918">mz_zip_file_write_func</a>;</div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160; </div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;    <span class="keywordflow">if</span>(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a4e7e927edda20a28027f4c4a43a4b2e2">MZ_ZIP_FLAG_WRITE_ALLOW_READING</a>)</div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a> = <a class="code" href="miniz_8cpp.html#a1440cf12da0b3513e14319c32f04b44f">mz_zip_file_read_func</a>;</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160; </div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a> = pZip;</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160; </div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae7a4dc8ccdc92cf8fe90f0703dae5650">mz_zip_writer_init_v2</a>(pZip, 0, flags))</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160; </div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a> = pFile;</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a2705cc469d5f08543d5f827f43f391ec">m_file_archive_start_ofs</a> = <a class="code" href="miniz_8cpp.html#af3b9d5f2af50464d16fd7a6ef48c916b">MZ_FTELL64</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>);</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> = <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a83f61a4c11f3ac2eb415546785502af7">MZ_ZIP_TYPE_CFILE</a>;</div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160; </div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;}</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160; </div>
<div class="line"><a name="l05393"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aaa53ceaf8230510769b12e04df060c23"> 5393</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#aaa53ceaf8230510769b12e04df060c23">mz_zip_writer_init_from_reader_v2</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;{</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState;</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160; </div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a40c391220d01d172a451f3dad0d5aed6">MZ_ZIP_MODE_READING</a>))</div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160; </div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;    <span class="keywordflow">if</span>(flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a43306564d2afb7c7347cd7041481fa36">MZ_ZIP_FLAG_WRITE_ZIP64</a>)</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;    {</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;        <span class="comment">/* We don&#39;t support converting a non-zip64 file to zip64 - this seems like more trouble than it&#39;s worth. (What about the existing 32-bit data descriptors that could follow the compressed data?) */</span></div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;        <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;    }</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160; </div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;    <span class="comment">/* No sense in trying to write to an archive that&#39;s already at the support max size */</span></div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;    {</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;    }</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;    {</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> == <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>)</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160; </div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;        <span class="keywordflow">if</span>((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>) &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da1365f1c2703389a5e6d5b5bbcca37859">MZ_ZIP_FILE_TOO_LARGE</a>);</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;    }</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160; </div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;    pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160; </div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>)</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;    {</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;<span class="preprocessor">#ifdef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;        (void)pFilename;</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a> != pZip)</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160; </div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> == <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a1c755e926bbf9197e0d64a0387a4e70a">MZ_ZIP_TYPE_FILE</a>)</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;        {</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;            <span class="keywordflow">if</span>(!pFilename)</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160; </div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;            <span class="comment">/* Archive is being read from stdio and was originally opened only for reading. Try to reopen as writable. */</span></div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;            <span class="keywordflow">if</span>(NULL == (pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a> = <a class="code" href="miniz_8cpp.html#a39982d7e112363ff6d284ace3b9cf9bc">MZ_FREOPEN</a>(pFilename, <span class="stringliteral">&quot;r+b&quot;</span>, pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>)))</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;            {</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;                <span class="comment">/* The mz_zip_archive is now in a bogus state because pState-&gt;m_pFile is NULL, so just close it. */</span></div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;                <a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(pZip, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da0c392e441dd7e14e4731686e8f3369ed">MZ_ZIP_FILE_OPEN_FAILED</a>);</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;            }</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;        }</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160; </div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a> = <a class="code" href="miniz_8cpp.html#a3f7ad53ba9b773bbcb6c8edd91f8b918">mz_zip_file_write_func</a>;</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifdef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;    }</div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>)</div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;    {</div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;        <span class="comment">/* Archive lives in a memory block. Assume it&#39;s from the heap that we can resize using the realloc callback. */</span></div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a> != pZip)</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160; </div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;        pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a71f011527805e3ac48f5f12cb73d2233">m_mem_capacity</a> = pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a4511d7743e1a63fb78ed066f8de96466">m_mem_size</a>;</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a> = <a class="code" href="miniz_8cpp.html#a80eaca434d785016af778ef5c93399e8">mz_zip_heap_write_func</a>;</div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;    }</div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;    <span class="comment">/* Archive is being read via a user provided read function - make sure the user has specified a write function too. */</span></div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>)</div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160; </div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;    <span class="comment">/* Start writing new files at the archive&#39;s current central directory location. */</span></div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;    <span class="comment">/* TODO: We could add a flag that lets the user start writing immediately AFTER the existing central dir - this would be safer. */</span></div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a128125bc28f4d1f118fe7b9badd0f975">m_central_directory_file_ofs</a>;</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a128125bc28f4d1f118fe7b9badd0f975">m_central_directory_file_ofs</a> = 0;</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160; </div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;    <span class="comment">/* Clear the sorted central dir offsets, they aren&#39;t useful or maintained now. */</span></div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;    <span class="comment">/* Even though we&#39;re now in write mode, files can still be extracted and verified, but file locates will be slow. */</span></div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;    <span class="comment">/* TODO: We could easily maintain the sorted central directory offsets. */</span></div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;    <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">m_sorted_central_dir_offsets</a>);</div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160; </div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> = <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064">MZ_ZIP_MODE_WRITING</a>;</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160; </div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;}</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160; </div>
<div class="line"><a name="l05478"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aea1a273234436ccb155a0e92ef2a30e4"> 5478</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#aea1a273234436ccb155a0e92ef2a30e4">mz_zip_writer_init_from_reader</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename)</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;{</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#aaa53ceaf8230510769b12e04df060c23">mz_zip_writer_init_from_reader_v2</a>(pZip, pFilename, 0);</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;}</div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160; </div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;<span class="comment">/* TODO: pArchive_name is a terrible name here! */</span></div>
<div class="line"><a name="l05484"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ab5aac408b80e6f51a14434330fc76d6d"> 5484</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> level_and_flags)</div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;{</div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a48ece9a3d251aa69af280e975b6cc080">mz_zip_writer_add_mem_ex</a>(pZip, pArchive_name, pBuf, buf_size, NULL, 0, level_and_flags, 0, 0);</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;}</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160; </div>
<div class="line"><a name="l05489"></a><span class="lineno"><a class="line" href="structmz__zip__writer__add__state.html"> 5489</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;{</div>
<div class="line"><a name="l05491"></a><span class="lineno"><a class="line" href="structmz__zip__writer__add__state.html#a8beb0e578862314a35cc724aeb95e709"> 5491</a></span>&#160;    <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *<a class="code" href="structmz__zip__writer__add__state.html#a8beb0e578862314a35cc724aeb95e709">m_pZip</a>;</div>
<div class="line"><a name="l05492"></a><span class="lineno"><a class="line" href="structmz__zip__writer__add__state.html#a305f9fa7f47b583ee53b8ee0401edd9e"> 5492</a></span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> <a class="code" href="structmz__zip__writer__add__state.html#a305f9fa7f47b583ee53b8ee0401edd9e">m_cur_archive_file_ofs</a>;</div>
<div class="line"><a name="l05493"></a><span class="lineno"><a class="line" href="structmz__zip__writer__add__state.html#a4736843d8fbef3a1d323451bb29ae3cd"> 5493</a></span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> <a class="code" href="structmz__zip__writer__add__state.html#a4736843d8fbef3a1d323451bb29ae3cd">m_comp_size</a>;</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;} <a class="code" href="structmz__zip__writer__add__state.html">mz_zip_writer_add_state</a>;</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160; </div>
<div class="line"><a name="l05496"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a97588a80c7490308f27a91cb40a355a8"> 5496</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a97588a80c7490308f27a91cb40a355a8">mz_zip_writer_add_put_buf_callback</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">int</span> len, <span class="keywordtype">void</span> *pUser)</div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;{</div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;    <a class="code" href="structmz__zip__writer__add__state.html">mz_zip_writer_add_state</a> *pState = (<a class="code" href="structmz__zip__writer__add__state.html">mz_zip_writer_add_state</a> *)pUser;</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;    <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)pState-&gt;<a class="code" href="structmz__zip__writer__add__state.html#a8beb0e578862314a35cc724aeb95e709">m_pZip</a>-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pState-&gt;<a class="code" href="structmz__zip__writer__add__state.html#a8beb0e578862314a35cc724aeb95e709">m_pZip</a>-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, pState-&gt;<a class="code" href="structmz__zip__writer__add__state.html#a305f9fa7f47b583ee53b8ee0401edd9e">m_cur_archive_file_ofs</a>, pBuf, len) != len)</div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160; </div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;    pState-&gt;<a class="code" href="structmz__zip__writer__add__state.html#a305f9fa7f47b583ee53b8ee0401edd9e">m_cur_archive_file_ofs</a> += len;</div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;    pState-&gt;<a class="code" href="structmz__zip__writer__add__state.html#a4736843d8fbef3a1d323451bb29ae3cd">m_comp_size</a> += len;</div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;}</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160; </div>
<div class="line"><a name="l05507"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#abdaca8f637e75bce24a677104cdfc92c"> 5507</a></span>&#160;<span class="preprocessor">#define MZ_ZIP64_MAX_LOCAL_EXTRA_FIELD_SIZE (sizeof(mz_uint16) * 2 + sizeof(mz_uint64) * 2)</span></div>
<div class="line"><a name="l05508"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aa1b2bd10c69963c1b6bd3be7a91357b2"> 5508</a></span>&#160;<span class="preprocessor">#define MZ_ZIP64_MAX_CENTRAL_EXTRA_FIELD_SIZE (sizeof(mz_uint16) * 2 + sizeof(mz_uint64) * 3)</span></div>
<div class="line"><a name="l05509"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a8e6757d07832c14a6310ca0524c3f024"> 5509</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> <a class="code" href="miniz_8cpp.html#a8e6757d07832c14a6310ca0524c3f024">mz_zip_writer_create_zip64_extra_data</a>(<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pBuf, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> *pUncomp_size, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> *pComp_size, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> *pLocal_header_ofs)</div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;{</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pDst = pBuf;</div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160; </div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + 0, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc">MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</a>);</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + 2, 0);</div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;    pDst += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2;</div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160; </div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> field_size = 0;</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160; </div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;    <span class="keywordflow">if</span>(pUncomp_size)</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;    {</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(pDst, *pUncomp_size);</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;        pDst += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;        field_size += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;    }</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160; </div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;    <span class="keywordflow">if</span>(pComp_size)</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;    {</div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(pDst, *pComp_size);</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;        pDst += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;        field_size += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;    }</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160; </div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;    <span class="keywordflow">if</span>(pLocal_header_ofs)</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;    {</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(pDst, *pLocal_header_ofs);</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;        pDst += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;        field_size += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;    }</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160; </div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pBuf + 2, field_size);</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160; </div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)(pDst - pBuf);</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;}</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160; </div>
<div class="line"><a name="l05545"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ae1b9b894b1fe6286919b091c89337633"> 5545</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ae1b9b894b1fe6286919b091c89337633">mz_zip_writer_create_local_dir_header</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pDst, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> filename_size, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> extra_size, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> uncomp_size, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> comp_size, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> uncomp_crc32, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> method, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> bit_flags, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> dos_time, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> dos_date)</div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;{</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;    (void)pZip;</div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(pDst, 0, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>);</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8e097e1ab652a56cc76597c8ef1999c0">MZ_ZIP_LDH_SIG_OFS</a>, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a05f28665e3880ca5863fff3ca58129b6">MZ_ZIP_LOCAL_DIR_HEADER_SIG</a>);</div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa84f798966b9ea678b5eaebc6dca4b70">MZ_ZIP_LDH_VERSION_NEEDED_OFS</a>, method ? 20 : 0);</div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ed8079f712b2ec7963d9b1378596528">MZ_ZIP_LDH_BIT_FLAG_OFS</a>, bit_flags);</div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a607eeb03e7ee0916fa7d93abaaaba9fd">MZ_ZIP_LDH_METHOD_OFS</a>, method);</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4d8dee6a3a5a1bb480dbbd7b9bff6a68">MZ_ZIP_LDH_FILE_TIME_OFS</a>, dos_time);</div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5cb18f68ead9424b140fd8710ee9e124">MZ_ZIP_LDH_FILE_DATE_OFS</a>, dos_date);</div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0b518fa8ffa820df4771f9d567c13dcc">MZ_ZIP_LDH_CRC32_OFS</a>, uncomp_crc32);</div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a67751a44d185feb156f40a7cd922a577">MZ_ZIP_LDH_COMPRESSED_SIZE_OFS</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(comp_size, <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>));</div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3538fb6973847de5f8bd315ba8d0e1d">MZ_ZIP_LDH_DECOMPRESSED_SIZE_OFS</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(uncomp_size, <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>));</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4990e590f2652f0d540c3eb35e3f650f">MZ_ZIP_LDH_FILENAME_LEN_OFS</a>, filename_size);</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aaecc052d653e298f93b9c5523c98f5f2">MZ_ZIP_LDH_EXTRA_LEN_OFS</a>, extra_size);</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;}</div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160; </div>
<div class="line"><a name="l05563"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a7b85d16940dcbcb59615be2442e54f66"> 5563</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a7b85d16940dcbcb59615be2442e54f66">mz_zip_writer_create_central_dir_header</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pDst,</div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;                                                       <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> filename_size, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> extra_size, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> comment_size,</div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;                                                       <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> uncomp_size, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> comp_size, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> uncomp_crc32,</div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;                                                       <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> method, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> bit_flags, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> dos_time, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> dos_date,</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;                                                       <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> local_header_ofs, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> ext_attributes)</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;{</div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;    (void)pZip;</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(pDst, 0, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>);</div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a358e2e9adf6165535355f8bb86112dec">MZ_ZIP_CDH_SIG_OFS</a>, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a77d0b453bce2a419b6144bf87e71b170">MZ_ZIP_CENTRAL_DIR_HEADER_SIG</a>);</div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a122562cf2a1182825317fe26e7902e64">MZ_ZIP_CDH_VERSION_NEEDED_OFS</a>, method ? 20 : 0);</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac50291ea0ed2b18a069f5e129f098db2">MZ_ZIP_CDH_BIT_FLAG_OFS</a>, bit_flags);</div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a49864f9b56c094003565ed64b2b4aed1">MZ_ZIP_CDH_METHOD_OFS</a>, method);</div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a6954b28080a1fb151914b00da25074f5">MZ_ZIP_CDH_FILE_TIME_OFS</a>, dos_time);</div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0a30dbf39d1e87013ef095186370cc36">MZ_ZIP_CDH_FILE_DATE_OFS</a>, dos_date);</div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a98e11950c99539215b65a334a2afe989">MZ_ZIP_CDH_CRC32_OFS</a>, uncomp_crc32);</div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2a463b99b8d0699bda4e3a52dd1d1015">MZ_ZIP_CDH_COMPRESSED_SIZE_OFS</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(comp_size, <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>));</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a43afeb736295b1f90330d79db8420c9e">MZ_ZIP_CDH_DECOMPRESSED_SIZE_OFS</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(uncomp_size, <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>));</div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>, filename_size);</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a>, extra_size);</div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac67dc228d5e122d1ad9cd42072e65c1d">MZ_ZIP_CDH_COMMENT_LEN_OFS</a>, comment_size);</div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab4dec2086b60f7e1c7ce499b07b966cb">MZ_ZIP_CDH_EXTERNAL_ATTR_OFS</a>, ext_attributes);</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(pDst + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87">MZ_ZIP_CDH_LOCAL_HEADER_OFS</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(local_header_ofs, <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>));</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;}</div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160; </div>
<div class="line"><a name="l05588"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a0a0f9c1d13431f247f29c0585fad94a6"> 5588</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a0a0f9c1d13431f247f29c0585fad94a6">mz_zip_writer_add_to_central_dir</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> filename_size,</div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;                                                <span class="keyword">const</span> <span class="keywordtype">void</span> *pExtra, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> extra_size, <span class="keyword">const</span> <span class="keywordtype">void</span> *pComment, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> comment_size,</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;                                                <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> uncomp_size, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> comp_size, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> uncomp_crc32,</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;                                                <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> method, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> bit_flags, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> dos_time, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> dos_date,</div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;                                                <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> local_header_ofs, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> ext_attributes,</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;                                                <span class="keyword">const</span> <span class="keywordtype">char</span> *user_extra_data, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> user_extra_data_len)</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;{</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> central_dir_ofs = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a>;</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;    <span class="keywordtype">size_t</span> orig_central_dir_size = pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a>;</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> central_dir_header[<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>];</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160; </div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;    <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;    {</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;        <span class="keywordflow">if</span>(local_header_ofs &gt; 0xFFFFFFFF)</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da1365f1c2703389a5e6d5b5bbcca37859">MZ_ZIP_FILE_TOO_LARGE</a>);</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;    }</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160; </div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;    <span class="comment">/* miniz doesn&#39;t support central dirs &gt;= MZ_UINT32_MAX bytes yet */</span></div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;    <span class="keywordflow">if</span>(((<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + filename_size + extra_size + user_extra_data_len + comment_size) &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dace5ba2a072f9f615873588e7ebc56ab3">MZ_ZIP_UNSUPPORTED_CDIR_SIZE</a>);</div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160; </div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a7b85d16940dcbcb59615be2442e54f66">mz_zip_writer_create_central_dir_header</a>(pZip, central_dir_header, filename_size, extra_size + user_extra_data_len, comment_size, uncomp_size, comp_size, uncomp_crc32, method, bit_flags, dos_time, dos_date, local_header_ofs, ext_attributes))</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>);</div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160; </div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;    <span class="keywordflow">if</span>((!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, central_dir_header, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>)) ||</div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;        (!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, pFilename, filename_size)) ||</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;        (!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, pExtra, extra_size)) ||</div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;        (!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, user_extra_data, user_extra_data_len)) ||</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;        (!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, pComment, comment_size)) ||</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;        (!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>, &amp;central_dir_ofs, 1)))</div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;    {</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;        <span class="comment">/* Try to resize the central directory array back into its original state. */</span></div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;        <a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, orig_central_dir_size, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;    }</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160; </div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;}</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160; </div>
<div class="line"><a name="l05628"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a97d5bb6b72d210e1a566e43b10080220"> 5628</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a97d5bb6b72d210e1a566e43b10080220">mz_zip_writer_validate_archive_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name)</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;{</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;    <span class="comment">/* Basic ZIP archive filename validity checks: Valid filenames cannot start with a forward slash, cannot contain a drive letter, and cannot use DOS-style backward slashes. */</span></div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;    <span class="keywordflow">if</span>(*pArchive_name == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160; </div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;    <span class="keywordflow">while</span>(*pArchive_name)</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;    {</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;        <span class="keywordflow">if</span>((*pArchive_name == <span class="charliteral">&#39;\\&#39;</span>) || (*pArchive_name == <span class="charliteral">&#39;:&#39;</span>))</div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160; </div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;        pArchive_name++;</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;    }</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160; </div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;}</div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160; </div>
<div class="line"><a name="l05645"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a922d2fef6d4d160a9053cebf4c486a0b"> 5645</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> <a class="code" href="miniz_8cpp.html#a922d2fef6d4d160a9053cebf4c486a0b">mz_zip_writer_compute_padding_needed_for_file_alignment</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;{</div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> n;</div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;    <span class="keywordflow">if</span>(!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a>)</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;    n = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> &amp; (pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a> - 1));</div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)((pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a> - n) &amp; (pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a> - 1));</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;}</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160; </div>
<div class="line"><a name="l05654"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ac2423627c59f318541d6a1218eda198f"> 5654</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ac2423627c59f318541d6a1218eda198f">mz_zip_writer_write_zeros</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> cur_file_ofs, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> n)</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;{</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;    <span class="keywordtype">char</span> buf[4096];</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(buf, 0, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<span class="keyword">sizeof</span>(buf), n));</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;    <span class="keywordflow">while</span>(n)</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;    {</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> s = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<span class="keyword">sizeof</span>(buf), n);</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_file_ofs, buf, s) != s)</div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160; </div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;        cur_file_ofs += s;</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;        n -= s;</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;    }</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;}</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160; </div>
<div class="line"><a name="l05670"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a48ece9a3d251aa69af280e975b6cc080"> 5670</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a48ece9a3d251aa69af280e975b6cc080">mz_zip_writer_add_mem_ex</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_size, <span class="keyword">const</span> <span class="keywordtype">void</span> *pComment, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> comment_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> level_and_flags,</div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;                                 <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> uncomp_size, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> uncomp_crc32)</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;{</div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a5375bb787f461b03bfea58f0807f5736">mz_zip_writer_add_mem_ex_v2</a>(pZip, pArchive_name, pBuf, buf_size, pComment, comment_size, level_and_flags, uncomp_size, uncomp_crc32, NULL, NULL, 0, NULL, 0);</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;}</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160; </div>
<div class="line"><a name="l05676"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5375bb787f461b03bfea58f0807f5736"> 5676</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a5375bb787f461b03bfea58f0807f5736">mz_zip_writer_add_mem_ex_v2</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_size, <span class="keyword">const</span> <span class="keywordtype">void</span> *pComment, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> comment_size,</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;                                    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> level_and_flags, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> uncomp_size, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> uncomp_crc32, <a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> *last_modified,</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">char</span> *user_extra_data, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> user_extra_data_len, <span class="keyword">const</span> <span class="keywordtype">char</span> *user_extra_data_central, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> user_extra_data_central_len)</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;{</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;    <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> method = 0, dos_time = 0, dos_date = 0;</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> level, ext_attributes = 0, num_alignment_padding_bytes;</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> local_dir_header_ofs = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>, cur_archive_file_ofs = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>, comp_size = 0;</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;    <span class="keywordtype">size_t</span> archive_name_size;</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> local_dir_header[<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>];</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;    <a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *pComp = NULL;</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> store_data_uncompressed;</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState;</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pExtra_data = NULL;</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> extra_size = 0;</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> extra_data[<a class="code" href="miniz_8cpp.html#aa1b2bd10c69963c1b6bd3be7a91357b2">MZ_ZIP64_MAX_CENTRAL_EXTRA_FIELD_SIZE</a>];</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;    <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> bit_flags = 0;</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160; </div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;    <span class="keywordflow">if</span>(uncomp_size || (buf_size &amp;&amp; !(level_and_flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>)))</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;        bit_flags |= <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0405d7ab268a9b534642d2d0acf56749">MZ_ZIP_LDH_BIT_FLAG_HAS_LOCATOR</a>;</div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160; </div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;    <span class="keywordflow">if</span>(level_and_flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a69d00dfb3097fbfb77f984fd830b9eaa">MZ_ZIP_FLAG_UTF8_FILENAME</a>)</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;        bit_flags |= <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2170b4f05a7674dad26a7c90f92ed992">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_UTF8</a>;</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160; </div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;    <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)level_and_flags &lt; 0)</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;        level_and_flags = <a class="code" href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9eab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a>;</div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;    level = level_and_flags &amp; 0xF;</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;    store_data_uncompressed = ((!level) || (level_and_flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>));</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160; </div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064">MZ_ZIP_MODE_WRITING</a>) || ((buf_size) &amp;&amp; (!pBuf)) || (!pArchive_name) || ((comment_size) &amp;&amp; (!pComment)) || (level &gt; <a class="code" href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea54ec4bb3bd4e6ae21180b27a73c46147">MZ_UBER_COMPRESSION</a>))</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160; </div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160; </div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;    {</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;    }</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;    {</div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> == <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>)</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;        {</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;            pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;            <span class="comment">/*return mz_zip_set_error(pZip, MZ_ZIP_TOO_MANY_FILES); */</span></div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;        }</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;        <span class="keywordflow">if</span>((buf_size &gt; 0xFFFFFFFF) || (uncomp_size &gt; 0xFFFFFFFF))</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;        {</div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;            pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;            <span class="comment">/*return mz_zip_set_error(pZip, MZ_ZIP_ARCHIVE_TOO_LARGE); */</span></div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;        }</div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;    }</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160; </div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;    <span class="keywordflow">if</span>((!(level_and_flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>)) &amp;&amp; (uncomp_size))</div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160; </div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a97d5bb6b72d210e1a566e43b10080220">mz_zip_writer_validate_archive_name</a>(pArchive_name))</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5f3d5a8641212fa3ad820bcb94124cc2">MZ_ZIP_INVALID_FILENAME</a>);</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160; </div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;    <span class="keywordflow">if</span>(last_modified != NULL)</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;    {</div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;        <a class="code" href="miniz_8cpp.html#a6468572e6ec87a0cf96d8d3ee6549f78">mz_zip_time_t_to_dos_time</a>(*last_modified, &amp;dos_time, &amp;dos_date);</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;    }</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;    {</div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;        {</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;            <a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> cur_time;</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;            <a class="code" href="time_8c.html#a99ef1cb2c789827dd5db3886dccf9067">time</a>(&amp;cur_time);</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;            <a class="code" href="miniz_8cpp.html#a6468572e6ec87a0cf96d8d3ee6549f78">mz_zip_time_t_to_dos_time</a>(cur_time, &amp;dos_time, &amp;dos_date);</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;        }</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_TIME */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;    }</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160; </div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;    archive_name_size = <a class="code" href="string_8c.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(pArchive_name);</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;    <span class="keywordflow">if</span>(archive_name_size &gt; <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>)</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5f3d5a8641212fa3ad820bcb94124cc2">MZ_ZIP_INVALID_FILENAME</a>);</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160; </div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;    num_alignment_padding_bytes = <a class="code" href="miniz_8cpp.html#a922d2fef6d4d160a9053cebf4c486a0b">mz_zip_writer_compute_padding_needed_for_file_alignment</a>(pZip);</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160; </div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;    <span class="comment">/* miniz doesn&#39;t support central dirs &gt;= MZ_UINT32_MAX bytes yet */</span></div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;    <span class="keywordflow">if</span>(((<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + archive_name_size + <a class="code" href="miniz_8cpp.html#aa1b2bd10c69963c1b6bd3be7a91357b2">MZ_ZIP64_MAX_CENTRAL_EXTRA_FIELD_SIZE</a> + comment_size) &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dace5ba2a072f9f615873588e7ebc56ab3">MZ_ZIP_UNSUPPORTED_CDIR_SIZE</a>);</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160; </div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;    <span class="keywordflow">if</span>(!pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;    {</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;        <span class="comment">/* Bail early if the archive would obviously become too large */</span></div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;        <span class="keywordflow">if</span>((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> + num_alignment_padding_bytes + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + archive_name_size + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + archive_name_size + comment_size + pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>) &gt; 0xFFFFFFFF)</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;        {</div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;            pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;            <span class="comment">/*return mz_zip_set_error(pZip, MZ_ZIP_ARCHIVE_TOO_LARGE); */</span></div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;        }</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;    }</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160; </div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;    <span class="keywordflow">if</span>((archive_name_size) &amp;&amp; (pArchive_name[archive_name_size - 1] == <span class="charliteral">&#39;/&#39;</span>))</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;    {</div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;        <span class="comment">/* Set DOS Subdirectory attribute bit. */</span></div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;        ext_attributes |= <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a2a1bb318f1f4ab445c7e4de3d3e1cc">MZ_ZIP_DOS_DIR_ATTRIBUTE_BITFLAG</a>;</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160; </div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;        <span class="comment">/* Subdirectories cannot contain data. */</span></div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;        <span class="keywordflow">if</span>((buf_size) || (uncomp_size))</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;    }</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160; </div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;    <span class="comment">/* Try to do any allocations before writing to the archive, so if an allocation fails the file remains unmodified. (A good idea if we&#39;re doing an in-place modification.) */</span></div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;    <span class="keywordflow">if</span>((!<a class="code" href="miniz_8cpp.html#ac0727c0cc3614254a2dc7a9fa2339794">mz_zip_array_ensure_room</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + archive_name_size + comment_size + (pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> ? <a class="code" href="miniz_8cpp.html#aa1b2bd10c69963c1b6bd3be7a91357b2">MZ_ZIP64_MAX_CENTRAL_EXTRA_FIELD_SIZE</a> : 0))) || (!<a class="code" href="miniz_8cpp.html#ac0727c0cc3614254a2dc7a9fa2339794">mz_zip_array_ensure_room</a>(pZip, &amp;pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">m_central_dir_offsets</a>, 1)))</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160; </div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;    <span class="keywordflow">if</span>((!store_data_uncompressed) &amp;&amp; (buf_size))</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;    {</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;        <span class="keywordflow">if</span>(NULL == (pComp = (<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, <span class="keyword">sizeof</span>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a>))))</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;    }</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160; </div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ac2423627c59f318541d6a1218eda198f">mz_zip_writer_write_zeros</a>(pZip, cur_archive_file_ofs, num_alignment_padding_bytes))</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;    {</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pComp);</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;    }</div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160; </div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;    local_dir_header_ofs += num_alignment_padding_bytes;</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a>)</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;    {</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;        <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>((local_dir_header_ofs &amp; (pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a> - 1)) == 0);</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;    }</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;    cur_archive_file_ofs += num_alignment_padding_bytes;</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160; </div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;    <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(local_dir_header);</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160; </div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;    <span class="keywordflow">if</span>(!store_data_uncompressed || (level_and_flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>))</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;    {</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;        method = <a class="code" href="miniz_8h.html#a3e92e9b3cc525db1fd503d9630ec1bf5">MZ_DEFLATED</a>;</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;    }</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160; </div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;    {</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;        <span class="keywordflow">if</span>(uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a> || local_dir_header_ofs &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;        {</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;            pExtra_data = extra_data;</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;            extra_size = <a class="code" href="miniz_8cpp.html#a8e6757d07832c14a6310ca0524c3f024">mz_zip_writer_create_zip64_extra_data</a>(extra_data, (uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;uncomp_size : NULL,</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;                                                               (uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;comp_size : NULL, (local_dir_header_ofs &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;local_dir_header_ofs : NULL);</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;        }</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160; </div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae1b9b894b1fe6286919b091c89337633">mz_zip_writer_create_local_dir_header</a>(pZip, local_dir_header, (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)archive_name_size, extra_size + user_extra_data_len, 0, 0, 0, method, bit_flags, dos_time, dos_date))</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>);</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160; </div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, local_dir_header_ofs, local_dir_header, <span class="keyword">sizeof</span>(local_dir_header)) != <span class="keyword">sizeof</span>(local_dir_header))</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160; </div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;        cur_archive_file_ofs += <span class="keyword">sizeof</span>(local_dir_header);</div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160; </div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, pArchive_name, archive_name_size) != archive_name_size)</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;        {</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;            pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pComp);</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;        }</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;        cur_archive_file_ofs += archive_name_size;</div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160; </div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;        <span class="keywordflow">if</span>(pExtra_data != NULL)</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;        {</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;            <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, extra_data, extra_size) != extra_size)</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160; </div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;            cur_archive_file_ofs += extra_size;</div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;        }</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;    }</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;    {</div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;        <span class="keywordflow">if</span>((comp_size &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) || (cur_archive_file_ofs &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>))</div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae1b9b894b1fe6286919b091c89337633">mz_zip_writer_create_local_dir_header</a>(pZip, local_dir_header, (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)archive_name_size, user_extra_data_len, 0, 0, 0, method, bit_flags, dos_time, dos_date))</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>);</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160; </div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, local_dir_header_ofs, local_dir_header, <span class="keyword">sizeof</span>(local_dir_header)) != <span class="keyword">sizeof</span>(local_dir_header))</div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160; </div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;        cur_archive_file_ofs += <span class="keyword">sizeof</span>(local_dir_header);</div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160; </div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, pArchive_name, archive_name_size) != archive_name_size)</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;        {</div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;            pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pComp);</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;        }</div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;        cur_archive_file_ofs += archive_name_size;</div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;    }</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160; </div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;    <span class="keywordflow">if</span>(user_extra_data_len &gt; 0)</div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;    {</div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, user_extra_data, user_extra_data_len) != user_extra_data_len)</div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160; </div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;        cur_archive_file_ofs += user_extra_data_len;</div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;    }</div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160; </div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;    <span class="keywordflow">if</span>(!(level_and_flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>))</div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;    {</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;        uncomp_crc32 = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(<a class="code" href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a>, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf, buf_size);</div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;        uncomp_size = buf_size;</div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;        <span class="keywordflow">if</span>(uncomp_size &lt;= 3)</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;        {</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;            level = 0;</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;            store_data_uncompressed = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;        }</div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;    }</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160; </div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;    <span class="keywordflow">if</span>(store_data_uncompressed)</div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;    {</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, pBuf, buf_size) != buf_size)</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;        {</div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;            pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pComp);</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;        }</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160; </div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;        cur_archive_file_ofs += buf_size;</div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;        comp_size = buf_size;</div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;    }</div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(buf_size)</div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;    {</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;        <a class="code" href="structmz__zip__writer__add__state.html">mz_zip_writer_add_state</a> state;</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160; </div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;        state.<a class="code" href="structmz__zip__writer__add__state.html#a8beb0e578862314a35cc724aeb95e709">m_pZip</a> = pZip;</div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;        state.<a class="code" href="structmz__zip__writer__add__state.html#a305f9fa7f47b583ee53b8ee0401edd9e">m_cur_archive_file_ofs</a> = cur_archive_file_ofs;</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;        state.<a class="code" href="structmz__zip__writer__add__state.html#a4736843d8fbef3a1d323451bb29ae3cd">m_comp_size</a> = 0;</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160; </div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;        <span class="keywordflow">if</span>((<a class="code" href="miniz_8cpp.html#a3c2c67a6200147020ba4bfbf77962792">tdefl_init</a>(pComp, <a class="code" href="miniz_8cpp.html#a97588a80c7490308f27a91cb40a355a8">mz_zip_writer_add_put_buf_callback</a>, &amp;state, <a class="code" href="miniz_8cpp.html#acf2306ec6b7f92753264f68bc554750b">tdefl_create_comp_flags_from_zip_params</a>(level, -15, <a class="code" href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388a96891a5aa5d03f61da7f4a9c5b94f1d5">MZ_DEFAULT_STRATEGY</a>)) != <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a>) ||</div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;            (<a class="code" href="miniz_8cpp.html#a5f2608070112b0e81a3017e9c39c73b7">tdefl_compress_buffer</a>(pComp, pBuf, buf_size, <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a>) != <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa9beb7850b5d6941b6860db23f426b0d2">TDEFL_STATUS_DONE</a>))</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;        {</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;            pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pComp);</div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5ff902fe9d66d26053d8a3c11d383460">MZ_ZIP_COMPRESSION_FAILED</a>);</div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;        }</div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160; </div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;        comp_size = state.<a class="code" href="structmz__zip__writer__add__state.html#a4736843d8fbef3a1d323451bb29ae3cd">m_comp_size</a>;</div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;        cur_archive_file_ofs = state.<a class="code" href="structmz__zip__writer__add__state.html#a305f9fa7f47b583ee53b8ee0401edd9e">m_cur_archive_file_ofs</a>;</div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;    }</div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160; </div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pComp);</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;    pComp = NULL;</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160; </div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;    <span class="keywordflow">if</span>(uncomp_size)</div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;    {</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;        <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>(bit_flags &amp; <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0405d7ab268a9b534642d2d0acf56749">MZ_ZIP_LDH_BIT_FLAG_HAS_LOCATOR</a>);</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160; </div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;        <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> local_dir_footer[<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a141e719c11d73808127d93d7e43d831f">MZ_ZIP_DATA_DESCRIPTER_SIZE64</a>];</div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> local_dir_footer_size = <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2d8d0fa55e19480b267a629d4b0174b4">MZ_ZIP_DATA_DESCRIPTER_SIZE32</a>;</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160; </div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(local_dir_footer + 0, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d">MZ_ZIP_DATA_DESCRIPTOR_ID</a>);</div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(local_dir_footer + 4, uncomp_crc32);</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;        <span class="keywordflow">if</span>(pExtra_data == NULL)</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;        {</div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;            <span class="keywordflow">if</span>((comp_size &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) || (cur_archive_file_ofs &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>))</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160; </div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;            <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(local_dir_footer + 8, comp_size);</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;            <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(local_dir_footer + 12, uncomp_size);</div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;        }</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;        {</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;            <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(local_dir_footer + 8, comp_size);</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;            <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(local_dir_footer + 16, uncomp_size);</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;            local_dir_footer_size = <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a141e719c11d73808127d93d7e43d831f">MZ_ZIP_DATA_DESCRIPTER_SIZE64</a>;</div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;        }</div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160; </div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, local_dir_footer, local_dir_footer_size) != local_dir_footer_size)</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160; </div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;        cur_archive_file_ofs += local_dir_footer_size;</div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;    }</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160; </div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;    <span class="keywordflow">if</span>(pExtra_data != NULL)</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;    {</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;        extra_size = <a class="code" href="miniz_8cpp.html#a8e6757d07832c14a6310ca0524c3f024">mz_zip_writer_create_zip64_extra_data</a>(extra_data, (uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;uncomp_size : NULL,</div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;                                                           (uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;comp_size : NULL, (local_dir_header_ofs &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;local_dir_header_ofs : NULL);</div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;    }</div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160; </div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a0a0f9c1d13431f247f29c0585fad94a6">mz_zip_writer_add_to_central_dir</a>(pZip, pArchive_name, (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)archive_name_size, pExtra_data, extra_size, pComment,</div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;                                          comment_size, uncomp_size, comp_size, uncomp_crc32, method, bit_flags, dos_time, dos_date, local_dir_header_ofs, ext_attributes,</div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;                                          user_extra_data_central, user_extra_data_central_len))</div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160; </div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>++;</div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> = cur_archive_file_ofs;</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160; </div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;}</div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160; </div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l05961"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#af9c2c29725431f20ad947e1084582e32"> 5961</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#af9c2c29725431f20ad947e1084582e32">mz_zip_writer_add_cfile</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name, <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *pSrc_file, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> size_to_add, <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> *pFile_time, <span class="keyword">const</span> <span class="keywordtype">void</span> *pComment, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> comment_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> level_and_flags,</div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">char</span> *user_extra_data, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> user_extra_data_len, <span class="keyword">const</span> <span class="keywordtype">char</span> *user_extra_data_central, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> user_extra_data_central_len)</div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;{</div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;    <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> gen_flags = <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0405d7ab268a9b534642d2d0acf56749">MZ_ZIP_LDH_BIT_FLAG_HAS_LOCATOR</a>;</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> uncomp_crc32 = <a class="code" href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a>, level, num_alignment_padding_bytes;</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;    <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> method = 0, dos_time = 0, dos_date = 0, ext_attributes = 0;</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> local_dir_header_ofs, cur_archive_file_ofs = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>, uncomp_size = size_to_add, comp_size = 0;</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;    <span class="keywordtype">size_t</span> archive_name_size;</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> local_dir_header[<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>];</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pExtra_data = NULL;</div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> extra_size = 0;</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> extra_data[<a class="code" href="miniz_8cpp.html#aa1b2bd10c69963c1b6bd3be7a91357b2">MZ_ZIP64_MAX_CENTRAL_EXTRA_FIELD_SIZE</a>];</div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState;</div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160; </div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;    <span class="keywordflow">if</span>(level_and_flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a69d00dfb3097fbfb77f984fd830b9eaa">MZ_ZIP_FLAG_UTF8_FILENAME</a>)</div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;        gen_flags |= <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2170b4f05a7674dad26a7c90f92ed992">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_UTF8</a>;</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160; </div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;    <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)level_and_flags &lt; 0)</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;        level_and_flags = <a class="code" href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9eab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a>;</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;    level = level_and_flags &amp; 0xF;</div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160; </div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;    <span class="comment">/* Sanity checks */</span></div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064">MZ_ZIP_MODE_WRITING</a>) || (!pArchive_name) || ((comment_size) &amp;&amp; (!pComment)) || (level &gt; <a class="code" href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea54ec4bb3bd4e6ae21180b27a73c46147">MZ_UBER_COMPRESSION</a>))</div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160; </div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;    pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160; </div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;    <span class="keywordflow">if</span>((!pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>) &amp;&amp; (uncomp_size &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>))</div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;    {</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;        <span class="comment">/* Source file is too large for non-zip64 */</span></div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;        <span class="comment">/*return mz_zip_set_error(pZip, MZ_ZIP_ARCHIVE_TOO_LARGE); */</span></div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;        pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;    }</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160; </div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;    <span class="comment">/* We could support this, but why? */</span></div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;    <span class="keywordflow">if</span>(level_and_flags &amp; <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a>)</div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160; </div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a97d5bb6b72d210e1a566e43b10080220">mz_zip_writer_validate_archive_name</a>(pArchive_name))</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5f3d5a8641212fa3ad820bcb94124cc2">MZ_ZIP_INVALID_FILENAME</a>);</div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160; </div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;    {</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;    }</div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;    {</div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> == <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>)</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;        {</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;            pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;            <span class="comment">/*return mz_zip_set_error(pZip, MZ_ZIP_TOO_MANY_FILES); */</span></div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;        }</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;    }</div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160; </div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;    archive_name_size = <a class="code" href="string_8c.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(pArchive_name);</div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;    <span class="keywordflow">if</span>(archive_name_size &gt; <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>)</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5f3d5a8641212fa3ad820bcb94124cc2">MZ_ZIP_INVALID_FILENAME</a>);</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160; </div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;    num_alignment_padding_bytes = <a class="code" href="miniz_8cpp.html#a922d2fef6d4d160a9053cebf4c486a0b">mz_zip_writer_compute_padding_needed_for_file_alignment</a>(pZip);</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160; </div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;    <span class="comment">/* miniz doesn&#39;t support central dirs &gt;= MZ_UINT32_MAX bytes yet */</span></div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;    <span class="keywordflow">if</span>(((<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + archive_name_size + <a class="code" href="miniz_8cpp.html#aa1b2bd10c69963c1b6bd3be7a91357b2">MZ_ZIP64_MAX_CENTRAL_EXTRA_FIELD_SIZE</a> + comment_size) &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dace5ba2a072f9f615873588e7ebc56ab3">MZ_ZIP_UNSUPPORTED_CDIR_SIZE</a>);</div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160; </div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;    <span class="keywordflow">if</span>(!pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;    {</div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;        <span class="comment">/* Bail early if the archive would obviously become too large */</span></div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;        <span class="keywordflow">if</span>((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> + num_alignment_padding_bytes + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + archive_name_size + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + archive_name_size + comment_size + pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a> + 1024) &gt; 0xFFFFFFFF)</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;        {</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;            pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a> = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;            <span class="comment">/*return mz_zip_set_error(pZip, MZ_ZIP_ARCHIVE_TOO_LARGE); */</span></div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;        }</div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;    }</div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160; </div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_TIME</span></div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;    <span class="keywordflow">if</span>(pFile_time)</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;    {</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;        <a class="code" href="miniz_8cpp.html#a6468572e6ec87a0cf96d8d3ee6549f78">mz_zip_time_t_to_dos_time</a>(*pFile_time, &amp;dos_time, &amp;dos_date);</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;    }</div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160; </div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;    <span class="keywordflow">if</span>(uncomp_size &lt;= 3)</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;        level = 0;</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160; </div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ac2423627c59f318541d6a1218eda198f">mz_zip_writer_write_zeros</a>(pZip, cur_archive_file_ofs, num_alignment_padding_bytes))</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;    {</div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;    }</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160; </div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;    cur_archive_file_ofs += num_alignment_padding_bytes;</div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;    local_dir_header_ofs = cur_archive_file_ofs;</div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160; </div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a>)</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;    {</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;        <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>((cur_archive_file_ofs &amp; (pZip-&gt;<a class="code" href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">m_file_offset_alignment</a> - 1)) == 0);</div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;    }</div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160; </div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;    <span class="keywordflow">if</span>(uncomp_size &amp;&amp; level)</div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;    {</div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;        method = <a class="code" href="miniz_8h.html#a3e92e9b3cc525db1fd503d9630ec1bf5">MZ_DEFLATED</a>;</div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;    }</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160; </div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;    <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(local_dir_header);</div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;    {</div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;        <span class="keywordflow">if</span>(uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a> || local_dir_header_ofs &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;        {</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;            pExtra_data = extra_data;</div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;            extra_size = <a class="code" href="miniz_8cpp.html#a8e6757d07832c14a6310ca0524c3f024">mz_zip_writer_create_zip64_extra_data</a>(extra_data, (uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;uncomp_size : NULL,</div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;                                                               (uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;comp_size : NULL, (local_dir_header_ofs &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;local_dir_header_ofs : NULL);</div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;        }</div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160; </div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae1b9b894b1fe6286919b091c89337633">mz_zip_writer_create_local_dir_header</a>(pZip, local_dir_header, (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)archive_name_size, extra_size + user_extra_data_len, 0, 0, 0, method, gen_flags, dos_time, dos_date))</div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>);</div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160; </div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, local_dir_header, <span class="keyword">sizeof</span>(local_dir_header)) != <span class="keyword">sizeof</span>(local_dir_header))</div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160; </div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;        cur_archive_file_ofs += <span class="keyword">sizeof</span>(local_dir_header);</div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160; </div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, pArchive_name, archive_name_size) != archive_name_size)</div>
<div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;        {</div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;        }</div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160; </div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;        cur_archive_file_ofs += archive_name_size;</div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160; </div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, extra_data, extra_size) != extra_size)</div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160; </div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;        cur_archive_file_ofs += extra_size;</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;    }</div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;    {</div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;        <span class="keywordflow">if</span>((comp_size &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) || (cur_archive_file_ofs &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>))</div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae1b9b894b1fe6286919b091c89337633">mz_zip_writer_create_local_dir_header</a>(pZip, local_dir_header, (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)archive_name_size, user_extra_data_len, 0, 0, 0, method, gen_flags, dos_time, dos_date))</div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>);</div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160; </div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, local_dir_header, <span class="keyword">sizeof</span>(local_dir_header)) != <span class="keyword">sizeof</span>(local_dir_header))</div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160; </div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;        cur_archive_file_ofs += <span class="keyword">sizeof</span>(local_dir_header);</div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160; </div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, pArchive_name, archive_name_size) != archive_name_size)</div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;        {</div>
<div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;        }</div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160; </div>
<div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;        cur_archive_file_ofs += archive_name_size;</div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;    }</div>
<div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160; </div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;    <span class="keywordflow">if</span>(user_extra_data_len &gt; 0)</div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;    {</div>
<div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, user_extra_data, user_extra_data_len) != user_extra_data_len)</div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160; </div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;        cur_archive_file_ofs += user_extra_data_len;</div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;    }</div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160; </div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;    <span class="keywordflow">if</span>(uncomp_size)</div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;    {</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> uncomp_remaining = uncomp_size;</div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;        <span class="keywordtype">void</span> *pRead_buf = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, <a class="code" href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a5b5935618c8f80bac84484ffa644df05">MZ_ZIP_MAX_IO_BUF_SIZE</a>);</div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;        <span class="keywordflow">if</span>(!pRead_buf)</div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;        {</div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;        }</div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160; </div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;        <span class="keywordflow">if</span>(!level)</div>
<div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;        {</div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;            <span class="keywordflow">while</span>(uncomp_remaining)</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;            {</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;                <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> n = (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>((<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)<a class="code" href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a5b5935618c8f80bac84484ffa644df05">MZ_ZIP_MAX_IO_BUF_SIZE</a>, uncomp_remaining);</div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;                <span class="keywordflow">if</span>((<a class="code" href="miniz_8cpp.html#a52bd2726a671aabfe4d49804e79900d0">MZ_FREAD</a>(pRead_buf, 1, n, pSrc_file) != n) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, pRead_buf, n) != n))</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;                {</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;                    pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pRead_buf);</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;                }</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;                uncomp_crc32 = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(uncomp_crc32, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pRead_buf, n);</div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;                uncomp_remaining -= n;</div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;                cur_archive_file_ofs += n;</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;            }</div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;            comp_size = uncomp_size;</div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;        }</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;        {</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;            <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> result = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;            <a class="code" href="structmz__zip__writer__add__state.html">mz_zip_writer_add_state</a> state;</div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;            <a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *pComp = (<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a> *)pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">m_pAlloc</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, 1, <span class="keyword">sizeof</span>(<a class="code" href="structtdefl__compressor.html">tdefl_compressor</a>));</div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;            <span class="keywordflow">if</span>(!pComp)</div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;            {</div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;                pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pRead_buf);</div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;            }</div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160; </div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;            state.<a class="code" href="structmz__zip__writer__add__state.html#a8beb0e578862314a35cc724aeb95e709">m_pZip</a> = pZip;</div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;            state.<a class="code" href="structmz__zip__writer__add__state.html#a305f9fa7f47b583ee53b8ee0401edd9e">m_cur_archive_file_ofs</a> = cur_archive_file_ofs;</div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;            state.<a class="code" href="structmz__zip__writer__add__state.html#a4736843d8fbef3a1d323451bb29ae3cd">m_comp_size</a> = 0;</div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160; </div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a3c2c67a6200147020ba4bfbf77962792">tdefl_init</a>(pComp, <a class="code" href="miniz_8cpp.html#a97588a80c7490308f27a91cb40a355a8">mz_zip_writer_add_put_buf_callback</a>, &amp;state, <a class="code" href="miniz_8cpp.html#acf2306ec6b7f92753264f68bc554750b">tdefl_create_comp_flags_from_zip_params</a>(level, -15, <a class="code" href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388a96891a5aa5d03f61da7f4a9c5b94f1d5">MZ_DEFAULT_STRATEGY</a>)) != <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a>)</div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;            {</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;                pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pComp);</div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;                pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pRead_buf);</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>);</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;            }</div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160; </div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;            <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;            {</div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;                <span class="keywordtype">size_t</span> in_buf_size = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(uncomp_remaining, (<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)<a class="code" href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a5b5935618c8f80bac84484ffa644df05">MZ_ZIP_MAX_IO_BUF_SIZE</a>);</div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;                <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748f">tdefl_status</a> status;</div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160; </div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a52bd2726a671aabfe4d49804e79900d0">MZ_FREAD</a>(pRead_buf, 1, in_buf_size, pSrc_file) != in_buf_size)</div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;                {</div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;                    <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;                }</div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160; </div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;                uncomp_crc32 = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)<a class="code" href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a>(uncomp_crc32, (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pRead_buf, in_buf_size);</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;                uncomp_remaining -= in_buf_size;</div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160; </div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;                status = <a class="code" href="miniz_8cpp.html#a5f2608070112b0e81a3017e9c39c73b7">tdefl_compress_buffer</a>(pComp, pRead_buf, in_buf_size, uncomp_remaining ? <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfa87a9bde52f27872bf5821ed345bc6768">TDEFL_NO_FLUSH</a> : <a class="code" href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a>);</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;                <span class="keywordflow">if</span>(status == <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa9beb7850b5d6941b6860db23f426b0d2">TDEFL_STATUS_DONE</a>)</div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;                {</div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;                    result = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;                }</div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status != <a class="code" href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a>)</div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;                {</div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;                    <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5ff902fe9d66d26053d8a3c11d383460">MZ_ZIP_COMPRESSION_FAILED</a>);</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;                }</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;            }</div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160; </div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;            pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pComp);</div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160; </div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;            <span class="keywordflow">if</span>(!result)</div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;            {</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;                pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pRead_buf);</div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;            }</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160; </div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;            comp_size = state.<a class="code" href="structmz__zip__writer__add__state.html#a4736843d8fbef3a1d323451bb29ae3cd">m_comp_size</a>;</div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;            cur_archive_file_ofs = state.<a class="code" href="structmz__zip__writer__add__state.html#a305f9fa7f47b583ee53b8ee0401edd9e">m_cur_archive_file_ofs</a>;</div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;        }</div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160; </div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">m_pFree</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">m_pAlloc_opaque</a>, pRead_buf);</div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;    }</div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160; </div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> local_dir_footer[<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a141e719c11d73808127d93d7e43d831f">MZ_ZIP_DATA_DESCRIPTER_SIZE64</a>];</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> local_dir_footer_size = <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2d8d0fa55e19480b267a629d4b0174b4">MZ_ZIP_DATA_DESCRIPTER_SIZE32</a>;</div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160; </div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(local_dir_footer + 0, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d">MZ_ZIP_DATA_DESCRIPTOR_ID</a>);</div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(local_dir_footer + 4, uncomp_crc32);</div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;    <span class="keywordflow">if</span>(pExtra_data == NULL)</div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;    {</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;        <span class="keywordflow">if</span>(comp_size &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160; </div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(local_dir_footer + 8, comp_size);</div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(local_dir_footer + 12, uncomp_size);</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;    }</div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;    {</div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(local_dir_footer + 8, comp_size);</div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(local_dir_footer + 16, uncomp_size);</div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;        local_dir_footer_size = <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a141e719c11d73808127d93d7e43d831f">MZ_ZIP_DATA_DESCRIPTER_SIZE64</a>;</div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;    }</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160; </div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_archive_file_ofs, local_dir_footer, local_dir_footer_size) != local_dir_footer_size)</div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160; </div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;    cur_archive_file_ofs += local_dir_footer_size;</div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160; </div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;    <span class="keywordflow">if</span>(pExtra_data != NULL)</div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;    {</div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;        extra_size = <a class="code" href="miniz_8cpp.html#a8e6757d07832c14a6310ca0524c3f024">mz_zip_writer_create_zip64_extra_data</a>(extra_data, (uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;uncomp_size : NULL,</div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;                                                           (uncomp_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;comp_size : NULL, (local_dir_header_ofs &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) ? &amp;local_dir_header_ofs : NULL);</div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;    }</div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160; </div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a0a0f9c1d13431f247f29c0585fad94a6">mz_zip_writer_add_to_central_dir</a>(pZip, pArchive_name, (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)archive_name_size, pExtra_data, extra_size, pComment, comment_size,</div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;                                          uncomp_size, comp_size, uncomp_crc32, method, gen_flags, dos_time, dos_date, local_dir_header_ofs, ext_attributes,</div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;                                          user_extra_data_central, user_extra_data_central_len))</div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160; </div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>++;</div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> = cur_archive_file_ofs;</div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160; </div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;}</div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160; </div>
<div class="line"><a name="l06253"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a7e65ca89365aca18317932a5a6a53ec5"> 6253</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a7e65ca89365aca18317932a5a6a53ec5">mz_zip_writer_add_file</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name, <span class="keyword">const</span> <span class="keywordtype">char</span> *pSrc_filename, <span class="keyword">const</span> <span class="keywordtype">void</span> *pComment, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> comment_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> level_and_flags)</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;{</div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;    <a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *pSrc_file = NULL;</div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> uncomp_size = 0;</div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;    <a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> file_modified_time;</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;    <a class="code" href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a> *pFile_time = NULL;</div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160; </div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;    <a class="code" href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a>(&amp;file_modified_time, 0, <span class="keyword">sizeof</span>(file_modified_time));</div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160; </div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;<span class="preprocessor">#if !defined(MINIZ_NO_TIME) &amp;&amp; !defined(MINIZ_NO_STDIO)</span></div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;    pFile_time = &amp;file_modified_time;</div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ac86e5a4211929213c94443470223ce28">mz_zip_get_file_modified_time</a>(pSrc_filename, &amp;file_modified_time))</div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da593c3fe2d2ebf99b215bca2b60e6913e">MZ_ZIP_FILE_STAT_FAILED</a>);</div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160; </div>
<div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;    pSrc_file = <a class="code" href="miniz_8cpp.html#a7ab43238d8cd27afaf9ee668c8f6ab70">MZ_FOPEN</a>(pSrc_filename, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;    <span class="keywordflow">if</span>(!pSrc_file)</div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da0c392e441dd7e14e4731686e8f3369ed">MZ_ZIP_FILE_OPEN_FAILED</a>);</div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160; </div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;    <a class="code" href="miniz_8cpp.html#a6cd8f6b4134fc9ea62f311ac7f2c5c1d">MZ_FSEEK64</a>(pSrc_file, 0, SEEK_END);</div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;    uncomp_size = <a class="code" href="miniz_8cpp.html#af3b9d5f2af50464d16fd7a6ef48c916b">MZ_FTELL64</a>(pSrc_file);</div>
<div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;    <a class="code" href="miniz_8cpp.html#a6cd8f6b4134fc9ea62f311ac7f2c5c1d">MZ_FSEEK64</a>(pSrc_file, 0, SEEK_SET);</div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160; </div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> status = <a class="code" href="miniz_8cpp.html#af9c2c29725431f20ad947e1084582e32">mz_zip_writer_add_cfile</a>(pZip, pArchive_name, pSrc_file, uncomp_size, pFile_time, pComment, comment_size, level_and_flags, NULL, 0, NULL, 0);</div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160; </div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;    <a class="code" href="miniz_8cpp.html#aca3383a48f6eda415e7b7bceea2d3e55">MZ_FCLOSE</a>(pSrc_file);</div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160; </div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;}</div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160; </div>
<div class="line"><a name="l06284"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ad78fe0e35fd725fddef759bd8239d123"> 6284</a></span>&#160;<span class="keyword">static</span> <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ad78fe0e35fd725fddef759bd8239d123">mz_zip_writer_update_zip64_extension_block</a>(<a class="code" href="structmz__zip__array.html">mz_zip_array</a> *pNew_ext, <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pExt, uint32_t ext_len, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> *pComp_size, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> *pUncomp_size, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> *pLocal_header_ofs, <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *pDisk_start)</div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;{</div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;    <span class="comment">/* + 64 should be enough for any new zip64 data */</span></div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a6ecdc57ba9f179d46476427858b46450">mz_zip_array_reserve</a>(pZip, pNew_ext, ext_len + 64, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>))</div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160; </div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;    <a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, pNew_ext, 0, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160; </div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;    <span class="keywordflow">if</span>((pUncomp_size) || (pComp_size) || (pLocal_header_ofs) || (pDisk_start))</div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;    {</div>
<div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;        <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> new_ext_block[64];</div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;        <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pDst = new_ext_block;</div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;        <a class="code" href="miniz_8cpp.html#a93a0147044e7f13d544cd127353a33be">mz_write_le16</a>(pDst, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc">MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</a>);</div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;        <a class="code" href="miniz_8cpp.html#a93a0147044e7f13d544cd127353a33be">mz_write_le16</a>(pDst + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>), 0);</div>
<div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;        pDst += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2;</div>
<div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160; </div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;        <span class="keywordflow">if</span>(pUncomp_size)</div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;        {</div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;            <a class="code" href="miniz_8cpp.html#a2675df4f41c6dec7c2ec800f249a413b">mz_write_le64</a>(pDst, *pUncomp_size);</div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;            pDst += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;        }</div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160; </div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;        <span class="keywordflow">if</span>(pComp_size)</div>
<div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;        {</div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;            <a class="code" href="miniz_8cpp.html#a2675df4f41c6dec7c2ec800f249a413b">mz_write_le64</a>(pDst, *pComp_size);</div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;            pDst += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;        }</div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160; </div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;        <span class="keywordflow">if</span>(pLocal_header_ofs)</div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;        {</div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;            <a class="code" href="miniz_8cpp.html#a2675df4f41c6dec7c2ec800f249a413b">mz_write_le64</a>(pDst, *pLocal_header_ofs);</div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;            pDst += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>);</div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;        }</div>
<div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160; </div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;        <span class="keywordflow">if</span>(pDisk_start)</div>
<div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;        {</div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;            <a class="code" href="miniz_8cpp.html#a34c253cd57c8fb84b02c00f8068fbe6d">mz_write_le32</a>(pDst, *pDisk_start);</div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;            pDst += <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>);</div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;        }</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160; </div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;        <a class="code" href="miniz_8cpp.html#a93a0147044e7f13d544cd127353a33be">mz_write_le16</a>(new_ext_block + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>), (<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>)((pDst - new_ext_block) - <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2));</div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160; </div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, pNew_ext, new_ext_block, pDst - new_ext_block))</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;    }</div>
<div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160; </div>
<div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;    <span class="keywordflow">if</span>((pExt) &amp;&amp; (ext_len))</div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;    {</div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> extra_size_remaining = ext_len;</div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pExtra_data = pExt;</div>
<div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160; </div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;        {</div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;            <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> field_id, field_data_size, field_total_size;</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160; </div>
<div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;            <span class="keywordflow">if</span>(extra_size_remaining &lt; (<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2))</div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160; </div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;            field_id = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data);</div>
<div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;            field_data_size = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>));</div>
<div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;            field_total_size = field_data_size + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2;</div>
<div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160; </div>
<div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;            <span class="keywordflow">if</span>(field_total_size &gt; extra_size_remaining)</div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160; </div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;            <span class="keywordflow">if</span>(field_id != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc">MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</a>)</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;            {</div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;                <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, pNew_ext, pExtra_data, field_total_size))</div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;            }</div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160; </div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;            pExtra_data += field_total_size;</div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;            extra_size_remaining -= field_total_size;</div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;        } <span class="keywordflow">while</span>(extra_size_remaining);</div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;    }</div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160; </div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;}</div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160; </div>
<div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;<span class="comment">/* TODO: This func is now pretty freakin complex due to zip64, split it up? */</span></div>
<div class="line"><a name="l06364"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a995089c55642ae721d39970627a6f692"> 6364</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a995089c55642ae721d39970627a6f692">mz_zip_writer_add_from_zip_reader</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pSource_zip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> src_file_index)</div>
<div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;{</div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> n, bit_flags, num_alignment_padding_bytes, src_central_dir_following_data_size;</div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> src_archive_bytes_remaining, local_dir_header_ofs;</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> cur_src_file_ofs, cur_dst_file_ofs;</div>
<div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> local_header_u32[(<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) - 1) / <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)];</div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pLocal_header = (<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)local_header_u32;</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> new_central_header[<a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>];</div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;    <span class="keywordtype">size_t</span> orig_central_dir_size;</div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState;</div>
<div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;    <span class="keywordtype">void</span> *pBuf;</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSrc_central_header;</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;    <a class="code" href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a> src_file_stat;</div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> src_filename_len, src_comment_len, src_ext_len;</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> local_header_filename_size, local_header_extra_len;</div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> local_header_comp_size, local_header_uncomp_size;</div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> found_zip64_ext_data_in_ldir = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160; </div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;    <span class="comment">/* Sanity checks */</span></div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064">MZ_ZIP_MODE_WRITING</a>) || (!pSource_zip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>))</div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160; </div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;    pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160; </div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;    <span class="comment">/* Don&#39;t support copying files from zip64 archives to non-zip64, even though in some cases this is possible */</span></div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;    <span class="keywordflow">if</span>((pSource_zip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>) &amp;&amp; (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>))</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160; </div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;    <span class="comment">/* Get pointer to the source central dir header and crack it */</span></div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;    <span class="keywordflow">if</span>(NULL == (pSrc_central_header = <a class="code" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a>(pSource_zip, src_file_index)))</div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160; </div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pSrc_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a358e2e9adf6165535355f8bb86112dec">MZ_ZIP_CDH_SIG_OFS</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a77d0b453bce2a419b6144bf87e71b170">MZ_ZIP_CENTRAL_DIR_HEADER_SIG</a>)</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160; </div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;    src_filename_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pSrc_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;    src_comment_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pSrc_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac67dc228d5e122d1ad9cd42072e65c1d">MZ_ZIP_CDH_COMMENT_LEN_OFS</a>);</div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;    src_ext_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pSrc_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a>);</div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;    src_central_dir_following_data_size = src_filename_len + src_ext_len + src_comment_len;</div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160; </div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;    <span class="comment">/* TODO: We don&#39;t support central dir&#39;s &gt;= MZ_UINT32_MAX bytes right now (+32 fudge factor in case we need to add more extra data) */</span></div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;    <span class="keywordflow">if</span>((pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + src_central_dir_following_data_size + 32) &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dace5ba2a072f9f615873588e7ebc56ab3">MZ_ZIP_UNSUPPORTED_CDIR_SIZE</a>);</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160; </div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;    num_alignment_padding_bytes = <a class="code" href="miniz_8cpp.html#a922d2fef6d4d160a9053cebf4c486a0b">mz_zip_writer_compute_padding_needed_for_file_alignment</a>(pZip);</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160; </div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;    <span class="keywordflow">if</span>(!pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;    {</div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> == <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>)</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;    }</div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;    {</div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;        <span class="comment">/* TODO: Our zip64 support still has some 32-bit limits that may not be worth fixing. */</span></div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;    }</div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160; </div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a2a7f8b015e1b9e5b28617661a2102325">mz_zip_file_stat_internal</a>(pSource_zip, src_file_index, pSrc_central_header, &amp;src_file_stat, NULL))</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160; </div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;    cur_src_file_ofs = src_file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">m_local_header_ofs</a>;</div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;    cur_dst_file_ofs = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>;</div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160; </div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;    <span class="comment">/* Read the source archive&#39;s local dir header */</span></div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;    <span class="keywordflow">if</span>(pSource_zip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pSource_zip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, cur_src_file_ofs, pLocal_header, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160; </div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pLocal_header) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a05f28665e3880ca5863fff3ca58129b6">MZ_ZIP_LOCAL_DIR_HEADER_SIG</a>)</div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160; </div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;    cur_src_file_ofs += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>;</div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160; </div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;    <span class="comment">/* Compute the total size we need to copy (filename+extra data+compressed data) */</span></div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;    local_header_filename_size = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4990e590f2652f0d540c3eb35e3f650f">MZ_ZIP_LDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;    local_header_extra_len = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aaecc052d653e298f93b9c5523c98f5f2">MZ_ZIP_LDH_EXTRA_LEN_OFS</a>);</div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;    local_header_comp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a67751a44d185feb156f40a7cd922a577">MZ_ZIP_LDH_COMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;    local_header_uncomp_size = <a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3538fb6973847de5f8bd315ba8d0e1d">MZ_ZIP_LDH_DECOMPRESSED_SIZE_OFS</a>);</div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;    src_archive_bytes_remaining = local_header_filename_size + local_header_extra_len + src_file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">m_comp_size</a>;</div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160; </div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;    <span class="comment">/* Try to find a zip64 extended information field */</span></div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;    <span class="keywordflow">if</span>((local_header_extra_len) &amp;&amp; ((local_header_comp_size == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) || (local_header_uncomp_size == <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)))</div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;    {</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;        <a class="code" href="structmz__zip__array.html">mz_zip_array</a> file_data_array;</div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;        <a class="code" href="miniz_8cpp.html#a23da3e308ec523f5b73d3f22b3153355">mz_zip_array_init</a>(&amp;file_data_array, 1);</div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;file_data_array, local_header_extra_len, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>))</div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;        {</div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;        }</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160; </div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;        <span class="keywordflow">if</span>(pSource_zip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pSource_zip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, src_file_stat.<a class="code" href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">m_local_header_ofs</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + local_header_filename_size, file_data_array.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>, local_header_extra_len) != local_header_extra_len)</div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;        {</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;            <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;file_data_array);</div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;        }</div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160; </div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;        <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> extra_size_remaining = local_header_extra_len;</div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pExtra_data = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)file_data_array.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>;</div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160; </div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;        {</div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;            <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> field_id, field_data_size, field_total_size;</div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160; </div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;            <span class="keywordflow">if</span>(extra_size_remaining &lt; (<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2))</div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;            {</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;                <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;file_data_array);</div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;            }</div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160; </div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;            field_id = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data);</div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;            field_data_size = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pExtra_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>));</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;            field_total_size = field_data_size + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a>) * 2;</div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160; </div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;            <span class="keywordflow">if</span>(field_total_size &gt; extra_size_remaining)</div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;            {</div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;                <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;file_data_array);</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;            }</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160; </div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;            <span class="keywordflow">if</span>(field_id == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc">MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</a>)</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;            {</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;                <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSrc_field_data = pExtra_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>);</div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160; </div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;                <span class="keywordflow">if</span>(field_data_size &lt; <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>) * 2)</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;                {</div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;                    <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;file_data_array);</div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>);</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;                }</div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160; </div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;                local_header_uncomp_size = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pSrc_field_data);</div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;                local_header_comp_size = <a class="code" href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a>(pSrc_field_data + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)); <span class="comment">/* may be 0 if there&#39;s a descriptor */</span></div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160; </div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;                found_zip64_ext_data_in_ldir = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;            }</div>
<div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160; </div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;            pExtra_data += field_total_size;</div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;            extra_size_remaining -= field_total_size;</div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;        } <span class="keywordflow">while</span>(extra_size_remaining);</div>
<div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160; </div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;        <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;file_data_array);</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;    }</div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160; </div>
<div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;    <span class="keywordflow">if</span>(!pState-&gt;m_zip64)</div>
<div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;    {</div>
<div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;        <span class="comment">/* Try to detect if the new archive will most likely wind up too big and bail early (+(sizeof(mz_uint32) * 4) is for the optional descriptor which could be present, +64 is a fudge factor). */</span></div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;        <span class="comment">/* We also check when the archive is finalized so this doesn&#39;t need to be perfect. */</span></div>
<div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> approx_new_archive_size = cur_dst_file_ofs + num_alignment_padding_bytes + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a> + src_archive_bytes_remaining + (<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * 4) +</div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;                                            pState-&gt;m_central_dir.m_size + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + src_central_dir_following_data_size + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a> + 64;</div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160; </div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;        <span class="keywordflow">if</span>(approx_new_archive_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;    }</div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160; </div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;    <span class="comment">/* Write dest archive padding */</span></div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ac2423627c59f318541d6a1218eda198f">mz_zip_writer_write_zeros</a>(pZip, cur_dst_file_ofs, num_alignment_padding_bytes))</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160; </div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;    cur_dst_file_ofs += num_alignment_padding_bytes;</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160; </div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;    local_dir_header_ofs = cur_dst_file_ofs;</div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;m_file_offset_alignment)</div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;    {</div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;        <a class="code" href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a>((local_dir_header_ofs &amp; (pZip-&gt;m_file_offset_alignment - 1)) == 0);</div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;    }</div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160; </div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;    <span class="comment">/* The original zip&#39;s local header+ext block doesn&#39;t change, even with zip64, so we can just copy it over to the dest zip */</span></div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;m_pWrite(pZip-&gt;m_pIO_opaque, cur_dst_file_ofs, pLocal_header, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160; </div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;    cur_dst_file_ofs += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a>;</div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160; </div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;    <span class="comment">/* Copy over the source archive bytes to the dest archive, also ensure we have enough buf space to handle optional data descriptor */</span></div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;    <span class="keywordflow">if</span>(NULL == (pBuf = pZip-&gt;m_pAlloc(pZip-&gt;m_pAlloc_opaque, 1, (<span class="keywordtype">size_t</span>)<a class="code" href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(32U, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>((<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)<a class="code" href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a5b5935618c8f80bac84484ffa644df05">MZ_ZIP_MAX_IO_BUF_SIZE</a>, src_archive_bytes_remaining)))))</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160; </div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;    <span class="keywordflow">while</span>(src_archive_bytes_remaining)</div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;    {</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;        n = (<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)<a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>((<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>)<a class="code" href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a5b5935618c8f80bac84484ffa644df05">MZ_ZIP_MAX_IO_BUF_SIZE</a>, src_archive_bytes_remaining);</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;        <span class="keywordflow">if</span>(pSource_zip-&gt;m_pRead(pSource_zip-&gt;m_pIO_opaque, cur_src_file_ofs, pBuf, n) != n)</div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;        {</div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;            pZip-&gt;m_pFree(pZip-&gt;m_pAlloc_opaque, pBuf);</div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;        }</div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;        cur_src_file_ofs += n;</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160; </div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;m_pWrite(pZip-&gt;m_pIO_opaque, cur_dst_file_ofs, pBuf, n) != n)</div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;        {</div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;            pZip-&gt;m_pFree(pZip-&gt;m_pAlloc_opaque, pBuf);</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;        }</div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;        cur_dst_file_ofs += n;</div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160; </div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;        src_archive_bytes_remaining -= n;</div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;    }</div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160; </div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;    <span class="comment">/* Now deal with the optional data descriptor */</span></div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;    bit_flags = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pLocal_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ed8079f712b2ec7963d9b1378596528">MZ_ZIP_LDH_BIT_FLAG_OFS</a>);</div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;    <span class="keywordflow">if</span>(bit_flags &amp; 8)</div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;    {</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;        <span class="comment">/* Copy data descriptor */</span></div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;        <span class="keywordflow">if</span>((pSource_zip-&gt;m_pState-&gt;m_zip64) || (found_zip64_ext_data_in_ldir))</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;        {</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;            <span class="comment">/* src is zip64, dest must be zip64 */</span></div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160; </div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;            <span class="comment">/* name             uint32_t&#39;s */</span></div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;            <span class="comment">/* id                       1 (optional in zip64?) */</span></div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;            <span class="comment">/* crc              1 */</span></div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;            <span class="comment">/* comp_size  2 */</span></div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;            <span class="comment">/* uncomp_size 2 */</span></div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;            <span class="keywordflow">if</span>(pSource_zip-&gt;m_pRead(pSource_zip-&gt;m_pIO_opaque, cur_src_file_ofs, pBuf, (<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * 6)) != (<span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * 6))</div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;            {</div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;                pZip-&gt;m_pFree(pZip-&gt;m_pAlloc_opaque, pBuf);</div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;            }</div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160; </div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;            n = <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * ((<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pBuf) == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d">MZ_ZIP_DATA_DESCRIPTOR_ID</a>) ? 6 : 5);</div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;        }</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;        {</div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;            <span class="comment">/* src is NOT zip64 */</span></div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;            <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="assignments__from__json_8cpp.html#a323f0fcacbf786b74ade3e2aef34b5c4">has_id</a>;</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160; </div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;            <span class="keywordflow">if</span>(pSource_zip-&gt;m_pRead(pSource_zip-&gt;m_pIO_opaque, cur_src_file_ofs, pBuf, <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * 4) != <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * 4)</div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;            {</div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;                pZip-&gt;m_pFree(pZip-&gt;m_pAlloc_opaque, pBuf);</div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>);</div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;            }</div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160; </div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;            <a class="code" href="assignments__from__json_8cpp.html#a323f0fcacbf786b74ade3e2aef34b5c4">has_id</a> = (<a class="code" href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pBuf) == <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d">MZ_ZIP_DATA_DESCRIPTOR_ID</a>);</div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160; </div>
<div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;            <span class="keywordflow">if</span>(pZip-&gt;m_pState-&gt;m_zip64)</div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;            {</div>
<div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;                <span class="comment">/* dest is zip64, so upgrade the data descriptor */</span></div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;                <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *pSrc_descriptor = (<span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> *)((<span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf + (<a class="code" href="assignments__from__json_8cpp.html#a323f0fcacbf786b74ade3e2aef34b5c4">has_id</a> ? <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) : 0));</div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;                <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> src_crc32 = pSrc_descriptor[0];</div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;                <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> src_comp_size = pSrc_descriptor[1];</div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;                <span class="keyword">const</span> <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> src_uncomp_size = pSrc_descriptor[2];</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160; </div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;                <a class="code" href="miniz_8cpp.html#a34c253cd57c8fb84b02c00f8068fbe6d">mz_write_le32</a>((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d">MZ_ZIP_DATA_DESCRIPTOR_ID</a>);</div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;                <a class="code" href="miniz_8cpp.html#a34c253cd57c8fb84b02c00f8068fbe6d">mz_write_le32</a>((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * 1, src_crc32);</div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;                <a class="code" href="miniz_8cpp.html#a2675df4f41c6dec7c2ec800f249a413b">mz_write_le64</a>((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * 2, src_comp_size);</div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;                <a class="code" href="miniz_8cpp.html#a2675df4f41c6dec7c2ec800f249a413b">mz_write_le64</a>((<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *)pBuf + <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * 4, src_uncomp_size);</div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160; </div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;                n = <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * 6;</div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;            }</div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;            {</div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;                <span class="comment">/* dest is NOT zip64, just copy it as-is */</span></div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;                n = <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) * (<a class="code" href="assignments__from__json_8cpp.html#a323f0fcacbf786b74ade3e2aef34b5c4">has_id</a> ? 4 : 3);</div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;            }</div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;        }</div>
<div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160; </div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;m_pWrite(pZip-&gt;m_pIO_opaque, cur_dst_file_ofs, pBuf, n) != n)</div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;        {</div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;            pZip-&gt;m_pFree(pZip-&gt;m_pAlloc_opaque, pBuf);</div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;        }</div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160; </div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;        cur_src_file_ofs += n;</div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;        cur_dst_file_ofs += n;</div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;    }</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;    pZip-&gt;m_pFree(pZip-&gt;m_pAlloc_opaque, pBuf);</div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160; </div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;    <span class="comment">/* Finally, add the new central dir header */</span></div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;    orig_central_dir_size = pState-&gt;m_central_dir.m_size;</div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160; </div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;    <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(new_central_header, pSrc_central_header, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>);</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160; </div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;m_zip64)</div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;    {</div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;        <span class="comment">/* This is the painful part: We need to write a new central dir header + ext block with updated zip64 fields, and ensure the old fields (if any) are not included. */</span></div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;        <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *pSrc_ext = pSrc_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + src_filename_len;</div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;        <a class="code" href="structmz__zip__array.html">mz_zip_array</a> new_ext_block;</div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160; </div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;        <a class="code" href="miniz_8cpp.html#a23da3e308ec523f5b73d3f22b3153355">mz_zip_array_init</a>(&amp;new_ext_block, <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a>));</div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160; </div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(new_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2a463b99b8d0699bda4e3a52dd1d1015">MZ_ZIP_CDH_COMPRESSED_SIZE_OFS</a>, <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>);</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(new_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a43afeb736295b1f90330d79db8420c9e">MZ_ZIP_CDH_DECOMPRESSED_SIZE_OFS</a>, <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>);</div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(new_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87">MZ_ZIP_CDH_LOCAL_HEADER_OFS</a>, <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>);</div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160; </div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#ad78fe0e35fd725fddef759bd8239d123">mz_zip_writer_update_zip64_extension_block</a>(&amp;new_ext_block, pZip, pSrc_ext, src_ext_len, &amp;src_file_stat.m_comp_size, &amp;src_file_stat.m_uncomp_size, &amp;local_dir_header_ofs, NULL))</div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;        {</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;            <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;new_ext_block);</div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;        }</div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160; </div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;        <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(new_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a>, new_ext_block.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a>);</div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160; </div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;m_central_dir, new_central_header, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>))</div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;        {</div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;            <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;new_ext_block);</div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;        }</div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160; </div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;m_central_dir, pSrc_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>, src_filename_len))</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;        {</div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;            <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;new_ext_block);</div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;            <a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pState-&gt;m_central_dir, orig_central_dir_size, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;        }</div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160; </div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;m_central_dir, new_ext_block.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>, new_ext_block.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a>))</div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;        {</div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;            <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;new_ext_block);</div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;            <a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pState-&gt;m_central_dir, orig_central_dir_size, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;        }</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160; </div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;m_central_dir, pSrc_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a> + src_filename_len + src_ext_len, src_comment_len))</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;        {</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;            <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;new_ext_block);</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;            <a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pState-&gt;m_central_dir, orig_central_dir_size, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;        }</div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160; </div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;        <a class="code" href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a>(pZip, &amp;new_ext_block);</div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;    }</div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;    {</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;        <span class="comment">/* sanity checks */</span></div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;        <span class="keywordflow">if</span>(cur_dst_file_ofs &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160; </div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;        <span class="keywordflow">if</span>(local_dir_header_ofs &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>);</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160; </div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(new_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87">MZ_ZIP_CDH_LOCAL_HEADER_OFS</a>, local_dir_header_ofs);</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160; </div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;m_central_dir, new_central_header, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>))</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160; </div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;m_central_dir, pSrc_central_header + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>, src_central_dir_following_data_size))</div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;        {</div>
<div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;            <a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pState-&gt;m_central_dir, orig_central_dir_size, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;        }</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;    }</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160; </div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;    <span class="comment">/* This shouldn&#39;t trigger unless we screwed up during the initial sanity checks */</span></div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;m_central_dir.m_size &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>)</div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;    {</div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;        <span class="comment">/* TODO: Support central dirs &gt;= 32-bits in size */</span></div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;        <a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pState-&gt;m_central_dir, orig_central_dir_size, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dace5ba2a072f9f615873588e7ebc56ab3">MZ_ZIP_UNSUPPORTED_CDIR_SIZE</a>);</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;    }</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160; </div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;    n = (<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>)orig_central_dir_size;</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a>(pZip, &amp;pState-&gt;m_central_dir_offsets, &amp;n, 1))</div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;    {</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;        <a class="code" href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a>(pZip, &amp;pState-&gt;m_central_dir, orig_central_dir_size, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>);</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;    }</div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160; </div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;    pZip-&gt;m_total_files++;</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;    pZip-&gt;m_archive_size = cur_dst_file_ofs;</div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160; </div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;}</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160; </div>
<div class="line"><a name="l06724"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a0f7c5b26c1200daacd0eefa8744d9d1a"> 6724</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a0f7c5b26c1200daacd0eefa8744d9d1a">mz_zip_writer_finalize_archive</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;{</div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;    <a class="code" href="structmz__zip__internal__state__tag.html">mz_zip_internal_state</a> *pState;</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;    <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> central_dir_ofs, central_dir_size;</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;    <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> hdr[256];</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160; </div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> != <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064">MZ_ZIP_MODE_WRITING</a>))</div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160; </div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;    pState = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>;</div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160; </div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;    {</div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;        <span class="keywordflow">if</span>((pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>) || (pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> &gt;= <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>))</div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;    }</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;    {</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;        <span class="keywordflow">if</span>((pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> &gt; <a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>) || ((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> + pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a> + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>) &gt; <a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>))</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>);</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;    }</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160; </div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;    central_dir_ofs = 0;</div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;    central_dir_size = 0;</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>)</div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;    {</div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;        <span class="comment">/* Write central directory */</span></div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;        central_dir_ofs = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>;</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;        central_dir_size = pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a>;</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a128125bc28f4d1f118fe7b9badd0f975">m_central_directory_file_ofs</a> = central_dir_ofs;</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, central_dir_ofs, pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">m_p</a>, (<span class="keywordtype">size_t</span>)central_dir_size) != central_dir_size)</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160; </div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> += central_dir_size;</div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;    }</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160; </div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;    <span class="keywordflow">if</span>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>)</div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;    {</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;        <span class="comment">/* Write zip64 end of central directory header */</span></div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;        <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> rel_ofs_to_zip64_ecdr = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>;</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160; </div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;        <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(hdr);</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ecfe9df02264886b36ace284d1fcfd4">MZ_ZIP64_ECDH_SIG_OFS</a>, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1737873733b435bcafe42f36d33e95e6">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIG</a>);</div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57af93888e0a9fe5b48b11c983d8626278d">MZ_ZIP64_ECDH_SIZE_OF_RECORD_OFS</a>, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a> - <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a>) - <span class="keyword">sizeof</span>(<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a>));</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;        <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03aa0ae942083ab0f6bee9f23f3eec45">MZ_ZIP64_ECDH_VERSION_MADE_BY_OFS</a>, 0x031E); <span class="comment">/* TODO: always Unix */</span></div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;        <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a55ade64891d171085e4c27b6c91a5b18">MZ_ZIP64_ECDH_VERSION_NEEDED_OFS</a>, 0x002D);</div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a63640ed20841b4aad31e5f27bc11f5c4">MZ_ZIP64_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</a>, pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>);</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa3bd2e64f9cea2ef41a46201685ebb0f">MZ_ZIP64_ECDH_CDIR_TOTAL_ENTRIES_OFS</a>, pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>);</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8bd9fc50f35f48bf3ce4456b4d57bac3">MZ_ZIP64_ECDH_CDIR_SIZE_OFS</a>, central_dir_size);</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3072ff7e0d451b2d918e4be650c998c">MZ_ZIP64_ECDH_CDIR_OFS_OFS</a>, central_dir_ofs);</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>, hdr, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160; </div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a>;</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160; </div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;        <span class="comment">/* Write zip64 end of central directory locator */</span></div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;        <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(hdr);</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a493c8c19fe896d665222f70c623f9fc6">MZ_ZIP64_ECDL_SIG_OFS</a>, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aacfa47118d9e7c741c8b27a1e4f27958">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIG</a>);</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;        <a class="code" href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5e3af797b3f1a81865958774b1c62735">MZ_ZIP64_ECDL_REL_OFS_TO_ZIP64_ECDR_OFS</a>, rel_ofs_to_zip64_ecdr);</div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;        <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8be22e7047a06fc2815c55c84b82b222">MZ_ZIP64_ECDL_TOTAL_NUMBER_OF_DISKS_OFS</a>, 1);</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;        <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>, hdr, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a>)</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160; </div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;        pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a>;</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;    }</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160; </div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;    <span class="comment">/* Write end of central directory record */</span></div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;    <a class="code" href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(hdr);</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7b4454ba69b4a1c3bfe0cd316932a3cf">MZ_ZIP_ECDH_SIG_OFS</a>, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a95b16d7168bf48558fd3c8b852cb8a3d">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIG</a>);</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3415fd67ec4b72e9b7e6856ed920d100">MZ_ZIP_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>, pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>));</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;    <a class="code" href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76cd05886b8034f320cb457c03e6641a">MZ_ZIP_ECDH_CDIR_TOTAL_ENTRIES_OFS</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<a class="code" href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a>, pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a>));</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a45f0ad9bb0f828942c6e54015f44af4e">MZ_ZIP_ECDH_CDIR_SIZE_OFS</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>, central_dir_size));</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;    <a class="code" href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a>(hdr + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa862cb29a1bcd653affce1a58e82f494">MZ_ZIP_ECDH_CDIR_OFS_OFS</a>, <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<a class="code" href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a>, central_dir_ofs));</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160; </div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>, hdr, <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>) != <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>)</div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>);</div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160; </div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;    <span class="keywordflow">if</span>((pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>) &amp;&amp; (<a class="code" href="miniz_8cpp.html#a2c964feaab7054e5141d5bea17af0303">MZ_FFLUSH</a>(pState-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>) == EOF))</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da425368dd51a2a374f88b285338098851">MZ_ZIP_FILE_CLOSE_FAILED</a>);</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160; </div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a> += <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a>;</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160; </div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> = <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3ab445229af27a6e8c9d512d12265dea5b">MZ_ZIP_MODE_WRITING_HAS_BEEN_FINALIZED</a>;</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;}</div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160; </div>
<div class="line"><a name="l06812"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#ae21d7f8237b520a1c8681bddb68cad42"> 6812</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#ae21d7f8237b520a1c8681bddb68cad42">mz_zip_writer_finalize_heap_archive</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <span class="keywordtype">void</span> **ppBuf, <span class="keywordtype">size_t</span> *pSize)</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;{</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;    <span class="keywordflow">if</span>((!ppBuf) || (!pSize))</div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160; </div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;    *ppBuf = NULL;</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;    *pSize = 0;</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160; </div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>))</div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160; </div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">m_pWrite</a> != <a class="code" href="miniz_8cpp.html#a80eaca434d785016af778ef5c93399e8">mz_zip_heap_write_func</a>)</div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160; </div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a0f7c5b26c1200daacd0eefa8744d9d1a">mz_zip_writer_finalize_archive</a>(pZip))</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160; </div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;    *ppBuf = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a>;</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;    *pSize = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a4511d7743e1a63fb78ed066f8de96466">m_mem_size</a>;</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">m_pMem</a> = NULL;</div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a4511d7743e1a63fb78ed066f8de96466">m_mem_size</a> = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a71f011527805e3ac48f5f12cb73d2233">m_mem_capacity</a> = 0;</div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160; </div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;}</div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160; </div>
<div class="line"><a name="l06837"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a7ac49ded3cc37713226764131602e857"> 6837</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a7ac49ded3cc37713226764131602e857">mz_zip_writer_end</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;{</div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a278e91533e10d52981cb5d3d49335f7e">mz_zip_writer_end_internal</a>(pZip, <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>);</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;}</div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160; </div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;<span class="preprocessor">#ifndef MINIZ_NO_STDIO</span></div>
<div class="line"><a name="l06843"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a36c32e80d9a7c3c217ae7afdfe1d30cf"> 6843</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a36c32e80d9a7c3c217ae7afdfe1d30cf">mz_zip_add_mem_to_archive_file_in_place</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pZip_filename, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_size, <span class="keyword">const</span> <span class="keywordtype">void</span> *pComment, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> comment_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> level_and_flags)</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;{</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a443af52ee783e8ce9dc397761632d30e">mz_zip_add_mem_to_archive_file_in_place_v2</a>(pZip_filename, pArchive_name, pBuf, buf_size, pComment, comment_size, level_and_flags, NULL);</div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;}</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160; </div>
<div class="line"><a name="l06848"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a443af52ee783e8ce9dc397761632d30e"> 6848</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a443af52ee783e8ce9dc397761632d30e">mz_zip_add_mem_to_archive_file_in_place_v2</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pZip_filename, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> buf_size, <span class="keyword">const</span> <span class="keywordtype">void</span> *pComment, <a class="code" href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a> comment_size, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> level_and_flags, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> *pErr)</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;{</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;    <a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> status, created_new_archive = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;    <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> zip_archive;</div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;    <span class="keyword">struct </span><a class="code" href="miniz_8cpp.html#abbb4323f24a8e32a583c0b1b7e6820c9">MZ_FILE_STAT_STRUCT</a> file_stat;</div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;    <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> actual_err = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d0cd76e20534ea0d5777ac0c3601db9">MZ_ZIP_NO_ERROR</a>;</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160; </div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;    <a class="code" href="miniz_8cpp.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a>(&amp;zip_archive);</div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;    <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)level_and_flags &lt; 0)</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;        level_and_flags = <a class="code" href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9eab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a>;</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160; </div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;    <span class="keywordflow">if</span>((!pZip_filename) || (!pArchive_name) || ((buf_size) &amp;&amp; (!pBuf)) || ((comment_size) &amp;&amp; (!pComment)) || ((level_and_flags &amp; 0xF) &gt; <a class="code" href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea54ec4bb3bd4e6ae21180b27a73c46147">MZ_UBER_COMPRESSION</a>))</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;    {</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;        <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;            *pErr = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;    }</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160; </div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a97d5bb6b72d210e1a566e43b10080220">mz_zip_writer_validate_archive_name</a>(pArchive_name))</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;    {</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;        <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;            *pErr = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5f3d5a8641212fa3ad820bcb94124cc2">MZ_ZIP_INVALID_FILENAME</a>;</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;    }</div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160; </div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;    <span class="comment">/* Important: The regular non-64 bit version of stat() can fail here if the file is very large, which could cause the archive to be overwritten. */</span></div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;    <span class="comment">/* So be sure to compile with _LARGEFILE64_SOURCE 1 */</span></div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a06857ce8d288f462c7a2c5ded5eeea7c">MZ_FILE_STAT</a>(pZip_filename, &amp;file_stat) != 0)</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;    {</div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;        <span class="comment">/* Create a new archive. */</span></div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a3f063007374b7ddf5fd84f0644b4cfba">mz_zip_writer_init_file_v2</a>(&amp;zip_archive, pZip_filename, 0, level_and_flags))</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;        {</div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;            <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;                *pErr = zip_archive.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;        }</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160; </div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;        created_new_archive = <a class="code" href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a>;</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;    }</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;    {</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;        <span class="comment">/* Append to an existing archive. */</span></div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aac2174a6cb49f234d050051bff59bfdd">mz_zip_reader_init_file_v2</a>(&amp;zip_archive, pZip_filename, level_and_flags | <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858ab09115999c35684b92cd771f65909e39">MZ_ZIP_FLAG_DO_NOT_SORT_CENTRAL_DIRECTORY</a>, 0, 0))</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;        {</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;            <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;                *pErr = zip_archive.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;        }</div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160; </div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aaa53ceaf8230510769b12e04df060c23">mz_zip_writer_init_from_reader_v2</a>(&amp;zip_archive, pZip_filename, level_and_flags))</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;        {</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;            <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;                *pErr = zip_archive.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160; </div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;            <a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(&amp;zip_archive, <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>);</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160; </div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;        }</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;    }</div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160; </div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;    status = <a class="code" href="miniz_8cpp.html#a48ece9a3d251aa69af280e975b6cc080">mz_zip_writer_add_mem_ex</a>(&amp;zip_archive, pArchive_name, pBuf, buf_size, pComment, comment_size, level_and_flags, 0, 0);</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;    actual_err = zip_archive.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160; </div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;    <span class="comment">/* Always finalize, even if adding failed for some reason, so we have a valid central directory. (This may not always succeed, but we can try.) */</span></div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a0f7c5b26c1200daacd0eefa8744d9d1a">mz_zip_writer_finalize_archive</a>(&amp;zip_archive))</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;    {</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;        <span class="keywordflow">if</span>(!actual_err)</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;            actual_err = zip_archive.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160; </div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;        status = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;    }</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160; </div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#a278e91533e10d52981cb5d3d49335f7e">mz_zip_writer_end_internal</a>(&amp;zip_archive, status))</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;    {</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;        <span class="keywordflow">if</span>(!actual_err)</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;            actual_err = zip_archive.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160; </div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;        status = <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;    }</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160; </div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;    <span class="keywordflow">if</span>((!status) &amp;&amp; (created_new_archive))</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;    {</div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;        <span class="comment">/* It&#39;s a new archive and something went wrong, so just delete it. */</span></div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;        <span class="keywordtype">int</span> ignoredStatus = <a class="code" href="miniz_8cpp.html#afd75f71da5742246d7c16e3c2be1b5ac">MZ_DELETE_FILE</a>(pZip_filename);</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;        (void)ignoredStatus;</div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;    }</div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160; </div>
<div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;    <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;        *pErr = actual_err;</div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160; </div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;}</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160; </div>
<div class="line"><a name="l06941"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a94dc7c4eddd98466020dc02881d016d1"> 6941</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#a94dc7c4eddd98466020dc02881d016d1">mz_zip_extract_archive_file_to_heap_v2</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pZip_filename, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name, <span class="keyword">const</span> <span class="keywordtype">char</span> *pComment, <span class="keywordtype">size_t</span> *pSize, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> *pErr)</div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;{</div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;    <a class="code" href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a> file_index;</div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;    <a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> zip_archive;</div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;    <span class="keywordtype">void</span> *p = NULL;</div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160; </div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;    <span class="keywordflow">if</span>(pSize)</div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;        *pSize = 0;</div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160; </div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;    <span class="keywordflow">if</span>((!pZip_filename) || (!pArchive_name))</div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;    {</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;        <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;            *pErr = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160; </div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;    }</div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160; </div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;    <a class="code" href="miniz_8cpp.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a>(&amp;zip_archive);</div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="miniz_8cpp.html#aac2174a6cb49f234d050051bff59bfdd">mz_zip_reader_init_file_v2</a>(&amp;zip_archive, pZip_filename, flags | <a class="code" href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858ab09115999c35684b92cd771f65909e39">MZ_ZIP_FLAG_DO_NOT_SORT_CENTRAL_DIRECTORY</a>, 0, 0))</div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;    {</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;        <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;            *pErr = zip_archive.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160; </div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;    }</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160; </div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a>(&amp;zip_archive, pArchive_name, pComment, flags, &amp;file_index))</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;    {</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;        p = <a class="code" href="miniz_8cpp.html#a7387530cd78979243538a5c87132b64b">mz_zip_reader_extract_to_heap</a>(&amp;zip_archive, file_index, pSize, flags);</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;    }</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160; </div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;    <a class="code" href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a>(&amp;zip_archive, p != NULL);</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160; </div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;    <span class="keywordflow">if</span>(pErr)</div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;        *pErr = zip_archive.<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160; </div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;    <span class="keywordflow">return</span> p;</div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;}</div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160; </div>
<div class="line"><a name="l06980"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aebd3651c5138a33ff42d46ad9596fe6d"> 6980</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="miniz_8cpp.html#aebd3651c5138a33ff42d46ad9596fe6d">mz_zip_extract_archive_file_to_heap</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pZip_filename, <span class="keyword">const</span> <span class="keywordtype">char</span> *pArchive_name, <span class="keywordtype">size_t</span> *pSize, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> flags)</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;{</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a94dc7c4eddd98466020dc02881d016d1">mz_zip_extract_archive_file_to_heap_v2</a>(pZip_filename, pArchive_name, NULL, pSize, flags, NULL);</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;}</div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160; </div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_STDIO */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160; </div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* #ifndef MINIZ_NO_ARCHIVE_WRITING_APIS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160; </div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;<span class="comment">/* ------------------- Misc utils */</span></div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160; </div>
<div class="line"><a name="l06991"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a388a0652c3c8d2b75a418fb2966efe2c"> 6991</a></span>&#160;<a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3">mz_zip_mode</a> <a class="code" href="miniz_8cpp.html#a388a0652c3c8d2b75a418fb2966efe2c">mz_zip_get_mode</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;{</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;    <span class="keywordflow">return</span> pZip ? pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> : <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a713f3b45f38e966b751027436df64e50">MZ_ZIP_MODE_INVALID</a>;</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;}</div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160; </div>
<div class="line"><a name="l06996"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a10e9a214efba7f8c6740f05eaafaaf83"> 6996</a></span>&#160;<a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4">mz_zip_type</a> <a class="code" href="miniz_8cpp.html#a10e9a214efba7f8c6740f05eaafaaf83">mz_zip_get_type</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;{</div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;    <span class="keywordflow">return</span> pZip ? pZip-&gt;<a class="code" href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">m_zip_type</a> : <a class="code" href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4ae9586e76c9fa668b613a5a7172aa8824">MZ_ZIP_TYPE_INVALID</a>;</div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;}</div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160; </div>
<div class="line"><a name="l07001"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a9d0a18d927aab166ef7ea84cb98cd9ea"> 7001</a></span>&#160;<a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> <a class="code" href="miniz_8cpp.html#a9d0a18d927aab166ef7ea84cb98cd9ea">mz_zip_set_last_error</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> err_num)</div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;{</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;    <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> prev_err;</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160; </div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;    <span class="keywordflow">if</span>(!pZip)</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160; </div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;    prev_err = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160; </div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a> = err_num;</div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;    <span class="keywordflow">return</span> prev_err;</div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;}</div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160; </div>
<div class="line"><a name="l07014"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5ab3dec70535617213e159a2c9bec0ca"> 7014</a></span>&#160;<a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> <a class="code" href="miniz_8cpp.html#a5ab3dec70535617213e159a2c9bec0ca">mz_zip_peek_last_error</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;{</div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;    <span class="keywordflow">if</span>(!pZip)</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160; </div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;    <span class="keywordflow">return</span> pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;}</div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160; </div>
<div class="line"><a name="l07022"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aece78e8972f5437affc90509550ba82c"> 7022</a></span>&#160;<a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> <a class="code" href="miniz_8cpp.html#aece78e8972f5437affc90509550ba82c">mz_zip_clear_last_error</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;{</div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a9d0a18d927aab166ef7ea84cb98cd9ea">mz_zip_set_last_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d0cd76e20534ea0d5777ac0c3601db9">MZ_ZIP_NO_ERROR</a>);</div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;}</div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160; </div>
<div class="line"><a name="l07027"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a5cc8cf2275e42cef6721b84282d690c1"> 7027</a></span>&#160;<a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> <a class="code" href="miniz_8cpp.html#a5cc8cf2275e42cef6721b84282d690c1">mz_zip_get_last_error</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;{</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;    <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> prev_err;</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160; </div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;    <span class="keywordflow">if</span>(!pZip)</div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160; </div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;    prev_err = pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a>;</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160; </div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;    pZip-&gt;<a class="code" href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">m_last_error</a> = <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d0cd76e20534ea0d5777ac0c3601db9">MZ_ZIP_NO_ERROR</a>;</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;    <span class="keywordflow">return</span> prev_err;</div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;}</div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160; </div>
<div class="line"><a name="l07040"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a6d45d0df0da44c7f373d994a9bd3786d"> 7040</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="miniz_8cpp.html#a6d45d0df0da44c7f373d994a9bd3786d">mz_zip_get_error_string</a>(<a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a> mz_err)</div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;{</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;    <span class="keywordflow">switch</span>(mz_err)</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;    {</div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d0cd76e20534ea0d5777ac0c3601db9">MZ_ZIP_NO_ERROR</a>:</div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;no error&quot;</span>;</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da75be265e4f600498fb28f2a42f4c9705">MZ_ZIP_UNDEFINED_ERROR</a>:</div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;undefined error&quot;</span>;</div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a>:</div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;too many files&quot;</span>;</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da1365f1c2703389a5e6d5b5bbcca37859">MZ_ZIP_FILE_TOO_LARGE</a>:</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;file too large&quot;</span>;</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da003e8bf2463b5f3849242b3808e4d6fe">MZ_ZIP_UNSUPPORTED_METHOD</a>:</div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;unsupported method&quot;</span>;</div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d29d37c6300c91cb5fc9a66d1cb1db1">MZ_ZIP_UNSUPPORTED_ENCRYPTION</a>:</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;unsupported encryption&quot;</span>;</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da079e286899478ed53a7473f1816a692f">MZ_ZIP_UNSUPPORTED_FEATURE</a>:</div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;unsupported feature&quot;</span>;</div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dadce5afd210f3689e58e71ed2acc02d6c">MZ_ZIP_FAILED_FINDING_CENTRAL_DIR</a>:</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;failed finding central directory&quot;</span>;</div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daeab66c528acdb43f7946e6411f515083">MZ_ZIP_NOT_AN_ARCHIVE</a>:</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;not a ZIP archive&quot;</span>;</div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a>:</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;invalid header or archive is corrupted&quot;</span>;</div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da8c4bcce26300af775c179d6b0a35aff7">MZ_ZIP_UNSUPPORTED_MULTIDISK</a>:</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;unsupported multidisk archive&quot;</span>;</div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa713f636687cfc5db4a588d6378a6a10">MZ_ZIP_DECOMPRESSION_FAILED</a>:</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;decompression failed or archive is corrupted&quot;</span>;</div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5ff902fe9d66d26053d8a3c11d383460">MZ_ZIP_COMPRESSION_FAILED</a>:</div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;compression failed&quot;</span>;</div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dae3b0b6f3ca889a916c69c518a54ee755">MZ_ZIP_UNEXPECTED_DECOMPRESSED_SIZE</a>:</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;unexpected decompressed size&quot;</span>;</div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da388518d305e53c51b07205856d0a8464">MZ_ZIP_CRC_CHECK_FAILED</a>:</div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;CRC-32 check failed&quot;</span>;</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dace5ba2a072f9f615873588e7ebc56ab3">MZ_ZIP_UNSUPPORTED_CDIR_SIZE</a>:</div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;unsupported central directory size&quot;</span>;</div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a>:</div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;allocation failed&quot;</span>;</div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da0c392e441dd7e14e4731686e8f3369ed">MZ_ZIP_FILE_OPEN_FAILED</a>:</div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;file open failed&quot;</span>;</div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da46b987d2968fe9d076a619e3ca9c68e9">MZ_ZIP_FILE_CREATE_FAILED</a>:</div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;file create failed&quot;</span>;</div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a>:</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;file write failed&quot;</span>;</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a>:</div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;file read failed&quot;</span>;</div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da425368dd51a2a374f88b285338098851">MZ_ZIP_FILE_CLOSE_FAILED</a>:</div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;file close failed&quot;</span>;</div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dafada0e6e18c6a880a9a5af7848cceb54">MZ_ZIP_FILE_SEEK_FAILED</a>:</div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;file seek failed&quot;</span>;</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da593c3fe2d2ebf99b215bca2b60e6913e">MZ_ZIP_FILE_STAT_FAILED</a>:</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;file stat failed&quot;</span>;</div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>:</div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;invalid parameter&quot;</span>;</div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5f3d5a8641212fa3ad820bcb94124cc2">MZ_ZIP_INVALID_FILENAME</a>:</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;invalid filename&quot;</span>;</div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da4dd840e5a7def295e6a0a5eb8785a024">MZ_ZIP_BUF_TOO_SMALL</a>:</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;buffer too small&quot;</span>;</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a>:</div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;internal error&quot;</span>;</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dad845112f4958dee455d1be8cc8e0fd04">MZ_ZIP_FILE_NOT_FOUND</a>:</div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;file not found&quot;</span>;</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a>:</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;archive is too large&quot;</span>;</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da575251baf4e25b05f6cda0253cd2f49f">MZ_ZIP_VALIDATION_FAILED</a>:</div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;validation failed&quot;</span>;</div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da2be5cd9afd4fd0fe1b36b753e377658f">MZ_ZIP_WRITE_CALLBACK_FAILED</a>:</div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;write calledback failed&quot;</span>;</div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daefcdc42228132e6a582da470fa402538">MZ_ZIP_TOTAL_ERRORS</a>:</div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;          <span class="comment">// not an actual error, just the maximum index</span></div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;    }</div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160; </div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown error&quot;</span>;</div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;}</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160; </div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;<span class="comment">/* Note: Just because the archive is not zip64 doesn&#39;t necessarily mean it doesn&#39;t have Zip64 extended information extra field, argh. */</span></div>
<div class="line"><a name="l07117"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a0b0ba17abd48cc98db90960b623b1162"> 7117</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a0b0ba17abd48cc98db90960b623b1162">mz_zip_is_zip64</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;{</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>))</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160; </div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;    <span class="keywordflow">return</span> pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">m_zip64</a>;</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;}</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160; </div>
<div class="line"><a name="l07125"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a2828228dbbcf66c0d5ecd66dafd39267"> 7125</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#a2828228dbbcf66c0d5ecd66dafd39267">mz_zip_get_central_dir_size</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;{</div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>))</div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160; </div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;    <span class="keywordflow">return</span> pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">m_central_dir</a>.<a class="code" href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">m_size</a>;</div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;}</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160; </div>
<div class="line"><a name="l07133"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a1cb6b5d48f24b9aef3cb0a3f63793166"> 7133</a></span>&#160;<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> <a class="code" href="miniz_8cpp.html#a1cb6b5d48f24b9aef3cb0a3f63793166">mz_zip_reader_get_num_files</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;{</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;    <span class="keywordflow">return</span> pZip ? pZip-&gt;<a class="code" href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">m_total_files</a> : 0;</div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;}</div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160; </div>
<div class="line"><a name="l07138"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a8ff0f5ba2757db9b36eafcf9cbdbdadd"> 7138</a></span>&#160;<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> <a class="code" href="miniz_8cpp.html#a8ff0f5ba2757db9b36eafcf9cbdbdadd">mz_zip_get_archive_size</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;{</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;    <span class="keywordflow">if</span>(!pZip)</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;    <span class="keywordflow">return</span> pZip-&gt;<a class="code" href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">m_archive_size</a>;</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;}</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160; </div>
<div class="line"><a name="l07145"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aaf20afef8b149b8653572002646e7e0a"> 7145</a></span>&#160;<a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> <a class="code" href="miniz_8cpp.html#aaf20afef8b149b8653572002646e7e0a">mz_zip_get_archive_file_start_offset</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;{</div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>))</div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;    <span class="keywordflow">return</span> pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#a2705cc469d5f08543d5f827f43f391ec">m_file_archive_start_ofs</a>;</div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;}</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160; </div>
<div class="line"><a name="l07152"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#af0476aa0e8198e0716d3eb300d1d5f63"> 7152</a></span>&#160;<a class="code" href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a> *<a class="code" href="miniz_8cpp.html#af0476aa0e8198e0716d3eb300d1d5f63">mz_zip_get_cfile</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;{</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>))</div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;    <span class="keywordflow">return</span> pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>-&gt;<a class="code" href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">m_pFile</a>;</div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;}</div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160; </div>
<div class="line"><a name="l07159"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a3e27ad8c1597bb95c808cd841ebae3b7"> 7159</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="miniz_8cpp.html#a3e27ad8c1597bb95c808cd841ebae3b7">mz_zip_read_archive_data</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a> file_ofs, <span class="keywordtype">void</span> *pBuf, <span class="keywordtype">size_t</span> n)</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;{</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;    <span class="keywordflow">if</span>((!pZip) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">m_pState</a>) || (!pBuf) || (!pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>))</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160; </div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;    <span class="keywordflow">return</span> pZip-&gt;<a class="code" href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">m_pRead</a>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">m_pIO_opaque</a>, file_ofs, pBuf, n);</div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;}</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160; </div>
<div class="line"><a name="l07167"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#af5ea9749b815e356b6df09c166687d13"> 7167</a></span>&#160;<a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> <a class="code" href="miniz_8cpp.html#af5ea9749b815e356b6df09c166687d13">mz_zip_reader_get_filename</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <span class="keywordtype">char</span> *pFilename, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> filename_buf_size)</div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;{</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;    <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> n;</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;    <span class="keyword">const</span> <a class="code" href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a> *p = <a class="code" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a>(pZip, file_index);</div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;    <span class="keywordflow">if</span>(!p)</div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;    {</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;        <span class="keywordflow">if</span>(filename_buf_size)</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;            pFilename[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;        <a class="code" href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a>(pZip, <a class="code" href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a>);</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;    }</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;    n = <a class="code" href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a>);</div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;    <span class="keywordflow">if</span>(filename_buf_size)</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;    {</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;        n = <a class="code" href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(n, filename_buf_size - 1);</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;        <a class="code" href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a>(pFilename, p + <a class="code" href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a>, n);</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;        pFilename[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;    }</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;    <span class="keywordflow">return</span> n + 1;</div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;}</div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160; </div>
<div class="line"><a name="l07188"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#aa9d3abc65b4b9b91efc437ec151e9c99"> 7188</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#aa9d3abc65b4b9b91efc437ec151e9c99">mz_zip_reader_file_stat</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip, <a class="code" href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> file_index, <a class="code" href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a> *pStat)</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;{</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a2a7f8b015e1b9e5b28617661a2102325">mz_zip_file_stat_internal</a>(pZip, file_index, <a class="code" href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a>(pZip, file_index), pStat, NULL);</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;}</div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160; </div>
<div class="line"><a name="l07193"></a><span class="lineno"><a class="line" href="miniz_8cpp.html#a18c65a7ddd8d0efbb071e3708bf72105"> 7193</a></span>&#160;<a class="code" href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a> <a class="code" href="miniz_8cpp.html#a18c65a7ddd8d0efbb071e3708bf72105">mz_zip_end</a>(<a class="code" href="structmz__zip__archive.html">mz_zip_archive</a> *pZip)</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;{</div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;    <span class="keywordflow">if</span>(!pZip)</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160; </div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;    <span class="keywordflow">if</span>(pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> == <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a40c391220d01d172a451f3dad0d5aed6">MZ_ZIP_MODE_READING</a>)</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a0cf333c7781de5d56d24d70e573507e2">mz_zip_reader_end</a>(pZip);</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>((pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> == <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064">MZ_ZIP_MODE_WRITING</a>) || (pZip-&gt;<a class="code" href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">m_zip_mode</a> == <a class="code" href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3ab445229af27a6e8c9d512d12265dea5b">MZ_ZIP_MODE_WRITING_HAS_BEEN_FINALIZED</a>))</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="miniz_8cpp.html#a7ac49ded3cc37713226764131602e857">mz_zip_writer_end</a>(pZip);</div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160; </div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a>;</div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;}</div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160; </div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;}</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="aassignments__from__json_8cpp_html_a323f0fcacbf786b74ade3e2aef34b5c4"><div class="ttname"><a href="assignments__from__json_8cpp.html#a323f0fcacbf786b74ade3e2aef34b5c4">has_id</a></div><div class="ttdeci">static bool has_id(const jsont &amp;json)</div><div class="ttdoc">Return true iff the argument has a &quot;@id&quot; key.</div><div class="ttdef"><b>Definition:</b> <a href="assignments__from__json_8cpp_source.html#l00136">assignments_from_json.cpp:136</a></div></div>
<div class="ttc" id="abytecode__info_8h_html_a1ad7643875e80af295454566f9d548d8"><div class="ttname"><a href="bytecode__info_8h.html#a1ad7643875e80af295454566f9d548d8">s2</a></div><div class="ttdeci">int16_t s2</div><div class="ttdef"><b>Definition:</b> <a href="bytecode__info_8h_source.html#l00060">bytecode_info.h:60</a></div></div>
<div class="ttc" id="abytecode__info_8h_html_a3b6653c9d2fc6aa11ec16b971883b82a"><div class="ttname"><a href="bytecode__info_8h.html#a3b6653c9d2fc6aa11ec16b971883b82a">s1</a></div><div class="ttdeci">int8_t s1</div><div class="ttdef"><b>Definition:</b> <a href="bytecode__info_8h_source.html#l00059">bytecode_info.h:59</a></div></div>
<div class="ttc" id="aerr_8c_html_aac7e66a886f062322beba3cb396968aa"><div class="ttname"><a href="err_8c.html#aac7e66a886f062322beba3cb396968aa">err</a></div><div class="ttdeci">void err(int eval, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="err_8c_source.html#l00013">err.c:13</a></div></div>
<div class="ttc" id="airep__hash_8h_html_a6f2aef269e9e7c90182bcb65e01977d3"><div class="ttname"><a href="irep__hash_8h.html#a6f2aef269e9e7c90182bcb65e01977d3">r</a></div><div class="ttdeci">static int8_t r</div><div class="ttdef"><b>Definition:</b> <a href="irep__hash_8h_source.html#l00059">irep_hash.h:60</a></div></div>
<div class="ttc" id="aliteral_8h_html_afe9a214e6401c7ef6920677a5a066fdf"><div class="ttname"><a href="literal_8h.html#afe9a214e6401c7ef6920677a5a066fdf">pos</a></div><div class="ttdeci">literalt pos(literalt a)</div><div class="ttdef"><b>Definition:</b> <a href="literal_8h_source.html#l00194">literal.h:194</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a0069262fcca5eec8151a14d35e801e1c"><div class="ttname"><a href="miniz_8cpp.html#a0069262fcca5eec8151a14d35e801e1c">tdefl_radix_sort_syms</a></div><div class="ttdeci">static tdefl_sym_freq * tdefl_radix_sort_syms(mz_uint num_syms, tdefl_sym_freq *pSyms0, tdefl_sym_freq *pSyms1)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00725">miniz.cpp:725</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a0550f3b6a993aba98e69705788c6b891"><div class="ttname"><a href="miniz_8cpp.html#a0550f3b6a993aba98e69705788c6b891">MZ_WRITE_LE32</a></div><div class="ttdeci">#define MZ_WRITE_LE32(p, v)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05132">miniz.cpp:5132</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a06857ce8d288f462c7a2c5ded5eeea7c"><div class="ttname"><a href="miniz_8cpp.html#a06857ce8d288f462c7a2c5ded5eeea7c">MZ_FILE_STAT</a></div><div class="ttdeci">#define MZ_FILE_STAT</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03028">miniz.cpp:3028</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a0895bd488b9650322eedf2739f81402a"><div class="ttname"><a href="miniz_8cpp.html#a0895bd488b9650322eedf2739f81402a">tdefl_write_image_to_png_file_in_memory</a></div><div class="ttdeci">void * tdefl_write_image_to_png_file_in_memory(const void *pImage, int w, int h, int num_chans, size_t *pLen_out)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02128">miniz.cpp:2128</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a094d181afc4c98dc1864f6ce7d636258"><div class="ttname"><a href="miniz_8cpp.html#a094d181afc4c98dc1864f6ce7d636258">mz_adler32</a></div><div class="ttdeci">mz_ulong mz_adler32(mz_ulong adler, const unsigned char *ptr, size_t buf_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00057">miniz.cpp:57</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a0a0f9c1d13431f247f29c0585fad94a6"><div class="ttname"><a href="miniz_8cpp.html#a0a0f9c1d13431f247f29c0585fad94a6">mz_zip_writer_add_to_central_dir</a></div><div class="ttdeci">static mz_bool mz_zip_writer_add_to_central_dir(mz_zip_archive *pZip, const char *pFilename, mz_uint16 filename_size, const void *pExtra, mz_uint16 extra_size, const void *pComment, mz_uint16 comment_size, mz_uint64 uncomp_size, mz_uint64 comp_size, mz_uint32 uncomp_crc32, mz_uint16 method, mz_uint16 bit_flags, mz_uint16 dos_time, mz_uint16 dos_date, mz_uint64 local_header_ofs, mz_uint32 ext_attributes, const char *user_extra_data, mz_uint user_extra_data_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05588">miniz.cpp:5588</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a0b0ba17abd48cc98db90960b623b1162"><div class="ttname"><a href="miniz_8cpp.html#a0b0ba17abd48cc98db90960b623b1162">mz_zip_is_zip64</a></div><div class="ttdeci">mz_bool mz_zip_is_zip64(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07117">miniz.cpp:7117</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a0bfacd5da9a6e0f26f84fdbb7f7309ef"><div class="ttname"><a href="miniz_8cpp.html#a0bfacd5da9a6e0f26f84fdbb7f7309ef">s_tdefl_len_extra</a></div><div class="ttdeci">static const mz_uint8 s_tdefl_len_extra[256]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00670">miniz.cpp:670</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a0cf333c7781de5d56d24d70e573507e2"><div class="ttname"><a href="miniz_8cpp.html#a0cf333c7781de5d56d24d70e573507e2">mz_zip_reader_end</a></div><div class="ttdeci">mz_bool mz_zip_reader_end(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03742">miniz.cpp:3742</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a0f22c932bfa13ea1f720dc757e22be12"><div class="ttname"><a href="miniz_8cpp.html#a0f22c932bfa13ea1f720dc757e22be12">mz_zip_validate_archive</a></div><div class="ttdeci">mz_bool mz_zip_validate_archive(mz_zip_archive *pZip, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04972">miniz.cpp:4972</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a0f7c5b26c1200daacd0eefa8744d9d1a"><div class="ttname"><a href="miniz_8cpp.html#a0f7c5b26c1200daacd0eefa8744d9d1a">mz_zip_writer_finalize_archive</a></div><div class="ttdeci">mz_bool mz_zip_writer_finalize_archive(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06724">miniz.cpp:6724</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a10e9a214efba7f8c6740f05eaafaaf83"><div class="ttname"><a href="miniz_8cpp.html#a10e9a214efba7f8c6740f05eaafaaf83">mz_zip_get_type</a></div><div class="ttdeci">mz_zip_type mz_zip_get_type(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06996">miniz.cpp:6996</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a1440cf12da0b3513e14319c32f04b44f"><div class="ttname"><a href="miniz_8cpp.html#a1440cf12da0b3513e14319c32f04b44f">mz_zip_file_read_func</a></div><div class="ttdeci">static size_t mz_zip_file_read_func(void *pOpaque, mz_uint64 file_ofs, void *pBuf, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03808">miniz.cpp:3808</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a153fd833b8c09efd13aa1d35dd22d092"><div class="ttname"><a href="miniz_8cpp.html#a153fd833b8c09efd13aa1d35dd22d092">tdefl_compress_mem_to_output</a></div><div class="ttdeci">mz_bool tdefl_compress_mem_to_output(const void *pBuf, size_t buf_len, tdefl_put_buf_func_ptr pPut_buf_func, void *pPut_buf_user, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01957">miniz.cpp:1957</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a17a9bb041843f1d98e2ba27139de5081"><div class="ttname"><a href="miniz_8cpp.html#a17a9bb041843f1d98e2ba27139de5081">s_tdefl_len_sym</a></div><div class="ttdeci">static const mz_uint16 s_tdefl_len_sym[256]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00658">miniz.cpp:658</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a18c65a7ddd8d0efbb071e3708bf72105"><div class="ttname"><a href="miniz_8cpp.html#a18c65a7ddd8d0efbb071e3708bf72105">mz_zip_end</a></div><div class="ttdeci">mz_bool mz_zip_end(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07193">miniz.cpp:7193</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a1adafac587d2839277822cea5bdc224d"><div class="ttname"><a href="miniz_8cpp.html#a1adafac587d2839277822cea5bdc224d">tdefl_flush_block</a></div><div class="ttdeci">static int tdefl_flush_block(tdefl_compressor *d, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01225">miniz.cpp:1225</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a1bf00dad2822034f9b1369579a9c98d1"><div class="ttname"><a href="miniz_8cpp.html#a1bf00dad2822034f9b1369579a9c98d1">TINFL_CR_BEGIN</a></div><div class="ttdeci">#define TINFL_CR_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02191">miniz.cpp:2191</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a1cb6b5d48f24b9aef3cb0a3f63793166"><div class="ttname"><a href="miniz_8cpp.html#a1cb6b5d48f24b9aef3cb0a3f63793166">mz_zip_reader_get_num_files</a></div><div class="ttdeci">mz_uint mz_zip_reader_get_num_files(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07133">miniz.cpp:7133</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a1ef57babf68945c7ef12f471d7c417c9"><div class="ttname"><a href="miniz_8cpp.html#a1ef57babf68945c7ef12f471d7c417c9">mz_zip_writer_init_file</a></div><div class="ttdeci">mz_bool mz_zip_writer_init_file(mz_zip_archive *pZip, const char *pFilename, mz_uint64 size_to_reserve_at_beginning)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05322">miniz.cpp:5322</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a1fb0db25f9d07791189f59da7a3b09ce"><div class="ttname"><a href="miniz_8cpp.html#a1fb0db25f9d07791189f59da7a3b09ce">MZ_WRITE_LE16</a></div><div class="ttdeci">#define MZ_WRITE_LE16(p, v)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05131">miniz.cpp:5131</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a23da3e308ec523f5b73d3f22b3153355"><div class="ttname"><a href="miniz_8cpp.html#a23da3e308ec523f5b73d3f22b3153355">mz_zip_array_init</a></div><div class="ttdeci">static void mz_zip_array_init(mz_zip_array *pArray, mz_uint32 element_size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03171">miniz.cpp:3171</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a240514a6b8d7e6f71ca91b166f37d961"><div class="ttname"><a href="miniz_8cpp.html#a240514a6b8d7e6f71ca91b166f37d961">mz_zip_reader_sort_central_dir_offsets_by_filename</a></div><div class="ttdeci">static void mz_zip_reader_sort_central_dir_offsets_by_filename(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03370">miniz.cpp:3370</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2495a765ac27434a15efab455434e7f7"><div class="ttname"><a href="miniz_8cpp.html#a2495a765ac27434a15efab455434e7f7">tdefl_start_dynamic_block</a></div><div class="ttdeci">static void tdefl_start_dynamic_block(tdefl_compressor *d)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00962">miniz.cpp:962</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a24e55b3b8f9f7722a43117d8a3497eff"><div class="ttname"><a href="miniz_8cpp.html#a24e55b3b8f9f7722a43117d8a3497eff">mz_zip_reader_init_file</a></div><div class="ttdeci">mz_bool mz_zip_reader_init_file(mz_zip_archive *pZip, const char *pFilename, mz_uint32 flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03821">miniz.cpp:3821</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2632b66b8e67b1482f24dff4d4b65e8c"><div class="ttname"><a href="miniz_8cpp.html#a2632b66b8e67b1482f24dff4d4b65e8c">mz_deflateReset</a></div><div class="ttdeci">int mz_deflateReset(mz_streamp pStream)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00242">miniz.cpp:242</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2675df4f41c6dec7c2ec800f249a413b"><div class="ttname"><a href="miniz_8cpp.html#a2675df4f41c6dec7c2ec800f249a413b">mz_write_le64</a></div><div class="ttdeci">static void mz_write_le64(mz_uint8 *p, mz_uint64 v)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05125">miniz.cpp:5125</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a26b0de30f3238271922e55776feacb0f"><div class="ttname"><a href="miniz_8cpp.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a></div><div class="ttdeci">#define TINFL_GET_BYTE(state_index, c)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02216">miniz.cpp:2216</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a26e8cbdf6ac000e1becf7faa1aa7a1fa"><div class="ttname"><a href="miniz_8cpp.html#a26e8cbdf6ac000e1becf7faa1aa7a1fa">MZ_ZIP_ARRAY_SET_ELEMENT_SIZE</a></div><div class="ttdeci">#define MZ_ZIP_ARRAY_SET_ELEMENT_SIZE(array_ptr, element_size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03158">miniz.cpp:3158</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a278e91533e10d52981cb5d3d49335f7e"><div class="ttname"><a href="miniz_8cpp.html#a278e91533e10d52981cb5d3d49335f7e">mz_zip_writer_end_internal</a></div><div class="ttdeci">static mz_bool mz_zip_writer_end_internal(mz_zip_archive *pZip, mz_bool set_last_error)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05173">miniz.cpp:5173</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2828228dbbcf66c0d5ecd66dafd39267"><div class="ttname"><a href="miniz_8cpp.html#a2828228dbbcf66c0d5ecd66dafd39267">mz_zip_get_central_dir_size</a></div><div class="ttdeci">size_t mz_zip_get_central_dir_size(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07125">miniz.cpp:7125</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a287c8f562aaedb0a7d75a24eb5890cb7"><div class="ttname"><a href="miniz_8cpp.html#a287c8f562aaedb0a7d75a24eb5890cb7">mz_zip_filename_compare</a></div><div class="ttdeci">static int mz_zip_filename_compare(const mz_zip_array *pCentral_dir_array, const mz_zip_array *pCentral_dir_offsets, mz_uint l_index, const char *pR, mz_uint r_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04134">miniz.cpp:4134</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2a7f8b015e1b9e5b28617661a2102325"><div class="ttname"><a href="miniz_8cpp.html#a2a7f8b015e1b9e5b28617661a2102325">mz_zip_file_stat_internal</a></div><div class="ttdeci">static mz_bool mz_zip_file_stat_internal(mz_zip_archive *pZip, mz_uint file_index, const mz_uint8 *pCentral_dir_header, mz_zip_archive_file_stat *pStat, mz_bool *pFound_zip64_extra_data)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04006">miniz.cpp:4006</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2a949056c9eed394b9f2217ba6f55f6b"><div class="ttname"><a href="miniz_8cpp.html#a2a949056c9eed394b9f2217ba6f55f6b">tinfl_decompress_mem_to_heap</a></div><div class="ttdeci">void * tinfl_decompress_mem_to_heap(const void *pSrc_buf, size_t src_buf_len, size_t *pOut_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02796">miniz.cpp:2796</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2c964feaab7054e5141d5bea17af0303"><div class="ttname"><a href="miniz_8cpp.html#a2c964feaab7054e5141d5bea17af0303">MZ_FFLUSH</a></div><div class="ttdeci">#define MZ_FFLUSH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03029">miniz.cpp:3029</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2cd16abe6e673d9f98d98ae81c2d7c52"><div class="ttname"><a href="miniz_8cpp.html#a2cd16abe6e673d9f98d98ae81c2d7c52">mz_inflateInit</a></div><div class="ttdeci">int mz_inflateInit(mz_streamp pStream)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00413">miniz.cpp:413</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2d5d109e8f992526202122134e092aa1"><div class="ttname"><a href="miniz_8cpp.html#a2d5d109e8f992526202122134e092aa1">mz_inflate</a></div><div class="ttdeci">int mz_inflate(mz_streamp pStream, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00418">miniz.cpp:418</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2e39a706e4a41c7168983f7e7c2e1a1d"><div class="ttname"><a href="miniz_8cpp.html#a2e39a706e4a41c7168983f7e7c2e1a1d">mz_compress</a></div><div class="ttdeci">int mz_compress(unsigned char *pDest, mz_ulong *pDest_len, const unsigned char *pSource, mz_ulong source_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00358">miniz.cpp:358</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2ec6403111ea9afbcdc4d76cfda97110"><div class="ttname"><a href="miniz_8cpp.html#a2ec6403111ea9afbcdc4d76cfda97110">tdefl_get_adler32</a></div><div class="ttdeci">mz_uint32 tdefl_get_adler32(tdefl_compressor *d)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01952">miniz.cpp:1952</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a2f77f2adc9a6d554f89f79e4f0207b9c"><div class="ttname"><a href="miniz_8cpp.html#a2f77f2adc9a6d554f89f79e4f0207b9c">mz_zip_reader_extract_file_to_callback</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_file_to_callback(mz_zip_archive *pZip, const char *pFilename, mz_file_write_func pCallback, void *pOpaque, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04678">miniz.cpp:4678</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a301f6efc39cd1e431f0f11db47a03325"><div class="ttname"><a href="miniz_8cpp.html#a301f6efc39cd1e431f0f11db47a03325">mz_zip_reader_filename_less</a></div><div class="ttdeci">static mz_bool mz_zip_reader_filename_less(const mz_zip_array *pCentral_dir_array, const mz_zip_array *pCentral_dir_offsets, mz_uint l_index, mz_uint r_index)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03341">miniz.cpp:3341</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a30333e6e68452b9e96ee7c5141f2b506"><div class="ttname"><a href="miniz_8cpp.html#a30333e6e68452b9e96ee7c5141f2b506">TDEFL_RLE_ZERO_CODE_SIZE</a></div><div class="ttdeci">#define TDEFL_RLE_ZERO_CODE_SIZE()</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00934">miniz.cpp:934</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3046aad784a296b0064530b4b98f5adb"><div class="ttname"><a href="miniz_8cpp.html#a3046aad784a296b0064530b4b98f5adb">mz_compressBound</a></div><div class="ttdeci">mz_ulong mz_compressBound(mz_ulong source_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00363">miniz.cpp:363</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a34c253cd57c8fb84b02c00f8068fbe6d"><div class="ttname"><a href="miniz_8cpp.html#a34c253cd57c8fb84b02c00f8068fbe6d">mz_write_le32</a></div><div class="ttdeci">static void mz_write_le32(mz_uint8 *p, mz_uint32 v)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05118">miniz.cpp:5118</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a35703b413385ecd807012bca70a3a221"><div class="ttname"><a href="miniz_8cpp.html#a35703b413385ecd807012bca70a3a221">mz_zip_reader_locate_header_sig</a></div><div class="ttdeci">static mz_bool mz_zip_reader_locate_header_sig(mz_zip_archive *pZip, mz_uint32 record_sig, mz_uint32 record_size, mz_int64 *pOfs)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03422">miniz.cpp:3422</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a36c32e80d9a7c3c217ae7afdfe1d30cf"><div class="ttname"><a href="miniz_8cpp.html#a36c32e80d9a7c3c217ae7afdfe1d30cf">mz_zip_add_mem_to_archive_file_in_place</a></div><div class="ttdeci">mz_bool mz_zip_add_mem_to_archive_file_in_place(const char *pZip_filename, const char *pArchive_name, const void *pBuf, size_t buf_size, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06843">miniz.cpp:6843</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a36e2a62c4a31c1b7f8b51da8cffd7281"><div class="ttname"><a href="miniz_8cpp.html#a36e2a62c4a31c1b7f8b51da8cffd7281">mz_deflateEnd</a></div><div class="ttdeci">int mz_deflateEnd(mz_streamp pStream)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00309">miniz.cpp:309</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a37639f95844a8c30995fc1f5d4bb75a1"><div class="ttname"><a href="miniz_8cpp.html#a37639f95844a8c30995fc1f5d4bb75a1">tdefl_compress_mem_to_mem</a></div><div class="ttdeci">size_t tdefl_compress_mem_to_mem(void *pOut_buf, size_t out_buf_len, const void *pSrc_buf, size_t src_buf_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02019">miniz.cpp:2019</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a388a0652c3c8d2b75a418fb2966efe2c"><div class="ttname"><a href="miniz_8cpp.html#a388a0652c3c8d2b75a418fb2966efe2c">mz_zip_get_mode</a></div><div class="ttdeci">mz_zip_mode mz_zip_get_mode(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06991">miniz.cpp:6991</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a39982d7e112363ff6d284ace3b9cf9bc"><div class="ttname"><a href="miniz_8cpp.html#a39982d7e112363ff6d284ace3b9cf9bc">MZ_FREOPEN</a></div><div class="ttdeci">#define MZ_FREOPEN(f, m, s)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03030">miniz.cpp:3030</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3a558f4edba2d4f90c80931c5c888267"><div class="ttname"><a href="miniz_8cpp.html#a3a558f4edba2d4f90c80931c5c888267">tdefl_calculate_minimum_redundancy</a></div><div class="ttdeci">static void tdefl_calculate_minimum_redundancy(tdefl_sym_freq *A, int n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00759">miniz.cpp:759</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3b07b4b3e26dd52c6bf6289ef88c76e0"><div class="ttname"><a href="miniz_8cpp.html#a3b07b4b3e26dd52c6bf6289ef88c76e0">s_tdefl_small_dist_sym</a></div><div class="ttdeci">static const mz_uint8 s_tdefl_small_dist_sym[512]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00678">miniz.cpp:678</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3c2c67a6200147020ba4bfbf77962792"><div class="ttname"><a href="miniz_8cpp.html#a3c2c67a6200147020ba4bfbf77962792">tdefl_init</a></div><div class="ttdeci">tdefl_status tdefl_init(tdefl_compressor *d, tdefl_put_buf_func_ptr pPut_buf_func, void *pPut_buf_user, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01914">miniz.cpp:1914</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3c9a86d4f0f78987f13f113276127114"><div class="ttname"><a href="miniz_8cpp.html#a3c9a86d4f0f78987f13f113276127114">tdefl_compress_lz_codes</a></div><div class="ttdeci">static mz_bool tdefl_compress_lz_codes(tdefl_compressor *d)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01168">miniz.cpp:1168</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3d5d232e407e113f68859c17212526cb"><div class="ttname"><a href="miniz_8cpp.html#a3d5d232e407e113f68859c17212526cb">mz_version</a></div><div class="ttdeci">const char * mz_version(void)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00196">miniz.cpp:196</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3e27ad8c1597bb95c808cd841ebae3b7"><div class="ttname"><a href="miniz_8cpp.html#a3e27ad8c1597bb95c808cd841ebae3b7">mz_zip_read_archive_data</a></div><div class="ttdeci">size_t mz_zip_read_archive_data(mz_zip_archive *pZip, mz_uint64 file_ofs, void *pBuf, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07159">miniz.cpp:7159</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3e8087762c8423c4e48d1e5e01a243de"><div class="ttname"><a href="miniz_8cpp.html#a3e8087762c8423c4e48d1e5e01a243de">tinfl_decompress_mem_to_callback</a></div><div class="ttdeci">int tinfl_decompress_mem_to_callback(const void *pIn_buf, size_t *pIn_buf_size, tinfl_put_buf_func_ptr pPut_buf_func, void *pPut_buf_user, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02843">miniz.cpp:2843</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3f063007374b7ddf5fd84f0644b4cfba"><div class="ttname"><a href="miniz_8cpp.html#a3f063007374b7ddf5fd84f0644b4cfba">mz_zip_writer_init_file_v2</a></div><div class="ttdeci">mz_bool mz_zip_writer_init_file_v2(mz_zip_archive *pZip, const char *pFilename, mz_uint64 size_to_reserve_at_beginning, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05327">miniz.cpp:5327</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a3f7ad53ba9b773bbcb6c8edd91f8b918"><div class="ttname"><a href="miniz_8cpp.html#a3f7ad53ba9b773bbcb6c8edd91f8b918">mz_zip_file_write_func</a></div><div class="ttdeci">static size_t mz_zip_file_write_func(void *pOpaque, mz_uint64 file_ofs, const void *pBuf, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05306">miniz.cpp:5306</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a400dc4c44934e7d73706b419f4a73595"><div class="ttname"><a href="miniz_8cpp.html#a400dc4c44934e7d73706b419f4a73595">mz_zip_reader_is_file_a_directory</a></div><div class="ttdeci">mz_bool mz_zip_reader_is_file_a_directory(mz_zip_archive *pZip, mz_uint file_index)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03974">miniz.cpp:3974</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a418a771218f0a371ebc981939074bbe4"><div class="ttname"><a href="miniz_8cpp.html#a418a771218f0a371ebc981939074bbe4">tdefl_output_buffer_putter</a></div><div class="ttdeci">static mz_bool tdefl_output_buffer_putter(const void *pBuf, int len, void *pUser)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01979">miniz.cpp:1979</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a443af52ee783e8ce9dc397761632d30e"><div class="ttname"><a href="miniz_8cpp.html#a443af52ee783e8ce9dc397761632d30e">mz_zip_add_mem_to_archive_file_in_place_v2</a></div><div class="ttdeci">mz_bool mz_zip_add_mem_to_archive_file_in_place_v2(const char *pZip_filename, const char *pArchive_name, const void *pBuf, size_t buf_size, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags, mz_zip_error *pErr)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06848">miniz.cpp:6848</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a4721777518994d4d3ba978e427565e28"><div class="ttname"><a href="miniz_8cpp.html#a4721777518994d4d3ba978e427565e28">mz_zip_reader_extract_to_mem_no_alloc</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_to_mem_no_alloc(mz_zip_archive *pZip, mz_uint file_index, void *pBuf, size_t buf_size, mz_uint flags, void *pUser_read_buf, size_t user_read_buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04265">miniz.cpp:4265</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a48b566cb0b8ab3e889a99892cbddfc96"><div class="ttname"><a href="miniz_8cpp.html#a48b566cb0b8ab3e889a99892cbddfc96">mz_validate_uint32</a></div><div class="ttdeci">unsigned char mz_validate_uint32[sizeof(mz_uint32)==4 ? 1 :-1]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00048">miniz.cpp:48</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a48ece9a3d251aa69af280e975b6cc080"><div class="ttname"><a href="miniz_8cpp.html#a48ece9a3d251aa69af280e975b6cc080">mz_zip_writer_add_mem_ex</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_mem_ex(mz_zip_archive *pZip, const char *pArchive_name, const void *pBuf, size_t buf_size, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags, mz_uint64 uncomp_size, mz_uint32 uncomp_crc32)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05670">miniz.cpp:5670</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a4a70ebaf3e07c9f51d41ba0e552bad0a"><div class="ttname"><a href="miniz_8cpp.html#a4a70ebaf3e07c9f51d41ba0e552bad0a">TINFL_MEMCPY</a></div><div class="ttdeci">#define TINFL_MEMCPY(d, s, l)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02188">miniz.cpp:2188</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a4ba068ad8bcdbb1ffc304f644243d18d"><div class="ttname"><a href="miniz_8cpp.html#a4ba068ad8bcdbb1ffc304f644243d18d">mz_zip_string_equal</a></div><div class="ttdeci">static mz_bool mz_zip_string_equal(const char *pA, const char *pB, mz_uint len, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04123">miniz.cpp:4123</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a4cccb4d20cb7fe52ed89300dcd665815"><div class="ttname"><a href="miniz_8cpp.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a></div><div class="ttdeci">#define TINFL_GET_BITS(state_index, b, n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02246">miniz.cpp:2246</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a4d12d37b3d14f7dfb0312433b7940d7e"><div class="ttname"><a href="miniz_8cpp.html#a4d12d37b3d14f7dfb0312433b7940d7e">mz_zip_reader_locate_file_v2</a></div><div class="ttdeci">mz_bool mz_zip_reader_locate_file_v2(mz_zip_archive *pZip, const char *pName, const char *pComment, mz_uint flags, mz_uint32 *pIndex)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04200">miniz.cpp:4200</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a4de2fbc6c58bfcc0fb78cee0d8ebfd0a"><div class="ttname"><a href="miniz_8cpp.html#a4de2fbc6c58bfcc0fb78cee0d8ebfd0a">mz_zip_reader_extract_to_cfile</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_to_cfile(mz_zip_archive *pZip, mz_uint file_index, FILE *pFile, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04738">miniz.cpp:4738</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a4e100642a6f096d6bc8926a59bc909f8"><div class="ttname"><a href="miniz_8cpp.html#a4e100642a6f096d6bc8926a59bc909f8">s_tdefl_small_dist_extra</a></div><div class="ttdeci">static const mz_uint8 s_tdefl_small_dist_extra[512]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00694">miniz.cpp:694</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a516a79788364e4f3e3b55187a2a67b24"><div class="ttname"><a href="miniz_8cpp.html#a516a79788364e4f3e3b55187a2a67b24">tdefl_get_prev_return_status</a></div><div class="ttdeci">tdefl_status tdefl_get_prev_return_status(tdefl_compressor *d)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01947">miniz.cpp:1947</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a520050b2d27e4a1073e4462c5258d7f2"><div class="ttname"><a href="miniz_8cpp.html#a520050b2d27e4a1073e4462c5258d7f2">mz_zip_writer_init_heap</a></div><div class="ttdeci">mz_bool mz_zip_writer_init_heap(mz_zip_archive *pZip, size_t size_to_reserve_at_beginning, size_t initial_allocation_size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05300">miniz.cpp:5300</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a52bd2726a671aabfe4d49804e79900d0"><div class="ttname"><a href="miniz_8cpp.html#a52bd2726a671aabfe4d49804e79900d0">MZ_FREAD</a></div><div class="ttdeci">#define MZ_FREAD</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03023">miniz.cpp:3023</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a52d8a4b36d39d7cf0dd2afbba5ce9c7e"><div class="ttname"><a href="miniz_8cpp.html#a52d8a4b36d39d7cf0dd2afbba5ce9c7e">mz_zip_reader_init_internal</a></div><div class="ttdeci">static mz_bool mz_zip_reader_init_internal(mz_zip_archive *pZip, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03307">miniz.cpp:3307</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5375bb787f461b03bfea58f0807f5736"><div class="ttname"><a href="miniz_8cpp.html#a5375bb787f461b03bfea58f0807f5736">mz_zip_writer_add_mem_ex_v2</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_mem_ex_v2(mz_zip_archive *pZip, const char *pArchive_name, const void *pBuf, size_t buf_size, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags, mz_uint64 uncomp_size, mz_uint32 uncomp_crc32, time_t *last_modified, const char *user_extra_data, mz_uint user_extra_data_len, const char *user_extra_data_central, mz_uint user_extra_data_central_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05676">miniz.cpp:5676</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a550503f834d14ecf4baf1eff98f3ca5c"><div class="ttname"><a href="miniz_8cpp.html#a550503f834d14ecf4baf1eff98f3ca5c">mz_zip_reader_end_internal</a></div><div class="ttdeci">static mz_bool mz_zip_reader_end_internal(mz_zip_archive *pZip, mz_bool set_last_error)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03695">miniz.cpp:3695</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5ab3dec70535617213e159a2c9bec0ca"><div class="ttname"><a href="miniz_8cpp.html#a5ab3dec70535617213e159a2c9bec0ca">mz_zip_peek_last_error</a></div><div class="ttdeci">mz_zip_error mz_zip_peek_last_error(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07014">miniz.cpp:7014</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5aeef8648af76ac95c3d8e2f43be095e"><div class="ttname"><a href="miniz_8cpp.html#a5aeef8648af76ac95c3d8e2f43be095e">mz_zip_reader_init</a></div><div class="ttdeci">mz_bool mz_zip_reader_init(mz_zip_archive *pZip, mz_uint64 size, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03746">miniz.cpp:3746</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5b7562ec245b9e07daefeae07602d7ae"><div class="ttname"><a href="miniz_8cpp.html#a5b7562ec245b9e07daefeae07602d7ae">TINFL_HUFF_DECODE</a></div><div class="ttdeci">#define TINFL_HUFF_DECODE(state_index, sym, pHuff)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02294">miniz.cpp:2294</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5b8c4d334248b00bb255a64a7628ab36"><div class="ttname"><a href="miniz_8cpp.html#a5b8c4d334248b00bb255a64a7628ab36">miniz_def_alloc_func</a></div><div class="ttdeci">void * miniz_def_alloc_func(void *opaque, size_t items, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00180">miniz.cpp:180</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5c1678f38e026eece0171600cb448e1c"><div class="ttname"><a href="miniz_8cpp.html#a5c1678f38e026eece0171600cb448e1c">mz_zip_dos_to_time_t</a></div><div class="ttdeci">static time_t mz_zip_dos_to_time_t(int dos_time, int dos_date)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03239">miniz.cpp:3239</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5cc8cf2275e42cef6721b84282d690c1"><div class="ttname"><a href="miniz_8cpp.html#a5cc8cf2275e42cef6721b84282d690c1">mz_zip_get_last_error</a></div><div class="ttdeci">mz_zip_error mz_zip_get_last_error(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07027">miniz.cpp:7027</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5e053a05efdc3b9d210f9391382dcd9a"><div class="ttname"><a href="miniz_8cpp.html#a5e053a05efdc3b9d210f9391382dcd9a">mz_zip_reader_extract_file_to_file</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_file_to_file(mz_zip_archive *pZip, const char *pArchive_filename, const char *pDst_filename, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04729">miniz.cpp:4729</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5f224b658d4b01790ef55ccd3ff8d3a2"><div class="ttname"><a href="miniz_8cpp.html#a5f224b658d4b01790ef55ccd3ff8d3a2">MZ_FWRITE</a></div><div class="ttdeci">#define MZ_FWRITE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03024">miniz.cpp:3024</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a5f2608070112b0e81a3017e9c39c73b7"><div class="ttname"><a href="miniz_8cpp.html#a5f2608070112b0e81a3017e9c39c73b7">tdefl_compress_buffer</a></div><div class="ttdeci">tdefl_status tdefl_compress_buffer(tdefl_compressor *d, const void *pIn_buf, size_t in_buf_size, tdefl_flush flush)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01908">miniz.cpp:1908</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a607bba163f72b6728191504c53bf70a8"><div class="ttname"><a href="miniz_8cpp.html#a607bba163f72b6728191504c53bf70a8">mz_zip_reader_extract_to_callback</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_to_callback(mz_zip_archive *pZip, mz_uint file_index, mz_file_write_func pCallback, void *pOpaque, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04480">miniz.cpp:4480</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a608ee912bc95f54d663f39157dae0d43"><div class="ttname"><a href="miniz_8cpp.html#a608ee912bc95f54d663f39157dae0d43">mz_zip_validate_file_archive</a></div><div class="ttdeci">mz_bool mz_zip_validate_file_archive(const char *pFilename, mz_uint flags, mz_zip_error *pErr)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05067">miniz.cpp:5067</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a61d1f0e538f1b127ef8383e2d8c49f58"><div class="ttname"><a href="miniz_8cpp.html#a61d1f0e538f1b127ef8383e2d8c49f58">MZ_TOLOWER</a></div><div class="ttdeci">#define MZ_TOLOWER(c)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03035">miniz.cpp:3035</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a61e192db27bc59fa5cc3800aadde8d97"><div class="ttname"><a href="miniz_8cpp.html#a61e192db27bc59fa5cc3800aadde8d97">s_tdefl_large_dist_extra</a></div><div class="ttdeci">static const mz_uint8 s_tdefl_large_dist_extra[128]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00713">miniz.cpp:713</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a63a3ef354a44c931ddf34a66cf064b16"><div class="ttname"><a href="miniz_8cpp.html#a63a3ef354a44c931ddf34a66cf064b16">tdefl_write_image_to_png_file_in_memory_ex</a></div><div class="ttdeci">void * tdefl_write_image_to_png_file_in_memory_ex(const void *pImage, int w, int h, int num_chans, size_t *pLen_out, mz_uint level, mz_bool flip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02065">miniz.cpp:2065</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a6468572e6ec87a0cf96d8d3ee6549f78"><div class="ttname"><a href="miniz_8cpp.html#a6468572e6ec87a0cf96d8d3ee6549f78">mz_zip_time_t_to_dos_time</a></div><div class="ttdeci">static void mz_zip_time_t_to_dos_time(time_t time, mz_uint16 *pDOS_time, mz_uint16 *pDOS_date)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03253">miniz.cpp:3253</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a65dd8744393e4f726a67aa3833656353"><div class="ttname"><a href="miniz_8cpp.html#a65dd8744393e4f726a67aa3833656353">tinfl_decompressor_alloc</a></div><div class="ttdeci">tinfl_decompressor * tinfl_decompressor_alloc()</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02872">miniz.cpp:2872</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a6633ec0f4bbaafb2e4c7b943232a4d74"><div class="ttname"><a href="miniz_8cpp.html#a6633ec0f4bbaafb2e4c7b943232a4d74">s_tdefl_num_probes</a></div><div class="ttdeci">static const mz_uint s_tdefl_num_probes[11]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02033">miniz.cpp:2033</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a66d75d30383d1b7af379b7d19db3aba0"><div class="ttname"><a href="miniz_8cpp.html#a66d75d30383d1b7af379b7d19db3aba0">mz_deflateInit2</a></div><div class="ttdeci">int mz_deflateInit2(mz_streamp pStream, int level, int method, int window_bits, int mem_level, int strategy)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00206">miniz.cpp:206</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a6806f0e4c2e8320f33188e12ec0b63b6"><div class="ttname"><a href="miniz_8cpp.html#a6806f0e4c2e8320f33188e12ec0b63b6">mz_zip_reader_init_mem</a></div><div class="ttdeci">mz_bool mz_zip_reader_init_mem(mz_zip_archive *pZip, const void *pMem, size_t size, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03774">miniz.cpp:3774</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a693b5cf938e6f7d2fc439f8ab65ea466"><div class="ttname"><a href="miniz_8cpp.html#a693b5cf938e6f7d2fc439f8ab65ea466">tdefl_compress_normal</a></div><div class="ttdeci">static mz_bool tdefl_compress_normal(tdefl_compressor *d)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01674">miniz.cpp:1674</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a69cd39dce5df982debb5dd65d8edc60c"><div class="ttname"><a href="miniz_8cpp.html#a69cd39dce5df982debb5dd65d8edc60c">mz_zip_writer_init_cfile</a></div><div class="ttdeci">mz_bool mz_zip_writer_init_cfile(mz_zip_archive *pZip, FILE *pFile, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05373">miniz.cpp:5373</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a69f53f93ea50410b674721408b2aff24"><div class="ttname"><a href="miniz_8cpp.html#a69f53f93ea50410b674721408b2aff24">mz_deflateInit</a></div><div class="ttdeci">int mz_deflateInit(mz_streamp pStream, int level)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00201">miniz.cpp:201</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a6acedb9402a1e7eafad0d09bfa08f20e"><div class="ttname"><a href="miniz_8cpp.html#a6acedb9402a1e7eafad0d09bfa08f20e">mz_zip_file_write_callback</a></div><div class="ttdeci">static size_t mz_zip_file_write_callback(void *pOpaque, mz_uint64 ofs, const void *pBuf, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04688">miniz.cpp:4688</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a6cd53d97e63c5b1cf1b0043f5c5d3648"><div class="ttname"><a href="miniz_8cpp.html#a6cd53d97e63c5b1cf1b0043f5c5d3648">tdefl_record_match</a></div><div class="ttdeci">static void tdefl_record_match(tdefl_compressor *d, mz_uint match_len, mz_uint match_dist)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01644">miniz.cpp:1644</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a6cd8f6b4134fc9ea62f311ac7f2c5c1d"><div class="ttname"><a href="miniz_8cpp.html#a6cd8f6b4134fc9ea62f311ac7f2c5c1d">MZ_FSEEK64</a></div><div class="ttdeci">#define MZ_FSEEK64</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03026">miniz.cpp:3026</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a6d45d0df0da44c7f373d994a9bd3786d"><div class="ttname"><a href="miniz_8cpp.html#a6d45d0df0da44c7f373d994a9bd3786d">mz_zip_get_error_string</a></div><div class="ttdeci">const char * mz_zip_get_error_string(mz_zip_error mz_err)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07040">miniz.cpp:7040</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a6ecdc57ba9f179d46476427858b46450"><div class="ttname"><a href="miniz_8cpp.html#a6ecdc57ba9f179d46476427858b46450">mz_zip_array_reserve</a></div><div class="ttdeci">static mz_bool mz_zip_array_reserve(mz_zip_archive *pZip, mz_zip_array *pArray, size_t new_capacity, mz_uint growing)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03203">miniz.cpp:3203</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a72c07d6967ef557183f7ab36168a9105"><div class="ttname"><a href="miniz_8cpp.html#a72c07d6967ef557183f7ab36168a9105">mz_zip_reader_init_cfile</a></div><div class="ttdeci">mz_bool mz_zip_reader_init_cfile(mz_zip_archive *pZip, FILE *pFile, mz_uint64 archive_size, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03875">miniz.cpp:3875</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a7387530cd78979243538a5c87132b64b"><div class="ttname"><a href="miniz_8cpp.html#a7387530cd78979243538a5c87132b64b">mz_zip_reader_extract_to_heap</a></div><div class="ttdeci">void * mz_zip_reader_extract_to_heap(mz_zip_archive *pZip, mz_uint file_index, size_t *pSize, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04426">miniz.cpp:4426</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a74bd5c1f3f342d2109643cfa500689fc"><div class="ttname"><a href="miniz_8cpp.html#a74bd5c1f3f342d2109643cfa500689fc">miniz_def_free_func</a></div><div class="ttdeci">void miniz_def_free_func(void *opaque, void *address)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00185">miniz.cpp:185</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a76cdb9a006ad356913fdd684a79014d4"><div class="ttname"><a href="miniz_8cpp.html#a76cdb9a006ad356913fdd684a79014d4">tdefl_huffman_enforce_max_code_size</a></div><div class="ttdeci">static void tdefl_huffman_enforce_max_code_size(int *pNum_codes, int code_list_len, int max_code_size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00819">miniz.cpp:819</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a76db66a75235da50260cdad9b6a98ba9"><div class="ttname"><a href="miniz_8cpp.html#a76db66a75235da50260cdad9b6a98ba9">mz_zip_array_push_back</a></div><div class="ttdeci">static mz_bool mz_zip_array_push_back(mz_zip_archive *pZip, mz_zip_array *pArray, const void *pElements, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03229">miniz.cpp:3229</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a77bb6572e95227d4a0e7eff475e1ca35"><div class="ttname"><a href="miniz_8cpp.html#a77bb6572e95227d4a0e7eff475e1ca35">tdefl_start_static_block</a></div><div class="ttdeci">static void tdefl_start_static_block(tdefl_compressor *d)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01049">miniz.cpp:1049</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a7a7b50a0d965d229ce14f3afa5981edd"><div class="ttname"><a href="miniz_8cpp.html#a7a7b50a0d965d229ce14f3afa5981edd">mz_compress2</a></div><div class="ttdeci">int mz_compress2(unsigned char *pDest, mz_ulong *pDest_len, const unsigned char *pSource, mz_ulong source_len, int level)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00328">miniz.cpp:328</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a7ab43238d8cd27afaf9ee668c8f6ab70"><div class="ttname"><a href="miniz_8cpp.html#a7ab43238d8cd27afaf9ee668c8f6ab70">MZ_FOPEN</a></div><div class="ttdeci">#define MZ_FOPEN(f, m)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03021">miniz.cpp:3021</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a7ac2826eb7d5b0df83a06d43a4489f4f"><div class="ttname"><a href="miniz_8cpp.html#a7ac2826eb7d5b0df83a06d43a4489f4f">mz_zip_reader_read_central_dir</a></div><div class="ttdeci">static mz_bool mz_zip_reader_read_central_dir(mz_zip_archive *pZip, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03468">miniz.cpp:3468</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a7ac49ded3cc37713226764131602e857"><div class="ttname"><a href="miniz_8cpp.html#a7ac49ded3cc37713226764131602e857">mz_zip_writer_end</a></div><div class="ttdeci">mz_bool mz_zip_writer_end(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06837">miniz.cpp:6837</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a7b85d16940dcbcb59615be2442e54f66"><div class="ttname"><a href="miniz_8cpp.html#a7b85d16940dcbcb59615be2442e54f66">mz_zip_writer_create_central_dir_header</a></div><div class="ttdeci">static mz_bool mz_zip_writer_create_central_dir_header(mz_zip_archive *pZip, mz_uint8 *pDst, mz_uint16 filename_size, mz_uint16 extra_size, mz_uint16 comment_size, mz_uint64 uncomp_size, mz_uint64 comp_size, mz_uint32 uncomp_crc32, mz_uint16 method, mz_uint16 bit_flags, mz_uint16 dos_time, mz_uint16 dos_date, mz_uint64 local_header_ofs, mz_uint32 ext_attributes)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05563">miniz.cpp:5563</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a7bdc0af59e4ca6d7bd8b7d5d005ff55e"><div class="ttname"><a href="miniz_8cpp.html#a7bdc0af59e4ca6d7bd8b7d5d005ff55e">mz_free</a></div><div class="ttdeci">void mz_free(void *p)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00173">miniz.cpp:173</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a7dd776de8caf03a8e44e7f0329953b68"><div class="ttname"><a href="miniz_8cpp.html#a7dd776de8caf03a8e44e7f0329953b68">TINFL_MEMSET</a></div><div class="ttdeci">#define TINFL_MEMSET(p, c, l)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02189">miniz.cpp:2189</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a7e65ca89365aca18317932a5a6a53ec5"><div class="ttname"><a href="miniz_8cpp.html#a7e65ca89365aca18317932a5a6a53ec5">mz_zip_writer_add_file</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_file(mz_zip_archive *pZip, const char *pArchive_name, const char *pSrc_filename, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06253">miniz.cpp:6253</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a80eaca434d785016af778ef5c93399e8"><div class="ttname"><a href="miniz_8cpp.html#a80eaca434d785016af778ef5c93399e8">mz_zip_heap_write_func</a></div><div class="ttdeci">static size_t mz_zip_heap_write_func(void *pOpaque, mz_uint64 file_ofs, const void *pBuf, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05135">miniz.cpp:5135</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a84813b57c1313c2e2d94a1f62d3ab9b3"><div class="ttname"><a href="miniz_8cpp.html#a84813b57c1313c2e2d94a1f62d3ab9b3">mz_zip_reader_locate_file</a></div><div class="ttdeci">int mz_zip_reader_locate_file(mz_zip_archive *pZip, const char *pName, const char *pComment, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04191">miniz.cpp:4191</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a862e12a5b9361933538572c4692d4544"><div class="ttname"><a href="miniz_8cpp.html#a862e12a5b9361933538572c4692d4544">tdefl_compressor_alloc</a></div><div class="ttdeci">tdefl_compressor * tdefl_compressor_alloc()</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02137">miniz.cpp:2137</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a8b262a8e0d2b58d0d0d5523655bd07bc"><div class="ttname"><a href="miniz_8cpp.html#a8b262a8e0d2b58d0d0d5523655bd07bc">mz_zip_reader_is_file_encrypted</a></div><div class="ttdeci">mz_bool mz_zip_reader_is_file_encrypted(mz_zip_archive *pZip, mz_uint file_index)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03924">miniz.cpp:3924</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a8b4c858b16cf5ea4508ca2e38a8e2a0a"><div class="ttname"><a href="miniz_8cpp.html#a8b4c858b16cf5ea4508ca2e38a8e2a0a">mz_zip_writer_init</a></div><div class="ttdeci">mz_bool mz_zip_writer_init(mz_zip_archive *pZip, mz_uint64 existing_size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05268">miniz.cpp:5268</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a8b7cb38252f297265f6b850ab4ae0f01"><div class="ttname"><a href="miniz_8cpp.html#a8b7cb38252f297265f6b850ab4ae0f01">mz_crc32</a></div><div class="ttdeci">mz_ulong mz_crc32(mz_ulong crc, const mz_uint8 *ptr, size_t buf_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00106">miniz.cpp:106</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a8c64687454aca17948eb58730dc6f41b"><div class="ttname"><a href="miniz_8cpp.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a></div><div class="ttdeci">void mz_zip_zero_struct(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03689">miniz.cpp:3689</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a8e6757d07832c14a6310ca0524c3f024"><div class="ttname"><a href="miniz_8cpp.html#a8e6757d07832c14a6310ca0524c3f024">mz_zip_writer_create_zip64_extra_data</a></div><div class="ttdeci">static mz_uint32 mz_zip_writer_create_zip64_extra_data(mz_uint8 *pBuf, mz_uint64 *pUncomp_size, mz_uint64 *pComp_size, mz_uint64 *pLocal_header_ofs)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05509">miniz.cpp:5509</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a8f35610f83a9e48c72183389473c9ed9"><div class="ttname"><a href="miniz_8cpp.html#a8f35610f83a9e48c72183389473c9ed9">tdefl_find_match</a></div><div class="ttdeci">static void tdefl_find_match(tdefl_compressor *d, mz_uint lookahead_pos, mz_uint max_dist, mz_uint max_match_len, mz_uint *pMatch_dist, mz_uint *pMatch_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01415">miniz.cpp:1415</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a8fa88616bc4d01d17b038275dd124ceb"><div class="ttname"><a href="miniz_8cpp.html#a8fa88616bc4d01d17b038275dd124ceb">mz_zip_reader_extract_file_to_cfile</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_file_to_cfile(mz_zip_archive *pZip, const char *pArchive_filename, FILE *pFile, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04751">miniz.cpp:4751</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a8ff0f5ba2757db9b36eafcf9cbdbdadd"><div class="ttname"><a href="miniz_8cpp.html#a8ff0f5ba2757db9b36eafcf9cbdbdadd">mz_zip_get_archive_size</a></div><div class="ttdeci">mz_uint64 mz_zip_get_archive_size(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07138">miniz.cpp:7138</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a922d2fef6d4d160a9053cebf4c486a0b"><div class="ttname"><a href="miniz_8cpp.html#a922d2fef6d4d160a9053cebf4c486a0b">mz_zip_writer_compute_padding_needed_for_file_alignment</a></div><div class="ttdeci">static mz_uint mz_zip_writer_compute_padding_needed_for_file_alignment(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05645">miniz.cpp:5645</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a93a0147044e7f13d544cd127353a33be"><div class="ttname"><a href="miniz_8cpp.html#a93a0147044e7f13d544cd127353a33be">mz_write_le16</a></div><div class="ttdeci">static void mz_write_le16(mz_uint8 *p, mz_uint16 v)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05113">miniz.cpp:5113</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a94dc7c4eddd98466020dc02881d016d1"><div class="ttname"><a href="miniz_8cpp.html#a94dc7c4eddd98466020dc02881d016d1">mz_zip_extract_archive_file_to_heap_v2</a></div><div class="ttdeci">void * mz_zip_extract_archive_file_to_heap_v2(const char *pZip_filename, const char *pArchive_name, const char *pComment, size_t *pSize, mz_uint flags, mz_zip_error *pErr)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06941">miniz.cpp:6941</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a95babde50d211fa1d2401e70516d2e93"><div class="ttname"><a href="miniz_8cpp.html#a95babde50d211fa1d2401e70516d2e93">mz_inflateInit2</a></div><div class="ttdeci">int mz_inflateInit2(mz_streamp pStream, int window_bits)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00377">miniz.cpp:377</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a97588a80c7490308f27a91cb40a355a8"><div class="ttname"><a href="miniz_8cpp.html#a97588a80c7490308f27a91cb40a355a8">mz_zip_writer_add_put_buf_callback</a></div><div class="ttdeci">static mz_bool mz_zip_writer_add_put_buf_callback(const void *pBuf, int len, void *pUser)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05496">miniz.cpp:5496</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a97d5bb6b72d210e1a566e43b10080220"><div class="ttname"><a href="miniz_8cpp.html#a97d5bb6b72d210e1a566e43b10080220">mz_zip_writer_validate_archive_name</a></div><div class="ttdeci">static mz_bool mz_zip_writer_validate_archive_name(const char *pArchive_name)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05628">miniz.cpp:5628</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a98e280f09026d4746a4171c94c8d64f6"><div class="ttname"><a href="miniz_8cpp.html#a98e280f09026d4746a4171c94c8d64f6">mz_zip_mem_read_func</a></div><div class="ttdeci">static size_t mz_zip_mem_read_func(void *pOpaque, mz_uint64 file_ofs, void *pBuf, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03766">miniz.cpp:3766</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a995089c55642ae721d39970627a6f692"><div class="ttname"><a href="miniz_8cpp.html#a995089c55642ae721d39970627a6f692">mz_zip_writer_add_from_zip_reader</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_from_zip_reader(mz_zip_archive *pZip, mz_zip_archive *pSource_zip, mz_uint src_file_index)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06364">miniz.cpp:6364</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a996d0ae919e19b0821cebbc7ce52ce91"><div class="ttname"><a href="miniz_8cpp.html#a996d0ae919e19b0821cebbc7ce52ce91">mz_zip_reader_is_file_supported</a></div><div class="ttdeci">mz_bool mz_zip_reader_is_file_supported(mz_zip_archive *pZip, mz_uint file_index)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03938">miniz.cpp:3938</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a99786d0af99c4433d7961581d708da51"><div class="ttname"><a href="miniz_8cpp.html#a99786d0af99c4433d7961581d708da51">TINFL_CR_FINISH</a></div><div class="ttdeci">#define TINFL_CR_FINISH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02214">miniz.cpp:2214</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a9a1adadbbfe1ac85f80bbe0fa361a815"><div class="ttname"><a href="miniz_8cpp.html#a9a1adadbbfe1ac85f80bbe0fa361a815">tdefl_record_literal</a></div><div class="ttdeci">static void tdefl_record_literal(tdefl_compressor *d, mz_uint8 lit)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01631">miniz.cpp:1631</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a9aa631c7bc8147b39b6d8a910682463e"><div class="ttname"><a href="miniz_8cpp.html#a9aa631c7bc8147b39b6d8a910682463e">mz_zip_reader_extract_to_mem</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_to_mem(mz_zip_archive *pZip, mz_uint file_index, void *pBuf, size_t buf_size, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04416">miniz.cpp:4416</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a9b76ea2ad5e09a1bd4a7d663745ac29e"><div class="ttname"><a href="miniz_8cpp.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a></div><div class="ttdeci">#define TINFL_CR_RETURN(state_index, result)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02195">miniz.cpp:2195</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a9b93b1cd46aaf29a27dfb526bd110d63"><div class="ttname"><a href="miniz_8cpp.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a></div><div class="ttdeci">#define TINFL_CR_RETURN_FOREVER(state_index, result)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02205">miniz.cpp:2205</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a9c0a8d94e9c3aa66050e29e3c0013e24"><div class="ttname"><a href="miniz_8cpp.html#a9c0a8d94e9c3aa66050e29e3c0013e24">mz_zip_get_cdh</a></div><div class="ttdeci">static const mz_uint8 * mz_zip_get_cdh(mz_zip_archive *pZip, mz_uint file_index)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03917">miniz.cpp:3917</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_a9d0a18d927aab166ef7ea84cb98cd9ea"><div class="ttname"><a href="miniz_8cpp.html#a9d0a18d927aab166ef7ea84cb98cd9ea">mz_zip_set_last_error</a></div><div class="ttdeci">mz_zip_error mz_zip_set_last_error(mz_zip_archive *pZip, mz_zip_error err_num)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07001">miniz.cpp:7001</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aa0ce62915456b6c5f0bcf1ed09e94599"><div class="ttname"><a href="miniz_8cpp.html#aa0ce62915456b6c5f0bcf1ed09e94599">mz_uncompress</a></div><div class="ttdeci">int mz_uncompress(unsigned char *pDest, mz_ulong *pDest_len, const unsigned char *pSource, mz_ulong source_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00542">miniz.cpp:542</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aa1b2bd10c69963c1b6bd3be7a91357b2"><div class="ttname"><a href="miniz_8cpp.html#aa1b2bd10c69963c1b6bd3be7a91357b2">MZ_ZIP64_MAX_CENTRAL_EXTRA_FIELD_SIZE</a></div><div class="ttdeci">#define MZ_ZIP64_MAX_CENTRAL_EXTRA_FIELD_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05508">miniz.cpp:5508</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aa9d3abc65b4b9b91efc437ec151e9c99"><div class="ttname"><a href="miniz_8cpp.html#aa9d3abc65b4b9b91efc437ec151e9c99">mz_zip_reader_file_stat</a></div><div class="ttdeci">mz_bool mz_zip_reader_file_stat(mz_zip_archive *pZip, mz_uint file_index, mz_zip_archive_file_stat *pStat)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07188">miniz.cpp:7188</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aaa53ceaf8230510769b12e04df060c23"><div class="ttname"><a href="miniz_8cpp.html#aaa53ceaf8230510769b12e04df060c23">mz_zip_writer_init_from_reader_v2</a></div><div class="ttdeci">mz_bool mz_zip_writer_init_from_reader_v2(mz_zip_archive *pZip, const char *pFilename, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05393">miniz.cpp:5393</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aaac0bd73d99bf67e7b32be8acddc4718"><div class="ttname"><a href="miniz_8cpp.html#aaac0bd73d99bf67e7b32be8acddc4718">mz_zip_locate_file_binary_search</a></div><div class="ttdeci">static mz_bool mz_zip_locate_file_binary_search(mz_zip_archive *pZip, const char *pFilename, mz_uint32 *pIndex)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04151">miniz.cpp:4151</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aac2174a6cb49f234d050051bff59bfdd"><div class="ttname"><a href="miniz_8cpp.html#aac2174a6cb49f234d050051bff59bfdd">mz_zip_reader_init_file_v2</a></div><div class="ttdeci">mz_bool mz_zip_reader_init_file_v2(mz_zip_archive *pZip, const char *pFilename, mz_uint flags, mz_uint64 file_start_ofs, mz_uint64 archive_size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03826">miniz.cpp:3826</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aaed356efd84e96e9f5eecdf078b07e50"><div class="ttname"><a href="miniz_8cpp.html#aaed356efd84e96e9f5eecdf078b07e50">tdefl_compressor_free</a></div><div class="ttdeci">void tdefl_compressor_free(tdefl_compressor *pComp)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02142">miniz.cpp:2142</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aaf20afef8b149b8653572002646e7e0a"><div class="ttname"><a href="miniz_8cpp.html#aaf20afef8b149b8653572002646e7e0a">mz_zip_get_archive_file_start_offset</a></div><div class="ttdeci">mz_uint64 mz_zip_get_archive_file_start_offset(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07145">miniz.cpp:7145</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a03aa0ae942083ab0f6bee9f23f3eec45"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03aa0ae942083ab0f6bee9f23f3eec45">MZ_ZIP64_ECDH_VERSION_MADE_BY_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_VERSION_MADE_BY_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03110">miniz.cpp:3110</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a03f4415315a96a9691344f193cef8da2">MZ_ZIP_CDH_FILENAME_LEN_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_FILENAME_LEN_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03069">miniz.cpp:3069</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a0405d7ab268a9b534642d2d0acf56749"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0405d7ab268a9b534642d2d0acf56749">MZ_ZIP_LDH_BIT_FLAG_HAS_LOCATOR</a></div><div class="ttdeci">@ MZ_ZIP_LDH_BIT_FLAG_HAS_LOCATOR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03089">miniz.cpp:3089</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a05f28665e3880ca5863fff3ca58129b6"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a05f28665e3880ca5863fff3ca58129b6">MZ_ZIP_LOCAL_DIR_HEADER_SIG</a></div><div class="ttdeci">@ MZ_ZIP_LOCAL_DIR_HEADER_SIG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03043">miniz.cpp:3043</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a0a30dbf39d1e87013ef095186370cc36"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0a30dbf39d1e87013ef095186370cc36">MZ_ZIP_CDH_FILE_DATE_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_FILE_DATE_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03065">miniz.cpp:3065</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a0b518fa8ffa820df4771f9d567c13dcc"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0b518fa8ffa820df4771f9d567c13dcc">MZ_ZIP_LDH_CRC32_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_CRC32_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03084">miniz.cpp:3084</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a0ecfe9df02264886b36ace284d1fcfd4"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ecfe9df02264886b36ace284d1fcfd4">MZ_ZIP64_ECDH_SIG_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_SIG_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03108">miniz.cpp:3108</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a0ed8079f712b2ec7963d9b1378596528"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0ed8079f712b2ec7963d9b1378596528">MZ_ZIP_LDH_BIT_FLAG_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_BIT_FLAG_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03080">miniz.cpp:3080</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a0edb58391c7fa73d90c8deac8bc8b85e"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0edb58391c7fa73d90c8deac8bc8b85e">MZ_ZIP_ECDH_NUM_DISK_CDIR_OFS</a></div><div class="ttdeci">@ MZ_ZIP_ECDH_NUM_DISK_CDIR_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03094">miniz.cpp:3094</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a122562cf2a1182825317fe26e7902e64"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a122562cf2a1182825317fe26e7902e64">MZ_ZIP_CDH_VERSION_NEEDED_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_VERSION_NEEDED_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03061">miniz.cpp:3061</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a141e719c11d73808127d93d7e43d831f"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a141e719c11d73808127d93d7e43d831f">MZ_ZIP_DATA_DESCRIPTER_SIZE64</a></div><div class="ttdeci">@ MZ_ZIP_DATA_DESCRIPTER_SIZE64</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03055">miniz.cpp:3055</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a15dc7648592d367c3edaac476c3aac87">MZ_ZIP_CDH_LOCAL_HEADER_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_LOCAL_HEADER_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03075">miniz.cpp:3075</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a1737873733b435bcafe42f36d33e95e6"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1737873733b435bcafe42f36d33e95e6">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIG</a></div><div class="ttdeci">@ MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03049">miniz.cpp:3049</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a2170b4f05a7674dad26a7c90f92ed992"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2170b4f05a7674dad26a7c90f92ed992">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_UTF8</a></div><div class="ttdeci">@ MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_UTF8</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03125">miniz.cpp:3124</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a2790f9123d0398f4498f75784069c3c9"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2790f9123d0398f4498f75784069c3c9">MZ_ZIP64_ECDH_NUM_DISK_CDIR_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_NUM_DISK_CDIR_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03113">miniz.cpp:3113</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a2a463b99b8d0699bda4e3a52dd1d1015"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2a463b99b8d0699bda4e3a52dd1d1015">MZ_ZIP_CDH_COMPRESSED_SIZE_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_COMPRESSED_SIZE_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03067">miniz.cpp:3067</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a2d8d0fa55e19480b267a629d4b0174b4"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a2d8d0fa55e19480b267a629d4b0174b4">MZ_ZIP_DATA_DESCRIPTER_SIZE32</a></div><div class="ttdeci">@ MZ_ZIP_DATA_DESCRIPTER_SIZE32</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03056">miniz.cpp:3056</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a3415fd67ec4b72e9b7e6856ed920d100"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3415fd67ec4b72e9b7e6856ed920d100">MZ_ZIP_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</a></div><div class="ttdeci">@ MZ_ZIP_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03095">miniz.cpp:3095</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a358e2e9adf6165535355f8bb86112dec"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a358e2e9adf6165535355f8bb86112dec">MZ_ZIP_CDH_SIG_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_SIG_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03059">miniz.cpp:3059</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a3df7ccd884899093e2cc9cf6411f5743"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a3df7ccd884899093e2cc9cf6411f5743">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_COMPRESSED_PATCH_FLAG</a></div><div class="ttdeci">@ MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_COMPRESSED_PATCH_FLAG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03121">miniz.cpp:3121</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a4063056c23df4708b24423233e2b738b"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4063056c23df4708b24423233e2b738b">MZ_ZIP64_ECDL_NUM_DISK_CDIR_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDL_NUM_DISK_CDIR_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03103">miniz.cpp:3103</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a43afeb736295b1f90330d79db8420c9e"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a43afeb736295b1f90330d79db8420c9e">MZ_ZIP_CDH_DECOMPRESSED_SIZE_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_DECOMPRESSED_SIZE_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03068">miniz.cpp:3068</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a45f0ad9bb0f828942c6e54015f44af4e"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a45f0ad9bb0f828942c6e54015f44af4e">MZ_ZIP_ECDH_CDIR_SIZE_OFS</a></div><div class="ttdeci">@ MZ_ZIP_ECDH_CDIR_SIZE_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03097">miniz.cpp:3097</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a493c8c19fe896d665222f70c623f9fc6"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a493c8c19fe896d665222f70c623f9fc6">MZ_ZIP64_ECDL_SIG_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDL_SIG_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03102">miniz.cpp:3102</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a49864f9b56c094003565ed64b2b4aed1"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a49864f9b56c094003565ed64b2b4aed1">MZ_ZIP_CDH_METHOD_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_METHOD_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03063">miniz.cpp:3063</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a4990e590f2652f0d540c3eb35e3f650f"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4990e590f2652f0d540c3eb35e3f650f">MZ_ZIP_LDH_FILENAME_LEN_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_FILENAME_LEN_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03087">miniz.cpp:3087</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a1c181272cf9a1959d655c252a4419b">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</a></div><div class="ttdeci">@ MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03052">miniz.cpp:3052</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a4a2a1bb318f1f4ab445c7e4de3d3e1cc"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4a2a1bb318f1f4ab445c7e4de3d3e1cc">MZ_ZIP_DOS_DIR_ATTRIBUTE_BITFLAG</a></div><div class="ttdeci">@ MZ_ZIP_DOS_DIR_ATTRIBUTE_BITFLAG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03119">miniz.cpp:3119</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a4d8dee6a3a5a1bb480dbbd7b9bff6a68"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4d8dee6a3a5a1bb480dbbd7b9bff6a68">MZ_ZIP_LDH_FILE_TIME_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_FILE_TIME_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03082">miniz.cpp:3082</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a55ade64891d171085e4c27b6c91a5b18"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a55ade64891d171085e4c27b6c91a5b18">MZ_ZIP64_ECDH_VERSION_NEEDED_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_VERSION_NEEDED_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03111">miniz.cpp:3111</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5a7ea82498b1ffd464965872fe507d8b">MZ_ZIP_CDH_EXTRA_LEN_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_EXTRA_LEN_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03070">miniz.cpp:3070</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a5cb18f68ead9424b140fd8710ee9e124"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5cb18f68ead9424b140fd8710ee9e124">MZ_ZIP_LDH_FILE_DATE_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_FILE_DATE_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03083">miniz.cpp:3083</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a5e3af797b3f1a81865958774b1c62735"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5e3af797b3f1a81865958774b1c62735">MZ_ZIP64_ECDL_REL_OFS_TO_ZIP64_ECDR_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDL_REL_OFS_TO_ZIP64_ECDR_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03104">miniz.cpp:3104</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a607eeb03e7ee0916fa7d93abaaaba9fd"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a607eeb03e7ee0916fa7d93abaaaba9fd">MZ_ZIP_LDH_METHOD_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_METHOD_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03081">miniz.cpp:3081</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a63640ed20841b4aad31e5f27bc11f5c4"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a63640ed20841b4aad31e5f27bc11f5c4">MZ_ZIP64_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_CDIR_NUM_ENTRIES_ON_DISK_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03114">miniz.cpp:3114</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a67751a44d185feb156f40a7cd922a577"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a67751a44d185feb156f40a7cd922a577">MZ_ZIP_LDH_COMPRESSED_SIZE_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_COMPRESSED_SIZE_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03085">miniz.cpp:3085</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a6954b28080a1fb151914b00da25074f5"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a6954b28080a1fb151914b00da25074f5">MZ_ZIP_CDH_FILE_TIME_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_FILE_TIME_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03064">miniz.cpp:3064</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a7107b0f82574f69262e3d0b4443856b6"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7107b0f82574f69262e3d0b4443856b6">MZ_ZIP_VERSION_MADE_BY_DOS_FILESYSTEM_ID</a></div><div class="ttdeci">@ MZ_ZIP_VERSION_MADE_BY_DOS_FILESYSTEM_ID</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03118">miniz.cpp:3118</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a76cd05886b8034f320cb457c03e6641a"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76cd05886b8034f320cb457c03e6641a">MZ_ZIP_ECDH_CDIR_TOTAL_ENTRIES_OFS</a></div><div class="ttdeci">@ MZ_ZIP_ECDH_CDIR_TOTAL_ENTRIES_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03096">miniz.cpp:3096</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a76fd85fc5176e2615ec50dc9e9a850dc">MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</a></div><div class="ttdeci">@ MZ_ZIP64_EXTENDED_INFORMATION_FIELD_HEADER_ID</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03053">miniz.cpp:3053</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a77d0b453bce2a419b6144bf87e71b170"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a77d0b453bce2a419b6144bf87e71b170">MZ_ZIP_CENTRAL_DIR_HEADER_SIG</a></div><div class="ttdeci">@ MZ_ZIP_CENTRAL_DIR_HEADER_SIG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03042">miniz.cpp:3042</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a7b4454ba69b4a1c3bfe0cd316932a3cf"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7b4454ba69b4a1c3bfe0cd316932a3cf">MZ_ZIP_ECDH_SIG_OFS</a></div><div class="ttdeci">@ MZ_ZIP_ECDH_SIG_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03092">miniz.cpp:3092</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a844ce7cb26e7e4a0f6321baf37ac66cb"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a844ce7cb26e7e4a0f6321baf37ac66cb">MZ_ZIP_ECDH_COMMENT_SIZE_OFS</a></div><div class="ttdeci">@ MZ_ZIP_ECDH_COMMENT_SIZE_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03099">miniz.cpp:3099</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a8bd9fc50f35f48bf3ce4456b4d57bac3"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8bd9fc50f35f48bf3ce4456b4d57bac3">MZ_ZIP64_ECDH_CDIR_SIZE_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_CDIR_SIZE_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03116">miniz.cpp:3116</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a8be22e7047a06fc2815c55c84b82b222"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8be22e7047a06fc2815c55c84b82b222">MZ_ZIP64_ECDL_TOTAL_NUMBER_OF_DISKS_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDL_TOTAL_NUMBER_OF_DISKS_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03105">miniz.cpp:3105</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a8e097e1ab652a56cc76597c8ef1999c0"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a8e097e1ab652a56cc76597c8ef1999c0">MZ_ZIP_LDH_SIG_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_SIG_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03078">miniz.cpp:3078</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a9065070139fca1d195692b1009357e3c"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a9065070139fca1d195692b1009357e3c">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_USES_STRONG_ENCRYPTION</a></div><div class="ttdeci">@ MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_USES_STRONG_ENCRYPTION</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03122">miniz.cpp:3122</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a95b16d7168bf48558fd3c8b852cb8a3d"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a95b16d7168bf48558fd3c8b852cb8a3d">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIG</a></div><div class="ttdeci">@ MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03041">miniz.cpp:3041</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57a98e11950c99539215b65a334a2afe989"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57a98e11950c99539215b65a334a2afe989">MZ_ZIP_CDH_CRC32_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_CRC32_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03066">miniz.cpp:3066</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57aa0323bb440c5cb8ebcacc2bf7da778bc"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa0323bb440c5cb8ebcacc2bf7da778bc">MZ_ZIP_CDH_DISK_START_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_DISK_START_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03072">miniz.cpp:3072</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57aa3bd2e64f9cea2ef41a46201685ebb0f"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa3bd2e64f9cea2ef41a46201685ebb0f">MZ_ZIP64_ECDH_CDIR_TOTAL_ENTRIES_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_CDIR_TOTAL_ENTRIES_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03115">miniz.cpp:3115</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57aa4790eefd44430aa5eab2837e16ab840"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa4790eefd44430aa5eab2837e16ab840">MZ_ZIP_CDH_INTERNAL_ATTR_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_INTERNAL_ATTR_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03073">miniz.cpp:3073</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57aa84f798966b9ea678b5eaebc6dca4b70"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa84f798966b9ea678b5eaebc6dca4b70">MZ_ZIP_LDH_VERSION_NEEDED_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_VERSION_NEEDED_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03079">miniz.cpp:3079</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57aa862cb29a1bcd653affce1a58e82f494"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa862cb29a1bcd653affce1a58e82f494">MZ_ZIP_ECDH_CDIR_OFS_OFS</a></div><div class="ttdeci">@ MZ_ZIP_ECDH_CDIR_OFS_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03098">miniz.cpp:3098</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57aacfa47118d9e7c741c8b27a1e4f27958"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aacfa47118d9e7c741c8b27a1e4f27958">MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIG</a></div><div class="ttdeci">@ MZ_ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03050">miniz.cpp:3050</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57aaecc052d653e298f93b9c5523c98f5f2"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aaecc052d653e298f93b9c5523c98f5f2">MZ_ZIP_LDH_EXTRA_LEN_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_EXTRA_LEN_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03088">miniz.cpp:3088</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ab4dec2086b60f7e1c7ce499b07b966cb"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab4dec2086b60f7e1c7ce499b07b966cb">MZ_ZIP_CDH_EXTERNAL_ATTR_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_EXTERNAL_ATTR_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03074">miniz.cpp:3074</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ab5a6b8b6b4b9f098c4ec926a6d22c432"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab5a6b8b6b4b9f098c4ec926a6d22c432">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_LOCAL_DIR_IS_MASKED</a></div><div class="ttdeci">@ MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_LOCAL_DIR_IS_MASKED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03123">miniz.cpp:3123</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ab99ad7abe356356da9f80a7c141f9027"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab99ad7abe356356da9f80a7c141f9027">MZ_ZIP64_ECDH_NUM_THIS_DISK_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_NUM_THIS_DISK_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03112">miniz.cpp:3112</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abec7783de4399c774ee325a0e4226ed9">MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</a></div><div class="ttdeci">@ MZ_ZIP_END_OF_CENTRAL_DIR_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03046">miniz.cpp:3046</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57abf7fd2cbece3280cb11f419e7cafd6b1">MZ_ZIP_LOCAL_DIR_HEADER_SIZE</a></div><div class="ttdeci">@ MZ_ZIP_LOCAL_DIR_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03044">miniz.cpp:3044</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ac3072ff7e0d451b2d918e4be650c998c"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3072ff7e0d451b2d918e4be650c998c">MZ_ZIP64_ECDH_CDIR_OFS_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_CDIR_OFS_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03117">miniz.cpp:3117</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ac3538fb6973847de5f8bd315ba8d0e1d"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac3538fb6973847de5f8bd315ba8d0e1d">MZ_ZIP_LDH_DECOMPRESSED_SIZE_OFS</a></div><div class="ttdeci">@ MZ_ZIP_LDH_DECOMPRESSED_SIZE_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03086">miniz.cpp:3086</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ac50291ea0ed2b18a069f5e129f098db2"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac50291ea0ed2b18a069f5e129f098db2">MZ_ZIP_CDH_BIT_FLAG_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_BIT_FLAG_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03062">miniz.cpp:3062</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ac67dc228d5e122d1ad9cd42072e65c1d"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac67dc228d5e122d1ad9cd42072e65c1d">MZ_ZIP_CDH_COMMENT_LEN_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_COMMENT_LEN_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03071">miniz.cpp:3071</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ac89e96bb4580c93ac5cc27ca0623b964">MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</a></div><div class="ttdeci">@ MZ_ZIP_CENTRAL_DIR_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03045">miniz.cpp:3045</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57acc90947176ac515bdaa8c71daf7aaaa3">MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</a></div><div class="ttdeci">@ MZ_ZIP64_END_OF_CENTRAL_DIR_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03051">miniz.cpp:3051</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad5d78923c0a646f47db97500a9d24b9d">MZ_ZIP_DATA_DESCRIPTOR_ID</a></div><div class="ttdeci">@ MZ_ZIP_DATA_DESCRIPTOR_ID</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03054">miniz.cpp:3054</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57adc548ddb0c98ab80c5040a55a03561da"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57adc548ddb0c98ab80c5040a55a03561da">MZ_ZIP_CDH_VERSION_MADE_BY_OFS</a></div><div class="ttdeci">@ MZ_ZIP_CDH_VERSION_MADE_BY_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03060">miniz.cpp:3060</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57ae0c658558608a1501292d493a3049178"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57ae0c658558608a1501292d493a3049178">MZ_ZIP_ECDH_NUM_THIS_DISK_OFS</a></div><div class="ttdeci">@ MZ_ZIP_ECDH_NUM_THIS_DISK_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03093">miniz.cpp:3093</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57aee3f29c6ca80f7c1ba12e8d4620980b0"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57aee3f29c6ca80f7c1ba12e8d4620980b0">MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_IS_ENCRYPTED</a></div><div class="ttdeci">@ MZ_ZIP_GENERAL_PURPOSE_BIT_FLAG_IS_ENCRYPTED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03120">miniz.cpp:3120</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab04a0655cd1e3bcac5e8f48c18df1a57af93888e0a9fe5b48b11c983d8626278d"><div class="ttname"><a href="miniz_8cpp.html#ab04a0655cd1e3bcac5e8f48c18df1a57af93888e0a9fe5b48b11c983d8626278d">MZ_ZIP64_ECDH_SIZE_OF_RECORD_OFS</a></div><div class="ttdeci">@ MZ_ZIP64_ECDH_SIZE_OF_RECORD_OFS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03109">miniz.cpp:3109</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab07eca139ea8ffb56a2144061e2b9b05"><div class="ttname"><a href="miniz_8cpp.html#ab07eca139ea8ffb56a2144061e2b9b05">mz_zip_set_error</a></div><div class="ttdeci">static mz_bool mz_zip_set_error(mz_zip_archive *pZip, mz_zip_error err_num)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03300">miniz.cpp:3300</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab2f25a5e1a0dc2193f1ad91c702d3834"><div class="ttname"><a href="miniz_8cpp.html#ab2f25a5e1a0dc2193f1ad91c702d3834">mz_validate_uint64</a></div><div class="ttdeci">unsigned char mz_validate_uint64[sizeof(mz_uint64)==8 ? 1 :-1]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00049">miniz.cpp:49</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab3074e360c49f66ccd955e6630d23108"><div class="ttname"><a href="miniz_8cpp.html#ab3074e360c49f66ccd955e6630d23108">mz_inflateEnd</a></div><div class="ttdeci">int mz_inflateEnd(mz_streamp pStream)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00530">miniz.cpp:530</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab5aac408b80e6f51a14434330fc76d6d"><div class="ttname"><a href="miniz_8cpp.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_mem(mz_zip_archive *pZip, const char *pArchive_name, const void *pBuf, size_t buf_size, mz_uint level_and_flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05484">miniz.cpp:5484</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab5ec1195b9190fe4ddedd7b1b9d38222"><div class="ttname"><a href="miniz_8cpp.html#ab5ec1195b9190fe4ddedd7b1b9d38222">mz_bitmasks</a></div><div class="ttdeci">static const mz_uint mz_bitmasks[17]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01071">miniz.cpp:1071</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ab843b570ebaeb31d801a5414260edeaf"><div class="ttname"><a href="miniz_8cpp.html#ab843b570ebaeb31d801a5414260edeaf">mz_deflate</a></div><div class="ttdeci">int mz_deflate(mz_streamp pStream, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00251">miniz.cpp:251</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_abb734054fc4e51026c1187aa8a12a1f8"><div class="ttname"><a href="miniz_8cpp.html#abb734054fc4e51026c1187aa8a12a1f8">mz_zip_reader_extract_file_to_mem</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_file_to_mem(mz_zip_archive *pZip, const char *pFilename, void *pBuf, size_t buf_size, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04421">miniz.cpp:4421</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_abbb4323f24a8e32a583c0b1b7e6820c9"><div class="ttname"><a href="miniz_8cpp.html#abbb4323f24a8e32a583c0b1b7e6820c9">MZ_FILE_STAT_STRUCT</a></div><div class="ttdeci">#define MZ_FILE_STAT_STRUCT</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03027">miniz.cpp:3027</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_abcfd71697c3d190d2493720d56bc0ca2"><div class="ttname"><a href="miniz_8cpp.html#abcfd71697c3d190d2493720d56bc0ca2">s_tdefl_packed_code_size_syms_swizzle</a></div><div class="ttdeci">static mz_uint8 s_tdefl_packed_code_size_syms_swizzle[]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00960">miniz.cpp:960</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_abed82baf7f470b522273a3e37c24c600ad686da58671353e21d237bb0d17065bb"><div class="ttname"><a href="miniz_8cpp.html#abed82baf7f470b522273a3e37c24c600ad686da58671353e21d237bb0d17065bb">TDEFL_MAX_SUPPORTED_HUFF_CODESIZE</a></div><div class="ttdeci">@ TDEFL_MAX_SUPPORTED_HUFF_CODESIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00818">miniz.cpp:817</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac0030e3b48e20812f34dbe8ef4e983bb"><div class="ttname"><a href="miniz_8cpp.html#ac0030e3b48e20812f34dbe8ef4e983bb">mz_zip_array_clear</a></div><div class="ttdeci">static void mz_zip_array_clear(mz_zip_archive *pZip, mz_zip_array *pArray)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03177">miniz.cpp:3177</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac0301a766ca6023da1a58f3a3f3333c7"><div class="ttname"><a href="miniz_8cpp.html#ac0301a766ca6023da1a58f3a3f3333c7">mz_zip_reader_extract_file_to_heap</a></div><div class="ttdeci">void * mz_zip_reader_extract_file_to_heap(mz_zip_archive *pZip, const char *pFilename, size_t *pSize, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04468">miniz.cpp:4468</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac0727c0cc3614254a2dc7a9fa2339794"><div class="ttname"><a href="miniz_8cpp.html#ac0727c0cc3614254a2dc7a9fa2339794">mz_zip_array_ensure_room</a></div><div class="ttdeci">static mz_bool mz_zip_array_ensure_room(mz_zip_archive *pZip, mz_zip_array *pArray, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03224">miniz.cpp:3224</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac16cec09731400cc18c3b907340ef601"><div class="ttname"><a href="miniz_8cpp.html#ac16cec09731400cc18c3b907340ef601">mz_zip_reader_extract_file_to_mem_no_alloc</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_file_to_mem_no_alloc(mz_zip_archive *pZip, const char *pFilename, void *pBuf, size_t buf_size, mz_uint flags, void *pUser_read_buf, size_t user_read_buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04408">miniz.cpp:4408</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac2423627c59f318541d6a1218eda198f"><div class="ttname"><a href="miniz_8cpp.html#ac2423627c59f318541d6a1218eda198f">mz_zip_writer_write_zeros</a></div><div class="ttdeci">static mz_bool mz_zip_writer_write_zeros(mz_zip_archive *pZip, mz_uint64 cur_file_ofs, mz_uint32 n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05654">miniz.cpp:5654</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac315062b2450716e20d21843f2022660"><div class="ttname"><a href="miniz_8cpp.html#ac315062b2450716e20d21843f2022660">mz_error</a></div><div class="ttdeci">const char * mz_error(int err)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00572">miniz.cpp:572</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac4642bb91b5abc566c6b23c0658d6995"><div class="ttname"><a href="miniz_8cpp.html#ac4642bb91b5abc566c6b23c0658d6995">tinfl_decompress_mem_to_mem</a></div><div class="ttdeci">size_t tinfl_decompress_mem_to_mem(void *pOut_buf, size_t out_buf_len, const void *pSrc_buf, size_t src_buf_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02834">miniz.cpp:2834</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac4e4c006d234780922676ecc31fe1416"><div class="ttname"><a href="miniz_8cpp.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a></div><div class="ttdeci">tinfl_status tinfl_decompress(tinfl_decompressor *r, const mz_uint8 *pIn_buf_next, size_t *pIn_buf_size, mz_uint8 *pOut_buf_start, mz_uint8 *pOut_buf_next, size_t *pOut_buf_size, const mz_uint32 decomp_flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02328">miniz.cpp:2328</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac5054e9be72034055946137811cbb0a1"><div class="ttname"><a href="miniz_8cpp.html#ac5054e9be72034055946137811cbb0a1">MZ_SWAP_UINT32</a></div><div class="ttdeci">#define MZ_SWAP_UINT32(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03360">miniz.cpp:3360</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac61bf564b19275ee3dcf44a7b6c2e214"><div class="ttname"><a href="miniz_8cpp.html#ac61bf564b19275ee3dcf44a7b6c2e214">tdefl_optimize_huffman_table</a></div><div class="ttdeci">static void tdefl_optimize_huffman_table(tdefl_compressor *d, int table_num, int table_len, int code_size_limit, int static_table)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00843">miniz.cpp:843</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac781072b961db555ae58d396ca0e4527"><div class="ttname"><a href="miniz_8cpp.html#ac781072b961db555ae58d396ca0e4527">s_tdefl_large_dist_sym</a></div><div class="ttdeci">static const mz_uint8 s_tdefl_large_dist_sym[128]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00706">miniz.cpp:706</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ac784b1f49138601c5d8daab0d17f9e83"><div class="ttname"><a href="miniz_8cpp.html#ac784b1f49138601c5d8daab0d17f9e83">TDEFL_PROBE</a></div><div class="ttdeci">#define TDEFL_PROBE</div></div>
<div class="ttc" id="aminiz_8cpp_html_ac86e5a4211929213c94443470223ce28"><div class="ttname"><a href="miniz_8cpp.html#ac86e5a4211929213c94443470223ce28">mz_zip_get_file_modified_time</a></div><div class="ttdeci">static mz_bool mz_zip_get_file_modified_time(const char *pFilename, time_t *pTime)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03274">miniz.cpp:3274</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aca3383a48f6eda415e7b7bceea2d3e55"><div class="ttname"><a href="miniz_8cpp.html#aca3383a48f6eda415e7b7bceea2d3e55">MZ_FCLOSE</a></div><div class="ttdeci">#define MZ_FCLOSE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03022">miniz.cpp:3022</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_acaaba12f38ef5ec95f895c54a7c56351"><div class="ttname"><a href="miniz_8cpp.html#acaaba12f38ef5ec95f895c54a7c56351">mz_zip_validate_mem_archive</a></div><div class="ttdeci">mz_bool mz_zip_validate_mem_archive(const void *pMem, size_t size, mz_uint flags, mz_zip_error *pErr)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05025">miniz.cpp:5025</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_acaef85bf26fe6936ac04e14950078892"><div class="ttname"><a href="miniz_8cpp.html#acaef85bf26fe6936ac04e14950078892">mz_zip_validate_file</a></div><div class="ttdeci">mz_bool mz_zip_validate_file(mz_zip_archive *pZip, mz_uint file_index, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04769">miniz.cpp:4769</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_acd123a509ce06edd3a97506622873102"><div class="ttname"><a href="miniz_8cpp.html#acd123a509ce06edd3a97506622873102">mz_deflateBound</a></div><div class="ttdeci">mz_ulong mz_deflateBound(mz_streamp pStream, mz_ulong source_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00321">miniz.cpp:321</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_acf2306ec6b7f92753264f68bc554750b"><div class="ttname"><a href="miniz_8cpp.html#acf2306ec6b7f92753264f68bc554750b">tdefl_create_comp_flags_from_zip_params</a></div><div class="ttdeci">mz_uint tdefl_create_comp_flags_from_zip_params(int level, int window_bits, int strategy)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02036">miniz.cpp:2036</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ad390ee6c264106529198b6c5b6c6d96b"><div class="ttname"><a href="miniz_8cpp.html#ad390ee6c264106529198b6c5b6c6d96b">tdefl_compress_block</a></div><div class="ttdeci">static mz_bool tdefl_compress_block(tdefl_compressor *d, mz_bool static_block)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01216">miniz.cpp:1216</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ad66cdb80b873c2eb640df26246c6a4b2"><div class="ttname"><a href="miniz_8cpp.html#ad66cdb80b873c2eb640df26246c6a4b2">mz_zip_compute_crc32_callback</a></div><div class="ttdeci">static size_t mz_zip_compute_crc32_callback(void *pOpaque, mz_uint64 file_ofs, const void *pBuf, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04761">miniz.cpp:4761</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ad6e55a2b6b4b7d99a13f79301e949143"><div class="ttname"><a href="miniz_8cpp.html#ad6e55a2b6b4b7d99a13f79301e949143">MZ_ZIP_ARRAY_ELEMENT</a></div><div class="ttdeci">#define MZ_ZIP_ARRAY_ELEMENT(array_ptr, element_type, index)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03168">miniz.cpp:3168</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ad78fe0e35fd725fddef759bd8239d123"><div class="ttname"><a href="miniz_8cpp.html#ad78fe0e35fd725fddef759bd8239d123">mz_zip_writer_update_zip64_extension_block</a></div><div class="ttdeci">static mz_bool mz_zip_writer_update_zip64_extension_block(mz_zip_array *pNew_ext, mz_zip_archive *pZip, const mz_uint8 *pExt, uint32_t ext_len, mz_uint64 *pComp_size, mz_uint64 *pUncomp_size, mz_uint64 *pLocal_header_ofs, mz_uint32 *pDisk_start)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06284">miniz.cpp:6284</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ada51b4115a68e8a0dd99fa3d51f4d68a"><div class="ttname"><a href="miniz_8cpp.html#ada51b4115a68e8a0dd99fa3d51f4d68a">mz_zip_set_file_times</a></div><div class="ttdeci">static mz_bool mz_zip_set_file_times(const char *pFilename, time_t access_time, time_t modified_time)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03287">miniz.cpp:3287</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ae1b9b894b1fe6286919b091c89337633"><div class="ttname"><a href="miniz_8cpp.html#ae1b9b894b1fe6286919b091c89337633">mz_zip_writer_create_local_dir_header</a></div><div class="ttdeci">static mz_bool mz_zip_writer_create_local_dir_header(mz_zip_archive *pZip, mz_uint8 *pDst, mz_uint16 filename_size, mz_uint16 extra_size, mz_uint64 uncomp_size, mz_uint64 comp_size, mz_uint32 uncomp_crc32, mz_uint16 method, mz_uint16 bit_flags, mz_uint16 dos_time, mz_uint16 dos_date)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05545">miniz.cpp:5545</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ae21d7f8237b520a1c8681bddb68cad42"><div class="ttname"><a href="miniz_8cpp.html#ae21d7f8237b520a1c8681bddb68cad42">mz_zip_writer_finalize_heap_archive</a></div><div class="ttdeci">mz_bool mz_zip_writer_finalize_heap_archive(mz_zip_archive *pZip, void **ppBuf, size_t *pSize)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06812">miniz.cpp:6812</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ae2414125c4706f63db869e344e16642f"><div class="ttname"><a href="miniz_8cpp.html#ae2414125c4706f63db869e344e16642f">mz_zip_array_resize</a></div><div class="ttdeci">static mz_bool mz_zip_array_resize(mz_zip_archive *pZip, mz_zip_array *pArray, size_t new_size, mz_uint growing)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03213">miniz.cpp:3213</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ae2ef9b0ac1f2344216f0d275c89a83ec"><div class="ttname"><a href="miniz_8cpp.html#ae2ef9b0ac1f2344216f0d275c89a83ec">mz_validate_uint16</a></div><div class="ttdeci">unsigned char mz_validate_uint16[sizeof(mz_uint16)==2 ? 1 :-1]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00047">miniz.cpp:47</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ae51abb9ee6167023388e1d1122b10d89"><div class="ttname"><a href="miniz_8cpp.html#ae51abb9ee6167023388e1d1122b10d89">miniz_def_realloc_func</a></div><div class="ttdeci">void * miniz_def_realloc_func(void *opaque, void *address, size_t items, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00190">miniz.cpp:190</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ae6ce659c1af2562e681e9e6f09064d3d"><div class="ttname"><a href="miniz_8cpp.html#ae6ce659c1af2562e681e9e6f09064d3d">MZ_WRITE_LE64</a></div><div class="ttdeci">#define MZ_WRITE_LE64(p, v)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05133">miniz.cpp:5133</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ae7a4dc8ccdc92cf8fe90f0703dae5650"><div class="ttname"><a href="miniz_8cpp.html#ae7a4dc8ccdc92cf8fe90f0703dae5650">mz_zip_writer_init_v2</a></div><div class="ttdeci">mz_bool mz_zip_writer_init_v2(mz_zip_archive *pZip, mz_uint64 existing_size, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05219">miniz.cpp:5219</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_ae9968978f7ea9f732c5ed08db988208b"><div class="ttname"><a href="miniz_8cpp.html#ae9968978f7ea9f732c5ed08db988208b">tdefl_compress</a></div><div class="ttdeci">tdefl_status tdefl_compress(tdefl_compressor *d, const void *pIn_buf, size_t *pIn_buf_size, void *pOut_buf, size_t *pOut_buf_size, tdefl_flush flush)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01840">miniz.cpp:1840</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aea1a273234436ccb155a0e92ef2a30e4"><div class="ttname"><a href="miniz_8cpp.html#aea1a273234436ccb155a0e92ef2a30e4">mz_zip_writer_init_from_reader</a></div><div class="ttdeci">mz_bool mz_zip_writer_init_from_reader(mz_zip_archive *pZip, const char *pFilename)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05478">miniz.cpp:5478</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aea3e54d9a8a3dd68909748bbf331fdec"><div class="ttname"><a href="miniz_8cpp.html#aea3e54d9a8a3dd68909748bbf331fdec">mz_zip_array_ensure_capacity</a></div><div class="ttdeci">static mz_bool mz_zip_array_ensure_capacity(mz_zip_archive *pZip, mz_zip_array *pArray, size_t min_new_capacity, mz_uint growing)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03183">miniz.cpp:3183</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aebd3651c5138a33ff42d46ad9596fe6d"><div class="ttname"><a href="miniz_8cpp.html#aebd3651c5138a33ff42d46ad9596fe6d">mz_zip_extract_archive_file_to_heap</a></div><div class="ttdeci">void * mz_zip_extract_archive_file_to_heap(const char *pZip_filename, const char *pArchive_name, size_t *pSize, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l06980">miniz.cpp:6980</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aece78e8972f5437affc90509550ba82c"><div class="ttname"><a href="miniz_8cpp.html#aece78e8972f5437affc90509550ba82c">mz_zip_clear_last_error</a></div><div class="ttdeci">mz_zip_error mz_zip_clear_last_error(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07022">miniz.cpp:7022</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_aed4ea8f4cdcf4ad4416419dab601e7f0"><div class="ttname"><a href="miniz_8cpp.html#aed4ea8f4cdcf4ad4416419dab601e7f0">TINFL_SKIP_BITS</a></div><div class="ttdeci">#define TINFL_SKIP_BITS(state_index, n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02235">miniz.cpp:2235</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_af0476aa0e8198e0716d3eb300d1d5f63"><div class="ttname"><a href="miniz_8cpp.html#af0476aa0e8198e0716d3eb300d1d5f63">mz_zip_get_cfile</a></div><div class="ttdeci">FILE * mz_zip_get_cfile(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07152">miniz.cpp:7152</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_af22ccc4520994a5f54caa5a43a75d012"><div class="ttname"><a href="miniz_8cpp.html#af22ccc4520994a5f54caa5a43a75d012">TDEFL_RLE_PREV_CODE_SIZE</a></div><div class="ttdeci">#define TDEFL_RLE_PREV_CODE_SIZE()</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00914">miniz.cpp:914</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_af2dce1c3179550a7870704abc099f086"><div class="ttname"><a href="miniz_8cpp.html#af2dce1c3179550a7870704abc099f086">mz_zip_writer_init_heap_v2</a></div><div class="ttdeci">mz_bool mz_zip_writer_init_heap_v2(mz_zip_archive *pZip, size_t size_to_reserve_at_beginning, size_t initial_allocation_size, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05273">miniz.cpp:5273</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_af328f94aff4a5d44825959eb58bdf3c9"><div class="ttname"><a href="miniz_8cpp.html#af328f94aff4a5d44825959eb58bdf3c9">mz_zip_reader_extract_to_file</a></div><div class="ttdeci">mz_bool mz_zip_reader_extract_to_file(mz_zip_archive *pZip, mz_uint file_index, const char *pDst_filename, mz_uint flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l04695">miniz.cpp:4695</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_af3b9d5f2af50464d16fd7a6ef48c916b"><div class="ttname"><a href="miniz_8cpp.html#af3b9d5f2af50464d16fd7a6ef48c916b">MZ_FTELL64</a></div><div class="ttdeci">#define MZ_FTELL64</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03025">miniz.cpp:3025</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_af5ea9749b815e356b6df09c166687d13"><div class="ttname"><a href="miniz_8cpp.html#af5ea9749b815e356b6df09c166687d13">mz_zip_reader_get_filename</a></div><div class="ttdeci">mz_uint mz_zip_reader_get_filename(mz_zip_archive *pZip, mz_uint file_index, char *pFilename, mz_uint filename_buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l07167">miniz.cpp:7167</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_af80414324052552afda66f992ee246e9"><div class="ttname"><a href="miniz_8cpp.html#af80414324052552afda66f992ee246e9">tdefl_flush_output_buffer</a></div><div class="ttdeci">static tdefl_status tdefl_flush_output_buffer(tdefl_compressor *d)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01819">miniz.cpp:1819</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_af8586e33fb8be9bff1c261d3aae1fc5e"><div class="ttname"><a href="miniz_8cpp.html#af8586e33fb8be9bff1c261d3aae1fc5e">tinfl_decompressor_free</a></div><div class="ttdeci">void tinfl_decompressor_free(tinfl_decompressor *pDecomp)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02880">miniz.cpp:2880</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_af9c2c29725431f20ad947e1084582e32"><div class="ttname"><a href="miniz_8cpp.html#af9c2c29725431f20ad947e1084582e32">mz_zip_writer_add_cfile</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_cfile(mz_zip_archive *pZip, const char *pArchive_name, FILE *pSrc_file, mz_uint64 size_to_add, const time_t *pFile_time, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags, const char *user_extra_data, mz_uint user_extra_data_len, const char *user_extra_data_central, mz_uint user_extra_data_central_len)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05961">miniz.cpp:5961</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_afa82f58d261e57808ff2b08cf9482b1d"><div class="ttname"><a href="miniz_8cpp.html#afa82f58d261e57808ff2b08cf9482b1d">TDEFL_PUT_BITS</a></div><div class="ttdeci">#define TDEFL_PUT_BITS(b, l)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00896">miniz.cpp:896</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_afb50d9ccdd6d2da88a020e0e5ad3fa20"><div class="ttname"><a href="miniz_8cpp.html#afb50d9ccdd6d2da88a020e0e5ad3fa20">tdefl_compress_mem_to_heap</a></div><div class="ttdeci">void * tdefl_compress_mem_to_heap(const void *pSrc_buf, size_t src_buf_len, size_t *pOut_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l02004">miniz.cpp:2004</a></div></div>
<div class="ttc" id="aminiz_8cpp_html_afd75f71da5742246d7c16e3c2be1b5ac"><div class="ttname"><a href="miniz_8cpp.html#afd75f71da5742246d7c16e3c2be1b5ac">MZ_DELETE_FILE</a></div><div class="ttdeci">#define MZ_DELETE_FILE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03031">miniz.cpp:3031</a></div></div>
<div class="ttc" id="aminiz_8h_html"><div class="ttname"><a href="miniz_8h.html">miniz.h</a></div></div>
<div class="ttc" id="aminiz_8h_html_a01ae29d9e32fb57d42d52fb83f3fb8e8"><div class="ttname"><a href="miniz_8h.html#a01ae29d9e32fb57d42d52fb83f3fb8e8">mz_ulong</a></div><div class="ttdeci">unsigned long mz_ulong</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00250">miniz.h:250</a></div></div>
<div class="ttc" id="aminiz_8h_html_a05589fbab0657f08285ebdfe93f5ec9ea54ec4bb3bd4e6ae21180b27a73c46147"><div class="ttname"><a href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea54ec4bb3bd4e6ae21180b27a73c46147">MZ_UBER_COMPRESSION</a></div><div class="ttdeci">@ MZ_UBER_COMPRESSION</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00324">miniz.h:324</a></div></div>
<div class="ttc" id="aminiz_8h_html_a05589fbab0657f08285ebdfe93f5ec9eab5dc326a9f034dc71d6012d86dd1343f"><div class="ttname"><a href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9eab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a></div><div class="ttdeci">@ MZ_DEFAULT_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00325">miniz.h:325</a></div></div>
<div class="ttc" id="aminiz_8h_html_a05589fbab0657f08285ebdfe93f5ec9eaceaa50dfb8809ffd1631b0fe01344279"><div class="ttname"><a href="miniz_8h.html#a05589fbab0657f08285ebdfe93f5ec9eaceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a></div><div class="ttdeci">@ MZ_DEFAULT_COMPRESSION</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00327">miniz.h:326</a></div></div>
<div class="ttc" id="aminiz_8h_html_a09b9e87cb19529df25b3c3e47c9ad393"><div class="ttname"><a href="miniz_8h.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a></div><div class="ttdeci">#define MZ_MALLOC(x)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00577">miniz.h:577</a></div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858a43306564d2afb7c7347cd7041481fa36"><div class="ttname"><a href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a43306564d2afb7c7347cd7041481fa36">MZ_ZIP_FLAG_WRITE_ZIP64</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_WRITE_ZIP64</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01049">miniz.h:1049</a></div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858a4e7e927edda20a28027f4c4a43a4b2e2"><div class="ttname"><a href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a4e7e927edda20a28027f4c4a43a4b2e2">MZ_ZIP_FLAG_WRITE_ALLOW_READING</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_WRITE_ALLOW_READING</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01050">miniz.h:1050</a></div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858a5d61357918be9c723e1765d6e0cf660f"><div class="ttname"><a href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a5d61357918be9c723e1765d6e0cf660f">MZ_ZIP_FLAG_VALIDATE_HEADERS_ONLY</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_VALIDATE_HEADERS_ONLY</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01048">miniz.h:1048</a></div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858a69d00dfb3097fbfb77f984fd830b9eaa"><div class="ttname"><a href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a69d00dfb3097fbfb77f984fd830b9eaa">MZ_ZIP_FLAG_UTF8_FILENAME</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_UTF8_FILENAME</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01052">miniz.h:1051</a></div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858a7859626934ae9a84d1fa7620ecb69f27"><div class="ttname"><a href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a7859626934ae9a84d1fa7620ecb69f27">MZ_ZIP_FLAG_VALIDATE_LOCATE_FILE_FLAG</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_VALIDATE_LOCATE_FILE_FLAG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01047">miniz.h:1047</a></div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9"><div class="ttname"><a href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a8bd495808a247010b31dc240588f51d9">MZ_ZIP_FLAG_COMPRESSED_DATA</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_COMPRESSED_DATA</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01045">miniz.h:1045</a></div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858ab09115999c35684b92cd771f65909e39"><div class="ttname"><a href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858ab09115999c35684b92cd771f65909e39">MZ_ZIP_FLAG_DO_NOT_SORT_CENTRAL_DIRECTORY</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_DO_NOT_SORT_CENTRAL_DIRECTORY</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01046">miniz.h:1046</a></div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858abcc2b8dd27fc7b4889bbf2fa15896b3b"><div class="ttname"><a href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858abcc2b8dd27fc7b4889bbf2fa15896b3b">MZ_ZIP_FLAG_CASE_SENSITIVE</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_CASE_SENSITIVE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01043">miniz.h:1043</a></div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858aee414b99330e685f4405b2c5ba3bcc1e"><div class="ttname"><a href="miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858aee414b99330e685f4405b2c5ba3bcc1e">MZ_ZIP_FLAG_IGNORE_PATH</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_IGNORE_PATH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01044">miniz.h:1044</a></div></div>
<div class="ttc" id="aminiz_8h_html_a12c43540bc29b7b9a89f02c4d2ce99d9"><div class="ttname"><a href="miniz_8h.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a></div><div class="ttdeci">#define MZ_READ_LE16(p)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00590">miniz.h:590</a></div></div>
<div class="ttc" id="aminiz_8h_html_a1420c15d77b938f459fa3e8bbd9f4c4d"><div class="ttname"><a href="miniz_8h.html#a1420c15d77b938f459fa3e8bbd9f4c4d">MZ_REALLOC</a></div><div class="ttdeci">#define MZ_REALLOC(p, x)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00579">miniz.h:579</a></div></div>
<div class="ttc" id="aminiz_8h_html_a16af7b253440dadd46a80a4b9fddba4da60323cd4b3acc7a3711c143f7923dd34"><div class="ttname"><a href="miniz_8h.html#a16af7b253440dadd46a80a4b9fddba4da60323cd4b3acc7a3711c143f7923dd34">TDEFL_MAX_PROBES_MASK</a></div><div class="ttdeci">@ TDEFL_MAX_PROBES_MASK</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00636">miniz.h:635</a></div></div>
<div class="ttc" id="aminiz_8h_html_a199d34ca8d33210d4d3b0dd4fae349d6"><div class="ttname"><a href="miniz_8h.html#a199d34ca8d33210d4d3b0dd4fae349d6">mz_int16</a></div><div class="ttdeci">int16_t mz_int16</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00535">miniz.h:535</a></div></div>
<div class="ttc" id="aminiz_8h_html_a20dd8c64af05b367626a8e151c78e521"><div class="ttname"><a href="miniz_8h.html#a20dd8c64af05b367626a8e151c78e521">mz_file_write_func</a></div><div class="ttdeci">size_t(* mz_file_write_func)(void *pOpaque, mz_uint64 file_ofs, const void *pBuf, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01028">miniz.h:1028</a></div></div>
<div class="ttc" id="aminiz_8h_html_a2b9e8f947197031a80d85b60d4e59449"><div class="ttname"><a href="miniz_8h.html#a2b9e8f947197031a80d85b60d4e59449">MZ_FALSE</a></div><div class="ttdeci">#define MZ_FALSE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00543">miniz.h:543</a></div></div>
<div class="ttc" id="aminiz_8h_html_a2c231672fab55aa544b2a34cc9d92fe1"><div class="ttname"><a href="miniz_8h.html#a2c231672fab55aa544b2a34cc9d92fe1">MZ_FORCEINLINE</a></div><div class="ttdeci">#define MZ_FORCEINLINE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00601">miniz.h:601</a></div></div>
<div class="ttc" id="aminiz_8h_html_a31afa8051f3faec21437339076a389e3"><div class="ttname"><a href="miniz_8h.html#a31afa8051f3faec21437339076a389e3">MZ_ASSERT</a></div><div class="ttdeci">#define MZ_ASSERT(x)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00570">miniz.h:570</a></div></div>
<div class="ttc" id="aminiz_8h_html_a38425ff8609fe5fe5a9a48612e6f3e46"><div class="ttname"><a href="miniz_8h.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a></div><div class="ttdeci">#define tinfl_init(r)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00900">miniz.h:900</a></div></div>
<div class="ttc" id="aminiz_8h_html_a385c44f6fb256e5716a2302a5b940388a0419e718926687394bbc0d18d12068f6"><div class="ttname"><a href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388a0419e718926687394bbc0d18d12068f6">MZ_FILTERED</a></div><div class="ttdeci">@ MZ_FILTERED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00267">miniz.h:267</a></div></div>
<div class="ttc" id="aminiz_8h_html_a385c44f6fb256e5716a2302a5b940388a3fe6f0f5a44a41155ec4022b6c85b5a9"><div class="ttname"><a href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388a3fe6f0f5a44a41155ec4022b6c85b5a9">MZ_FIXED</a></div><div class="ttdeci">@ MZ_FIXED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00271">miniz.h:270</a></div></div>
<div class="ttc" id="aminiz_8h_html_a385c44f6fb256e5716a2302a5b940388a96891a5aa5d03f61da7f4a9c5b94f1d5"><div class="ttname"><a href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388a96891a5aa5d03f61da7f4a9c5b94f1d5">MZ_DEFAULT_STRATEGY</a></div><div class="ttdeci">@ MZ_DEFAULT_STRATEGY</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00266">miniz.h:266</a></div></div>
<div class="ttc" id="aminiz_8h_html_a385c44f6fb256e5716a2302a5b940388ab22de2edae7b989e35120a84e1ffff3e"><div class="ttname"><a href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388ab22de2edae7b989e35120a84e1ffff3e">MZ_RLE</a></div><div class="ttdeci">@ MZ_RLE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00269">miniz.h:269</a></div></div>
<div class="ttc" id="aminiz_8h_html_a385c44f6fb256e5716a2302a5b940388abb43b8c09f8d8dddd644893a8a6a3ae8"><div class="ttname"><a href="miniz_8h.html#a385c44f6fb256e5716a2302a5b940388abb43b8c09f8d8dddd644893a8a6a3ae8">MZ_HUFFMAN_ONLY</a></div><div class="ttdeci">@ MZ_HUFFMAN_ONLY</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00268">miniz.h:268</a></div></div>
<div class="ttc" id="aminiz_8h_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4"><div class="ttname"><a href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a></div><div class="ttdeci">tinfl_status</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00865">miniz.h:866</a></div></div>
<div class="ttc" id="aminiz_8h_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a3c0ca7cb0911c046d25e1ab3e525a3af"><div class="ttname"><a href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3c0ca7cb0911c046d25e1ab3e525a3af">TINFL_STATUS_ADLER32_MISMATCH</a></div><div class="ttdeci">@ TINFL_STATUS_ADLER32_MISMATCH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00876">miniz.h:876</a></div></div>
<div class="ttc" id="aminiz_8h_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c"><div class="ttname"><a href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a></div><div class="ttdeci">@ TINFL_STATUS_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00879">miniz.h:879</a></div></div>
<div class="ttc" id="aminiz_8h_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8"><div class="ttname"><a href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a></div><div class="ttdeci">@ TINFL_STATUS_NEEDS_MORE_INPUT</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00890">miniz.h:890</a></div></div>
<div class="ttc" id="aminiz_8h_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05"><div class="ttname"><a href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a></div><div class="ttdeci">@ TINFL_STATUS_HAS_MORE_OUTPUT</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00897">miniz.h:896</a></div></div>
<div class="ttc" id="aminiz_8h_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a61c8d6dd2c312ee7a474ac6782e4bed9"><div class="ttname"><a href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a61c8d6dd2c312ee7a474ac6782e4bed9">TINFL_STATUS_BAD_PARAM</a></div><div class="ttdeci">@ TINFL_STATUS_BAD_PARAM</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00873">miniz.h:873</a></div></div>
<div class="ttc" id="aminiz_8h_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a7661742c9463ceaa3872ffca2fb15998"><div class="ttname"><a href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a7661742c9463ceaa3872ffca2fb15998">TINFL_STATUS_FAILED_CANNOT_MAKE_PROGRESS</a></div><div class="ttdeci">@ TINFL_STATUS_FAILED_CANNOT_MAKE_PROGRESS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00870">miniz.h:870</a></div></div>
<div class="ttc" id="aminiz_8h_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042"><div class="ttname"><a href="miniz_8h.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a></div><div class="ttdeci">@ TINFL_STATUS_DONE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00885">miniz.h:885</a></div></div>
<div class="ttc" id="aminiz_8h_html_a39dc152de3351183ff8af716f0c556cb"><div class="ttname"><a href="miniz_8h.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a></div><div class="ttdeci">#define TINFL_LZ_DICT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00862">miniz.h:862</a></div></div>
<div class="ttc" id="aminiz_8h_html_a3da1eeeef02435f2d09129914aa2928b"><div class="ttname"><a href="miniz_8h.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a></div><div class="ttdeci">#define MZ_CLEAR_OBJ(obj)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00584">miniz.h:584</a></div></div>
<div class="ttc" id="aminiz_8h_html_a3e92e9b3cc525db1fd503d9630ec1bf5"><div class="ttname"><a href="miniz_8h.html#a3e92e9b3cc525db1fd503d9630ec1bf5">MZ_DEFLATED</a></div><div class="ttdeci">#define MZ_DEFLATED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00274">miniz.h:274</a></div></div>
<div class="ttc" id="aminiz_8h_html_a4195703cf0ade709ddce7f8777fc0cc2"><div class="ttname"><a href="miniz_8h.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a></div><div class="ttdeci">unsigned int mz_uint</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00538">miniz.h:538</a></div></div>
<div class="ttc" id="aminiz_8h_html_a49738d6efcd5ee0779fee9582fb3ebfa"><div class="ttname"><a href="miniz_8h.html#a49738d6efcd5ee0779fee9582fb3ebfa">mz_int64</a></div><div class="ttdeci">int64_t mz_int64</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00539">miniz.h:539</a></div></div>
<div class="ttc" id="aminiz_8h_html_a4d8a6ee7365a49c7a25251e1dbebdd2b"><div class="ttname"><a href="miniz_8h.html#a4d8a6ee7365a49c7a25251e1dbebdd2b">MZ_ADLER32_INIT</a></div><div class="ttdeci">#define MZ_ADLER32_INIT</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00255">miniz.h:255</a></div></div>
<div class="ttc" id="aminiz_8h_html_a4e28761db3f5f136f790563dd13a08d6"><div class="ttname"><a href="miniz_8h.html#a4e28761db3f5f136f790563dd13a08d6">MZ_CRC32_INIT</a></div><div class="ttdeci">#define MZ_CRC32_INIT</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00259">miniz.h:259</a></div></div>
<div class="ttc" id="aminiz_8h_html_a4e4ea4a3376e8d2a996b848c8e4319df"><div class="ttname"><a href="miniz_8h.html#a4e4ea4a3376e8d2a996b848c8e4319df">tinfl_put_buf_func_ptr</a></div><div class="ttdeci">int(* tinfl_put_buf_func_ptr)(const void *pBuf, int len, void *pUser)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00848">miniz.h:848</a></div></div>
<div class="ttc" id="aminiz_8h_html_a4fccf1a4e0181eb57d7d2876c42c57ca"><div class="ttname"><a href="miniz_8h.html#a4fccf1a4e0181eb57d7d2876c42c57ca">mz_uint8</a></div><div class="ttdeci">uint8_t mz_uint8</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00534">miniz.h:534</a></div></div>
<div class="ttc" id="aminiz_8h_html_a512356d187ddd5c72e3123703d60b6cf"><div class="ttname"><a href="miniz_8h.html#a512356d187ddd5c72e3123703d60b6cf">MZ_UINT16_MAX</a></div><div class="ttdeci">#define MZ_UINT16_MAX</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00612">miniz.h:612</a></div></div>
<div class="ttc" id="aminiz_8h_html_a5542a5383b30c24dc30bc2af3857a291"><div class="ttname"><a href="miniz_8h.html#a5542a5383b30c24dc30bc2af3857a291">tinfl_get_adler32</a></div><div class="ttdeci">#define tinfl_get_adler32(r)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00906">miniz.h:906</a></div></div>
<div class="ttc" id="aminiz_8h_html_a6027b7b919794d9e1f1852f075d0cbb6"><div class="ttname"><a href="miniz_8h.html#a6027b7b919794d9e1f1852f075d0cbb6">MZ_DEFAULT_WINDOW_BITS</a></div><div class="ttdeci">#define MZ_DEFAULT_WINDOW_BITS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00330">miniz.h:330</a></div></div>
<div class="ttc" id="aminiz_8h_html_a64063ba91f66ad6971e5b0bb812de4a3"><div class="ttname"><a href="miniz_8h.html#a64063ba91f66ad6971e5b0bb812de4a3">mz_bool</a></div><div class="ttdeci">bool mz_bool</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00541">miniz.h:541</a></div></div>
<div class="ttc" id="aminiz_8h_html_a69229ba2b86a229226516575d1a458c8"><div class="ttname"><a href="miniz_8h.html#a69229ba2b86a229226516575d1a458c8">MZ_VERSION</a></div><div class="ttdeci">#define MZ_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00285">miniz.h:285</a></div></div>
<div class="ttc" id="aminiz_8h_html_a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9"><div class="ttname"><a href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a></div><div class="ttdeci">@ TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00827">miniz.h:827</a></div></div>
<div class="ttc" id="aminiz_8h_html_a6b7b47dd702d9e331586d485013fd1eaa2eb96c68c6a8df342d8f12d7efcf96c1"><div class="ttname"><a href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a></div><div class="ttdeci">@ TINFL_FLAG_HAS_MORE_INPUT</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00826">miniz.h:826</a></div></div>
<div class="ttc" id="aminiz_8h_html_a6b7b47dd702d9e331586d485013fd1eaa9454c17ebc5717f8553d01ab99b8c1c9"><div class="ttname"><a href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaa9454c17ebc5717f8553d01ab99b8c1c9">TINFL_FLAG_COMPUTE_ADLER32</a></div><div class="ttdeci">@ TINFL_FLAG_COMPUTE_ADLER32</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00829">miniz.h:828</a></div></div>
<div class="ttc" id="aminiz_8h_html_a6b7b47dd702d9e331586d485013fd1eaaf085740084ef23d974d043aeda6f2245"><div class="ttname"><a href="miniz_8h.html#a6b7b47dd702d9e331586d485013fd1eaaf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a></div><div class="ttdeci">@ TINFL_FLAG_PARSE_ZLIB_HEADER</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00825">miniz.h:825</a></div></div>
<div class="ttc" id="aminiz_8h_html_a6c4ad5877435849bc193be7a6ba25843"><div class="ttname"><a href="miniz_8h.html#a6c4ad5877435849bc193be7a6ba25843">MZ_FILE</a></div><div class="ttdeci">#define MZ_FILE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00557">miniz.h:557</a></div></div>
<div class="ttc" id="aminiz_8h_html_a80155586fa275b28773c9b203f52cabaa0a40feaf86d8aed58861a6bd3964b2f4"><div class="ttname"><a href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa0a40feaf86d8aed58861a6bd3964b2f4">TDEFL_MAX_HUFF_SYMBOLS</a></div><div class="ttdeci">@ TDEFL_MAX_HUFF_SYMBOLS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00722">miniz.h:722</a></div></div>
<div class="ttc" id="aminiz_8h_html_a80155586fa275b28773c9b203f52cabaa202a52e3c2065cea2c36a18630e1f863"><div class="ttname"><a href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa202a52e3c2065cea2c36a18630e1f863">TDEFL_LEVEL1_HASH_SIZE_MASK</a></div><div class="ttdeci">@ TDEFL_LEVEL1_HASH_SIZE_MASK</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00724">miniz.h:724</a></div></div>
<div class="ttc" id="aminiz_8h_html_a80155586fa275b28773c9b203f52cabaa2b22a3813245c6d00c5a802f8593daf2"><div class="ttname"><a href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa2b22a3813245c6d00c5a802f8593daf2">TDEFL_LZ_HASH_BITS</a></div><div class="ttdeci">@ TDEFL_LZ_HASH_BITS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00723">miniz.h:723</a></div></div>
<div class="ttc" id="aminiz_8h_html_a80155586fa275b28773c9b203f52cabaa2dc98b78800f2aa4dffe5438b01bd4c0"><div class="ttname"><a href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaa2dc98b78800f2aa4dffe5438b01bd4c0">TDEFL_LZ_HASH_SIZE</a></div><div class="ttdeci">@ TDEFL_LZ_HASH_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00727">miniz.h:726</a></div></div>
<div class="ttc" id="aminiz_8h_html_a80155586fa275b28773c9b203f52cabaaa31c23d99c4bf4bb9857de2286b6d7e6"><div class="ttname"><a href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaaa31c23d99c4bf4bb9857de2286b6d7e6">TDEFL_LZ_CODE_BUF_SIZE</a></div><div class="ttdeci">@ TDEFL_LZ_CODE_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00720">miniz.h:720</a></div></div>
<div class="ttc" id="aminiz_8h_html_a80155586fa275b28773c9b203f52cabaab7e1aa0f0ee51ac5ed2976f7af52d138"><div class="ttname"><a href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaab7e1aa0f0ee51ac5ed2976f7af52d138">TDEFL_LZ_HASH_SHIFT</a></div><div class="ttdeci">@ TDEFL_LZ_HASH_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00725">miniz.h:725</a></div></div>
<div class="ttc" id="aminiz_8h_html_a80155586fa275b28773c9b203f52cabaad79ca716ebec4ef5fa4752f32acc9418"><div class="ttname"><a href="miniz_8h.html#a80155586fa275b28773c9b203f52cabaad79ca716ebec4ef5fa4752f32acc9418">TDEFL_OUT_BUF_SIZE</a></div><div class="ttdeci">@ TDEFL_OUT_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00721">miniz.h:721</a></div></div>
<div class="ttc" id="aminiz_8h_html_a893addc64c536a05131458f6f15132eb"><div class="ttname"><a href="miniz_8h.html#a893addc64c536a05131458f6f15132eb">MZ_TIME_T</a></div><div class="ttdeci">#define MZ_TIME_T</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00567">miniz.h:567</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9bfa87b1c54146014408fcca1bf37abf"><div class="ttname"><a href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abf">tdefl_flush</a></div><div class="ttdeci">tdefl_flush</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00740">miniz.h:741</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9bfa87b1c54146014408fcca1bf37abfa87a9bde52f27872bf5821ed345bc6768"><div class="ttname"><a href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfa87a9bde52f27872bf5821ed345bc6768">TDEFL_NO_FLUSH</a></div><div class="ttdeci">@ TDEFL_NO_FLUSH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00742">miniz.h:742</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9bfa87b1c54146014408fcca1bf37abfac38ba366db95f4ad31c7719bd08ae7f8"><div class="ttname"><a href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfac38ba366db95f4ad31c7719bd08ae7f8">TDEFL_FULL_FLUSH</a></div><div class="ttdeci">@ TDEFL_FULL_FLUSH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00744">miniz.h:744</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66"><div class="ttname"><a href="miniz_8h.html#a9bfa87b1c54146014408fcca1bf37abfaea9e4d7ec26223f627ff02c5335b7e66">TDEFL_FINISH</a></div><div class="ttdeci">@ TDEFL_FINISH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00746">miniz.h:745</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9e009caf9b469d91618c184666c50da4"><div class="ttname"><a href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4">mz_zip_type</a></div><div class="ttdeci">mz_zip_type</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01054">miniz.h:1055</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9e009caf9b469d91618c184666c50da4a01c18c633c1058f9e758e30169ea5170"><div class="ttname"><a href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a01c18c633c1058f9e758e30169ea5170">MZ_ZIP_TYPE_USER</a></div><div class="ttdeci">@ MZ_ZIP_TYPE_USER</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01057">miniz.h:1057</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9e009caf9b469d91618c184666c50da4a1c755e926bbf9197e0d64a0387a4e70a"><div class="ttname"><a href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a1c755e926bbf9197e0d64a0387a4e70a">MZ_ZIP_TYPE_FILE</a></div><div class="ttdeci">@ MZ_ZIP_TYPE_FILE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01060">miniz.h:1060</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9e009caf9b469d91618c184666c50da4a59eb97f502e48ac0d4e0979919c822e5"><div class="ttname"><a href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a59eb97f502e48ac0d4e0979919c822e5">MZ_ZIP_TYPE_HEAP</a></div><div class="ttdeci">@ MZ_ZIP_TYPE_HEAP</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01059">miniz.h:1059</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9e009caf9b469d91618c184666c50da4a74c17a3e487cc9d8732404550466195b"><div class="ttname"><a href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a74c17a3e487cc9d8732404550466195b">MZ_ZIP_TYPE_MEMORY</a></div><div class="ttdeci">@ MZ_ZIP_TYPE_MEMORY</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01058">miniz.h:1058</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9e009caf9b469d91618c184666c50da4a83f61a4c11f3ac2eb415546785502af7"><div class="ttname"><a href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4a83f61a4c11f3ac2eb415546785502af7">MZ_ZIP_TYPE_CFILE</a></div><div class="ttdeci">@ MZ_ZIP_TYPE_CFILE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01061">miniz.h:1061</a></div></div>
<div class="ttc" id="aminiz_8h_html_a9e009caf9b469d91618c184666c50da4ae9586e76c9fa668b613a5a7172aa8824"><div class="ttname"><a href="miniz_8h.html#a9e009caf9b469d91618c184666c50da4ae9586e76c9fa668b613a5a7172aa8824">MZ_ZIP_TYPE_INVALID</a></div><div class="ttdeci">@ MZ_ZIP_TYPE_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01056">miniz.h:1056</a></div></div>
<div class="ttc" id="aminiz_8h_html_aa020ce787714a140599b55725bf7c657"><div class="ttname"><a href="miniz_8h.html#aa020ce787714a140599b55725bf7c657">crc32</a></div><div class="ttdeci">#define crc32</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00507">miniz.h:507</a></div></div>
<div class="ttc" id="aminiz_8h_html_aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca"><div class="ttname"><a href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea0d179990872afd64535490e85825edca">TDEFL_MAX_MATCH_LEN</a></div><div class="ttdeci">@ TDEFL_MAX_MATCH_LEN</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00703">miniz.h:702</a></div></div>
<div class="ttc" id="aminiz_8h_html_aaf105ae5beaca1dee30ae54530691fcea30643ecd31dedddcdb265685027c3730"><div class="ttname"><a href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea30643ecd31dedddcdb265685027c3730">TDEFL_MAX_HUFF_SYMBOLS_0</a></div><div class="ttdeci">@ TDEFL_MAX_HUFF_SYMBOLS_0</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00696">miniz.h:696</a></div></div>
<div class="ttc" id="aminiz_8h_html_aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7"><div class="ttname"><a href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea60ad8ff42b02877e23881e2475f641d7">TDEFL_LZ_DICT_SIZE_MASK</a></div><div class="ttdeci">@ TDEFL_LZ_DICT_SIZE_MASK</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00700">miniz.h:700</a></div></div>
<div class="ttc" id="aminiz_8h_html_aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4"><div class="ttname"><a href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea784fb221e94e69893e546101919879b4">TDEFL_LZ_DICT_SIZE</a></div><div class="ttdeci">@ TDEFL_LZ_DICT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00699">miniz.h:699</a></div></div>
<div class="ttc" id="aminiz_8h_html_aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a"><div class="ttname"><a href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fcea9697a9d6cfbbf8d8cb2c3367aec5ba9a">TDEFL_MIN_MATCH_LEN</a></div><div class="ttdeci">@ TDEFL_MIN_MATCH_LEN</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00701">miniz.h:701</a></div></div>
<div class="ttc" id="aminiz_8h_html_aaf105ae5beaca1dee30ae54530691fceab31107f9bbadea4b9a371a4c52885471"><div class="ttname"><a href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceab31107f9bbadea4b9a371a4c52885471">TDEFL_MAX_HUFF_SYMBOLS_1</a></div><div class="ttdeci">@ TDEFL_MAX_HUFF_SYMBOLS_1</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00697">miniz.h:697</a></div></div>
<div class="ttc" id="aminiz_8h_html_aaf105ae5beaca1dee30ae54530691fceae84d30193f96d7234e473ee98ee25087"><div class="ttname"><a href="miniz_8h.html#aaf105ae5beaca1dee30ae54530691fceae84d30193f96d7234e473ee98ee25087">TDEFL_MAX_HUFF_SYMBOLS_2</a></div><div class="ttdeci">@ TDEFL_MAX_HUFF_SYMBOLS_2</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00698">miniz.h:698</a></div></div>
<div class="ttc" id="aminiz_8h_html_aba01db17f4a2bfbc3db60dc172972a25a24f00beb8f787cbdf73b33a535be747b"><div class="ttname"><a href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a24f00beb8f787cbdf73b33a535be747b">TDEFL_FORCE_ALL_RAW_BLOCKS</a></div><div class="ttdeci">@ TDEFL_FORCE_ALL_RAW_BLOCKS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00657">miniz.h:656</a></div></div>
<div class="ttc" id="aminiz_8h_html_aba01db17f4a2bfbc3db60dc172972a25a6863400f7412d04ec75a2ca363baec03"><div class="ttname"><a href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a6863400f7412d04ec75a2ca363baec03">TDEFL_GREEDY_PARSING_FLAG</a></div><div class="ttdeci">@ TDEFL_GREEDY_PARSING_FLAG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00651">miniz.h:651</a></div></div>
<div class="ttc" id="aminiz_8h_html_aba01db17f4a2bfbc3db60dc172972a25a8fd3e432af0453833eb7168b8f63a064"><div class="ttname"><a href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25a8fd3e432af0453833eb7168b8f63a064">TDEFL_FORCE_ALL_STATIC_BLOCKS</a></div><div class="ttdeci">@ TDEFL_FORCE_ALL_STATIC_BLOCKS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00655">miniz.h:655</a></div></div>
<div class="ttc" id="aminiz_8h_html_aba01db17f4a2bfbc3db60dc172972a25aa3c1a489229a817dc6d07efd55a6f5cf"><div class="ttname"><a href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25aa3c1a489229a817dc6d07efd55a6f5cf">TDEFL_COMPUTE_ADLER32</a></div><div class="ttdeci">@ TDEFL_COMPUTE_ADLER32</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00650">miniz.h:650</a></div></div>
<div class="ttc" id="aminiz_8h_html_aba01db17f4a2bfbc3db60dc172972a25abea695964526498a4a869b3172e39707"><div class="ttname"><a href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25abea695964526498a4a869b3172e39707">TDEFL_FILTER_MATCHES</a></div><div class="ttdeci">@ TDEFL_FILTER_MATCHES</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00654">miniz.h:654</a></div></div>
<div class="ttc" id="aminiz_8h_html_aba01db17f4a2bfbc3db60dc172972a25addb3970da5e697152049482043174c63"><div class="ttname"><a href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25addb3970da5e697152049482043174c63">TDEFL_WRITE_ZLIB_HEADER</a></div><div class="ttdeci">@ TDEFL_WRITE_ZLIB_HEADER</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00649">miniz.h:649</a></div></div>
<div class="ttc" id="aminiz_8h_html_aba01db17f4a2bfbc3db60dc172972a25af52d1f4a633ac1d4c4537bd9d63346b9"><div class="ttname"><a href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25af52d1f4a633ac1d4c4537bd9d63346b9">TDEFL_NONDETERMINISTIC_PARSING_FLAG</a></div><div class="ttdeci">@ TDEFL_NONDETERMINISTIC_PARSING_FLAG</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00652">miniz.h:652</a></div></div>
<div class="ttc" id="aminiz_8h_html_aba01db17f4a2bfbc3db60dc172972a25afc9a53ebb5a5fdb1d1727eef9b21a524"><div class="ttname"><a href="miniz_8h.html#aba01db17f4a2bfbc3db60dc172972a25afc9a53ebb5a5fdb1d1727eef9b21a524">TDEFL_RLE_MATCHES</a></div><div class="ttdeci">@ TDEFL_RLE_MATCHES</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00653">miniz.h:653</a></div></div>
<div class="ttc" id="aminiz_8h_html_abc05bb1717f26edc88a010e903de04e8"><div class="ttname"><a href="miniz_8h.html#abc05bb1717f26edc88a010e903de04e8">TINFL_DECOMPRESS_MEM_TO_MEM_FAILED</a></div><div class="ttdeci">#define TINFL_DECOMPRESS_MEM_TO_MEM_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00843">miniz.h:843</a></div></div>
<div class="ttc" id="aminiz_8h_html_abc5c98fcc1211af2b80116dd6e0a035da1a77ad21e37d528c658b024642f347bb"><div class="ttname"><a href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da1a77ad21e37d528c658b024642f347bb">MZ_SYNC_FLUSH</a></div><div class="ttdeci">@ MZ_SYNC_FLUSH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00297">miniz.h:297</a></div></div>
<div class="ttc" id="aminiz_8h_html_abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124"><div class="ttname"><a href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035da8c1ad84176153047845d17c151097124">MZ_FINISH</a></div><div class="ttdeci">@ MZ_FINISH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00299">miniz.h:299</a></div></div>
<div class="ttc" id="aminiz_8h_html_abc5c98fcc1211af2b80116dd6e0a035daa074139e59dc5aba5f6461ab5cfaee8f"><div class="ttname"><a href="miniz_8h.html#abc5c98fcc1211af2b80116dd6e0a035daa074139e59dc5aba5f6461ab5cfaee8f">MZ_PARTIAL_FLUSH</a></div><div class="ttdeci">@ MZ_PARTIAL_FLUSH</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00296">miniz.h:296</a></div></div>
<div class="ttc" id="aminiz_8h_html_abd12503e988aa99a5d82179c54b1acc8"><div class="ttname"><a href="miniz_8h.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a></div><div class="ttdeci">#define MZ_MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00583">miniz.h:583</a></div></div>
<div class="ttc" id="aminiz_8h_html_abe27406ab0ea1c4d615d93a3e688748f"><div class="ttname"><a href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748f">tdefl_status</a></div><div class="ttdeci">tdefl_status</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00731">miniz.h:732</a></div></div>
<div class="ttc" id="aminiz_8h_html_abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27"><div class="ttname"><a href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa0db9f12eded9feed194fd0b20fec8b27">TDEFL_STATUS_OKAY</a></div><div class="ttdeci">@ TDEFL_STATUS_OKAY</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00735">miniz.h:735</a></div></div>
<div class="ttc" id="aminiz_8h_html_abe27406ab0ea1c4d615d93a3e688748fa9beb7850b5d6941b6860db23f426b0d2"><div class="ttname"><a href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fa9beb7850b5d6941b6860db23f426b0d2">TDEFL_STATUS_DONE</a></div><div class="ttdeci">@ TDEFL_STATUS_DONE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00736">miniz.h:736</a></div></div>
<div class="ttc" id="aminiz_8h_html_abe27406ab0ea1c4d615d93a3e688748fabfe89ba8aaf460134dbf95c5969f82f8"><div class="ttname"><a href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fabfe89ba8aaf460134dbf95c5969f82f8">TDEFL_STATUS_BAD_PARAM</a></div><div class="ttdeci">@ TDEFL_STATUS_BAD_PARAM</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00733">miniz.h:733</a></div></div>
<div class="ttc" id="aminiz_8h_html_abe27406ab0ea1c4d615d93a3e688748fad33a46f2b32817746e26144ecb16687f"><div class="ttname"><a href="miniz_8h.html#abe27406ab0ea1c4d615d93a3e688748fad33a46f2b32817746e26144ecb16687f">TDEFL_STATUS_PUT_BUF_FAILED</a></div><div class="ttdeci">@ TDEFL_STATUS_PUT_BUF_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00734">miniz.h:734</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8a00c3c60b8c4dd75a5f19ed84aebc519b"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a00c3c60b8c4dd75a5f19ed84aebc519b">MZ_MEM_ERROR</a></div><div class="ttdeci">@ MZ_MEM_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00312">miniz.h:312</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8a6bc32d182dcf344e4921fcb604abc35e"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a6bc32d182dcf344e4921fcb604abc35e">MZ_PARAM_ERROR</a></div><div class="ttdeci">@ MZ_PARAM_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00316">miniz.h:315</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8a8cabf17fbb841935d0bfb626ce61814d"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a8cabf17fbb841935d0bfb626ce61814d">MZ_NEED_DICT</a></div><div class="ttdeci">@ MZ_NEED_DICT</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00308">miniz.h:308</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8a8f0080210beb22cd8cc6e4fca5e5f2f4"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a8f0080210beb22cd8cc6e4fca5e5f2f4">MZ_VERSION_ERROR</a></div><div class="ttdeci">@ MZ_VERSION_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00314">miniz.h:314</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a9e82839e613eba20eb822b780eb4c312">MZ_STREAM_END</a></div><div class="ttdeci">@ MZ_STREAM_END</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00307">miniz.h:307</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8ac7325ec0656a65e1b12861c5b97be96b"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac7325ec0656a65e1b12861c5b97be96b">MZ_ERRNO</a></div><div class="ttdeci">@ MZ_ERRNO</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00309">miniz.h:309</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ac889ce55af78ff1376747e2e52b8e7e3">MZ_OK</a></div><div class="ttdeci">@ MZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00306">miniz.h:306</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ada9fc0699137425d9e993b3a91eb2b52">MZ_BUF_ERROR</a></div><div class="ttdeci">@ MZ_BUF_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00313">miniz.h:313</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae1066da08adca98d4715701158591c50">MZ_STREAM_ERROR</a></div><div class="ttdeci">@ MZ_STREAM_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00310">miniz.h:310</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8ae4f65fd7767379614da35ab5c43ad77d"><div class="ttname"><a href="miniz_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ae4f65fd7767379614da35ab5c43ad77d">MZ_DATA_ERROR</a></div><div class="ttdeci">@ MZ_DATA_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00311">miniz.h:311</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac578d55e6b8de8cfbea90ab62701a9c8"><div class="ttname"><a href="miniz_8h.html#ac578d55e6b8de8cfbea90ab62701a9c8">mz_uint32</a></div><div class="ttdeci">uint32_t mz_uint32</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00537">miniz.h:537</a></div></div>
<div class="ttc" id="aminiz_8h_html_ac73e9b464ae92e51b762f496296d7582"><div class="ttname"><a href="miniz_8h.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a></div><div class="ttdeci">#define MZ_FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00578">miniz.h:578</a></div></div>
<div class="ttc" id="aminiz_8h_html_ad1ec3c4964d89baaf6427b699bf71f3f"><div class="ttname"><a href="miniz_8h.html#ad1ec3c4964d89baaf6427b699bf71f3f">mz_uint64</a></div><div class="ttdeci">uint64_t mz_uint64</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00540">miniz.h:540</a></div></div>
<div class="ttc" id="aminiz_8h_html_ad46ee9d5a50dd10df9c3829a93773fb6"><div class="ttname"><a href="miniz_8h.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a></div><div class="ttdeci">#define MZ_READ_LE32(p)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00591">miniz.h:591</a></div></div>
<div class="ttc" id="aminiz_8h_html_ad7ef011b8e3cca837ee80e6f873469c5"><div class="ttname"><a href="miniz_8h.html#ad7ef011b8e3cca837ee80e6f873469c5">mz_uint16</a></div><div class="ttdeci">uint16_t mz_uint16</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00536">miniz.h:536</a></div></div>
<div class="ttc" id="aminiz_8h_html_ad909f6ff4c74a79b317e306a164c77f3"><div class="ttname"><a href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3">mz_zip_mode</a></div><div class="ttdeci">mz_zip_mode</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01033">miniz.h:1034</a></div></div>
<div class="ttc" id="aminiz_8h_html_ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064"><div class="ttname"><a href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a3b3ad1c596f00688f17e2672c1a20064">MZ_ZIP_MODE_WRITING</a></div><div class="ttdeci">@ MZ_ZIP_MODE_WRITING</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01037">miniz.h:1037</a></div></div>
<div class="ttc" id="aminiz_8h_html_ad909f6ff4c74a79b317e306a164c77f3a40c391220d01d172a451f3dad0d5aed6"><div class="ttname"><a href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a40c391220d01d172a451f3dad0d5aed6">MZ_ZIP_MODE_READING</a></div><div class="ttdeci">@ MZ_ZIP_MODE_READING</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01036">miniz.h:1036</a></div></div>
<div class="ttc" id="aminiz_8h_html_ad909f6ff4c74a79b317e306a164c77f3a713f3b45f38e966b751027436df64e50"><div class="ttname"><a href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3a713f3b45f38e966b751027436df64e50">MZ_ZIP_MODE_INVALID</a></div><div class="ttdeci">@ MZ_ZIP_MODE_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01035">miniz.h:1035</a></div></div>
<div class="ttc" id="aminiz_8h_html_ad909f6ff4c74a79b317e306a164c77f3ab445229af27a6e8c9d512d12265dea5b"><div class="ttname"><a href="miniz_8h.html#ad909f6ff4c74a79b317e306a164c77f3ab445229af27a6e8c9d512d12265dea5b">MZ_ZIP_MODE_WRITING_HAS_BEEN_FINALIZED</a></div><div class="ttdeci">@ MZ_ZIP_MODE_WRITING_HAS_BEEN_FINALIZED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01039">miniz.h:1038</a></div></div>
<div class="ttc" id="aminiz_8h_html_ad9ea9d3eac48ba0658f750a920452497"><div class="ttname"><a href="miniz_8h.html#ad9ea9d3eac48ba0658f750a920452497">tdefl_put_buf_func_ptr</a></div><div class="ttdeci">mz_bool(* tdefl_put_buf_func_ptr)(const void *pBuf, int len, void *pUser)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00688">miniz.h:688</a></div></div>
<div class="ttc" id="aminiz_8h_html_adb49720dc49f7d4e4cf9adbf2948e409a1705abc3aa04db87446b6477bffc4899"><div class="ttname"><a href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a1705abc3aa04db87446b6477bffc4899">MZ_ZIP_MAX_ARCHIVE_FILE_COMMENT_SIZE</a></div><div class="ttdeci">@ MZ_ZIP_MAX_ARCHIVE_FILE_COMMENT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00969">miniz.h:968</a></div></div>
<div class="ttc" id="aminiz_8h_html_adb49720dc49f7d4e4cf9adbf2948e409a5b5935618c8f80bac84484ffa644df05"><div class="ttname"><a href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409a5b5935618c8f80bac84484ffa644df05">MZ_ZIP_MAX_IO_BUF_SIZE</a></div><div class="ttdeci">@ MZ_ZIP_MAX_IO_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00966">miniz.h:966</a></div></div>
<div class="ttc" id="aminiz_8h_html_adb49720dc49f7d4e4cf9adbf2948e409aea0de5eaaef93308322a12ea1097b370"><div class="ttname"><a href="miniz_8h.html#adb49720dc49f7d4e4cf9adbf2948e409aea0de5eaaef93308322a12ea1097b370">MZ_ZIP_MAX_ARCHIVE_FILENAME_SIZE</a></div><div class="ttdeci">@ MZ_ZIP_MAX_ARCHIVE_FILENAME_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00967">miniz.h:967</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6d"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6d">mz_zip_error</a></div><div class="ttdeci">mz_zip_error</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01066">miniz.h:1067</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da003e8bf2463b5f3849242b3808e4d6fe"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da003e8bf2463b5f3849242b3808e4d6fe">MZ_ZIP_UNSUPPORTED_METHOD</a></div><div class="ttdeci">@ MZ_ZIP_UNSUPPORTED_METHOD</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01072">miniz.h:1072</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da079e286899478ed53a7473f1816a692f"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da079e286899478ed53a7473f1816a692f">MZ_ZIP_UNSUPPORTED_FEATURE</a></div><div class="ttdeci">@ MZ_ZIP_UNSUPPORTED_FEATURE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01074">miniz.h:1074</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da0c392e441dd7e14e4731686e8f3369ed"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da0c392e441dd7e14e4731686e8f3369ed">MZ_ZIP_FILE_OPEN_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_FILE_OPEN_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01085">miniz.h:1085</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da1365f1c2703389a5e6d5b5bbcca37859"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da1365f1c2703389a5e6d5b5bbcca37859">MZ_ZIP_FILE_TOO_LARGE</a></div><div class="ttdeci">@ MZ_ZIP_FILE_TOO_LARGE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01071">miniz.h:1071</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da2be5cd9afd4fd0fe1b36b753e377658f"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da2be5cd9afd4fd0fe1b36b753e377658f">MZ_ZIP_WRITE_CALLBACK_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_WRITE_CALLBACK_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01099">miniz.h:1099</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da388518d305e53c51b07205856d0a8464"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da388518d305e53c51b07205856d0a8464">MZ_ZIP_CRC_CHECK_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_CRC_CHECK_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01082">miniz.h:1082</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da399161cc4d02bf0bb1815089d2bbdeb8">MZ_ZIP_INTERNAL_ERROR</a></div><div class="ttdeci">@ MZ_ZIP_INTERNAL_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01095">miniz.h:1095</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da425368dd51a2a374f88b285338098851"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da425368dd51a2a374f88b285338098851">MZ_ZIP_FILE_CLOSE_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_FILE_CLOSE_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01089">miniz.h:1089</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da46b987d2968fe9d076a619e3ca9c68e9"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da46b987d2968fe9d076a619e3ca9c68e9">MZ_ZIP_FILE_CREATE_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_FILE_CREATE_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01086">miniz.h:1086</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da4dd840e5a7def295e6a0a5eb8785a024"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da4dd840e5a7def295e6a0a5eb8785a024">MZ_ZIP_BUF_TOO_SMALL</a></div><div class="ttdeci">@ MZ_ZIP_BUF_TOO_SMALL</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01094">miniz.h:1094</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da575251baf4e25b05f6cda0253cd2f49f"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da575251baf4e25b05f6cda0253cd2f49f">MZ_ZIP_VALIDATION_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_VALIDATION_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01098">miniz.h:1098</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da593c3fe2d2ebf99b215bca2b60e6913e"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da593c3fe2d2ebf99b215bca2b60e6913e">MZ_ZIP_FILE_STAT_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_FILE_STAT_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01091">miniz.h:1091</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da5f3d5a8641212fa3ad820bcb94124cc2"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5f3d5a8641212fa3ad820bcb94124cc2">MZ_ZIP_INVALID_FILENAME</a></div><div class="ttdeci">@ MZ_ZIP_INVALID_FILENAME</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01093">miniz.h:1093</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da5ff902fe9d66d26053d8a3c11d383460"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da5ff902fe9d66d26053d8a3c11d383460">MZ_ZIP_COMPRESSION_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_COMPRESSION_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01080">miniz.h:1080</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da6d0cd76e20534ea0d5777ac0c3601db9"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d0cd76e20534ea0d5777ac0c3601db9">MZ_ZIP_NO_ERROR</a></div><div class="ttdeci">@ MZ_ZIP_NO_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01068">miniz.h:1068</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da6d29d37c6300c91cb5fc9a66d1cb1db1"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da6d29d37c6300c91cb5fc9a66d1cb1db1">MZ_ZIP_UNSUPPORTED_ENCRYPTION</a></div><div class="ttdeci">@ MZ_ZIP_UNSUPPORTED_ENCRYPTION</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01073">miniz.h:1073</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da72b70e986fc0d33212f6a898e3e6ee94">MZ_ZIP_TOO_MANY_FILES</a></div><div class="ttdeci">@ MZ_ZIP_TOO_MANY_FILES</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01070">miniz.h:1070</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da75be265e4f600498fb28f2a42f4c9705"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da75be265e4f600498fb28f2a42f4c9705">MZ_ZIP_UNDEFINED_ERROR</a></div><div class="ttdeci">@ MZ_ZIP_UNDEFINED_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01069">miniz.h:1069</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da8c4bcce26300af775c179d6b0a35aff7"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da8c4bcce26300af775c179d6b0a35aff7">MZ_ZIP_UNSUPPORTED_MULTIDISK</a></div><div class="ttdeci">@ MZ_ZIP_UNSUPPORTED_MULTIDISK</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01078">miniz.h:1078</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da9064de836ee72409214e860e84bad1b2">MZ_ZIP_ALLOC_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_ALLOC_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01084">miniz.h:1084</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6da99db269c395156b2ecaa9e39a0596601">MZ_ZIP_ARCHIVE_TOO_LARGE</a></div><div class="ttdeci">@ MZ_ZIP_ARCHIVE_TOO_LARGE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01097">miniz.h:1097</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6daa713f636687cfc5db4a588d6378a6a10"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa713f636687cfc5db4a588d6378a6a10">MZ_ZIP_DECOMPRESSION_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_DECOMPRESSION_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01079">miniz.h:1079</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daa73c6e75a712dffca2370e8bd388b1da">MZ_ZIP_FILE_WRITE_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_FILE_WRITE_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01087">miniz.h:1087</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daad4e7e3731b0f050c53b7eeabcbdfdcc">MZ_ZIP_INVALID_PARAMETER</a></div><div class="ttdeci">@ MZ_ZIP_INVALID_PARAMETER</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01092">miniz.h:1092</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dab6d04beda1c9d8cd1e41fa8b822daaf2">MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</a></div><div class="ttdeci">@ MZ_ZIP_INVALID_HEADER_OR_CORRUPTED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01077">miniz.h:1077</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6dace5ba2a072f9f615873588e7ebc56ab3"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dace5ba2a072f9f615873588e7ebc56ab3">MZ_ZIP_UNSUPPORTED_CDIR_SIZE</a></div><div class="ttdeci">@ MZ_ZIP_UNSUPPORTED_CDIR_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01083">miniz.h:1083</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dacf573b3be570b5b1fea0e8ee7a35840c">MZ_ZIP_FILE_READ_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_FILE_READ_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01088">miniz.h:1088</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6dad845112f4958dee455d1be8cc8e0fd04"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dad845112f4958dee455d1be8cc8e0fd04">MZ_ZIP_FILE_NOT_FOUND</a></div><div class="ttdeci">@ MZ_ZIP_FILE_NOT_FOUND</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01096">miniz.h:1096</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6dadce5afd210f3689e58e71ed2acc02d6c"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dadce5afd210f3689e58e71ed2acc02d6c">MZ_ZIP_FAILED_FINDING_CENTRAL_DIR</a></div><div class="ttdeci">@ MZ_ZIP_FAILED_FINDING_CENTRAL_DIR</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01075">miniz.h:1075</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6dae3b0b6f3ca889a916c69c518a54ee755"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dae3b0b6f3ca889a916c69c518a54ee755">MZ_ZIP_UNEXPECTED_DECOMPRESSED_SIZE</a></div><div class="ttdeci">@ MZ_ZIP_UNEXPECTED_DECOMPRESSED_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01081">miniz.h:1081</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6daeab66c528acdb43f7946e6411f515083"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daeab66c528acdb43f7946e6411f515083">MZ_ZIP_NOT_AN_ARCHIVE</a></div><div class="ttdeci">@ MZ_ZIP_NOT_AN_ARCHIVE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01076">miniz.h:1076</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6daefcdc42228132e6a582da470fa402538"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6daefcdc42228132e6a582da470fa402538">MZ_ZIP_TOTAL_ERRORS</a></div><div class="ttdeci">@ MZ_ZIP_TOTAL_ERRORS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01101">miniz.h:1100</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae12d56c14c748fc82c425478f017dc6dafada0e6e18c6a880a9a5af7848cceb54"><div class="ttname"><a href="miniz_8h.html#ae12d56c14c748fc82c425478f017dc6dafada0e6e18c6a880a9a5af7848cceb54">MZ_ZIP_FILE_SEEK_FAILED</a></div><div class="ttdeci">@ MZ_ZIP_FILE_SEEK_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01090">miniz.h:1090</a></div></div>
<div class="ttc" id="aminiz_8h_html_ae29c34529021741ba9d9032248a7a625"><div class="ttname"><a href="miniz_8h.html#ae29c34529021741ba9d9032248a7a625">MZ_READ_LE64</a></div><div class="ttdeci">#define MZ_READ_LE64(p)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00594">miniz.h:594</a></div></div>
<div class="ttc" id="aminiz_8h_html_aed350adb9c98cc277b69a348a7478cdb"><div class="ttname"><a href="miniz_8h.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a></div><div class="ttdeci">#define MZ_MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00582">miniz.h:582</a></div></div>
<div class="ttc" id="aminiz_8h_html_aef00c8f99445949d239115e8f74618a6"><div class="ttname"><a href="miniz_8h.html#aef00c8f99445949d239115e8f74618a6">MZ_TRUE</a></div><div class="ttdeci">#define MZ_TRUE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00544">miniz.h:544</a></div></div>
<div class="ttc" id="aminiz_8h_html_af6af194c507342cda458498cd37ca418"><div class="ttname"><a href="miniz_8h.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a></div><div class="ttdeci">mz_uint32 tinfl_bit_buf_t</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00937">miniz.h:937</a></div></div>
<div class="ttc" id="aminiz_8h_html_af9bdc3014f3d54c426b6d2df10de4960a650112828c38f327bd914ec150855c87"><div class="ttname"><a href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a></div><div class="ttdeci">@ TINFL_FAST_LOOKUP_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00921">miniz.h:920</a></div></div>
<div class="ttc" id="aminiz_8h_html_af9bdc3014f3d54c426b6d2df10de4960ae20e8613820bdf626439b9265dc5e4a1"><div class="ttname"><a href="miniz_8h.html#af9bdc3014f3d54c426b6d2df10de4960ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a></div><div class="ttdeci">@ TINFL_FAST_LOOKUP_BITS</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00919">miniz.h:919</a></div></div>
<div class="ttc" id="aminiz_8h_html_aff7bdd0a0a11c987a5f23ab7e97363cc"><div class="ttname"><a href="miniz_8h.html#aff7bdd0a0a11c987a5f23ab7e97363cc">MZ_UINT32_MAX</a></div><div class="ttdeci">#define MZ_UINT32_MAX</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00613">miniz.h:613</a></div></div>
<div class="ttc" id="astring_8c_html_a18d9a75dd16f2db6609538cb4ddedaf1"><div class="ttname"><a href="string_8c.html#a18d9a75dd16f2db6609538cb4ddedaf1">memcpy</a></div><div class="ttdeci">void * memcpy(void *dst, const void *src, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="string_8c_source.html#l00613">string.c:613</a></div></div>
<div class="ttc" id="astring_8c_html_a9e6df54ee04e18a3772335580e2ed872"><div class="ttname"><a href="string_8c.html#a9e6df54ee04e18a3772335580e2ed872">memcmp</a></div><div class="ttdeci">int memcmp(const void *s1, const void *s2, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="string_8c_source.html#l00923">string.c:923</a></div></div>
<div class="ttc" id="astring_8c_html_aa383452fe445bfae989358c9d7d96f4f"><div class="ttname"><a href="string_8c.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a></div><div class="ttdeci">size_t strlen(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="string_8c_source.html#l00561">string.c:561</a></div></div>
<div class="ttc" id="astring_8c_html_ace6ee45c30e71865e6eb635200379db9"><div class="ttname"><a href="string_8c.html#ace6ee45c30e71865e6eb635200379db9">memset</a></div><div class="ttdeci">void * memset(void *s, int c, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="string_8c_source.html#l00713">string.c:713</a></div></div>
<div class="ttc" id="astructinflate__state_html"><div class="ttname"><a href="structinflate__state.html">inflate_state</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00368">miniz.cpp:369</a></div></div>
<div class="ttc" id="astructinflate__state_html_a05183fc4ee620dfaac7cdde5c17697a9"><div class="ttname"><a href="structinflate__state.html#a05183fc4ee620dfaac7cdde5c17697a9">inflate_state::m_window_bits</a></div><div class="ttdeci">int m_window_bits</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00372">miniz.cpp:372</a></div></div>
<div class="ttc" id="astructinflate__state_html_a26b59390ae38c5a0ee081a729479b89f"><div class="ttname"><a href="structinflate__state.html#a26b59390ae38c5a0ee081a729479b89f">inflate_state::m_dict_ofs</a></div><div class="ttdeci">mz_uint m_dict_ofs</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00371">miniz.cpp:371</a></div></div>
<div class="ttc" id="astructinflate__state_html_a26ee41a3a0d93350c737252334fe783f"><div class="ttname"><a href="structinflate__state.html#a26ee41a3a0d93350c737252334fe783f">inflate_state::m_has_flushed</a></div><div class="ttdeci">mz_uint m_has_flushed</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00371">miniz.cpp:371</a></div></div>
<div class="ttc" id="astructinflate__state_html_a2d81f0dc8d60bcd1851cc21cd0ea1a35"><div class="ttname"><a href="structinflate__state.html#a2d81f0dc8d60bcd1851cc21cd0ea1a35">inflate_state::m_dict</a></div><div class="ttdeci">mz_uint8 m_dict[32768]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00373">miniz.cpp:373</a></div></div>
<div class="ttc" id="astructinflate__state_html_a45eb73702d5588b380842d55633adfa1"><div class="ttname"><a href="structinflate__state.html#a45eb73702d5588b380842d55633adfa1">inflate_state::m_dict_avail</a></div><div class="ttdeci">mz_uint m_dict_avail</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00371">miniz.cpp:371</a></div></div>
<div class="ttc" id="astructinflate__state_html_a8ed1d9e9a13f5e5f5c4229c67509a5a1"><div class="ttname"><a href="structinflate__state.html#a8ed1d9e9a13f5e5f5c4229c67509a5a1">inflate_state::m_first_call</a></div><div class="ttdeci">mz_uint m_first_call</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00371">miniz.cpp:371</a></div></div>
<div class="ttc" id="astructinflate__state_html_a9d2e5eba1b8c7a5bf78289b7a412f154"><div class="ttname"><a href="structinflate__state.html#a9d2e5eba1b8c7a5bf78289b7a412f154">inflate_state::m_last_status</a></div><div class="ttdeci">tinfl_status m_last_status</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00374">miniz.cpp:374</a></div></div>
<div class="ttc" id="astructinflate__state_html_aa112419e6fc485a0569d89b0dac4c40d"><div class="ttname"><a href="structinflate__state.html#aa112419e6fc485a0569d89b0dac4c40d">inflate_state::m_decomp</a></div><div class="ttdeci">tinfl_decompressor m_decomp</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00370">miniz.cpp:370</a></div></div>
<div class="ttc" id="astructmz__stream__s_html"><div class="ttname"><a href="structmz__stream__s.html">mz_stream_s</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00335">miniz.h:336</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_a24c6cf42b5b6a655f4664dd15203dce7"><div class="ttname"><a href="structmz__stream__s.html#a24c6cf42b5b6a655f4664dd15203dce7">mz_stream_s::adler</a></div><div class="ttdeci">mz_ulong adler</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00353">miniz.h:353</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_a2c569383efce3b9d9e7c02e3e03941bc"><div class="ttname"><a href="structmz__stream__s.html#a2c569383efce3b9d9e7c02e3e03941bc">mz_stream_s::next_out</a></div><div class="ttdeci">unsigned char * next_out</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00341">miniz.h:341</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_a31c21928246598992a5cce6d20ae7e78"><div class="ttname"><a href="structmz__stream__s.html#a31c21928246598992a5cce6d20ae7e78">mz_stream_s::opaque</a></div><div class="ttdeci">void * opaque</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00350">miniz.h:350</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_a3e1503f72464a3b7b40d1df232ba9f43"><div class="ttname"><a href="structmz__stream__s.html#a3e1503f72464a3b7b40d1df232ba9f43">mz_stream_s::data_type</a></div><div class="ttdeci">int data_type</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00352">miniz.h:352</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_a55dbac0e9b86472bfa41f86dfb35df9a"><div class="ttname"><a href="structmz__stream__s.html#a55dbac0e9b86472bfa41f86dfb35df9a">mz_stream_s::zfree</a></div><div class="ttdeci">mz_free_func zfree</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00349">miniz.h:349</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_a5cf2c15cc49a99ee7d541375798a3e27"><div class="ttname"><a href="structmz__stream__s.html#a5cf2c15cc49a99ee7d541375798a3e27">mz_stream_s::total_out</a></div><div class="ttdeci">mz_ulong total_out</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00343">miniz.h:343</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_a9092fed61f7be520fb1bbcf152905ee8"><div class="ttname"><a href="structmz__stream__s.html#a9092fed61f7be520fb1bbcf152905ee8">mz_stream_s::avail_out</a></div><div class="ttdeci">unsigned int avail_out</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00342">miniz.h:342</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_a935cdb239d37161b5a5e6eda1e047df6"><div class="ttname"><a href="structmz__stream__s.html#a935cdb239d37161b5a5e6eda1e047df6">mz_stream_s::state</a></div><div class="ttdeci">struct mz_internal_state * state</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00346">miniz.h:346</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_aa75ed42cc83b0f74d7fcce6299439307"><div class="ttname"><a href="structmz__stream__s.html#aa75ed42cc83b0f74d7fcce6299439307">mz_stream_s::next_in</a></div><div class="ttdeci">const unsigned char * next_in</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00337">miniz.h:337</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_aafcd4c220622ede6d54015f1fbdadd9e"><div class="ttname"><a href="structmz__stream__s.html#aafcd4c220622ede6d54015f1fbdadd9e">mz_stream_s::avail_in</a></div><div class="ttdeci">unsigned int avail_in</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00338">miniz.h:338</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_abbd8109a7f88713f39b9e3046a223ef2"><div class="ttname"><a href="structmz__stream__s.html#abbd8109a7f88713f39b9e3046a223ef2">mz_stream_s::zalloc</a></div><div class="ttdeci">mz_alloc_func zalloc</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00348">miniz.h:348</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_abfa083eb7707360c33389ec12fadf376"><div class="ttname"><a href="structmz__stream__s.html#abfa083eb7707360c33389ec12fadf376">mz_stream_s::total_in</a></div><div class="ttdeci">mz_ulong total_in</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00339">miniz.h:339</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_ad4095b25455e382787dc06d20157e05f"><div class="ttname"><a href="structmz__stream__s.html#ad4095b25455e382787dc06d20157e05f">mz_stream_s::msg</a></div><div class="ttdeci">char * msg</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00345">miniz.h:345</a></div></div>
<div class="ttc" id="astructmz__stream__s_html_ae4fc708fffee7b10a4586964401613fb"><div class="ttname"><a href="structmz__stream__s.html#ae4fc708fffee7b10a4586964401613fb">mz_stream_s::reserved</a></div><div class="ttdeci">mz_ulong reserved</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00354">miniz.h:354</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html"><div class="ttname"><a href="structmz__zip__archive__file__stat.html">mz_zip_archive_file_stat</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00971">miniz.h:972</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_a02509653cc5553e63a1053802f808cbc"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#a02509653cc5553e63a1053802f808cbc">mz_zip_archive_file_stat::m_is_directory</a></div><div class="ttdeci">mz_bool m_is_directory</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01009">miniz.h:1009</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_a0303a6779c89c31eecf62b4744913272"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#a0303a6779c89c31eecf62b4744913272">mz_zip_archive_file_stat::m_external_attr</a></div><div class="ttdeci">mz_uint32 m_external_attr</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01000">miniz.h:1000</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_a0cfb77699313b855dcd1b5bed9dfb93a"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#a0cfb77699313b855dcd1b5bed9dfb93a">mz_zip_archive_file_stat::m_version_needed</a></div><div class="ttdeci">mz_uint16 m_version_needed</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00981">miniz.h:981</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_a18d1f5f9b03e906c40ecd707610a5869"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#a18d1f5f9b03e906c40ecd707610a5869">mz_zip_archive_file_stat::m_time</a></div><div class="ttdeci">time_t m_time</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00986">miniz.h:986</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_a3038faf9c1f24f2bf48eab9cc2b8ce8c"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#a3038faf9c1f24f2bf48eab9cc2b8ce8c">mz_zip_archive_file_stat::m_version_made_by</a></div><div class="ttdeci">mz_uint16 m_version_made_by</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00980">miniz.h:980</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_a4742f25dec4e490bedc1262b96e49ed6"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#a4742f25dec4e490bedc1262b96e49ed6">mz_zip_archive_file_stat::m_is_supported</a></div><div class="ttdeci">mz_bool m_is_supported</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01015">miniz.h:1015</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_a79ac549bef6a828b37e4dc72d9282d1e"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#a79ac549bef6a828b37e4dc72d9282d1e">mz_zip_archive_file_stat::m_central_dir_ofs</a></div><div class="ttdeci">mz_uint64 m_central_dir_ofs</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00977">miniz.h:977</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_a952eb97b58881df827ce3808071e7754"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#a952eb97b58881df827ce3808071e7754">mz_zip_archive_file_stat::m_is_encrypted</a></div><div class="ttdeci">mz_bool m_is_encrypted</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01012">miniz.h:1012</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_a9a7f0737f031b23a29c58fc7ff2bd131"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#a9a7f0737f031b23a29c58fc7ff2bd131">mz_zip_archive_file_stat::m_file_index</a></div><div class="ttdeci">mz_uint32 m_file_index</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00974">miniz.h:974</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_aa55ee3580a844400d4bd43be27ae3808"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#aa55ee3580a844400d4bd43be27ae3808">mz_zip_archive_file_stat::m_uncomp_size</a></div><div class="ttdeci">mz_uint64 m_uncomp_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00996">miniz.h:996</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_aacf4d95d27894acac1303f51542c51b6"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#aacf4d95d27894acac1303f51542c51b6">mz_zip_archive_file_stat::m_comment_size</a></div><div class="ttdeci">mz_uint32 m_comment_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01006">miniz.h:1006</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_ac9fdb10d21124d44be05ef0c04c1ad15"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#ac9fdb10d21124d44be05ef0c04c1ad15">mz_zip_archive_file_stat::m_bit_flag</a></div><div class="ttdeci">mz_uint16 m_bit_flag</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00982">miniz.h:982</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_acc27b6ca5dd7159c19bc3dc32e844ac7"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#acc27b6ca5dd7159c19bc3dc32e844ac7">mz_zip_archive_file_stat::m_local_header_ofs</a></div><div class="ttdeci">mz_uint64 m_local_header_ofs</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01003">miniz.h:1003</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_ad628219b167bef01305e8fa09a1f10d1"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#ad628219b167bef01305e8fa09a1f10d1">mz_zip_archive_file_stat::m_internal_attr</a></div><div class="ttdeci">mz_uint16 m_internal_attr</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00999">miniz.h:999</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_ae1a9a8fbc09a4c3c14b04667d0f2d189"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#ae1a9a8fbc09a4c3c14b04667d0f2d189">mz_zip_archive_file_stat::m_method</a></div><div class="ttdeci">mz_uint16 m_method</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00983">miniz.h:983</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_ae2ac087fa11585219308de1677000ab3"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#ae2ac087fa11585219308de1677000ab3">mz_zip_archive_file_stat::m_comp_size</a></div><div class="ttdeci">mz_uint64 m_comp_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00993">miniz.h:993</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_ae500a60c1ca2d56199fa06f54036abea"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#ae500a60c1ca2d56199fa06f54036abea">mz_zip_archive_file_stat::m_filename</a></div><div class="ttdeci">char m_filename[MZ_ZIP_MAX_ARCHIVE_FILENAME_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01019">miniz.h:1019</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_af9fe260b684c70c1725a8b100cbd97a8"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#af9fe260b684c70c1725a8b100cbd97a8">mz_zip_archive_file_stat::m_crc32</a></div><div class="ttdeci">mz_uint32 m_crc32</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00990">miniz.h:990</a></div></div>
<div class="ttc" id="astructmz__zip__archive__file__stat_html_afb0f2b80d59f134f6fee4c8728649119"><div class="ttname"><a href="structmz__zip__archive__file__stat.html#afb0f2b80d59f134f6fee4c8728649119">mz_zip_archive_file_stat::m_comment</a></div><div class="ttdeci">char m_comment[MZ_ZIP_MAX_ARCHIVE_FILE_COMMENT_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01023">miniz.h:1023</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html"><div class="ttname"><a href="structmz__zip__archive.html">mz_zip_archive</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01103">miniz.h:1104</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_a128125bc28f4d1f118fe7b9badd0f975"><div class="ttname"><a href="structmz__zip__archive.html#a128125bc28f4d1f118fe7b9badd0f975">mz_zip_archive::m_central_directory_file_ofs</a></div><div class="ttdeci">mz_uint64 m_central_directory_file_ofs</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01106">miniz.h:1106</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_a1b7722292a33d849b861e23bf94f69d9"><div class="ttname"><a href="structmz__zip__archive.html#a1b7722292a33d849b861e23bf94f69d9">mz_zip_archive::m_last_error</a></div><div class="ttdeci">mz_zip_error m_last_error</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01112">miniz.h:1112</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_a1ee45d07ddf4439065e62c12f7de3286"><div class="ttname"><a href="structmz__zip__archive.html#a1ee45d07ddf4439065e62c12f7de3286">mz_zip_archive::m_pAlloc</a></div><div class="ttdeci">mz_alloc_func m_pAlloc</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01116">miniz.h:1116</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_a3015327b3da7922ae56ae73bb99b4fae"><div class="ttname"><a href="structmz__zip__archive.html#a3015327b3da7922ae56ae73bb99b4fae">mz_zip_archive::m_zip_mode</a></div><div class="ttdeci">mz_zip_mode m_zip_mode</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01110">miniz.h:1110</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_a45a402e348cc83629be5453441878d81"><div class="ttname"><a href="structmz__zip__archive.html#a45a402e348cc83629be5453441878d81">mz_zip_archive::m_archive_size</a></div><div class="ttdeci">mz_uint64 m_archive_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01105">miniz.h:1105</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_a477d8ad842fa3707c2330454c8173f7d"><div class="ttname"><a href="structmz__zip__archive.html#a477d8ad842fa3707c2330454c8173f7d">mz_zip_archive::m_pIO_opaque</a></div><div class="ttdeci">void * m_pIO_opaque</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01123">miniz.h:1123</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_a54c3a1be907a1e075a112ff06b191644"><div class="ttname"><a href="structmz__zip__archive.html#a54c3a1be907a1e075a112ff06b191644">mz_zip_archive::m_pAlloc_opaque</a></div><div class="ttdeci">void * m_pAlloc_opaque</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01119">miniz.h:1119</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_a999d2d2e54211bfe0606008b6597f0d5"><div class="ttname"><a href="structmz__zip__archive.html#a999d2d2e54211bfe0606008b6597f0d5">mz_zip_archive::m_pWrite</a></div><div class="ttdeci">mz_file_write_func m_pWrite</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01122">miniz.h:1122</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_a9d47a170d9f54452fcfe1152c26af40b"><div class="ttname"><a href="structmz__zip__archive.html#a9d47a170d9f54452fcfe1152c26af40b">mz_zip_archive::m_pState</a></div><div class="ttdeci">mz_zip_internal_state * m_pState</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01125">miniz.h:1125</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_abb6dbd66d702cdffc05a885f8448003d"><div class="ttname"><a href="structmz__zip__archive.html#abb6dbd66d702cdffc05a885f8448003d">mz_zip_archive::m_pFree</a></div><div class="ttdeci">mz_free_func m_pFree</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01117">miniz.h:1117</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_ac3cdd59e8bcc156954790af62fee92e8"><div class="ttname"><a href="structmz__zip__archive.html#ac3cdd59e8bcc156954790af62fee92e8">mz_zip_archive::m_pRealloc</a></div><div class="ttdeci">mz_realloc_func m_pRealloc</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01118">miniz.h:1118</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_ac3df2038c7486a5df1ed51bfa3f7443c"><div class="ttname"><a href="structmz__zip__archive.html#ac3df2038c7486a5df1ed51bfa3f7443c">mz_zip_archive::m_pRead</a></div><div class="ttdeci">mz_file_read_func m_pRead</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01121">miniz.h:1121</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_ad0a89dcb30f4b8fc8b1a94c9df93d0ff"><div class="ttname"><a href="structmz__zip__archive.html#ad0a89dcb30f4b8fc8b1a94c9df93d0ff">mz_zip_archive::m_file_offset_alignment</a></div><div class="ttdeci">mz_uint64 m_file_offset_alignment</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01114">miniz.h:1114</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_ae63ea3648c32998d2b17cc6dc6401671"><div class="ttname"><a href="structmz__zip__archive.html#ae63ea3648c32998d2b17cc6dc6401671">mz_zip_archive::m_zip_type</a></div><div class="ttdeci">mz_zip_type m_zip_type</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01111">miniz.h:1111</a></div></div>
<div class="ttc" id="astructmz__zip__archive_html_afd3d9bd1f542c57aae52c8d6fad6f387"><div class="ttname"><a href="structmz__zip__archive.html#afd3d9bd1f542c57aae52c8d6fad6f387">mz_zip_archive::m_total_files</a></div><div class="ttdeci">mz_uint32 m_total_files</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l01109">miniz.h:1109</a></div></div>
<div class="ttc" id="astructmz__zip__array_html"><div class="ttname"><a href="structmz__zip__array.html">mz_zip_array</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03127">miniz.cpp:3128</a></div></div>
<div class="ttc" id="astructmz__zip__array_html_a00858a0bceae00064e3e0b25bebfd939"><div class="ttname"><a href="structmz__zip__array.html#a00858a0bceae00064e3e0b25bebfd939">mz_zip_array::m_size</a></div><div class="ttdeci">size_t m_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03130">miniz.cpp:3130</a></div></div>
<div class="ttc" id="astructmz__zip__array_html_a8054ffa9a3da062a1d7528b124a8b651"><div class="ttname"><a href="structmz__zip__array.html#a8054ffa9a3da062a1d7528b124a8b651">mz_zip_array::m_p</a></div><div class="ttdeci">void * m_p</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03129">miniz.cpp:3129</a></div></div>
<div class="ttc" id="astructmz__zip__array_html_abb5fb11f941f23713d9a8ef20930bf68"><div class="ttname"><a href="structmz__zip__array.html#abb5fb11f941f23713d9a8ef20930bf68">mz_zip_array::m_capacity</a></div><div class="ttdeci">size_t m_capacity</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03130">miniz.cpp:3130</a></div></div>
<div class="ttc" id="astructmz__zip__array_html_ac3eb7acc1c233ed3c53db813d7d00692"><div class="ttname"><a href="structmz__zip__array.html#ac3eb7acc1c233ed3c53db813d7d00692">mz_zip_array::m_element_size</a></div><div class="ttdeci">mz_uint m_element_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03131">miniz.cpp:3131</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html"><div class="ttname"><a href="structmz__zip__internal__state__tag.html">mz_zip_internal_state_tag</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03134">miniz.cpp:3135</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_a0071a211627637fc049defb3f61972fe"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#a0071a211627637fc049defb3f61972fe">mz_zip_internal_state_tag::m_zip64_has_extended_info_fields</a></div><div class="ttdeci">mz_bool m_zip64_has_extended_info_fields</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03147">miniz.cpp:3147</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_a1e3af54224b61cb20d6ceaeb5807bc33"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#a1e3af54224b61cb20d6ceaeb5807bc33">mz_zip_internal_state_tag::m_sorted_central_dir_offsets</a></div><div class="ttdeci">mz_zip_array m_sorted_central_dir_offsets</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03138">miniz.cpp:3138</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_a2705cc469d5f08543d5f827f43f391ec"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#a2705cc469d5f08543d5f827f43f391ec">mz_zip_internal_state_tag::m_file_archive_start_ofs</a></div><div class="ttdeci">mz_uint64 m_file_archive_start_ofs</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03151">miniz.cpp:3151</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_a4511d7743e1a63fb78ed066f8de96466"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#a4511d7743e1a63fb78ed066f8de96466">mz_zip_internal_state_tag::m_mem_size</a></div><div class="ttdeci">size_t m_mem_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03154">miniz.cpp:3154</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_a51a9aa41f7499c7e6e4c2546aa965b9c"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#a51a9aa41f7499c7e6e4c2546aa965b9c">mz_zip_internal_state_tag::m_central_dir_offsets</a></div><div class="ttdeci">mz_zip_array m_central_dir_offsets</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03137">miniz.cpp:3137</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_a67c1dde93587443d48ae4c54fb32757f"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#a67c1dde93587443d48ae4c54fb32757f">mz_zip_internal_state_tag::m_central_dir</a></div><div class="ttdeci">mz_zip_array m_central_dir</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03136">miniz.cpp:3136</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_a71f011527805e3ac48f5f12cb73d2233"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#a71f011527805e3ac48f5f12cb73d2233">mz_zip_internal_state_tag::m_mem_capacity</a></div><div class="ttdeci">size_t m_mem_capacity</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03155">miniz.cpp:3155</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_a9d483ae9e65542742b3f81522c8fd077"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#a9d483ae9e65542742b3f81522c8fd077">mz_zip_internal_state_tag::m_zip64</a></div><div class="ttdeci">mz_bool m_zip64</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03144">miniz.cpp:3144</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_aa247669a24b55b9b9e86f732ea175bce"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#aa247669a24b55b9b9e86f732ea175bce">mz_zip_internal_state_tag::m_init_flags</a></div><div class="ttdeci">uint32_t m_init_flags</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03141">miniz.cpp:3141</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_abd82e3ab03081af64315ee3dfb687a7c"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#abd82e3ab03081af64315ee3dfb687a7c">mz_zip_internal_state_tag::m_pFile</a></div><div class="ttdeci">FILE * m_pFile</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03150">miniz.cpp:3150</a></div></div>
<div class="ttc" id="astructmz__zip__internal__state__tag_html_ac0f2149f384cffd332635b3a5323c377"><div class="ttname"><a href="structmz__zip__internal__state__tag.html#ac0f2149f384cffd332635b3a5323c377">mz_zip_internal_state_tag::m_pMem</a></div><div class="ttdeci">void * m_pMem</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l03153">miniz.cpp:3153</a></div></div>
<div class="ttc" id="astructmz__zip__writer__add__state_html"><div class="ttname"><a href="structmz__zip__writer__add__state.html">mz_zip_writer_add_state</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05489">miniz.cpp:5490</a></div></div>
<div class="ttc" id="astructmz__zip__writer__add__state_html_a305f9fa7f47b583ee53b8ee0401edd9e"><div class="ttname"><a href="structmz__zip__writer__add__state.html#a305f9fa7f47b583ee53b8ee0401edd9e">mz_zip_writer_add_state::m_cur_archive_file_ofs</a></div><div class="ttdeci">mz_uint64 m_cur_archive_file_ofs</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05492">miniz.cpp:5492</a></div></div>
<div class="ttc" id="astructmz__zip__writer__add__state_html_a4736843d8fbef3a1d323451bb29ae3cd"><div class="ttname"><a href="structmz__zip__writer__add__state.html#a4736843d8fbef3a1d323451bb29ae3cd">mz_zip_writer_add_state::m_comp_size</a></div><div class="ttdeci">mz_uint64 m_comp_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05493">miniz.cpp:5493</a></div></div>
<div class="ttc" id="astructmz__zip__writer__add__state_html_a8beb0e578862314a35cc724aeb95e709"><div class="ttname"><a href="structmz__zip__writer__add__state.html#a8beb0e578862314a35cc724aeb95e709">mz_zip_writer_add_state::m_pZip</a></div><div class="ttdeci">mz_zip_archive * m_pZip</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l05491">miniz.cpp:5491</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html"><div class="ttname"><a href="structtdefl__compressor.html">tdefl_compressor</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00749">miniz.h:750</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a019a2a421ee743e69dc0b3abdad00d67"><div class="ttname"><a href="structtdefl__compressor.html#a019a2a421ee743e69dc0b3abdad00d67">tdefl_compressor::m_max_probes</a></div><div class="ttdeci">mz_uint m_max_probes[2]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00753">miniz.h:753</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a06aa0468391490b3279acb1877475d9a"><div class="ttname"><a href="structtdefl__compressor.html#a06aa0468391490b3279acb1877475d9a">tdefl_compressor::m_block_index</a></div><div class="ttdeci">mz_uint m_block_index</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00758">miniz.h:758</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a161b24984ce5e86f7c36378b9145a8a5"><div class="ttname"><a href="structtdefl__compressor.html#a161b24984ce5e86f7c36378b9145a8a5">tdefl_compressor::m_saved_lit</a></div><div class="ttdeci">mz_uint m_saved_lit</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00758">miniz.h:758</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a181e0aa6797e436af3625de2482ab563"><div class="ttname"><a href="structtdefl__compressor.html#a181e0aa6797e436af3625de2482ab563">tdefl_compressor::m_saved_match_dist</a></div><div class="ttdeci">mz_uint m_saved_match_dist</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00758">miniz.h:758</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a2629e9f8046f0d2d8898303ed6e50fbf"><div class="ttname"><a href="structtdefl__compressor.html#a2629e9f8046f0d2d8898303ed6e50fbf">tdefl_compressor::m_pOut_buf_size</a></div><div class="ttdeci">size_t * m_pOut_buf_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00762">miniz.h:762</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a2dffbb84dd4d9bf24bc3b1476cbd636c"><div class="ttname"><a href="structtdefl__compressor.html#a2dffbb84dd4d9bf24bc3b1476cbd636c">tdefl_compressor::m_hash</a></div><div class="ttdeci">mz_uint16 m_hash[TDEFL_LZ_HASH_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00772">miniz.h:772</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a2fe623583532f09b395e99e3d25c123e"><div class="ttname"><a href="structtdefl__compressor.html#a2fe623583532f09b395e99e3d25c123e">tdefl_compressor::m_pSrc</a></div><div class="ttdeci">const mz_uint8 * m_pSrc</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00764">miniz.h:764</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a32dd7a7684f0408712fc2b2a2e97edba"><div class="ttname"><a href="structtdefl__compressor.html#a32dd7a7684f0408712fc2b2a2e97edba">tdefl_compressor::m_huff_codes</a></div><div class="ttdeci">mz_uint16 m_huff_codes[TDEFL_MAX_HUFF_TABLES][TDEFL_MAX_HUFF_SYMBOLS]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00768">miniz.h:768</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a3c5fd8ac7a2f308e7e3a5a2ab2ba9961"><div class="ttname"><a href="structtdefl__compressor.html#a3c5fd8ac7a2f308e7e3a5a2ab2ba9961">tdefl_compressor::m_output_flush_remaining</a></div><div class="ttdeci">mz_uint m_output_flush_remaining</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00758">miniz.h:758</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a40c86e813b29892434bfd9bfd3027088"><div class="ttname"><a href="structtdefl__compressor.html#a40c86e813b29892434bfd9bfd3027088">tdefl_compressor::m_num_flags_left</a></div><div class="ttdeci">mz_uint m_num_flags_left</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00757">miniz.h:757</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a40ff57dba8b2e99a4f6cd1a709138bfe"><div class="ttname"><a href="structtdefl__compressor.html#a40ff57dba8b2e99a4f6cd1a709138bfe">tdefl_compressor::m_lookahead_pos</a></div><div class="ttdeci">mz_uint m_lookahead_pos</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00755">miniz.h:755</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a48846993be500c613cc1343b586e5754"><div class="ttname"><a href="structtdefl__compressor.html#a48846993be500c613cc1343b586e5754">tdefl_compressor::m_wants_to_finish</a></div><div class="ttdeci">mz_uint m_wants_to_finish</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00758">miniz.h:758</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a4b1ae01e9c3d091617762ae27a15e1dd"><div class="ttname"><a href="structtdefl__compressor.html#a4b1ae01e9c3d091617762ae27a15e1dd">tdefl_compressor::m_finished</a></div><div class="ttdeci">mz_uint m_finished</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00758">miniz.h:758</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a4e55500e9af5206ac47492f3a568ef9f"><div class="ttname"><a href="structtdefl__compressor.html#a4e55500e9af5206ac47492f3a568ef9f">tdefl_compressor::m_total_lz_bytes</a></div><div class="ttdeci">mz_uint m_total_lz_bytes</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00757">miniz.h:757</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a5405cb47173aa1c06cb7bb067a036f07"><div class="ttname"><a href="structtdefl__compressor.html#a5405cb47173aa1c06cb7bb067a036f07">tdefl_compressor::m_src_buf_left</a></div><div class="ttdeci">size_t m_src_buf_left</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00765">miniz.h:765</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a58be7740c1c0bbc9bc1dc52a79e420bf"><div class="ttname"><a href="structtdefl__compressor.html#a58be7740c1c0bbc9bc1dc52a79e420bf">tdefl_compressor::m_prev_return_status</a></div><div class="ttdeci">tdefl_status m_prev_return_status</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00759">miniz.h:759</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a691c134da085a12b55d951709ce48525"><div class="ttname"><a href="structtdefl__compressor.html#a691c134da085a12b55d951709ce48525">tdefl_compressor::m_dict</a></div><div class="ttdeci">mz_uint8 m_dict[TDEFL_LZ_DICT_SIZE+TDEFL_MAX_MATCH_LEN - 1]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00766">miniz.h:766</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a744d78e0e02c77ff224a3a2eefc6c39f"><div class="ttname"><a href="structtdefl__compressor.html#a744d78e0e02c77ff224a3a2eefc6c39f">tdefl_compressor::m_pPut_buf_func</a></div><div class="ttdeci">tdefl_put_buf_func_ptr m_pPut_buf_func</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00751">miniz.h:751</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a8a3cce846b9849371735935790d8bab5"><div class="ttname"><a href="structtdefl__compressor.html#a8a3cce846b9849371735935790d8bab5">tdefl_compressor::m_flush</a></div><div class="ttdeci">tdefl_flush m_flush</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00763">miniz.h:763</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a8d5490f8411406a1e368f21f978c1aa7"><div class="ttname"><a href="structtdefl__compressor.html#a8d5490f8411406a1e368f21f978c1aa7">tdefl_compressor::m_output_flush_ofs</a></div><div class="ttdeci">mz_uint m_output_flush_ofs</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00758">miniz.h:758</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_a9450656373de691c1e2606b272d4d6f6"><div class="ttname"><a href="structtdefl__compressor.html#a9450656373de691c1e2606b272d4d6f6">tdefl_compressor::m_out_buf_ofs</a></div><div class="ttdeci">size_t m_out_buf_ofs</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00765">miniz.h:765</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_aa284ab359fd885497d90995e2f6aec10"><div class="ttname"><a href="structtdefl__compressor.html#aa284ab359fd885497d90995e2f6aec10">tdefl_compressor::m_bit_buffer</a></div><div class="ttdeci">mz_uint m_bit_buffer</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00757">miniz.h:757</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_aa4e386df487da24a7451a0e16a4de3b5"><div class="ttname"><a href="structtdefl__compressor.html#aa4e386df487da24a7451a0e16a4de3b5">tdefl_compressor::m_bits_in</a></div><div class="ttdeci">mz_uint m_bits_in</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00757">miniz.h:757</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_aa55f0314f4b7bfff6999060bdf2d96fc"><div class="ttname"><a href="structtdefl__compressor.html#aa55f0314f4b7bfff6999060bdf2d96fc">tdefl_compressor::m_next</a></div><div class="ttdeci">mz_uint16 m_next[TDEFL_LZ_DICT_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00771">miniz.h:771</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_aa790d06026f9cd65e5ab373c46447694"><div class="ttname"><a href="structtdefl__compressor.html#aa790d06026f9cd65e5ab373c46447694">tdefl_compressor::m_pOutput_buf_end</a></div><div class="ttdeci">mz_uint8 * m_pOutput_buf_end</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00756">miniz.h:756</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_aad683845a1c4d4646819b9580f498f04"><div class="ttname"><a href="structtdefl__compressor.html#aad683845a1c4d4646819b9580f498f04">tdefl_compressor::m_lookahead_size</a></div><div class="ttdeci">mz_uint m_lookahead_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00755">miniz.h:755</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_aade7b1d1a658e5cb9ae353aae2c2e704"><div class="ttname"><a href="structtdefl__compressor.html#aade7b1d1a658e5cb9ae353aae2c2e704">tdefl_compressor::m_pLZ_flags</a></div><div class="ttdeci">mz_uint8 * m_pLZ_flags</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00756">miniz.h:756</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_ab36eefb0ddf349133c84fd9bb418b63f"><div class="ttname"><a href="structtdefl__compressor.html#ab36eefb0ddf349133c84fd9bb418b63f">tdefl_compressor::m_saved_match_len</a></div><div class="ttdeci">mz_uint m_saved_match_len</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00758">miniz.h:758</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_ab77f4dbe0fa2167b4491a99fb9250fba"><div class="ttname"><a href="structtdefl__compressor.html#ab77f4dbe0fa2167b4491a99fb9250fba">tdefl_compressor::m_huff_count</a></div><div class="ttdeci">mz_uint16 m_huff_count[TDEFL_MAX_HUFF_TABLES][TDEFL_MAX_HUFF_SYMBOLS]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00767">miniz.h:767</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_abaf4c7afc0fc8e487340c3461e8028a4"><div class="ttname"><a href="structtdefl__compressor.html#abaf4c7afc0fc8e487340c3461e8028a4">tdefl_compressor::m_pOut_buf</a></div><div class="ttdeci">void * m_pOut_buf</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00761">miniz.h:761</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_abd08bd557ee4ad3d37667a9efbe27b08"><div class="ttname"><a href="structtdefl__compressor.html#abd08bd557ee4ad3d37667a9efbe27b08">tdefl_compressor::m_lz_code_buf_dict_pos</a></div><div class="ttdeci">mz_uint m_lz_code_buf_dict_pos</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00757">miniz.h:757</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_ac131b5e6ff8ca9af418b01eefd77c7f9"><div class="ttname"><a href="structtdefl__compressor.html#ac131b5e6ff8ca9af418b01eefd77c7f9">tdefl_compressor::m_pIn_buf</a></div><div class="ttdeci">const void * m_pIn_buf</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00760">miniz.h:760</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_ac344aa36a4ec2cb54d39bea652994228"><div class="ttname"><a href="structtdefl__compressor.html#ac344aa36a4ec2cb54d39bea652994228">tdefl_compressor::m_flags</a></div><div class="ttdeci">mz_uint m_flags</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00753">miniz.h:753</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_ac4233d89f25c3f5f9c9eda73bcf3e6c4"><div class="ttname"><a href="structtdefl__compressor.html#ac4233d89f25c3f5f9c9eda73bcf3e6c4">tdefl_compressor::m_lz_code_buf</a></div><div class="ttdeci">mz_uint8 m_lz_code_buf[TDEFL_LZ_CODE_BUF_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00770">miniz.h:770</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_acd97ca2c9c322def4d1873145f5c8e50"><div class="ttname"><a href="structtdefl__compressor.html#acd97ca2c9c322def4d1873145f5c8e50">tdefl_compressor::m_greedy_parsing</a></div><div class="ttdeci">int m_greedy_parsing</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00754">miniz.h:754</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_ad495682142ede0ea54a774a45a1e4145"><div class="ttname"><a href="structtdefl__compressor.html#ad495682142ede0ea54a774a45a1e4145">tdefl_compressor::m_pPut_buf_user</a></div><div class="ttdeci">void * m_pPut_buf_user</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00752">miniz.h:752</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_ad6c5f80b23451d14493537fe68439866"><div class="ttname"><a href="structtdefl__compressor.html#ad6c5f80b23451d14493537fe68439866">tdefl_compressor::m_pLZ_code_buf</a></div><div class="ttdeci">mz_uint8 * m_pLZ_code_buf</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00756">miniz.h:756</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_adec95fc9dfeab97c6df6865ee960d425"><div class="ttname"><a href="structtdefl__compressor.html#adec95fc9dfeab97c6df6865ee960d425">tdefl_compressor::m_dict_size</a></div><div class="ttdeci">mz_uint m_dict_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00755">miniz.h:755</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_ae77276d53c663acfa812990426d45197"><div class="ttname"><a href="structtdefl__compressor.html#ae77276d53c663acfa812990426d45197">tdefl_compressor::m_huff_code_sizes</a></div><div class="ttdeci">mz_uint8 m_huff_code_sizes[TDEFL_MAX_HUFF_TABLES][TDEFL_MAX_HUFF_SYMBOLS]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00769">miniz.h:769</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_ae8da57cd67dace66f2e45ee1a51cb11f"><div class="ttname"><a href="structtdefl__compressor.html#ae8da57cd67dace66f2e45ee1a51cb11f">tdefl_compressor::m_pIn_buf_size</a></div><div class="ttdeci">size_t * m_pIn_buf_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00762">miniz.h:762</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_aee1dafacfd0672f0940e391dcb26852f"><div class="ttname"><a href="structtdefl__compressor.html#aee1dafacfd0672f0940e391dcb26852f">tdefl_compressor::m_adler32</a></div><div class="ttdeci">mz_uint m_adler32</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00755">miniz.h:755</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_af3767449a43c686c7870b4bf939c878a"><div class="ttname"><a href="structtdefl__compressor.html#af3767449a43c686c7870b4bf939c878a">tdefl_compressor::m_output_buf</a></div><div class="ttdeci">mz_uint8 m_output_buf[TDEFL_OUT_BUF_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00773">miniz.h:773</a></div></div>
<div class="ttc" id="astructtdefl__compressor_html_afd5820d45d173546cc6b996fdca53689"><div class="ttname"><a href="structtdefl__compressor.html#afd5820d45d173546cc6b996fdca53689">tdefl_compressor::m_pOutput_buf</a></div><div class="ttdeci">mz_uint8 * m_pOutput_buf</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00756">miniz.h:756</a></div></div>
<div class="ttc" id="astructtdefl__output__buffer_html"><div class="ttname"><a href="structtdefl__output__buffer.html">tdefl_output_buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01972">miniz.cpp:1973</a></div></div>
<div class="ttc" id="astructtdefl__output__buffer_html_a26e5da3f933edc1a218afbe7838e9d22"><div class="ttname"><a href="structtdefl__output__buffer.html#a26e5da3f933edc1a218afbe7838e9d22">tdefl_output_buffer::m_expandable</a></div><div class="ttdeci">mz_bool m_expandable</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01976">miniz.cpp:1976</a></div></div>
<div class="ttc" id="astructtdefl__output__buffer_html_a60119e1ddcb4fb92149189bed7cb8250"><div class="ttname"><a href="structtdefl__output__buffer.html#a60119e1ddcb4fb92149189bed7cb8250">tdefl_output_buffer::m_pBuf</a></div><div class="ttdeci">mz_uint8 * m_pBuf</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01975">miniz.cpp:1975</a></div></div>
<div class="ttc" id="astructtdefl__output__buffer_html_ab0705ebff551ebede28640ada5a9d2ab"><div class="ttname"><a href="structtdefl__output__buffer.html#ab0705ebff551ebede28640ada5a9d2ab">tdefl_output_buffer::m_capacity</a></div><div class="ttdeci">size_t m_capacity</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01974">miniz.cpp:1974</a></div></div>
<div class="ttc" id="astructtdefl__output__buffer_html_ab506aa434be983761db4cca43d2ebc9e"><div class="ttname"><a href="structtdefl__output__buffer.html#ab506aa434be983761db4cca43d2ebc9e">tdefl_output_buffer::m_size</a></div><div class="ttdeci">size_t m_size</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l01974">miniz.cpp:1974</a></div></div>
<div class="ttc" id="astructtdefl__sym__freq_html"><div class="ttname"><a href="structtdefl__sym__freq.html">tdefl_sym_freq</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00721">miniz.cpp:722</a></div></div>
<div class="ttc" id="astructtdefl__sym__freq_html_a17b56e7162419d3ea5fe175d3f1c855e"><div class="ttname"><a href="structtdefl__sym__freq.html#a17b56e7162419d3ea5fe175d3f1c855e">tdefl_sym_freq::m_sym_index</a></div><div class="ttdeci">mz_uint16 m_sym_index</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00723">miniz.cpp:723</a></div></div>
<div class="ttc" id="astructtdefl__sym__freq_html_ab3e92f7d87da65857f18f8b8fb0a6ecb"><div class="ttname"><a href="structtdefl__sym__freq.html#ab3e92f7d87da65857f18f8b8fb0a6ecb">tdefl_sym_freq::m_key</a></div><div class="ttdeci">mz_uint16 m_key</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8cpp_source.html#l00723">miniz.cpp:723</a></div></div>
<div class="ttc" id="astructtinfl__decompressor__tag_html"><div class="ttname"><a href="structtinfl__decompressor__tag.html">tinfl_decompressor_tag</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00941">miniz.h:942</a></div></div>
<div class="ttc" id="astructtinfl__huff__table_html"><div class="ttname"><a href="structtinfl__huff__table.html">tinfl_huff_table</a></div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00923">miniz.h:924</a></div></div>
<div class="ttc" id="astructtinfl__huff__table_html_a1208fe7e128f00188f99ba6f51fa9af6"><div class="ttname"><a href="structtinfl__huff__table.html#a1208fe7e128f00188f99ba6f51fa9af6">tinfl_huff_table::m_tree</a></div><div class="ttdeci">mz_int16 m_tree[TINFL_MAX_HUFF_SYMBOLS_0 *2]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00926">miniz.h:926</a></div></div>
<div class="ttc" id="astructtinfl__huff__table_html_a31f719d4829db3d6646139d5249094cb"><div class="ttname"><a href="structtinfl__huff__table.html#a31f719d4829db3d6646139d5249094cb">tinfl_huff_table::m_code_size</a></div><div class="ttdeci">mz_uint8 m_code_size[TINFL_MAX_HUFF_SYMBOLS_0]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00925">miniz.h:925</a></div></div>
<div class="ttc" id="astructtinfl__huff__table_html_a51b707504c86547f166bc557d7ce4f84"><div class="ttname"><a href="structtinfl__huff__table.html#a51b707504c86547f166bc557d7ce4f84">tinfl_huff_table::m_look_up</a></div><div class="ttdeci">mz_int16 m_look_up[TINFL_FAST_LOOKUP_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="miniz_8h_source.html#l00926">miniz.h:926</a></div></div>
<div class="ttc" id="atime_8c_html_a31eb4b8076c94ddffba34e65f8449f4c"><div class="ttname"><a href="time_8c.html#a31eb4b8076c94ddffba34e65f8449f4c">localtime</a></div><div class="ttdeci">struct tm * localtime(const time_t *clock)</div><div class="ttdef"><b>Definition:</b> <a href="time_8c_source.html#l00127">time.c:127</a></div></div>
<div class="ttc" id="atime_8c_html_a99ef1cb2c789827dd5db3886dccf9067"><div class="ttname"><a href="time_8c.html#a99ef1cb2c789827dd5db3886dccf9067">time</a></div><div class="ttdeci">time_t time(time_t *tloc)</div><div class="ttdef"><b>Definition:</b> <a href="time_8c_source.html#l00013">time.c:13</a></div></div>
<div class="ttc" id="atime_8c_html_ae114b9ba0fce4e2d6297e0e66768bb75"><div class="ttname"><a href="time_8c.html#ae114b9ba0fce4e2d6297e0e66768bb75">mktime</a></div><div class="ttdeci">time_t mktime(struct tm *timeptr)</div><div class="ttdef"><b>Definition:</b> <a href="time_8c_source.html#l00170">time.c:170</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_a263634046f766d6a2cc27bb1bac298e.html">jbmc</a></li><li class="navelem"><a class="el" href="dir_7d9c2272cea08e738f9482db6f677351.html">src</a></li><li class="navelem"><a class="el" href="dir_03d682e021e4c6309d130abf57ca5133.html">miniz</a></li><li class="navelem"><a class="el" href="miniz_8cpp.html">miniz.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
